/*!
 * jQuery JavaScript Library v1.8.3
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: Tue Nov 13 2012 08:20:33 GMT-0500 (Eastern Standard Time)
 */
function delay(e,t){setTimeout(t,e)}function validateForm(e,t){var n={highlight:function(e,t,n){$(e).parents(".control-group").addClass("error")},unhighlight:function(e,t,n){$(e).parents(".control-group").removeClass("error")},errorElement:"span",errorClass:"help-inline"};$(e).validate($.extend({},n,t))}function htmlSafe(e){return _.escape(e)}function removeFileSuffix(e){return e.substr(0,e.lastIndexOf("."))}function htmlSafeWithLineBreak(e){return htmlSafe(e).replace(/\n/g,"<br/>")}(function(e,t){function _(e){var t=M[e]={};return v.each(e.split(y),function(e,n){t[n]=!0}),t}function H(e,n,r){if(r===t&&e.nodeType===1){var i="data-"+n.replace(P,"-$1").toLowerCase();r=e.getAttribute(i);if(typeof r=="string"){try{r=r==="true"?!0:r==="false"?!1:r==="null"?null:+r+""===r?+r:D.test(r)?v.parseJSON(r):r}catch(s){}v.data(e,n,r)}else r=t}return r}function B(e){var t;for(t in e){if(t==="data"&&v.isEmptyObject(e[t]))continue;if(t!=="toJSON")return!1}return!0}function et(){return!1}function tt(){return!0}function ut(e){return!e||!e.parentNode||e.parentNode.nodeType===11}function at(e,t){do e=e[t];while(e&&e.nodeType!==1);return e}function ft(e,t,n){t=t||0;if(v.isFunction(t))return v.grep(e,function(e,r){var i=!!t.call(e,r,e);return i===n});if(t.nodeType)return v.grep(e,function(e,r){return e===t===n});if(typeof t=="string"){var r=v.grep(e,function(e){return e.nodeType===1});if(it.test(t))return v.filter(t,r,!n);t=v.filter(t,r)}return v.grep(e,function(e,r){return v.inArray(e,t)>=0===n})}function lt(e){var t=ct.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}function Lt(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}function At(e,t){if(t.nodeType!==1||!v.hasData(e))return;var n,r,i,s=v._data(e),o=v._data(t,s),u=s.events;if(u){delete o.handle,o.events={};for(n in u)for(r=0,i=u[n].length;r<i;r++)v.event.add(t,n,u[n][r])}o.data&&(o.data=v.extend({},o.data))}function Ot(e,t){var n;if(t.nodeType!==1)return;t.clearAttributes&&t.clearAttributes(),t.mergeAttributes&&t.mergeAttributes(e),n=t.nodeName.toLowerCase(),n==="object"?(t.parentNode&&(t.outerHTML=e.outerHTML),v.support.html5Clone&&e.innerHTML&&!v.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):n==="input"&&Et.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):n==="option"?t.selected=e.defaultSelected:n==="input"||n==="textarea"?t.defaultValue=e.defaultValue:n==="script"&&t.text!==e.text&&(t.text=e.text),t.removeAttribute(v.expando)}function Mt(e){return typeof e.getElementsByTagName!="undefined"?e.getElementsByTagName("*"):typeof e.querySelectorAll!="undefined"?e.querySelectorAll("*"):[]}function _t(e){Et.test(e.type)&&(e.defaultChecked=e.checked)}function Qt(e,t){if(t in e)return t;var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=Jt.length;while(i--){t=Jt[i]+n;if(t in e)return t}return r}function Gt(e,t){return e=t||e,v.css(e,"display")==="none"||!v.contains(e.ownerDocument,e)}function Yt(e,t){var n,r,i=[],s=0,o=e.length;for(;s<o;s++){n=e[s];if(!n.style)continue;i[s]=v._data(n,"olddisplay"),t?(!i[s]&&n.style.display==="none"&&(n.style.display=""),n.style.display===""&&Gt(n)&&(i[s]=v._data(n,"olddisplay",nn(n.nodeName)))):(r=Dt(n,"display"),!i[s]&&r!=="none"&&v._data(n,"olddisplay",r))}for(s=0;s<o;s++){n=e[s];if(!n.style)continue;if(!t||n.style.display==="none"||n.style.display==="")n.style.display=t?i[s]||"":"none"}return e}function Zt(e,t,n){var r=Rt.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function en(e,t,n,r){var i=n===(r?"border":"content")?4:t==="width"?1:0,s=0;for(;i<4;i+=2)n==="margin"&&(s+=v.css(e,n+$t[i],!0)),r?(n==="content"&&(s-=parseFloat(Dt(e,"padding"+$t[i]))||0),n!=="margin"&&(s-=parseFloat(Dt(e,"border"+$t[i]+"Width"))||0)):(s+=parseFloat(Dt(e,"padding"+$t[i]))||0,n!=="padding"&&(s+=parseFloat(Dt(e,"border"+$t[i]+"Width"))||0));return s}function tn(e,t,n){var r=t==="width"?e.offsetWidth:e.offsetHeight,i=!0,s=v.support.boxSizing&&v.css(e,"boxSizing")==="border-box";if(r<=0||r==null){r=Dt(e,t);if(r<0||r==null)r=e.style[t];if(Ut.test(r))return r;i=s&&(v.support.boxSizingReliable||r===e.style[t]),r=parseFloat(r)||0}return r+en(e,t,n||(s?"border":"content"),i)+"px"}function nn(e){if(Wt[e])return Wt[e];var t=v("<"+e+">").appendTo(i.body),n=t.css("display");t.remove();if(n==="none"||n===""){Pt=i.body.appendChild(Pt||v.extend(i.createElement("iframe"),{frameBorder:0,width:0,height:0}));if(!Ht||!Pt.createElement)Ht=(Pt.contentWindow||Pt.contentDocument).document,Ht.write("<!doctype html><html><body>"),Ht.close();t=Ht.body.appendChild(Ht.createElement(e)),n=Dt(t,"display"),i.body.removeChild(Pt)}return Wt[e]=n,n}function fn(e,t,n,r){var i;if(v.isArray(t))v.each(t,function(t,i){n||sn.test(e)?r(e,i):fn(e+"["+(typeof i=="object"?t:"")+"]",i,n,r)});else if(!n&&v.type(t)==="object")for(i in t)fn(e+"["+i+"]",t[i],n,r);else r(e,t)}function Cn(e){return function(t,n){typeof t!="string"&&(n=t,t="*");var r,i,s,o=t.toLowerCase().split(y),u=0,a=o.length;if(v.isFunction(n))for(;u<a;u++)r=o[u],s=/^\+/.test(r),s&&(r=r.substr(1)||"*"),i=e[r]=e[r]||[],i[s?"unshift":"push"](n)}}function kn(e,n,r,i,s,o){s=s||n.dataTypes[0],o=o||{},o[s]=!0;var u,a=e[s],f=0,l=a?a.length:0,c=e===Sn;for(;f<l&&(c||!u);f++)u=a[f](n,r,i),typeof u=="string"&&(!c||o[u]?u=t:(n.dataTypes.unshift(u),u=kn(e,n,r,i,u,o)));return(c||!u)&&!o["*"]&&(u=kn(e,n,r,i,"*",o)),u}function Ln(e,n){var r,i,s=v.ajaxSettings.flatOptions||{};for(r in n)n[r]!==t&&((s[r]?e:i||(i={}))[r]=n[r]);i&&v.extend(!0,e,i)}function An(e,n,r){var i,s,o,u,a=e.contents,f=e.dataTypes,l=e.responseFields;for(s in l)s in r&&(n[l[s]]=r[s]);while(f[0]==="*")f.shift(),i===t&&(i=e.mimeType||n.getResponseHeader("content-type"));if(i)for(s in a)if(a[s]&&a[s].test(i)){f.unshift(s);break}if(f[0]in r)o=f[0];else{for(s in r){if(!f[0]||e.converters[s+" "+f[0]]){o=s;break}u||(u=s)}o=o||u}if(o)return o!==f[0]&&f.unshift(o),r[o]}function On(e,t){var n,r,i,s,o=e.dataTypes.slice(),u=o[0],a={},f=0;e.dataFilter&&(t=e.dataFilter(t,e.dataType));if(o[1])for(n in e.converters)a[n.toLowerCase()]=e.converters[n];for(;i=o[++f];)if(i!=="*"){if(u!=="*"&&u!==i){n=a[u+" "+i]||a["* "+i];if(!n)for(r in a){s=r.split(" ");if(s[1]===i){n=a[u+" "+s[0]]||a["* "+s[0]];if(n){n===!0?n=a[r]:a[r]!==!0&&(i=s[0],o.splice(f--,0,i));break}}}if(n!==!0)if(n&&e["throws"])t=n(t);else try{t=n(t)}catch(l){return{state:"parsererror",error:n?l:"No conversion from "+u+" to "+i}}}u=i}return{state:"success",data:t}}function Fn(){try{return new e.XMLHttpRequest}catch(t){}}function In(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function $n(){return setTimeout(function(){qn=t},0),qn=v.now()}function Jn(e,t){v.each(t,function(t,n){var r=(Vn[t]||[]).concat(Vn["*"]),i=0,s=r.length;for(;i<s;i++)if(r[i].call(e,t,n))return})}function Kn(e,t,n){var r,i=0,s=0,o=Xn.length,u=v.Deferred().always(function(){delete a.elem}),a=function(){var t=qn||$n(),n=Math.max(0,f.startTime+f.duration-t),r=n/f.duration||0,i=1-r,s=0,o=f.tweens.length;for(;s<o;s++)f.tweens[s].run(i);return u.notifyWith(e,[f,i,n]),i<1&&o?n:(u.resolveWith(e,[f]),!1)},f=u.promise({elem:e,props:v.extend({},t),opts:v.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:qn||$n(),duration:n.duration,tweens:[],createTween:function(t,n,r){var i=v.Tween(e,f.opts,t,n,f.opts.specialEasing[t]||f.opts.easing);return f.tweens.push(i),i},stop:function(t){var n=0,r=t?f.tweens.length:0;for(;n<r;n++)f.tweens[n].run(1);return t?u.resolveWith(e,[f,t]):u.rejectWith(e,[f,t]),this}}),l=f.props;Qn(l,f.opts.specialEasing);for(;i<o;i++){r=Xn[i].call(f,e,l,f.opts);if(r)return r}return Jn(f,l),v.isFunction(f.opts.start)&&f.opts.start.call(e,f),v.fx.timer(v.extend(a,{anim:f,queue:f.opts.queue,elem:e})),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always)}function Qn(e,t){var n,r,i,s,o;for(n in e){r=v.camelCase(n),i=t[r],s=e[n],v.isArray(s)&&(i=s[1],s=e[n]=s[0]),n!==r&&(e[r]=s,delete e[n]),o=v.cssHooks[r];if(o&&"expand"in o){s=o.expand(s),delete e[r];for(n in s)n in e||(e[n]=s[n],t[n]=i)}else t[r]=i}}function Gn(e,t,n){var r,i,s,o,u,a,f,l,c,h=this,p=e.style,d={},m=[],g=e.nodeType&&Gt(e);n.queue||(l=v._queueHooks(e,"fx"),l.unqueued==null&&(l.unqueued=0,c=l.empty.fire,l.empty.fire=function(){l.unqueued||c()}),l.unqueued++,h.always(function(){h.always(function(){l.unqueued--,v.queue(e,"fx").length||l.empty.fire()})})),e.nodeType===1&&("height"in t||"width"in t)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],v.css(e,"display")==="inline"&&v.css(e,"float")==="none"&&(!v.support.inlineBlockNeedsLayout||nn(e.nodeName)==="inline"?p.display="inline-block":p.zoom=1)),n.overflow&&(p.overflow="hidden",v.support.shrinkWrapBlocks||h.done(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(r in t){s=t[r];if(Un.exec(s)){delete t[r],a=a||s==="toggle";if(s===(g?"hide":"show"))continue;m.push(r)}}o=m.length;if(o){u=v._data(e,"fxshow")||v._data(e,"fxshow",{}),"hidden"in u&&(g=u.hidden),a&&(u.hidden=!g),g?v(e).show():h.done(function(){v(e).hide()}),h.done(function(){var t;v.removeData(e,"fxshow",!0);for(t in d)v.style(e,t,d[t])});for(r=0;r<o;r++)i=m[r],f=h.createTween(i,g?u[i]:0),d[i]=u[i]||v.style(e,i),i in u||(u[i]=f.start,g&&(f.end=f.start,f.start=i==="width"||i==="height"?1:0))}}function Yn(e,t,n,r,i){return new Yn.prototype.init(e,t,n,r,i)}function Zn(e,t){var n,r={height:e},i=0;t=t?1:0;for(;i<4;i+=2-t)n=$t[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function tr(e){return v.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:!1}var n,r,i=e.document,s=e.location,o=e.navigator,u=e.jQuery,a=e.$,f=Array.prototype.push,l=Array.prototype.slice,c=Array.prototype.indexOf,h=Object.prototype.toString,p=Object.prototype.hasOwnProperty,d=String.prototype.trim,v=function(e,t){return new v.fn.init(e,t,n)},m=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,g=/\S/,y=/\s+/,b=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,w=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,E=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,S=/^[\],:{}\s]*$/,x=/(?:^|:|,)(?:\s*\[)+/g,T=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,N=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,C=/^-ms-/,k=/-([\da-z])/gi,L=function(e,t){return(t+"").toUpperCase()},A=function(){i.addEventListener?(i.removeEventListener("DOMContentLoaded",A,!1),v.ready()):i.readyState==="complete"&&(i.detachEvent("onreadystatechange",A),v.ready())},O={};v.fn=v.prototype={constructor:v,init:function(e,n,r){var s,o,u,a;if(!e)return this;if(e.nodeType)return this.context=this[0]=e,this.length=1,this;if(typeof e=="string"){e.charAt(0)==="<"&&e.charAt(e.length-1)===">"&&e.length>=3?s=[null,e,null]:s=w.exec(e);if(s&&(s[1]||!n)){if(s[1])return n=n instanceof v?n[0]:n,a=n&&n.nodeType?n.ownerDocument||n:i,e=v.parseHTML(s[1],a,!0),E.test(s[1])&&v.isPlainObject(n)&&this.attr.call(e,n,!0),v.merge(this,e);o=i.getElementById(s[2]);if(o&&o.parentNode){if(o.id!==s[2])return r.find(e);this.length=1,this[0]=o}return this.context=i,this.selector=e,this}return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e)}return v.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),v.makeArray(e,this))},selector:"",jquery:"1.8.3",length:0,size:function(){return this.length},toArray:function(){return l.call(this)},get:function(e){return e==null?this.toArray():e<0?this[this.length+e]:this[e]},pushStack:function(e,t,n){var r=v.merge(this.constructor(),e);return r.prevObject=this,r.context=this.context,t==="find"?r.selector=this.selector+(this.selector?" ":"")+n:t&&(r.selector=this.selector+"."+t+"("+n+")"),r},each:function(e,t){return v.each(this,e,t)},ready:function(e){return v.ready.promise().done(e),this},eq:function(e){return e=+e,e===-1?this.slice(e):this.slice(e,e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(l.apply(this,arguments),"slice",l.call(arguments).join(","))},map:function(e){return this.pushStack(v.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:[].sort,splice:[].splice},v.fn.init.prototype=v.fn,v.extend=v.fn.extend=function(){var e,n,r,i,s,o,u=arguments[0]||{},a=1,f=arguments.length,l=!1;typeof u=="boolean"&&(l=u,u=arguments[1]||{},a=2),typeof u!="object"&&!v.isFunction(u)&&(u={}),f===a&&(u=this,--a);for(;a<f;a++)if((e=arguments[a])!=null)for(n in e){r=u[n],i=e[n];if(u===i)continue;l&&i&&(v.isPlainObject(i)||(s=v.isArray(i)))?(s?(s=!1,o=r&&v.isArray(r)?r:[]):o=r&&v.isPlainObject(r)?r:{},u[n]=v.extend(l,o,i)):i!==t&&(u[n]=i)}return u},v.extend({noConflict:function(t){return e.$===v&&(e.$=a),t&&e.jQuery===v&&(e.jQuery=u),v},isReady:!1,readyWait:1,holdReady:function(e){e?v.readyWait++:v.ready(!0)},ready:function(e){if(e===!0?--v.readyWait:v.isReady)return;if(!i.body)return setTimeout(v.ready,1);v.isReady=!0;if(e!==!0&&--v.readyWait>0)return;r.resolveWith(i,[v]),v.fn.trigger&&v(i).trigger("ready").off("ready")},isFunction:function(e){return v.type(e)==="function"},isArray:Array.isArray||function(e){return v.type(e)==="array"},isWindow:function(e){return e!=null&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return e==null?String(e):O[h.call(e)]||"object"},isPlainObject:function(e){if(!e||v.type(e)!=="object"||e.nodeType||v.isWindow(e))return!1;try{if(e.constructor&&!p.call(e,"constructor")&&!p.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var r;for(r in e);return r===t||p.call(e,r)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw new Error(e)},parseHTML:function(e,t,n){var r;return!e||typeof e!="string"?null:(typeof t=="boolean"&&(n=t,t=0),t=t||i,(r=E.exec(e))?[t.createElement(r[1])]:(r=v.buildFragment([e],t,n?null:[]),v.merge([],(r.cacheable?v.clone(r.fragment):r.fragment).childNodes)))},parseJSON:function(t){if(!t||typeof t!="string")return null;t=v.trim(t);if(e.JSON&&e.JSON.parse)return e.JSON.parse(t);if(S.test(t.replace(T,"@").replace(N,"]").replace(x,"")))return(new Function("return "+t))();v.error("Invalid JSON: "+t)},parseXML:function(n){var r,i;if(!n||typeof n!="string")return null;try{e.DOMParser?(i=new DOMParser,r=i.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(s){r=t}return(!r||!r.documentElement||r.getElementsByTagName("parsererror").length)&&v.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&g.test(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(C,"ms-").replace(k,L)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,n,r){var i,s=0,o=e.length,u=o===t||v.isFunction(e);if(r){if(u){for(i in e)if(n.apply(e[i],r)===!1)break}else for(;s<o;)if(n.apply(e[s++],r)===!1)break}else if(u){for(i in e)if(n.call(e[i],i,e[i])===!1)break}else for(;s<o;)if(n.call(e[s],s,e[s++])===!1)break;return e},trim:d&&!d.call("﻿ ")?function(e){return e==null?"":d.call(e)}:function(e){return e==null?"":(e+"").replace(b,"")},makeArray:function(e,t){var n,r=t||[];return e!=null&&(n=v.type(e),e.length==null||n==="string"||n==="function"||n==="regexp"||v.isWindow(e)?f.call(r,e):v.merge(r,e)),r},inArray:function(e,t,n){var r;if(t){if(c)return c.call(t,e,n);r=t.length,n=n?n<0?Math.max(0,r+n):n:0;for(;n<r;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=n.length,i=e.length,s=0;if(typeof r=="number")for(;s<r;s++)e[i++]=n[s];else while(n[s]!==t)e[i++]=n[s++];return e.length=i,e},grep:function(e,t,n){var r,i=[],s=0,o=e.length;n=!!n;for(;s<o;s++)r=!!t(e[s],s),n!==r&&i.push(e[s]);return i},map:function(e,n,r){var i,s,o=[],u=0,a=e.length,f=e instanceof v||a!==t&&typeof a=="number"&&(a>0&&e[0]&&e[a-1]||a===0||v.isArray(e));if(f)for(;u<a;u++)i=n(e[u],u,r),i!=null&&(o[o.length]=i);else for(s in e)i=n(e[s],s,r),i!=null&&(o[o.length]=i);return o.concat.apply([],o)},guid:1,proxy:function(e,n){var r,i,s;return typeof n=="string"&&(r=e[n],n=e,e=r),v.isFunction(e)?(i=l.call(arguments,2),s=function(){return e.apply(n,i.concat(l.call(arguments)))},s.guid=e.guid=e.guid||v.guid++,s):t},access:function(e,n,r,i,s,o,u){var a,f=r==null,l=0,c=e.length;if(r&&typeof r=="object"){for(l in r)v.access(e,n,l,r[l],1,o,i);s=1}else if(i!==t){a=u===t&&v.isFunction(i),f&&(a?(a=n,n=function(e,t,n){return a.call(v(e),n)}):(n.call(e,i),n=null));if(n)for(;l<c;l++)n(e[l],r,a?i.call(e[l],l,n(e[l],r)):i,u);s=1}return s?e:f?n.call(e):c?n(e[0],r):o},now:function(){return(new Date).getTime()}}),v.ready.promise=function(t){if(!r){r=v.Deferred();if(i.readyState==="complete")setTimeout(v.ready,1);else if(i.addEventListener)i.addEventListener("DOMContentLoaded",A,!1),e.addEventListener("load",v.ready,!1);else{i.attachEvent("onreadystatechange",A),e.attachEvent("onload",v.ready);var n=!1;try{n=e.frameElement==null&&i.documentElement}catch(s){}n&&n.doScroll&&function o(){if(!v.isReady){try{n.doScroll("left")}catch(e){return setTimeout(o,50)}v.ready()}}()}}return r.promise(t)},v.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(e,t){O["[object "+t+"]"]=t.toLowerCase()}),n=v(i);var M={};v.Callbacks=function(e){e=typeof e=="string"?M[e]||_(e):v.extend({},e);var n,r,i,s,o,u,a=[],f=!e.once&&[],l=function(t){n=e.memory&&t,r=!0,u=s||0,s=0,o=a.length,i=!0;for(;a&&u<o;u++)if(a[u].apply(t[0],t[1])===!1&&e.stopOnFalse){n=!1;break}i=!1,a&&(f?f.length&&l(f.shift()):n?a=[]:c.disable())},c={add:function(){if(a){var t=a.length;(function r(t){v.each(t,function(t,n){var i=v.type(n);i==="function"?(!e.unique||!c.has(n))&&a.push(n):n&&n.length&&i!=="string"&&r(n)})})(arguments),i?o=a.length:n&&(s=t,l(n))}return this},remove:function(){return a&&v.each(arguments,function(e,t){var n;while((n=v.inArray(t,a,n))>-1)a.splice(n,1),i&&(n<=o&&o--,n<=u&&u--)}),this},has:function(e){return v.inArray(e,a)>-1},empty:function(){return a=[],this},disable:function(){return a=f=n=t,this},disabled:function(){return!a},lock:function(){return f=t,n||c.disable(),this},locked:function(){return!f},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],a&&(!r||f)&&(i?f.push(t):l(t)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},v.extend({Deferred:function(e){var t=[["resolve","done",v.Callbacks("once memory"),"resolved"],["reject","fail",v.Callbacks("once memory"),"rejected"],["notify","progress",v.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return v.Deferred(function(n){v.each(t,function(t,r){var s=r[0],o=e[t];i[r[1]](v.isFunction(o)?function(){var e=o.apply(this,arguments);e&&v.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[s+"With"](this===i?n:this,[e])}:n[s])}),e=null}).promise()},promise:function(e){return e!=null?v.extend(e,r):r}},i={};return r.pipe=r.then,v.each(t,function(e,s){var o=s[2],u=s[3];r[s[1]]=o.add,u&&o.add(function(){n=u},t[e^1][2].disable,t[2][2].lock),i[s[0]]=o.fire,i[s[0]+"With"]=o.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=l.call(arguments),r=n.length,i=r!==1||e&&v.isFunction(e.promise)?r:0,s=i===1?e:v.Deferred(),o=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?l.call(arguments):r,n===u?s.notifyWith(t,n):--i||s.resolveWith(t,n)}},u,a,f;if(r>1){u=new Array(r),a=new Array(r),f=new Array(r);for(;t<r;t++)n[t]&&v.isFunction(n[t].promise)?n[t].promise().done(o(t,f,n)).fail(s.reject).progress(o(t,a,u)):--i}return i||s.resolveWith(f,n),s.promise()}}),v.support=function(){var t,n,r,s,o,u,a,f,l,c,h,p=i.createElement("div");p.setAttribute("className","t"),p.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=p.getElementsByTagName("*"),r=p.getElementsByTagName("a")[0];if(!n||!r||!n.length)return{};s=i.createElement("select"),o=s.appendChild(i.createElement("option")),u=p.getElementsByTagName("input")[0],r.style.cssText="top:1px;float:left;opacity:.5",t={leadingWhitespace:p.firstChild.nodeType===3,tbody:!p.getElementsByTagName("tbody").length,htmlSerialize:!!p.getElementsByTagName("link").length,style:/top/.test(r.getAttribute("style")),hrefNormalized:r.getAttribute("href")==="/a",opacity:/^0.5/.test(r.style.opacity),cssFloat:!!r.style.cssFloat,checkOn:u.value==="on",optSelected:o.selected,getSetAttribute:p.className!=="t",enctype:!!i.createElement("form").enctype,html5Clone:i.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",boxModel:i.compatMode==="CSS1Compat",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},u.checked=!0,t.noCloneChecked=u.cloneNode(!0).checked,s.disabled=!0,t.optDisabled=!o.disabled;try{delete p.test}catch(d){t.deleteExpando=!1}!p.addEventListener&&p.attachEvent&&p.fireEvent&&(p.attachEvent("onclick",h=function(){t.noCloneEvent=!1}),p.cloneNode(!0).fireEvent("onclick"),p.detachEvent("onclick",h)),u=i.createElement("input"),u.value="t",u.setAttribute("type","radio"),t.radioValue=u.value==="t",u.setAttribute("checked","checked"),u.setAttribute("name","t"),p.appendChild(u),a=i.createDocumentFragment(),a.appendChild(p.lastChild),t.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked,t.appendChecked=u.checked,a.removeChild(u),a.appendChild(p);if(p.attachEvent)for(l in{submit:!0,change:!0,focusin:!0})f="on"+l,c=f in p,c||(p.setAttribute(f,"return;"),c=typeof p[f]=="function"),t[l+"Bubbles"]=c;return v(function(){var n,r,s,o,u="padding:0;margin:0;border:0;display:block;overflow:hidden;",a=i.getElementsByTagName("body")[0];if(!a)return;n=i.createElement("div"),n.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",a.insertBefore(n,a.firstChild),r=i.createElement("div"),n.appendChild(r),r.innerHTML="<table><tr><td></td><td>t</td></tr></table>",s=r.getElementsByTagName("td"),s[0].style.cssText="padding:0;margin:0;border:0;display:none",c=s[0].offsetHeight===0,s[0].style.display="",s[1].style.display="none",t.reliableHiddenOffsets=c&&s[0].offsetHeight===0,r.innerHTML="",r.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",t.boxSizing=r.offsetWidth===4,t.doesNotIncludeMarginInBodyOffset=a.offsetTop!==1,e.getComputedStyle&&(t.pixelPosition=(e.getComputedStyle(r,null)||{}).top!=="1%",t.boxSizingReliable=(e.getComputedStyle(r,null)||{width:"4px"}).width==="4px",o=i.createElement("div"),o.style.cssText=r.style.cssText=u,o.style.marginRight=o.style.width="0",r.style.width="1px",r.appendChild(o),t.reliableMarginRight=!parseFloat((e.getComputedStyle(o,null)||{}).marginRight)),typeof r.style.zoom!="undefined"&&(r.innerHTML="",r.style.cssText=u+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=r.offsetWidth===3,r.style.display="block",r.style.overflow="visible",r.innerHTML="<div></div>",r.firstChild.style.width="5px",t.shrinkWrapBlocks=r.offsetWidth!==3,n.style.zoom=1),a.removeChild(n),n=r=s=o=null}),a.removeChild(p),n=r=s=o=u=a=p=null,t}();var D=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,P=/([A-Z])/g;v.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(v.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?v.cache[e[v.expando]]:e[v.expando],!!e&&!B(e)},data:function(e,n,r,i){if(!v.acceptData(e))return;var s,o,u=v.expando,a=typeof n=="string",f=e.nodeType,l=f?v.cache:e,c=f?e[u]:e[u]&&u;if((!c||!l[c]||!i&&!l[c].data)&&a&&r===t)return;c||(f?e[u]=c=v.deletedIds.pop()||v.guid++:c=u),l[c]||(l[c]={},f||(l[c].toJSON=v.noop));if(typeof n=="object"||typeof n=="function")i?l[c]=v.extend(l[c],n):l[c].data=v.extend(l[c].data,n);return s=l[c],i||(s.data||(s.data={}),s=s.data),r!==t&&(s[v.camelCase(n)]=r),a?(o=s[n],o==null&&(o=s[v.camelCase(n)])):o=s,o},removeData:function(e,t,n){if(!v.acceptData(e))return;var r,i,s,o=e.nodeType,u=o?v.cache:e,a=o?e[v.expando]:v.expando;if(!u[a])return;if(t){r=n?u[a]:u[a].data;if(r){v.isArray(t)||(t in r?t=[t]:(t=v.camelCase(t),t in r?t=[t]:t=t.split(" ")));for(i=0,s=t.length;i<s;i++)delete r[t[i]];if(!(n?B:v.isEmptyObject)(r))return}}if(!n){delete u[a].data;if(!B(u[a]))return}o?v.cleanData([e],!0):v.support.deleteExpando||u!=u.window?delete u[a]:u[a]=null},_data:function(e,t,n){return v.data(e,t,n,!0)},acceptData:function(e){var t=e.nodeName&&v.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),v.fn.extend({data:function(e,n){var r,i,s,o,u,a=this[0],f=0,l=null;if(e===t){if(this.length){l=v.data(a);if(a.nodeType===1&&!v._data(a,"parsedAttrs")){s=a.attributes;for(u=s.length;f<u;f++)o=s[f].name,o.indexOf("data-")||(o=v.camelCase(o.substring(5)),H(a,o,l[o]));v._data(a,"parsedAttrs",!0)}}return l}return typeof e=="object"?this.each(function(){v.data(this,e)}):(r=e.split(".",2),r[1]=r[1]?"."+r[1]:"",i=r[1]+"!",v.access(this,function(n){if(n===t)return l=this.triggerHandler("getData"+i,[r[0]]),l===t&&a&&(l=v.data(a,e),l=H(a,e,l)),l===t&&r[1]?this.data(r[0]):l;r[1]=n,this.each(function(){var t=v(this);t.triggerHandler("setData"+i,r),v.data(this,e,n),t.triggerHandler("changeData"+i,r)})},null,n,arguments.length>1,null,!1))},removeData:function(e){return this.each(function(){v.removeData(this,e)})}}),v.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=v._data(e,t),n&&(!r||v.isArray(n)?r=v._data(e,t,v.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=v.queue(e,t),r=n.length,i=n.shift(),s=v._queueHooks(e,t),o=function(){v.dequeue(e,t)};i==="inprogress"&&(i=n.shift(),r--),i&&(t==="fx"&&n.unshift("inprogress"),delete s.stop,i.call(e,o,s)),!r&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return v._data(e,n)||v._data(e,n,{empty:v.Callbacks("once memory").add(function(){v.removeData(e,t+"queue",!0),v.removeData(e,n,!0)})})}}),v.fn.extend({queue:function(e,n){var r=2;return typeof e!="string"&&(n=e,e="fx",r--),arguments.length<r?v.queue(this[0],e):n===t?this:this.each(function(){var t=v.queue(this,e,n);v._queueHooks(this,e),e==="fx"&&t[0]!=="inprogress"&&v.dequeue(this,e)})},dequeue:function(e){return this.each(function(){v.dequeue(this,e)})},delay:function(e,t){return e=v.fx?v.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var r,i=1,s=v.Deferred(),o=this,u=this.length,a=function(){--i||s.resolveWith(o,[o])};typeof e!="string"&&(n=e,e=t),e=e||"fx";while(u--)r=v._data(o[u],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(a));return a(),s.promise(n)}});var j,F,I,q=/[\t\r\n]/g,R=/\r/g,U=/^(?:button|input)$/i,z=/^(?:button|input|object|select|textarea)$/i,W=/^a(?:rea|)$/i,X=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,V=v.support.getSetAttribute;v.fn.extend({attr:function(e,t){return v.access(this,v.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){v.removeAttr(this,e)})},prop:function(e,t){return v.access(this,v.prop,e,t,arguments.length>1)},removeProp:function(e){return e=v.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,s,o,u;if(v.isFunction(e))return this.each(function(t){v(this).addClass(e.call(this,t,this.className))});if(e&&typeof e=="string"){t=e.split(y);for(n=0,r=this.length;n<r;n++){i=this[n];if(i.nodeType===1)if(!i.className&&t.length===1)i.className=e;else{s=" "+i.className+" ";for(o=0,u=t.length;o<u;o++)s.indexOf(" "+t[o]+" ")<0&&(s+=t[o]+" ");i.className=v.trim(s)}}}return this},removeClass:function(e){var n,r,i,s,o,u,a;if(v.isFunction(e))return this.each(function(t){v(this).removeClass(e.call(this,t,this.className))});if(e&&typeof e=="string"||e===t){n=(e||"").split(y);for(u=0,a=this.length;u<a;u++){i=this[u];if(i.nodeType===1&&i.className){r=(" "+i.className+" ").replace(q," ");for(s=0,o=n.length;s<o;s++)while(r.indexOf(" "+n[s]+" ")>=0)r=r.replace(" "+n[s]+" "," ");i.className=e?v.trim(r):""}}}return this},toggleClass:function(e,t){var n=typeof e,r=typeof t=="boolean";return v.isFunction(e)?this.each(function(n){v(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if(n==="string"){var i,s=0,o=v(this),u=t,a=e.split(y);while(i=a[s++])u=r?u:!o.hasClass(i),o[u?"addClass":"removeClass"](i)}else if(n==="undefined"||n==="boolean")this.className&&v._data(this,"__className__",this.className),this.className=this.className||e===!1?"":v._data(this,"__className__")||""})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;n<r;n++)if(this[n].nodeType===1&&(" "+this[n].className+" ").replace(q," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,r,i,s=this[0];if(!arguments.length){if(s)return n=v.valHooks[s.type]||v.valHooks[s.nodeName.toLowerCase()],n&&"get"in n&&(r=n.get(s,"value"))!==t?r:(r=s.value,typeof r=="string"?r.replace(R,""):r==null?"":r);return}return i=v.isFunction(e),this.each(function(r){var s,o=v(this);if(this.nodeType!==1)return;i?s=e.call(this,r,o.val()):s=e,s==null?s="":typeof s=="number"?s+="":v.isArray(s)&&(s=v.map(s,function(e){return e==null?"":e+""})),n=v.valHooks[this.type]||v.valHooks[this.nodeName.toLowerCase()];if(!n||!("set"in n)||n.set(this,s,"value")===t)this.value=s})}}),v.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,r=e.options,i=e.selectedIndex,s=e.type==="select-one"||i<0,o=s?null:[],u=s?i+1:r.length,a=i<0?u:s?i:0;for(;a<u;a++){n=r[a];if((n.selected||a===i)&&(v.support.optDisabled?!n.disabled:n.getAttribute("disabled")===null)&&(!n.parentNode.disabled||!v.nodeName(n.parentNode,"optgroup"))){t=v(n).val();if(s)return t;o.push(t)}}return o},set:function(e,t){var n=v.makeArray(t);return v(e).find("option").each(function(){this.selected=v.inArray(v(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attrFn:{},attr:function(e,n,r,i){var s,o,u,a=e.nodeType;if(!e||a===3||a===8||a===2)return;if(i&&v.isFunction(v.fn[n]))return v(e)[n](r);if(typeof e.getAttribute=="undefined")return v.prop(e,n,r);u=a!==1||!v.isXMLDoc(e),u&&(n=n.toLowerCase(),o=v.attrHooks[n]||(X.test(n)?F:j));if(r!==t){if(r===null){v.removeAttr(e,n);return}return o&&"set"in o&&u&&(s=o.set(e,r,n))!==t?s:(e.setAttribute(n,r+""),r)}return o&&"get"in o&&u&&(s=o.get(e,n))!==null?s:(s=e.getAttribute(n),s===null?t:s)},removeAttr:function(e,t){var n,r,i,s,o=0;if(t&&e.nodeType===1){r=t.split(y);for(;o<r.length;o++)i=r[o],i&&(n=v.propFix[i]||i,s=X.test(i),s||v.attr(e,i,""),e.removeAttribute(V?i:n),s&&n in e&&(e[n]=!1))}},attrHooks:{type:{set:function(e,t){if(U.test(e.nodeName)&&e.parentNode)v.error("type property can't be changed");else if(!v.support.radioValue&&t==="radio"&&v.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}},value:{get:function(e,t){return j&&v.nodeName(e,"button")?j.get(e,t):t in e?e.value:null},set:function(e,t,n){if(j&&v.nodeName(e,"button"))return j.set(e,t,n);e.value=t}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,r){var i,s,o,u=e.nodeType;if(!e||u===3||u===8||u===2)return;return o=u!==1||!v.isXMLDoc(e),o&&(n=v.propFix[n]||n,s=v.propHooks[n]),r!==t?s&&"set"in s&&(i=s.set(e,r,n))!==t?i:e[n]=r:s&&"get"in s&&(i=s.get(e,n))!==null?i:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):z.test(e.nodeName)||W.test(e.nodeName)&&e.href?0:t}}}}),F={get:function(e,n){var r,i=v.prop(e,n);return i===!0||typeof i!="boolean"&&(r=e.getAttributeNode(n))&&r.nodeValue!==!1?n.toLowerCase():t},set:function(e,t,n){var r;return t===!1?v.removeAttr(e,n):(r=v.propFix[n]||n,r in e&&(e[r]=!0),e.setAttribute(n,n.toLowerCase())),n}},V||(I={name:!0,id:!0,coords:!0},j=v.valHooks.button={get:function(
e,n){var r;return r=e.getAttributeNode(n),r&&(I[n]?r.value!=="":r.specified)?r.value:t},set:function(e,t,n){var r=e.getAttributeNode(n);return r||(r=i.createAttribute(n),e.setAttributeNode(r)),r.value=t+""}},v.each(["width","height"],function(e,t){v.attrHooks[t]=v.extend(v.attrHooks[t],{set:function(e,n){if(n==="")return e.setAttribute(t,"auto"),n}})}),v.attrHooks.contenteditable={get:j.get,set:function(e,t,n){t===""&&(t="false"),j.set(e,t,n)}}),v.support.hrefNormalized||v.each(["href","src","width","height"],function(e,n){v.attrHooks[n]=v.extend(v.attrHooks[n],{get:function(e){var r=e.getAttribute(n,2);return r===null?t:r}})}),v.support.style||(v.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||t},set:function(e,t){return e.style.cssText=t+""}}),v.support.optSelected||(v.propHooks.selected=v.extend(v.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),v.support.enctype||(v.propFix.enctype="encoding"),v.support.checkOn||v.each(["radio","checkbox"],function(){v.valHooks[this]={get:function(e){return e.getAttribute("value")===null?"on":e.value}}}),v.each(["radio","checkbox"],function(){v.valHooks[this]=v.extend(v.valHooks[this],{set:function(e,t){if(v.isArray(t))return e.checked=v.inArray(v(e).val(),t)>=0}})});var $=/^(?:textarea|input|select)$/i,J=/^([^\.]*|)(?:\.(.+)|)$/,K=/(?:^|\s)hover(\.\S+|)\b/,Q=/^key/,G=/^(?:mouse|contextmenu)|click/,Y=/^(?:focusinfocus|focusoutblur)$/,Z=function(e){return v.event.special.hover?e:e.replace(K,"mouseenter$1 mouseleave$1")};v.event={add:function(e,n,r,i,s){var o,u,a,f,l,c,h,p,d,m,g;if(e.nodeType===3||e.nodeType===8||!n||!r||!(o=v._data(e)))return;r.handler&&(d=r,r=d.handler,s=d.selector),r.guid||(r.guid=v.guid++),a=o.events,a||(o.events=a={}),u=o.handle,u||(o.handle=u=function(e){return typeof v=="undefined"||!!e&&v.event.triggered===e.type?t:v.event.dispatch.apply(u.elem,arguments)},u.elem=e),n=v.trim(Z(n)).split(" ");for(f=0;f<n.length;f++){l=J.exec(n[f])||[],c=l[1],h=(l[2]||"").split(".").sort(),g=v.event.special[c]||{},c=(s?g.delegateType:g.bindType)||c,g=v.event.special[c]||{},p=v.extend({type:c,origType:l[1],data:i,handler:r,guid:r.guid,selector:s,needsContext:s&&v.expr.match.needsContext.test(s),namespace:h.join(".")},d),m=a[c];if(!m){m=a[c]=[],m.delegateCount=0;if(!g.setup||g.setup.call(e,i,h,u)===!1)e.addEventListener?e.addEventListener(c,u,!1):e.attachEvent&&e.attachEvent("on"+c,u)}g.add&&(g.add.call(e,p),p.handler.guid||(p.handler.guid=r.guid)),s?m.splice(m.delegateCount++,0,p):m.push(p),v.event.global[c]=!0}e=null},global:{},remove:function(e,t,n,r,i){var s,o,u,a,f,l,c,h,p,d,m,g=v.hasData(e)&&v._data(e);if(!g||!(h=g.events))return;t=v.trim(Z(t||"")).split(" ");for(s=0;s<t.length;s++){o=J.exec(t[s])||[],u=a=o[1],f=o[2];if(!u){for(u in h)v.event.remove(e,u+t[s],n,r,!0);continue}p=v.event.special[u]||{},u=(r?p.delegateType:p.bindType)||u,d=h[u]||[],l=d.length,f=f?new RegExp("(^|\\.)"+f.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null;for(c=0;c<d.length;c++)m=d[c],(i||a===m.origType)&&(!n||n.guid===m.guid)&&(!f||f.test(m.namespace))&&(!r||r===m.selector||r==="**"&&m.selector)&&(d.splice(c--,1),m.selector&&d.delegateCount--,p.remove&&p.remove.call(e,m));d.length===0&&l!==d.length&&((!p.teardown||p.teardown.call(e,f,g.handle)===!1)&&v.removeEvent(e,u,g.handle),delete h[u])}v.isEmptyObject(h)&&(delete g.handle,v.removeData(e,"events",!0))},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(n,r,s,o){if(!s||s.nodeType!==3&&s.nodeType!==8){var u,a,f,l,c,h,p,d,m,g,y=n.type||n,b=[];if(Y.test(y+v.event.triggered))return;y.indexOf("!")>=0&&(y=y.slice(0,-1),a=!0),y.indexOf(".")>=0&&(b=y.split("."),y=b.shift(),b.sort());if((!s||v.event.customEvent[y])&&!v.event.global[y])return;n=typeof n=="object"?n[v.expando]?n:new v.Event(y,n):new v.Event(y),n.type=y,n.isTrigger=!0,n.exclusive=a,n.namespace=b.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+b.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,h=y.indexOf(":")<0?"on"+y:"";if(!s){u=v.cache;for(f in u)u[f].events&&u[f].events[y]&&v.event.trigger(n,r,u[f].handle.elem,!0);return}n.result=t,n.target||(n.target=s),r=r!=null?v.makeArray(r):[],r.unshift(n),p=v.event.special[y]||{};if(p.trigger&&p.trigger.apply(s,r)===!1)return;m=[[s,p.bindType||y]];if(!o&&!p.noBubble&&!v.isWindow(s)){g=p.delegateType||y,l=Y.test(g+y)?s:s.parentNode;for(c=s;l;l=l.parentNode)m.push([l,g]),c=l;c===(s.ownerDocument||i)&&m.push([c.defaultView||c.parentWindow||e,g])}for(f=0;f<m.length&&!n.isPropagationStopped();f++)l=m[f][0],n.type=m[f][1],d=(v._data(l,"events")||{})[n.type]&&v._data(l,"handle"),d&&d.apply(l,r),d=h&&l[h],d&&v.acceptData(l)&&d.apply&&d.apply(l,r)===!1&&n.preventDefault();return n.type=y,!o&&!n.isDefaultPrevented()&&(!p._default||p._default.apply(s.ownerDocument,r)===!1)&&(y!=="click"||!v.nodeName(s,"a"))&&v.acceptData(s)&&h&&s[y]&&(y!=="focus"&&y!=="blur"||n.target.offsetWidth!==0)&&!v.isWindow(s)&&(c=s[h],c&&(s[h]=null),v.event.triggered=y,s[y](),v.event.triggered=t,c&&(s[h]=c)),n.result}return},dispatch:function(n){n=v.event.fix(n||e.event);var r,i,s,o,u,a,f,c,h,p,d=(v._data(this,"events")||{})[n.type]||[],m=d.delegateCount,g=l.call(arguments),y=!n.exclusive&&!n.namespace,b=v.event.special[n.type]||{},w=[];g[0]=n,n.delegateTarget=this;if(b.preDispatch&&b.preDispatch.call(this,n)===!1)return;if(m&&(!n.button||n.type!=="click"))for(s=n.target;s!=this;s=s.parentNode||this)if(s.disabled!==!0||n.type!=="click"){u={},f=[];for(r=0;r<m;r++)c=d[r],h=c.selector,u[h]===t&&(u[h]=c.needsContext?v(h,this).index(s)>=0:v.find(h,this,null,[s]).length),u[h]&&f.push(c);f.length&&w.push({elem:s,matches:f})}d.length>m&&w.push({elem:this,matches:d.slice(m)});for(r=0;r<w.length&&!n.isPropagationStopped();r++){a=w[r],n.currentTarget=a.elem;for(i=0;i<a.matches.length&&!n.isImmediatePropagationStopped();i++){c=a.matches[i];if(y||!n.namespace&&!c.namespace||n.namespace_re&&n.namespace_re.test(c.namespace))n.data=c.data,n.handleObj=c,o=((v.event.special[c.origType]||{}).handle||c.handler).apply(a.elem,g),o!==t&&(n.result=o,o===!1&&(n.preventDefault(),n.stopPropagation()))}}return b.postDispatch&&b.postDispatch.call(this,n),n.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return e.which==null&&(e.which=t.charCode!=null?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,s,o,u=n.button,a=n.fromElement;return e.pageX==null&&n.clientX!=null&&(r=e.target.ownerDocument||i,s=r.documentElement,o=r.body,e.pageX=n.clientX+(s&&s.scrollLeft||o&&o.scrollLeft||0)-(s&&s.clientLeft||o&&o.clientLeft||0),e.pageY=n.clientY+(s&&s.scrollTop||o&&o.scrollTop||0)-(s&&s.clientTop||o&&o.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?n.toElement:a),!e.which&&u!==t&&(e.which=u&1?1:u&2?3:u&4?2:0),e}},fix:function(e){if(e[v.expando])return e;var t,n,r=e,s=v.event.fixHooks[e.type]||{},o=s.props?this.props.concat(s.props):this.props;e=v.Event(r);for(t=o.length;t;)n=o[--t],e[n]=r[n];return e.target||(e.target=r.srcElement||i),e.target.nodeType===3&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,s.filter?s.filter(e,r):e},special:{load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(e,t,n){v.isWindow(this)&&(this.onbeforeunload=n)},teardown:function(e,t){this.onbeforeunload===t&&(this.onbeforeunload=null)}}},simulate:function(e,t,n,r){var i=v.extend(new v.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?v.event.trigger(i,null,t):v.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},v.event.handle=v.event.dispatch,v.removeEvent=i.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]=="undefined"&&(e[r]=null),e.detachEvent(r,n))},v.Event=function(e,t){if(!(this instanceof v.Event))return new v.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?tt:et):this.type=e,t&&v.extend(this,t),this.timeStamp=e&&e.timeStamp||v.now(),this[v.expando]=!0},v.Event.prototype={preventDefault:function(){this.isDefaultPrevented=tt;var e=this.originalEvent;if(!e)return;e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation:function(){this.isPropagationStopped=tt;var e=this.originalEvent;if(!e)return;e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=tt,this.stopPropagation()},isDefaultPrevented:et,isPropagationStopped:et,isImmediatePropagationStopped:et},v.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){v.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,s=e.handleObj,o=s.selector;if(!i||i!==r&&!v.contains(r,i))e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t;return n}}}),v.support.submitBubbles||(v.event.special.submit={setup:function(){if(v.nodeName(this,"form"))return!1;v.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=v.nodeName(n,"input")||v.nodeName(n,"button")?n.form:t;r&&!v._data(r,"_submit_attached")&&(v.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),v._data(r,"_submit_attached",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&v.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){if(v.nodeName(this,"form"))return!1;v.event.remove(this,"._submit")}}),v.support.changeBubbles||(v.event.special.change={setup:function(){if($.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")v.event.add(this,"propertychange._change",function(e){e.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),v.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),v.event.simulate("change",this,e,!0)});return!1}v.event.add(this,"beforeactivate._change",function(e){var t=e.target;$.test(t.nodeName)&&!v._data(t,"_change_attached")&&(v.event.add(t,"change._change",function(e){this.parentNode&&!e.isSimulated&&!e.isTrigger&&v.event.simulate("change",this.parentNode,e,!0)}),v._data(t,"_change_attached",!0))})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||t.type!=="radio"&&t.type!=="checkbox")return e.handleObj.handler.apply(this,arguments)},teardown:function(){return v.event.remove(this,"._change"),!$.test(this.nodeName)}}),v.support.focusinBubbles||v.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){v.event.simulate(t,e.target,v.event.fix(e),!0)};v.event.special[t]={setup:function(){n++===0&&i.addEventListener(e,r,!0)},teardown:function(){--n===0&&i.removeEventListener(e,r,!0)}}}),v.fn.extend({on:function(e,n,r,i,s){var o,u;if(typeof e=="object"){typeof n!="string"&&(r=r||n,n=t);for(u in e)this.on(u,n,r,e[u],s);return this}r==null&&i==null?(i=n,r=n=t):i==null&&(typeof n=="string"?(i=r,r=t):(i=r,r=n,n=t));if(i===!1)i=et;else if(!i)return this;return s===1&&(o=i,i=function(e){return v().off(e),o.apply(this,arguments)},i.guid=o.guid||(o.guid=v.guid++)),this.each(function(){v.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var i,s;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,v(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if(typeof e=="object"){for(s in e)this.off(s,n,e[s]);return this}if(n===!1||typeof n=="function")r=n,n=t;return r===!1&&(r=et),this.each(function(){v.event.remove(this,e,r,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},live:function(e,t,n){return v(this.context).on(e,this.selector,t,n),this},die:function(e,t){return v(this.context).off(e,this.selector||"**",t),this},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return arguments.length===1?this.off(e,"**"):this.off(t,e||"**",n)},trigger:function(e,t){return this.each(function(){v.event.trigger(e,t,this)})},triggerHandler:function(e,t){if(this[0])return v.event.trigger(e,t,this[0],!0)},toggle:function(e){var t=arguments,n=e.guid||v.guid++,r=0,i=function(n){var i=(v._data(this,"lastToggle"+e.guid)||0)%r;return v._data(this,"lastToggle"+e.guid,i+1),n.preventDefault(),t[i].apply(this,arguments)||!1};i.guid=n;while(r<t.length)t[r++].guid=n;return this.click(i)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),v.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){v.fn[t]=function(e,n){return n==null&&(n=e,e=null),arguments.length>0?this.on(t,null,e,n):this.trigger(t)},Q.test(t)&&(v.event.fixHooks[t]=v.event.keyHooks),G.test(t)&&(v.event.fixHooks[t]=v.event.mouseHooks)}),function(e,t){function nt(e,t,n,r){n=n||[],t=t||g;var i,s,a,f,l=t.nodeType;if(!e||typeof e!="string")return n;if(l!==1&&l!==9)return[];a=o(t);if(!a&&!r)if(i=R.exec(e))if(f=i[1]){if(l===9){s=t.getElementById(f);if(!s||!s.parentNode)return n;if(s.id===f)return n.push(s),n}else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(f))&&u(t,s)&&s.id===f)return n.push(s),n}else{if(i[2])return S.apply(n,x.call(t.getElementsByTagName(e),0)),n;if((f=i[3])&&Z&&t.getElementsByClassName)return S.apply(n,x.call(t.getElementsByClassName(f),0)),n}return vt(e.replace(j,"$1"),t,n,r,a)}function rt(e){return function(t){var n=t.nodeName.toLowerCase();return n==="input"&&t.type===e}}function it(e){return function(t){var n=t.nodeName.toLowerCase();return(n==="input"||n==="button")&&t.type===e}}function st(e){return N(function(t){return t=+t,N(function(n,r){var i,s=e([],n.length,t),o=s.length;while(o--)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))})})}function ot(e,t,n){if(e===t)return n;var r=e.nextSibling;while(r){if(r===t)return-1;r=r.nextSibling}return 1}function ut(e,t){var n,r,s,o,u,a,f,l=L[d][e+" "];if(l)return t?0:l.slice(0);u=e,a=[],f=i.preFilter;while(u){if(!n||(r=F.exec(u)))r&&(u=u.slice(r[0].length)||u),a.push(s=[]);n=!1;if(r=I.exec(u))s.push(n=new m(r.shift())),u=u.slice(n.length),n.type=r[0].replace(j," ");for(o in i.filter)(r=J[o].exec(u))&&(!f[o]||(r=f[o](r)))&&(s.push(n=new m(r.shift())),u=u.slice(n.length),n.type=o,n.matches=r);if(!n)break}return t?u.length:u?nt.error(e):L(e,a).slice(0)}function at(e,t,r){var i=t.dir,s=r&&t.dir==="parentNode",o=w++;return t.first?function(t,n,r){while(t=t[i])if(s||t.nodeType===1)return e(t,n,r)}:function(t,r,u){if(!u){var a,f=b+" "+o+" ",l=f+n;while(t=t[i])if(s||t.nodeType===1){if((a=t[d])===l)return t.sizset;if(typeof a=="string"&&a.indexOf(f)===0){if(t.sizset)return t}else{t[d]=l;if(e(t,r,u))return t.sizset=!0,t;t.sizset=!1}}}else while(t=t[i])if(s||t.nodeType===1)if(e(t,r,u))return t}}function ft(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function lt(e,t,n,r,i){var s,o=[],u=0,a=e.length,f=t!=null;for(;u<a;u++)if(s=e[u])if(!n||n(s,r,i))o.push(s),f&&t.push(u);return o}function ct(e,t,n,r,i,s){return r&&!r[d]&&(r=ct(r)),i&&!i[d]&&(i=ct(i,s)),N(function(s,o,u,a){var f,l,c,h=[],p=[],d=o.length,v=s||dt(t||"*",u.nodeType?[u]:u,[]),m=e&&(s||!t)?lt(v,h,e,u,a):v,g=n?i||(s?e:d||r)?[]:o:m;n&&n(m,g,u,a);if(r){f=lt(g,p),r(f,[],u,a),l=f.length;while(l--)if(c=f[l])g[p[l]]=!(m[p[l]]=c)}if(s){if(i||e){if(i){f=[],l=g.length;while(l--)(c=g[l])&&f.push(m[l]=c);i(null,g=[],f,a)}l=g.length;while(l--)(c=g[l])&&(f=i?T.call(s,c):h[l])>-1&&(s[f]=!(o[f]=c))}}else g=lt(g===o?g.splice(d,g.length):g),i?i(null,o,g,a):S.apply(o,g)})}function ht(e){var t,n,r,s=e.length,o=i.relative[e[0].type],u=o||i.relative[" "],a=o?1:0,f=at(function(e){return e===t},u,!0),l=at(function(e){return T.call(t,e)>-1},u,!0),h=[function(e,n,r){return!o&&(r||n!==c)||((t=n).nodeType?f(e,n,r):l(e,n,r))}];for(;a<s;a++)if(n=i.relative[e[a].type])h=[at(ft(h),n)];else{n=i.filter[e[a].type].apply(null,e[a].matches);if(n[d]){r=++a;for(;r<s;r++)if(i.relative[e[r].type])break;return ct(a>1&&ft(h),a>1&&e.slice(0,a-1).join("").replace(j,"$1"),n,a<r&&ht(e.slice(a,r)),r<s&&ht(e=e.slice(r)),r<s&&e.join(""))}h.push(n)}return ft(h)}function pt(e,t){var r=t.length>0,s=e.length>0,o=function(u,a,f,l,h){var p,d,v,m=[],y=0,w="0",x=u&&[],T=h!=null,N=c,C=u||s&&i.find.TAG("*",h&&a.parentNode||a),k=b+=N==null?1:Math.E;T&&(c=a!==g&&a,n=o.el);for(;(p=C[w])!=null;w++){if(s&&p){for(d=0;v=e[d];d++)if(v(p,a,f)){l.push(p);break}T&&(b=k,n=++o.el)}r&&((p=!v&&p)&&y--,u&&x.push(p))}y+=w;if(r&&w!==y){for(d=0;v=t[d];d++)v(x,m,a,f);if(u){if(y>0)while(w--)!x[w]&&!m[w]&&(m[w]=E.call(l));m=lt(m)}S.apply(l,m),T&&!u&&m.length>0&&y+t.length>1&&nt.uniqueSort(l)}return T&&(b=k,c=N),x};return o.el=0,r?N(o):o}function dt(e,t,n){var r=0,i=t.length;for(;r<i;r++)nt(e,t[r],n);return n}function vt(e,t,n,r,s){var o,u,f,l,c,h=ut(e),p=h.length;if(!r&&h.length===1){u=h[0]=h[0].slice(0);if(u.length>2&&(f=u[0]).type==="ID"&&t.nodeType===9&&!s&&i.relative[u[1].type]){t=i.find.ID(f.matches[0].replace($,""),t,s)[0];if(!t)return n;e=e.slice(u.shift().length)}for(o=J.POS.test(e)?-1:u.length-1;o>=0;o--){f=u[o];if(i.relative[l=f.type])break;if(c=i.find[l])if(r=c(f.matches[0].replace($,""),z.test(u[0].type)&&t.parentNode||t,s)){u.splice(o,1),e=r.length&&u.join("");if(!e)return S.apply(n,x.call(r,0)),n;break}}}return a(e,h)(r,t,s,n,z.test(e)),n}function mt(){}var n,r,i,s,o,u,a,f,l,c,h=!0,p="undefined",d=("sizcache"+Math.random()).replace(".",""),m=String,g=e.document,y=g.documentElement,b=0,w=0,E=[].pop,S=[].push,x=[].slice,T=[].indexOf||function(e){var t=0,n=this.length;for(;t<n;t++)if(this[t]===e)return t;return-1},N=function(e,t){return e[d]=t==null||t,e},C=function(){var e={},t=[];return N(function(n,r){return t.push(n)>i.cacheLength&&delete e[t.shift()],e[n+" "]=r},e)},k=C(),L=C(),A=C(),O="[\\x20\\t\\r\\n\\f]",M="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",_=M.replace("w","w#"),D="([*^$|!~]?=)",P="\\["+O+"*("+M+")"+O+"*(?:"+D+O+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+_+")|)|)"+O+"*\\]",H=":("+M+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+P+")|[^:]|\\\\.)*|.*))\\)|)",B=":(even|odd|eq|gt|lt|nth|first|last)(?:\\("+O+"*((?:-\\d)?\\d*)"+O+"*\\)|)(?=[^-]|$)",j=new RegExp("^"+O+"+|((?:^|[^\\\\])(?:\\\\.)*)"+O+"+$","g"),F=new RegExp("^"+O+"*,"+O+"*"),I=new RegExp("^"+O+"*([\\x20\\t\\r\\n\\f>+~])"+O+"*"),q=new RegExp(H),R=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,U=/^:not/,z=/[\x20\t\r\n\f]*[+~]/,W=/:not\($/,X=/h\d/i,V=/input|select|textarea|button/i,$=/\\(?!\\)/g,J={ID:new RegExp("^#("+M+")"),CLASS:new RegExp("^\\.("+M+")"),NAME:new RegExp("^\\[name=['\"]?("+M+")['\"]?\\]"),TAG:new RegExp("^("+M.replace("w","w*")+")"),ATTR:new RegExp("^"+P),PSEUDO:new RegExp("^"+H),POS:new RegExp(B,"i"),CHILD:new RegExp("^:(only|nth|first|last)-child(?:\\("+O+"*(even|odd|(([+-]|)(\\d*)n|)"+O+"*(?:([+-]|)"+O+"*(\\d+)|))"+O+"*\\)|)","i"),needsContext:new RegExp("^"+O+"*[>+~]|"+B,"i")},K=function(e){var t=g.createElement("div");try{return e(t)}catch(n){return!1}finally{t=null}},Q=K(function(e){return e.appendChild(g.createComment("")),!e.getElementsByTagName("*").length}),G=K(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==p&&e.firstChild.getAttribute("href")==="#"}),Y=K(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return t!=="boolean"&&t!=="string"}),Z=K(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",!e.getElementsByClassName||!e.getElementsByClassName("e").length?!1:(e.lastChild.className="e",e.getElementsByClassName("e").length===2)}),et=K(function(e){e.id=d+0,e.innerHTML="<a name='"+d+"'></a><div name='"+d+"'></div>",y.insertBefore(e,y.firstChild);var t=g.getElementsByName&&g.getElementsByName(d).length===2+g.getElementsByName(d+0).length;return r=!g.getElementById(d),y.removeChild(e),t});try{x.call(y.childNodes,0)[0].nodeType}catch(tt){x=function(e){var t,n=[];for(;t=this[e];e++)n.push(t);return n}}nt.matches=function(e,t){return nt(e,null,null,t)},nt.matchesSelector=function(e,t){return nt(t,null,null,[e]).length>0},s=nt.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(i===1||i===9||i===11){if(typeof e.textContent=="string")return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=s(e)}else if(i===3||i===4)return e.nodeValue}else for(;t=e[r];r++)n+=s(t);return n},o=nt.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?t.nodeName!=="HTML":!1},u=nt.contains=y.contains?function(e,t){var n=e.nodeType===9?e.documentElement:e,r=t&&t.parentNode;return e===r||!!(r&&r.nodeType===1&&n.contains&&n.contains(r))}:y.compareDocumentPosition?function(e,t){return t&&!!(e.compareDocumentPosition(t)&16)}:function(e,t){while(t=t.parentNode)if(t===e)return!0;return!1},nt.attr=function(e,t){var n,r=o(e);return r||(t=t.toLowerCase()),(n=i.attrHandle[t])?n(e):r||Y?e.getAttribute(t):(n=e.getAttributeNode(t),n?typeof e[t]=="boolean"?e[t]?t:null:n.specified?n.value:null:null)},i=nt.selectors={cacheLength:50,createPseudo:N,match:J,attrHandle:G?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},find:{ID:r?function(e,t,n){if(typeof t.getElementById!==p&&!n){var r=t.getElementById(e);return r&&r.parentNode?[r]:[]}}:function(e,n,r){if(typeof n.getElementById!==p&&!r){var i=n.getElementById(e);return i?i.id===e||typeof i.getAttributeNode!==p&&i.getAttributeNode("id").value===e?[i]:t:[]}},TAG:Q?function(e,t){if(typeof t.getElementsByTagName!==p)return t.getElementsByTagName(e)}:function(e,t){var n=t.getElementsByTagName(e);if(e==="*"){var r,i=[],s=0;for(;r=n[s];s++)r.nodeType===1&&i.push(r);return i}return n},NAME:et&&function(e,t){if(typeof t.getElementsByName!==p)return t.getElementsByName(name)},CLASS:Z&&function(e,t,n){if(typeof t.getElementsByClassName!==p&&!n)return t.getElementsByClassName(e)}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace($,""),e[3]=(e[4]||e[5]||"").replace($,""),e[2]==="~="&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),e[1]==="nth"?(e[2]||nt.error(e[0]),e[3]=+(e[3]?e[4]+(e[5]||1):2*(e[2]==="even"||e[2]==="odd")),e[4]=+(e[6]+e[7]||e[2]==="odd")):e[2]&&nt.error(e[0]),e},PSEUDO:function(e){var t,n;if(J.CHILD.test(e[0]))return null;if(e[3])e[2]=e[3];else if(t=e[4])q.test(t)&&(n=ut(t,!0))&&(n=t.indexOf(")",t.length-n)-t.length)&&(t=t.slice(0,n),e[0]=e[0].slice(0,n)),e[2]=t;return e.slice(0,3)}},filter:{ID:r?function(e){return e=e.replace($,""),function(t){return t.getAttribute("id")===e}}:function(e){return e=e.replace($,""),function(t){var n=typeof t.getAttributeNode!==p&&t.getAttributeNode("id");return n&&n.value===e}},TAG:function(e){return e==="*"?function(){return!0}:(e=e.replace($,"").toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=k[d][e+" "];return t||(t=new RegExp("(^|"+O+")"+e+"("+O+"|$)"))&&k(e,function(e){return t.test(e.className||typeof e.getAttribute!==p&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r,i){var s=nt.attr(r,e);return s==null?t==="!=":t?(s+="",t==="="?s===n:t==="!="?s!==n:t==="^="?n&&s.indexOf(n)===0:t==="*="?n&&s.indexOf(n)>-1:t==="$="?n&&s.substr(s.length-n.length)===n:t==="~="?(" "+s+" ").indexOf(n)>-1:t==="|="?s===n||s.substr(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r){return e==="nth"?function(e){var t,i,s=e.parentNode;if(n===1&&r===0)return!0;if(s){i=0;for(t=s.firstChild;t;t=t.nextSibling)if(t.nodeType===1){i++;if(e===t)break}}return i-=r,i===n||i%n===0&&i/n>=0}:function(t){var n=t;switch(e){case"only":case"first":while(n=n.previousSibling)if(n.nodeType===1)return!1;if(e==="first")return!0;n=t;case"last":while(n=n.nextSibling)if(n.nodeType===1)return!1;return!0}}},PSEUDO:function(e,t){var n,r=i.pseudos[e]||i.setFilters[e.toLowerCase()]||nt.error("unsupported pseudo: "+e);return r[d]?r(t):r.length>1?(n=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?N(function(e,n){var i,s=r(e,t),o=s.length;while(o--)i=T.call(e,s[o]),e[i]=!(n[i]=s[o])}):function(e){return r(e,0,n)}):r}},pseudos:{not:N(function(e){var t=[],n=[],r=a(e.replace(j,"$1"));return r[d]?N(function(e,t,n,i){var s,o=r(e,null,i,[]),u=e.length;while(u--)if(s=o[u])e[u]=!(t[u]=s)}):function(e,i,s){return t[0]=e,r(t,null,s,n),!n.pop()}}),has:N(function(e){return function(t){return nt(e,t).length>0}}),contains:N(function(e){return function(t){return(t.textContent||t.innerText||s(t)).indexOf(e)>-1}}),enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&!!e.checked||t==="option"&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},parent:function(e){return!i.pseudos.empty(e)},empty:function(e){var t;e=e.firstChild;while(e){if(e.nodeName>"@"||(t=e.nodeType)===3||t===4)return!1;e=e.nextSibling}return!0},header:function(e){return X.test(e.nodeName)},text:function(e){var t,n;return e.nodeName.toLowerCase()==="input"&&(t=e.type)==="text"&&((n=e.getAttribute("type"))==null||n.toLowerCase()===t)},radio:rt("radio"),checkbox:rt("checkbox"),file:rt("file"),password:rt("password"),image:rt("image"),submit:it("submit"),reset:it("reset"),button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&e.type==="button"||t==="button"},input:function(e){return V.test(e.nodeName)},focus:function(e){var t=e.ownerDocument;return e===t.activeElement&&(!t.hasFocus||t.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},active:function(e){return e===e.ownerDocument.activeElement},first:st(function(){return[0]}),last:st(function(e,t){return[t-1]}),eq:st(function(e,t,n){return[n<0?n+t:n]}),even:st(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:st(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:st(function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e}),gt:st(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}},f=y.compareDocumentPosition?function(e,t){return e===t?(l=!0,0):(!e.compareDocumentPosition||!t.compareDocumentPosition?e.compareDocumentPosition:e.compareDocumentPosition(t)&4)?-1:1}:function(e,t){if(e===t)return l=!0,0;if(e.sourceIndex&&t.sourceIndex)return e.sourceIndex-t.sourceIndex;var n,r,i=[],s=[],o=e.parentNode,u=t.parentNode,a=o;if(o===u)return ot(e,t);if(!o)return-1;if(!u)return 1;while(a)i.unshift(a),a=a.parentNode;a=u;while(a)s.unshift(a),a=a.parentNode;n=i.length,r=s.length;for(var f=0;f<n&&f<r;f++)if(i[f]!==s[f])return ot(i[f],s[f]);return f===n?ot(e,s[f],-1):ot(i[f],t,1)},[0,0].sort(f),h=!l,nt.uniqueSort=function(e){var t,n=[],r=1,i=0;l=h,e.sort(f);if(l){for(;t=e[r];r++)t===e[r-1]&&(i=n.push(r));while(i--)e.splice(n[i],1)}return e},nt.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},a=nt.compile=function(e,t){var n,r=[],i=[],s=A[d][e+" "];if(!s){t||(t=ut(e)),n=t.length;while(n--)s=ht(t[n]),s[d]?r.push(s):i.push(s);s=A(e,pt(i,r))}return s},g.querySelectorAll&&function(){var e,t=vt,n=/'|\\/g,r=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,i=[":focus"],s=[":active"],u=y.matchesSelector||y.mozMatchesSelector||y.webkitMatchesSelector||y.oMatchesSelector||y.msMatchesSelector;K(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||i.push("\\["+O+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||i.push(":checked")}),K(function(e){e.innerHTML="<p test=''></p>",e.querySelectorAll("[test^='']").length&&i.push("[*^$]="+O+"*(?:\"\"|'')"),e.innerHTML="<input type='hidden'/>",e.querySelectorAll(":enabled").length||i.push(":enabled",":disabled")}),i=new RegExp(i.join("|")),vt=function(e,r,s,o,u){if(!o&&!u&&!i.test(e)){var a,f,l=!0,c=d,h=r,p=r.nodeType===9&&e;if(r.nodeType===1&&r.nodeName.toLowerCase()!=="object"){a=ut(e),(l=r.getAttribute("id"))?c=l.replace(n,"\\$&"):r.setAttribute("id",c),c="[id='"+c+"'] ",f=a.length;while(f--)a[f]=c+a[f].join("");h=z.test(e)&&r.parentNode||r,p=a.join(",")}if(p)try{return S.apply(s,x.call(h.querySelectorAll(p),0)),s}catch(v){}finally{l||r.removeAttribute("id")}}return t(e,r,s,o,u)},u&&(K(function(t){e=u.call(t,"div");try{u.call(t,"[test!='']:sizzle"),s.push("!=",H)}catch(n){}}),s=new RegExp(s.join("|")),nt.matchesSelector=function(t,n){n=n.replace(r,"='$1']");if(!o(t)&&!s.test(n)&&!i.test(n))try{var a=u.call(t,n);if(a||e||t.document&&t.document.nodeType!==11)return a}catch(f){}return nt(n,null,null,[t]).length>0})}(),i.pseudos.nth=i.pseudos.eq,i.filters=mt.prototype=i.pseudos,i.setFilters=new mt,nt.attr=v.attr,v.find=nt,v.expr=nt.selectors,v.expr[":"]=v.expr.pseudos,v.unique=nt.uniqueSort,v.text=nt.getText,v.isXMLDoc=nt.isXML,v.contains=nt.contains}(e);var nt=/Until$/,rt=/^(?:parents|prev(?:Until|All))/,it=/^.[^:#\[\.,]*$/,st=v.expr.match.needsContext,ot={children:!0,contents:!0,next:!0,prev:!0};v.fn.extend({find:function(e){var t,n,r,i,s,o,u=this;if(typeof e!="string")return v(e).filter(function(){for(t=0,n=u.length;t<n;t++)if(v.contains(u[t],this))return!0});o=this.pushStack("","find",e);for(t=0,n=this.length;t<n;t++){r=o.length,v.find(e,this[t],o);if(t>0)for(i=r;i<o.length;i++)for(s=0;s<r;s++)if(o[s]===o[i]){o.splice(i--,1);break}}return o},has:function(e){var t,n=v(e,this),r=n.length;return this.filter(function(){for(t=0;t<r;t++)if(v.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(ft(this,e,!1),"not",e)},filter:function(e){return this.pushStack(ft(this,e,!0),"filter",e)},is:function(e){return!!e&&(typeof e=="string"?st.test(e)?v(e,this.context).index(this[0])>=0:v.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var n,r=0,i=this.length,s=[],o=st.test(e)||typeof e!="string"?v(e,t||this.context):0;for(;r<i;r++){n=this[r];while(n&&n.ownerDocument&&n!==t&&n.nodeType!==11){if(o?o.index(n)>-1:v.find.matchesSelector(n,e)){s.push(n);break}n=n.parentNode}}return s=s.length>1?v.unique(s):s,this.pushStack(s,"closest",e)},index:function(e){return e?typeof e=="string"?v.inArray(this[0],v(e)):v.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(e,t){var n=typeof e=="string"?v(e,t):v.makeArray(e&&e.nodeType?[e]:e),r=v.merge(this.get(),n);return this.pushStack(ut(n[0])||ut(r[0])?r:v.unique(r))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}}),v.fn.andSelf=v.fn.addBack,v.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return v.dir(e,"parentNode")},parentsUntil:function(e,t,n){return v.dir(e,"parentNode",n)},next:function(e){return at(e,"nextSibling")},prev:function(e){return at(e,"previousSibling")},nextAll:function(e){return v.dir(e,"nextSibling")},prevAll:function(e){return v.dir(e,"previousSibling")},nextUntil:function(e,t,n){return v.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return v.dir(e,"previousSibling",n)},siblings:function(e){return v.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return v.sibling(e.firstChild)},contents:function(e){return v.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:v.merge([],e.childNodes)}},function(e,t){v.fn[e]=function(n,r){var i=v.map(this,t,n);return nt.test(e)||(r=n),r&&typeof r=="string"&&(i=v.filter(r,i)),i=this.length>1&&!ot[e]?v.unique(i):i,this.length>1&&rt.test(e)&&(i=i.reverse()),this.pushStack(i,e,l.call(arguments).join(","))}}),v.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),t.length===1?v.find.matchesSelector(t[0],e)?[t[0]]:[]:v.find.matches(e,t)},dir:function(e,n,r){var i=[],s=e[n];while(s&&s.nodeType!==9&&(r===t||s.nodeType!==1||!v(s).is(r)))s.nodeType===1&&i.push(s),s=s[n];return i},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)e.nodeType===1&&e!==t&&n.push(e);return n}});var ct="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",ht=/ jQuery\d+="(?:null|\d+)"/g,pt=/^\s+/,dt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,vt=/<([\w:]+)/,mt=/<tbody/i,gt=/<|&#?\w+;/,yt=/<(?:script|style|link)/i,bt=/<(?:script|object|embed|option|style)/i
,wt=new RegExp("<(?:"+ct+")[\\s/>]","i"),Et=/^(?:checkbox|radio)$/,St=/checked\s*(?:[^=]|=\s*.checked.)/i,xt=/\/(java|ecma)script/i,Tt=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,Nt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},Ct=lt(i),kt=Ct.appendChild(i.createElement("div"));Nt.optgroup=Nt.option,Nt.tbody=Nt.tfoot=Nt.colgroup=Nt.caption=Nt.thead,Nt.th=Nt.td,v.support.htmlSerialize||(Nt._default=[1,"X<div>","</div>"]),v.fn.extend({text:function(e){return v.access(this,function(e){return e===t?v.text(this):this.empty().append((this[0]&&this[0].ownerDocument||i).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(v.isFunction(e))return this.each(function(t){v(this).wrapAll(e.call(this,t))});if(this[0]){var t=v(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&e.firstChild.nodeType===1)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return v.isFunction(e)?this.each(function(t){v(this).wrapInner(e.call(this,t))}):this.each(function(){var t=v(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=v.isFunction(e);return this.each(function(n){v(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){v.nodeName(this,"body")||v(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){(this.nodeType===1||this.nodeType===11)&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){(this.nodeType===1||this.nodeType===11)&&this.insertBefore(e,this.firstChild)})},before:function(){if(!ut(this[0]))return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this)});if(arguments.length){var e=v.clean(arguments);return this.pushStack(v.merge(e,this),"before",this.selector)}},after:function(){if(!ut(this[0]))return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this.nextSibling)});if(arguments.length){var e=v.clean(arguments);return this.pushStack(v.merge(this,e),"after",this.selector)}},remove:function(e,t){var n,r=0;for(;(n=this[r])!=null;r++)if(!e||v.filter(e,[n]).length)!t&&n.nodeType===1&&(v.cleanData(n.getElementsByTagName("*")),v.cleanData([n])),n.parentNode&&n.parentNode.removeChild(n);return this},empty:function(){var e,t=0;for(;(e=this[t])!=null;t++){e.nodeType===1&&v.cleanData(e.getElementsByTagName("*"));while(e.firstChild)e.removeChild(e.firstChild)}return this},clone:function(e,t){return e=e==null?!1:e,t=t==null?e:t,this.map(function(){return v.clone(this,e,t)})},html:function(e){return v.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t)return n.nodeType===1?n.innerHTML.replace(ht,""):t;if(typeof e=="string"&&!yt.test(e)&&(v.support.htmlSerialize||!wt.test(e))&&(v.support.leadingWhitespace||!pt.test(e))&&!Nt[(vt.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(dt,"<$1></$2>");try{for(;r<i;r++)n=this[r]||{},n.nodeType===1&&(v.cleanData(n.getElementsByTagName("*")),n.innerHTML=e);n=0}catch(s){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){return ut(this[0])?this.length?this.pushStack(v(v.isFunction(e)?e():e),"replaceWith",e):this:v.isFunction(e)?this.each(function(t){var n=v(this),r=n.html();n.replaceWith(e.call(this,t,r))}):(typeof e!="string"&&(e=v(e).detach()),this.each(function(){var t=this.nextSibling,n=this.parentNode;v(this).remove(),t?v(t).before(e):v(n).append(e)}))},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,r){e=[].concat.apply([],e);var i,s,o,u,a=0,f=e[0],l=[],c=this.length;if(!v.support.checkClone&&c>1&&typeof f=="string"&&St.test(f))return this.each(function(){v(this).domManip(e,n,r)});if(v.isFunction(f))return this.each(function(i){var s=v(this);e[0]=f.call(this,i,n?s.html():t),s.domManip(e,n,r)});if(this[0]){i=v.buildFragment(e,this,l),o=i.fragment,s=o.firstChild,o.childNodes.length===1&&(o=s);if(s){n=n&&v.nodeName(s,"tr");for(u=i.cacheable||c-1;a<c;a++)r.call(n&&v.nodeName(this[a],"table")?Lt(this[a],"tbody"):this[a],a===u?o:v.clone(o,!0,!0))}o=s=null,l.length&&v.each(l,function(e,t){t.src?v.ajax?v.ajax({url:t.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):v.error("no ajax"):v.globalEval((t.text||t.textContent||t.innerHTML||"").replace(Tt,"")),t.parentNode&&t.parentNode.removeChild(t)})}return this}}),v.buildFragment=function(e,n,r){var s,o,u,a=e[0];return n=n||i,n=!n.nodeType&&n[0]||n,n=n.ownerDocument||n,e.length===1&&typeof a=="string"&&a.length<512&&n===i&&a.charAt(0)==="<"&&!bt.test(a)&&(v.support.checkClone||!St.test(a))&&(v.support.html5Clone||!wt.test(a))&&(o=!0,s=v.fragments[a],u=s!==t),s||(s=n.createDocumentFragment(),v.clean(e,n,s,r),o&&(v.fragments[a]=u&&s)),{fragment:s,cacheable:o}},v.fragments={},v.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){v.fn[e]=function(n){var r,i=0,s=[],o=v(n),u=o.length,a=this.length===1&&this[0].parentNode;if((a==null||a&&a.nodeType===11&&a.childNodes.length===1)&&u===1)return o[t](this[0]),this;for(;i<u;i++)r=(i>0?this.clone(!0):this).get(),v(o[i])[t](r),s=s.concat(r);return this.pushStack(s,e,o.selector)}}),v.extend({clone:function(e,t,n){var r,i,s,o;v.support.html5Clone||v.isXMLDoc(e)||!wt.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(kt.innerHTML=e.outerHTML,kt.removeChild(o=kt.firstChild));if((!v.support.noCloneEvent||!v.support.noCloneChecked)&&(e.nodeType===1||e.nodeType===11)&&!v.isXMLDoc(e)){Ot(e,o),r=Mt(e),i=Mt(o);for(s=0;r[s];++s)i[s]&&Ot(r[s],i[s])}if(t){At(e,o);if(n){r=Mt(e),i=Mt(o);for(s=0;r[s];++s)At(r[s],i[s])}}return r=i=null,o},clean:function(e,t,n,r){var s,o,u,a,f,l,c,h,p,d,m,g,y=t===i&&Ct,b=[];if(!t||typeof t.createDocumentFragment=="undefined")t=i;for(s=0;(u=e[s])!=null;s++){typeof u=="number"&&(u+="");if(!u)continue;if(typeof u=="string")if(!gt.test(u))u=t.createTextNode(u);else{y=y||lt(t),c=t.createElement("div"),y.appendChild(c),u=u.replace(dt,"<$1></$2>"),a=(vt.exec(u)||["",""])[1].toLowerCase(),f=Nt[a]||Nt._default,l=f[0],c.innerHTML=f[1]+u+f[2];while(l--)c=c.lastChild;if(!v.support.tbody){h=mt.test(u),p=a==="table"&&!h?c.firstChild&&c.firstChild.childNodes:f[1]==="<table>"&&!h?c.childNodes:[];for(o=p.length-1;o>=0;--o)v.nodeName(p[o],"tbody")&&!p[o].childNodes.length&&p[o].parentNode.removeChild(p[o])}!v.support.leadingWhitespace&&pt.test(u)&&c.insertBefore(t.createTextNode(pt.exec(u)[0]),c.firstChild),u=c.childNodes,c.parentNode.removeChild(c)}u.nodeType?b.push(u):v.merge(b,u)}c&&(u=c=y=null);if(!v.support.appendChecked)for(s=0;(u=b[s])!=null;s++)v.nodeName(u,"input")?_t(u):typeof u.getElementsByTagName!="undefined"&&v.grep(u.getElementsByTagName("input"),_t);if(n){m=function(e){if(!e.type||xt.test(e.type))return r?r.push(e.parentNode?e.parentNode.removeChild(e):e):n.appendChild(e)};for(s=0;(u=b[s])!=null;s++)if(!v.nodeName(u,"script")||!m(u))n.appendChild(u),typeof u.getElementsByTagName!="undefined"&&(g=v.grep(v.merge([],u.getElementsByTagName("script")),m),b.splice.apply(b,[s+1,0].concat(g)),s+=g.length)}return b},cleanData:function(e,t){var n,r,i,s,o=0,u=v.expando,a=v.cache,f=v.support.deleteExpando,l=v.event.special;for(;(i=e[o])!=null;o++)if(t||v.acceptData(i)){r=i[u],n=r&&a[r];if(n){if(n.events)for(s in n.events)l[s]?v.event.remove(i,s):v.removeEvent(i,s,n.handle);a[r]&&(delete a[r],f?delete i[u]:i.removeAttribute?i.removeAttribute(u):i[u]=null,v.deletedIds.push(r))}}}}),function(){var e,t;v.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},e=v.uaMatch(o.userAgent),t={},e.browser&&(t[e.browser]=!0,t.version=e.version),t.chrome?t.webkit=!0:t.webkit&&(t.safari=!0),v.browser=t,v.sub=function(){function e(t,n){return new e.fn.init(t,n)}v.extend(!0,e,this),e.superclass=this,e.fn=e.prototype=this(),e.fn.constructor=e,e.sub=this.sub,e.fn.init=function(r,i){return i&&i instanceof v&&!(i instanceof e)&&(i=e(i)),v.fn.init.call(this,r,i,t)},e.fn.init.prototype=e.fn;var t=e(i);return e}}();var Dt,Pt,Ht,Bt=/alpha\([^)]*\)/i,jt=/opacity=([^)]*)/,Ft=/^(top|right|bottom|left)$/,It=/^(none|table(?!-c[ea]).+)/,qt=/^margin/,Rt=new RegExp("^("+m+")(.*)$","i"),Ut=new RegExp("^("+m+")(?!px)[a-z%]+$","i"),zt=new RegExp("^([-+])=("+m+")","i"),Wt={BODY:"block"},Xt={position:"absolute",visibility:"hidden",display:"block"},Vt={letterSpacing:0,fontWeight:400},$t=["Top","Right","Bottom","Left"],Jt=["Webkit","O","Moz","ms"],Kt=v.fn.toggle;v.fn.extend({css:function(e,n){return v.access(this,function(e,n,r){return r!==t?v.style(e,n,r):v.css(e,n)},e,n,arguments.length>1)},show:function(){return Yt(this,!0)},hide:function(){return Yt(this)},toggle:function(e,t){var n=typeof e=="boolean";return v.isFunction(e)&&v.isFunction(t)?Kt.apply(this,arguments):this.each(function(){(n?e:Gt(this))?v(this).show():v(this).hide()})}}),v.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Dt(e,"opacity");return n===""?"1":n}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":v.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(!e||e.nodeType===3||e.nodeType===8||!e.style)return;var s,o,u,a=v.camelCase(n),f=e.style;n=v.cssProps[a]||(v.cssProps[a]=Qt(f,a)),u=v.cssHooks[n]||v.cssHooks[a];if(r===t)return u&&"get"in u&&(s=u.get(e,!1,i))!==t?s:f[n];o=typeof r,o==="string"&&(s=zt.exec(r))&&(r=(s[1]+1)*s[2]+parseFloat(v.css(e,n)),o="number");if(r==null||o==="number"&&isNaN(r))return;o==="number"&&!v.cssNumber[a]&&(r+="px");if(!u||!("set"in u)||(r=u.set(e,r,i))!==t)try{f[n]=r}catch(l){}},css:function(e,n,r,i){var s,o,u,a=v.camelCase(n);return n=v.cssProps[a]||(v.cssProps[a]=Qt(e.style,a)),u=v.cssHooks[n]||v.cssHooks[a],u&&"get"in u&&(s=u.get(e,!0,i)),s===t&&(s=Dt(e,n)),s==="normal"&&n in Vt&&(s=Vt[n]),r||i!==t?(o=parseFloat(s),r||v.isNumeric(o)?o||0:s):s},swap:function(e,t,n){var r,i,s={};for(i in t)s[i]=e.style[i],e.style[i]=t[i];r=n.call(e);for(i in t)e.style[i]=s[i];return r}}),e.getComputedStyle?Dt=function(t,n){var r,i,s,o,u=e.getComputedStyle(t,null),a=t.style;return u&&(r=u.getPropertyValue(n)||u[n],r===""&&!v.contains(t.ownerDocument,t)&&(r=v.style(t,n)),Ut.test(r)&&qt.test(n)&&(i=a.width,s=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=r,r=u.width,a.width=i,a.minWidth=s,a.maxWidth=o)),r}:i.documentElement.currentStyle&&(Dt=function(e,t){var n,r,i=e.currentStyle&&e.currentStyle[t],s=e.style;return i==null&&s&&s[t]&&(i=s[t]),Ut.test(i)&&!Ft.test(t)&&(n=s.left,r=e.runtimeStyle&&e.runtimeStyle.left,r&&(e.runtimeStyle.left=e.currentStyle.left),s.left=t==="fontSize"?"1em":i,i=s.pixelLeft+"px",s.left=n,r&&(e.runtimeStyle.left=r)),i===""?"auto":i}),v.each(["height","width"],function(e,t){v.cssHooks[t]={get:function(e,n,r){if(n)return e.offsetWidth===0&&It.test(Dt(e,"display"))?v.swap(e,Xt,function(){return tn(e,t,r)}):tn(e,t,r)},set:function(e,n,r){return Zt(e,n,r?en(e,t,r,v.support.boxSizing&&v.css(e,"boxSizing")==="border-box"):0)}}}),v.support.opacity||(v.cssHooks.opacity={get:function(e,t){return jt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=v.isNumeric(t)?"alpha(opacity="+t*100+")":"",s=r&&r.filter||n.filter||"";n.zoom=1;if(t>=1&&v.trim(s.replace(Bt,""))===""&&n.removeAttribute){n.removeAttribute("filter");if(r&&!r.filter)return}n.filter=Bt.test(s)?s.replace(Bt,i):s+" "+i}}),v(function(){v.support.reliableMarginRight||(v.cssHooks.marginRight={get:function(e,t){return v.swap(e,{display:"inline-block"},function(){if(t)return Dt(e,"marginRight")})}}),!v.support.pixelPosition&&v.fn.position&&v.each(["top","left"],function(e,t){v.cssHooks[t]={get:function(e,n){if(n){var r=Dt(e,t);return Ut.test(r)?v(e).position()[t]+"px":r}}}})}),v.expr&&v.expr.filters&&(v.expr.filters.hidden=function(e){return e.offsetWidth===0&&e.offsetHeight===0||!v.support.reliableHiddenOffsets&&(e.style&&e.style.display||Dt(e,"display"))==="none"},v.expr.filters.visible=function(e){return!v.expr.filters.hidden(e)}),v.each({margin:"",padding:"",border:"Width"},function(e,t){v.cssHooks[e+t]={expand:function(n){var r,i=typeof n=="string"?n.split(" "):[n],s={};for(r=0;r<4;r++)s[e+$t[r]+t]=i[r]||i[r-2]||i[0];return s}},qt.test(e)||(v.cssHooks[e+t].set=Zt)});var rn=/%20/g,sn=/\[\]$/,on=/\r?\n/g,un=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,an=/^(?:select|textarea)/i;v.fn.extend({serialize:function(){return v.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?v.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||an.test(this.nodeName)||un.test(this.type))}).map(function(e,t){var n=v(this).val();return n==null?null:v.isArray(n)?v.map(n,function(e,n){return{name:t.name,value:e.replace(on,"\r\n")}}):{name:t.name,value:n.replace(on,"\r\n")}}).get()}}),v.param=function(e,n){var r,i=[],s=function(e,t){t=v.isFunction(t)?t():t==null?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};n===t&&(n=v.ajaxSettings&&v.ajaxSettings.traditional);if(v.isArray(e)||e.jquery&&!v.isPlainObject(e))v.each(e,function(){s(this.name,this.value)});else for(r in e)fn(r,e[r],n,s);return i.join("&").replace(rn,"+")};var ln,cn,hn=/#.*$/,pn=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,dn=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,vn=/^(?:GET|HEAD)$/,mn=/^\/\//,gn=/\?/,yn=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,bn=/([?&])_=[^&]*/,wn=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,En=v.fn.load,Sn={},xn={},Tn=["*/"]+["*"];try{cn=s.href}catch(Nn){cn=i.createElement("a"),cn.href="",cn=cn.href}ln=wn.exec(cn.toLowerCase())||[],v.fn.load=function(e,n,r){if(typeof e!="string"&&En)return En.apply(this,arguments);if(!this.length)return this;var i,s,o,u=this,a=e.indexOf(" ");return a>=0&&(i=e.slice(a,e.length),e=e.slice(0,a)),v.isFunction(n)?(r=n,n=t):n&&typeof n=="object"&&(s="POST"),v.ajax({url:e,type:s,dataType:"html",data:n,complete:function(e,t){r&&u.each(r,o||[e.responseText,t,e])}}).done(function(e){o=arguments,u.html(i?v("<div>").append(e.replace(yn,"")).find(i):e)}),this},v.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,t){v.fn[t]=function(e){return this.on(t,e)}}),v.each(["get","post"],function(e,n){v[n]=function(e,r,i,s){return v.isFunction(r)&&(s=s||i,i=r,r=t),v.ajax({type:n,url:e,data:r,success:i,dataType:s})}}),v.extend({getScript:function(e,n){return v.get(e,t,n,"script")},getJSON:function(e,t,n){return v.get(e,t,n,"json")},ajaxSetup:function(e,t){return t?Ln(e,v.ajaxSettings):(t=e,e=v.ajaxSettings),Ln(e,t),e},ajaxSettings:{url:cn,isLocal:dn.test(ln[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":Tn},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":v.parseJSON,"text xml":v.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:Cn(Sn),ajaxTransport:Cn(xn),ajax:function(e,n){function T(e,n,s,a){var l,y,b,w,S,T=n;if(E===2)return;E=2,u&&clearTimeout(u),o=t,i=a||"",x.readyState=e>0?4:0,s&&(w=An(c,x,s));if(e>=200&&e<300||e===304)c.ifModified&&(S=x.getResponseHeader("Last-Modified"),S&&(v.lastModified[r]=S),S=x.getResponseHeader("Etag"),S&&(v.etag[r]=S)),e===304?(T="notmodified",l=!0):(l=On(c,w),T=l.state,y=l.data,b=l.error,l=!b);else{b=T;if(!T||e)T="error",e<0&&(e=0)}x.status=e,x.statusText=(n||T)+"",l?d.resolveWith(h,[y,T,x]):d.rejectWith(h,[x,T,b]),x.statusCode(g),g=t,f&&p.trigger("ajax"+(l?"Success":"Error"),[x,c,l?y:b]),m.fireWith(h,[x,T]),f&&(p.trigger("ajaxComplete",[x,c]),--v.active||v.event.trigger("ajaxStop"))}typeof e=="object"&&(n=e,e=t),n=n||{};var r,i,s,o,u,a,f,l,c=v.ajaxSetup({},n),h=c.context||c,p=h!==c&&(h.nodeType||h instanceof v)?v(h):v.event,d=v.Deferred(),m=v.Callbacks("once memory"),g=c.statusCode||{},b={},w={},E=0,S="canceled",x={readyState:0,setRequestHeader:function(e,t){if(!E){var n=e.toLowerCase();e=w[n]=w[n]||e,b[e]=t}return this},getAllResponseHeaders:function(){return E===2?i:null},getResponseHeader:function(e){var n;if(E===2){if(!s){s={};while(n=pn.exec(i))s[n[1].toLowerCase()]=n[2]}n=s[e.toLowerCase()]}return n===t?null:n},overrideMimeType:function(e){return E||(c.mimeType=e),this},abort:function(e){return e=e||S,o&&o.abort(e),T(0,e),this}};d.promise(x),x.success=x.done,x.error=x.fail,x.complete=m.add,x.statusCode=function(e){if(e){var t;if(E<2)for(t in e)g[t]=[g[t],e[t]];else t=e[x.status],x.always(t)}return this},c.url=((e||c.url)+"").replace(hn,"").replace(mn,ln[1]+"//"),c.dataTypes=v.trim(c.dataType||"*").toLowerCase().split(y),c.crossDomain==null&&(a=wn.exec(c.url.toLowerCase()),c.crossDomain=!(!a||a[1]===ln[1]&&a[2]===ln[2]&&(a[3]||(a[1]==="http:"?80:443))==(ln[3]||(ln[1]==="http:"?80:443)))),c.data&&c.processData&&typeof c.data!="string"&&(c.data=v.param(c.data,c.traditional)),kn(Sn,c,n,x);if(E===2)return x;f=c.global,c.type=c.type.toUpperCase(),c.hasContent=!vn.test(c.type),f&&v.active++===0&&v.event.trigger("ajaxStart");if(!c.hasContent){c.data&&(c.url+=(gn.test(c.url)?"&":"?")+c.data,delete c.data),r=c.url;if(c.cache===!1){var N=v.now(),C=c.url.replace(bn,"$1_="+N);c.url=C+(C===c.url?(gn.test(c.url)?"&":"?")+"_="+N:"")}}(c.data&&c.hasContent&&c.contentType!==!1||n.contentType)&&x.setRequestHeader("Content-Type",c.contentType),c.ifModified&&(r=r||c.url,v.lastModified[r]&&x.setRequestHeader("If-Modified-Since",v.lastModified[r]),v.etag[r]&&x.setRequestHeader("If-None-Match",v.etag[r])),x.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+(c.dataTypes[0]!=="*"?", "+Tn+"; q=0.01":""):c.accepts["*"]);for(l in c.headers)x.setRequestHeader(l,c.headers[l]);if(!c.beforeSend||c.beforeSend.call(h,x,c)!==!1&&E!==2){S="abort";for(l in{success:1,error:1,complete:1})x[l](c[l]);o=kn(xn,c,n,x);if(!o)T(-1,"No Transport");else{x.readyState=1,f&&p.trigger("ajaxSend",[x,c]),c.async&&c.timeout>0&&(u=setTimeout(function(){x.abort("timeout")},c.timeout));try{E=1,o.send(b,T)}catch(k){if(!(E<2))throw k;T(-1,k)}}return x}return x.abort()},active:0,lastModified:{},etag:{}});var Mn=[],_n=/\?/,Dn=/(=)\?(?=&|$)|\?\?/,Pn=v.now();v.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Mn.pop()||v.expando+"_"+Pn++;return this[e]=!0,e}}),v.ajaxPrefilter("json jsonp",function(n,r,i){var s,o,u,a=n.data,f=n.url,l=n.jsonp!==!1,c=l&&Dn.test(f),h=l&&!c&&typeof a=="string"&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Dn.test(a);if(n.dataTypes[0]==="jsonp"||c||h)return s=n.jsonpCallback=v.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,o=e[s],c?n.url=f.replace(Dn,"$1"+s):h?n.data=a.replace(Dn,"$1"+s):l&&(n.url+=(_n.test(f)?"&":"?")+n.jsonp+"="+s),n.converters["script json"]=function(){return u||v.error(s+" was not called"),u[0]},n.dataTypes[0]="json",e[s]=function(){u=arguments},i.always(function(){e[s]=o,n[s]&&(n.jsonpCallback=r.jsonpCallback,Mn.push(s)),u&&v.isFunction(o)&&o(u[0]),u=o=t}),"script"}),v.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){return v.globalEval(e),e}}}),v.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),v.ajaxTransport("script",function(e){if(e.crossDomain){var n,r=i.head||i.getElementsByTagName("head")[0]||i.documentElement;return{send:function(s,o){n=i.createElement("script"),n.async="async",e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,i){if(i||!n.readyState||/loaded|complete/.test(n.readyState))n.onload=n.onreadystatechange=null,r&&n.parentNode&&r.removeChild(n),n=t,i||o(200,"success")},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(0,1)}}}});var Hn,Bn=e.ActiveXObject?function(){for(var e in Hn)Hn[e](0,1)}:!1,jn=0;v.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&Fn()||In()}:Fn,function(e){v.extend(v.support,{ajax:!!e,cors:!!e&&"withCredentials"in e})}(v.ajaxSettings.xhr()),v.support.ajax&&v.ajaxTransport(function(n){if(!n.crossDomain||v.support.cors){var r;return{send:function(i,s){var o,u,a=n.xhr();n.username?a.open(n.type,n.url,n.async,n.username,n.password):a.open(n.type,n.url,n.async);if(n.xhrFields)for(u in n.xhrFields)a[u]=n.xhrFields[u];n.mimeType&&a.overrideMimeType&&a.overrideMimeType(n.mimeType),!n.crossDomain&&!i["X-Requested-With"]&&(i["X-Requested-With"]="XMLHttpRequest");try{for(u in i)a.setRequestHeader(u,i[u])}catch(f){}a.send(n.hasContent&&n.data||null),r=function(e,i){var u,f,l,c,h;try{if(r&&(i||a.readyState===4)){r=t,o&&(a.onreadystatechange=v.noop,Bn&&delete Hn[o]);if(i)a.readyState!==4&&a.abort();else{u=a.status,l=a.getAllResponseHeaders(),c={},h=a.responseXML,h&&h.documentElement&&(c.xml=h);try{c.text=a.responseText}catch(p){}try{f=a.statusText}catch(p){f=""}!u&&n.isLocal&&!n.crossDomain?u=c.text?200:404:u===1223&&(u=204)}}}catch(d){i||s(-1,d)}c&&s(u,f,c,l)},n.async?a.readyState===4?setTimeout(r,0):(o=++jn,Bn&&(Hn||(Hn={},v(e).unload(Bn)),Hn[o]=r),a.onreadystatechange=r):r()},abort:function(){r&&r(0,1)}}}});var qn,Rn,Un=/^(?:toggle|show|hide)$/,zn=new RegExp("^(?:([-+])=|)("+m+")([a-z%]*)$","i"),Wn=/queueHooks$/,Xn=[Gn],Vn={"*":[function(e,t){var n,r,i=this.createTween(e,t),s=zn.exec(t),o=i.cur(),u=+o||0,a=1,f=20;if(s){n=+s[2],r=s[3]||(v.cssNumber[e]?"":"px");if(r!=="px"&&u){u=v.css(i.elem,e,!0)||n||1;do a=a||".5",u/=a,v.style(i.elem,e,u+r);while(a!==(a=i.cur()/o)&&a!==1&&--f)}i.unit=r,i.start=u,i.end=s[1]?u+(s[1]+1)*n:n}return i}]};v.Animation=v.extend(Kn,{tweener:function(e,t){v.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");var n,r=0,i=e.length;for(;r<i;r++)n=e[r],Vn[n]=Vn[n]||[],Vn[n].unshift(t)},prefilter:function(e,t){t?Xn.unshift(e):Xn.push(e)}}),v.Tween=Yn,Yn.prototype={constructor:Yn,init:function(e,t,n,r,i,s){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=s||(v.cssNumber[n]?"":"px")},cur:function(){var e=Yn.propHooks[this.prop];return e&&e.get?e.get(this):Yn.propHooks._default.get(this)},run:function(e){var t,n=Yn.propHooks[this.prop];return this.options.duration?this.pos=t=v.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Yn.propHooks._default.set(this),this}},Yn.prototype.init.prototype=Yn.prototype,Yn.propHooks={_default:{get:function(e){var t;return e.elem[e.prop]==null||!!e.elem.style&&e.elem.style[e.prop]!=null?(t=v.css(e.elem,e.prop,!1,""),!t||t==="auto"?0:t):e.elem[e.prop]},set:function(e){v.fx.step[e.prop]?v.fx.step[e.prop](e):e.elem.style&&(e.elem.style[v.cssProps[e.prop]]!=null||v.cssHooks[e.prop])?v.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},Yn.propHooks.scrollTop=Yn.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},v.each(["toggle","show","hide"],function(e,t){var n=v.fn[t];v.fn[t]=function(r,i,s){return r==null||typeof r=="boolean"||!e&&v.isFunction(r)&&v.isFunction(i)?n.apply(this,arguments):this.animate(Zn(t,!0),r,i,s)}}),v.fn.extend({fadeTo:function(e,t,n,r){return this.filter(Gt).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=v.isEmptyObject(e),s=v.speed(t,n,r),o=function(){var t=Kn(this,v.extend({},e),s);i&&t.stop(!0)};return i||s.queue===!1?this.each(o):this.queue(s.queue,o)},stop:function(e,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return typeof e!="string"&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=e!=null&&e+"queueHooks",s=v.timers,o=v._data(this);if(n)o[n]&&o[n].stop&&i(o[n]);else for(n in o)o[n]&&o[n].stop&&Wn.test(n)&&i(o[n]);for(n=s.length;n--;)s[n].elem===this&&(e==null||s[n].queue===e)&&(s[n].anim.stop(r),t=!1,s.splice(n,1));(t||!r)&&v.dequeue(this,e)})}}),v.each({slideDown:Zn("show"),slideUp:Zn("hide"),slideToggle:Zn("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){v.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),v.speed=function(e,t,n){var r=e&&typeof e=="object"?v.extend({},e):{complete:n||!n&&t||v.isFunction(e)&&e,duration:e,easing:n&&t||t&&!v.isFunction(t)&&t};r.duration=v.fx.off?0:typeof r.duration=="number"?r.duration:r.duration in v.fx.speeds?v.fx.speeds[r.duration]:v.fx.speeds._default;if(r.queue==null||r.queue===!0)r.queue="fx";return r.old=r.complete,r.complete=function(){v.isFunction(r.old)&&r.old.call(this),r.queue&&v.dequeue(this,r.queue)},r},v.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},v.timers=[],v.fx=Yn.prototype.init,v.fx.tick=function(){var e,n=v.timers,r=0;qn=v.now();for(;r<n.length;r++)e=n[r],!e()&&n[r]===e&&n.splice(r--,1);n.length||v.fx.stop(),qn=t},v.fx.timer=function(e){e()&&v.timers.push(e)&&!Rn&&(Rn=setInterval(v.fx.tick,v.fx.interval))},v.fx.interval=13,v.fx.stop=function(){clearInterval(Rn),Rn=null},v.fx.speeds={slow:600,fast:200,_default:400},v.fx.step={},v.expr&&v.expr.filters&&(v.expr.filters.animated=function(e){return v.grep(v.timers,function(t){return e===t.elem}).length});var er=/^(?:body|html)$/i;v.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){v.offset.setOffset(this,e,t)});var n,r,i,s,o,u,a,f={top:0,left:0},l=this[0],c=l&&l.ownerDocument;if(!c)return;return(r=c.body)===l?v.offset.bodyOffset(l):(n=c.documentElement,v.contains(n,l)?(typeof l.getBoundingClientRect!="undefined"&&(f=l.getBoundingClientRect()),i=tr(c),s=n.clientTop||r.clientTop||0,o=n.clientLeft||r.clientLeft||0,u=i.pageYOffset||n.scrollTop,a=i.pageXOffset||n.scrollLeft,{top:f.top+u-s,left:f.left+a-o}):f)},v.offset={bodyOffset:function(e){var t=e.offsetTop,n=e.offsetLeft;return v.support.doesNotIncludeMarginInBodyOffset&&(t+=parseFloat(v.css(e,"marginTop"))||0,n+=parseFloat(v.css(e,"marginLeft"))||0),{top:t,left:n}},setOffset:function(e,t,n){var r=v.css(e,"position");r==="static"&&(e.style.position="relative");var i=v(e),s=i.offset(),o=v.css(e,"top"),u=v.css(e,"left"),a=(r==="absolute"||r==="fixed")&&v.inArray("auto",[o,u])>-1,f={},l={},c,h;a?(l=i.position(),c=l.top,h=l.left):(c=parseFloat(o)||0,h=parseFloat(u)||0),v.isFunction(t)&&(t=t.call(e,n,s)),t.top!=null&&(f.top=t.top-s.top+c),t.left!=null&&(f.left=t.left-s.left+h),"using"in t?t.using.call(e,f):i.css(f)}},v.fn.extend({position:function(){if(!this[0])return;var e=this[0],t=this.offsetParent(),n=this.offset(),r=er.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat(v.css(e,"marginTop"))||0,n.left-=parseFloat(v.css(e,"marginLeft"))||0,r.top+=parseFloat(v.css(t[0],"borderTopWidth"))||0,r.left+=parseFloat(v.css(t[0],"borderLeftWidth"))||0,{top:n.top-r.top,left:n.left-r.left}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||i.body;while(e&&!er.test(e.nodeName)&&v.css(e,"position")==="static")e=e.offsetParent;return e||i.body})}}),v.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r=/Y/.test(n);v.fn[e]=function(i){return v.access(this,function(e,i,s){var o=tr(e);if(s===t)return o?n in o?o[n]:o.document.documentElement[i]:e[i];o?o.scrollTo(r?v(o).scrollLeft():s,r?s:v(o).scrollTop()):e[i]=s},e,i,arguments.length,null)}}),v.each({Height:"height",Width:"width"},function(e,n){v.each({padding:"inner"+e,content:n,"":"outer"+e},function(r,i){v.fn[i]=function(i,s){var o=arguments.length&&(r||typeof i!="boolean"),u=r||(i===!0||s===!0?"margin":"border");return v.access(this,function(n,r,i){var s;return v.isWindow(n)?n.document.documentElement["client"+e]:n.nodeType===9?(s=n.documentElement,Math.max(n.body["scroll"+e],s["scroll"+e],n.body["offset"+e],s["offset"+e],s["client"+e])):i===t?v.css(n,r,i,u):v.style(n,r,i,u)},n,o?i:t,o,null)}})}),e.jQuery=e.$=v,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return v})})(window),function(){var e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q,R,U,z,W,X={}.hasOwnProperty,V=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};o=10,c=null,O=null,E=null,N={},f=null,j=((W=document.cookie.match(/request_method=(\w+)/))!=null?W[1].toUpperCase():void 0)||"",z=null,m=function(e){var t;return R("page:fetch"),t=H(e),z!=null&&z.abort(),z=new XMLHttpRequest,z.open("GET",t,!0),z.setRequestHeader("Accept","text/html, application/xhtml+xml, application/xml"),z.setRequestHeader("X-XHR-Referer",O),z.onload=function(){var t;return R("page:receive"),(t=L())?(M(e),u.apply(null,d(t)),_(),document.location.hash?document.location.href=document.location.href:I(),R("page:load")):document.location.href=e},z.onloadend=function(){return z=null},z.onabort=function(){return P()},z.onerror=function(){return document.location.href=e},z.send()},v=function(e){var t;return s(),t=N[e],z!=null&&z.abort(),u(t.title,t.body),A(t),R("page:restore")},s=function(){return N[c.position]={url:document.location.href,body:document.body,title:document.title,positionY:window.pageYOffset,positionX:window.pageXOffset},a(o)},k=function(e){e==null&&(e=o);if(/^[\d]+$/.test(e))return o=parseInt(e)},a=function(e){var t,n;for(t in N){if(!X.call(N,t))continue;n=N[t],t<=c.position-e&&(N[t]=null)}},u=function(t,n,r,i){return document.title=t,document.documentElement.replaceChild(n,document.body),r!=null&&e.update(r),B(),i&&h(),c=window.history.state,R("page:change")},h=function(){var e,t,n,r,i,s,o,u,a,f,l,c;s=Array.prototype.slice.call(document.body.querySelectorAll('script:not([data-turbolinks-eval="false"])'));for(o=0,a=s.length;o<a;o++){i=s[o];if((l=i.type)!==""&&l!=="text/javascript")continue;t=document.createElement("script"),c=i.attributes;for(u=0,f=c.length;u<f;u++)e=c[u],t.setAttribute(e.name,e.value);t.appendChild(document.createTextNode(i.innerHTML)),r=i.parentNode,n=i.nextSibling,r.removeChild(i),r.insertBefore(t,n)}},B=function(){var e,t,n,r;t=Array.prototype.slice.call(document.body.getElementsByTagName("noscript"));for(n=0,r=t.length;n<r;n++)e=t[n],e.parentNode.removeChild(e)},M=function(e){if(e!==O)return window.history.pushState({turbolinks:!0,position:c.position+1},"",e)},_=function(){var e,t;if(e=z.getResponseHeader("X-XHR-Redirected-To"))return t=H(e)===e?document.location.hash:"",window.history.replaceState(c,"",e+t)},P=function(){return window.history.replaceState({turbolinks:!0,position:Date.now()},"",document.location.href)},D=function(){return c=window.history.state},A=function(e){return window.scrollTo(e.positionX,e.positionY)},I=function(){return window.scrollTo(0,0)},H=function(e){var t;return t=e,e.href==null&&(t=document.createElement("A"),t.href=e),t.href.replace(t.hash,"")},R=function(e){var t;return t=document.createEvent("Events"),t.initEvent(e,!0,!0),document.dispatchEvent(t)},C=function(){return!R("page:before-change")},L=function(){var e,t,n,r,i,s;t=function(){var e;return 400<=(e=z.status)&&e<600},s=function(){return z.getResponseHeader("Content-Type").match(/^(?:text\/html|application\/xhtml\+xml|application\/xml)(?:;|$)/)},r=function(e){var t,n,r,i,s;i=e.head.childNodes,s=[];for(n=0,r=i.length;n<r;n++)t=i[n],(typeof t.getAttribute==="function"?t.getAttribute("data-turbolinks-track"):void 0)!=null&&s.push(t.src||t.href);return s},e=function(e){var t;return E||(E=r(document)),t=r(e),t.length!==E.length||i(t,E).length!==E.length},i=function(e,t){var n,r,i,s,o;e.length>t.length&&(s=[t,e],e=s[0],t=s[1]),o=[];for(r=0,i=e.length;r<i;r++)n=e[r],V.call(t,n)>=0&&o.push(n);return o};if(!t()&&s()){n=f(z.responseText);if(n&&!e(n))return n}},d=function(t){var n;return n=t.querySelector("title"),[n!=null?n.textContent:void 0,t.body,e.get(t).token,"runScripts"]},e={get:function(e){var t;return e==null&&(e=document),{node:t=e.querySelector('meta[name="csrf-token"]'),token:t!=null?typeof t.getAttribute=="function"?t.
getAttribute("content"):void 0:void 0}},update:function(e){var t;t=this.get();if(t.token!=null&&e!=null&&t.token!==e)return t.node.setAttribute("content",e)}},n=function(){var e,t,n,r,i,s;t=function(e){return(new DOMParser).parseFromString(e,"text/html")},e=function(e){var t;return t=document.implementation.createHTMLDocument(""),t.documentElement.innerHTML=e,t},n=function(e){var t;return t=document.implementation.createHTMLDocument(""),t.open("replace"),t.write(e),t.close(),t};try{if(window.DOMParser)return i=t("<html><body><p>test"),t}catch(o){return r=o,i=e("<html><body><p>test"),e}finally{if((i!=null?(s=i.body)!=null?s.childNodes.length:void 0:void 0)!==1)return n}},w=function(e){if(!e.defaultPrevented)return document.removeEventListener("click",g,!1),document.addEventListener("click",g,!1)},g=function(e){var t;if(!e.defaultPrevented){t=p(e);if(t.nodeName==="A"&&!y(e,t))return C()||U(t.href),e.preventDefault()}},p=function(e){var t;t=e.target;while(!!t.parentNode&&t.nodeName!=="A")t=t.parentNode;return t},l=function(e){return location.protocol!==e.protocol||location.host!==e.host},t=function(e){return(e.hash&&H(e))===H(location)||e.href===location.href+"#"},x=function(e){var t;return t=H(e),t.match(/\.[a-z]+(\?.*)?$/g)&&!t.match(/\.html?(\?.*)?$/g)},S=function(e){var t;while(!t&&e!==document)t=e.getAttribute("data-no-turbolink")!=null,e=e.parentNode;return t},q=function(e){return e.target.length!==0},T=function(e){return e.which>1||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey},y=function(e,n){return l(n)||t(n)||x(n)||S(n)||q(n)||T(e)},b=function(){return P(),D(),f=n(),document.addEventListener("click",w,!0),window.addEventListener("popstate",function(e){var t;t=e.state;if(t!=null?t.turbolinks:void 0)return N[t.position]?v(t.position):U(e.target.location.href)},!1)},i=window.history&&window.history.pushState&&window.history.replaceState&&window.history.state!==void 0,r=!navigator.userAgent.match(/CriOS\//),F=j==="GET"||j==="",i&&r&&F?(U=function(e){return O=document.location.href,s(),m(e)},b()):U=function(e){return document.location.href=e},this.Turbolinks={visit:U,pagesCached:k}}.call(this),function(){var e=this,t=e._,n={},r=Array.prototype,i=Object.prototype,s=Function.prototype,o=r.push,u=r.slice,a=r.concat,f=i.toString,l=i.hasOwnProperty,c=r.forEach,h=r.map,p=r.reduce,d=r.reduceRight,v=r.filter,m=r.every,g=r.some,y=r.indexOf,b=r.lastIndexOf,w=Array.isArray,E=Object.keys,S=s.bind,x=function(e){return e instanceof x?e:this instanceof x?(this._wrapped=e,void 0):new x(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=x),exports._=x):e._=x,x.VERSION="1.4.3";var T=x.each=x.forEach=function(e,t,r){if(null!=e)if(c&&e.forEach===c)e.forEach(t,r);else if(e.length===+e.length){for(var i=0,s=e.length;s>i;i++)if(t.call(r,e[i],i,e)===n)return}else for(var o in e)if(x.has(e,o)&&t.call(r,e[o],o,e)===n)return};x.map=x.collect=function(e,t,n){var r=[];return null==e?r:h&&e.map===h?e.map(t,n):(T(e,function(e,i,s){r[r.length]=t.call(n,e,i,s)}),r)};var N="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(e,t,n,r){var i=arguments.length>2;if(null==e&&(e=[]),p&&e.reduce===p)return r&&(t=x.bind(t,r)),i?e.reduce(t,n):e.reduce(t);if(T(e,function(e,s,o){i?n=t.call(r,n,e,s,o):(n=e,i=!0)}),!i)throw new TypeError(N);return n},x.reduceRight=x.foldr=function(e,t,n,r){var i=arguments.length>2;if(null==e&&(e=[]),d&&e.reduceRight===d)return r&&(t=x.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var s=e.length;if(s!==+s){var o=x.keys(e);s=o.length}if(T(e,function(u,a,f){a=o?o[--s]:--s,i?n=t.call(r,n,e[a],a,f):(n=e[a],i=!0)}),!i)throw new TypeError(N);return n},x.find=x.detect=function(e,t,n){var r;return C(e,function(e,i,s){return t.call(n,e,i,s)?(r=e,!0):void 0}),r},x.filter=x.select=function(e,t,n){var r=[];return null==e?r:v&&e.filter===v?e.filter(t,n):(T(e,function(e,i,s){t.call(n,e,i,s)&&(r[r.length]=e)}),r)},x.reject=function(e,t,n){return x.filter(e,function(e,r,i){return!t.call(n,e,r,i)},n)},x.every=x.all=function(e,t,r){t||(t=x.identity);var i=!0;return null==e?i:m&&e.every===m?e.every(t,r):(T(e,function(e,s,o){return(i=i&&t.call(r,e,s,o))?void 0:n}),!!i)};var C=x.some=x.any=function(e,t,r){t||(t=x.identity);var i=!1;return null==e?i:g&&e.some===g?e.some(t,r):(T(e,function(e,s,o){return i||(i=t.call(r,e,s,o))?n:void 0}),!!i)};x.contains=x.include=function(e,t){return null==e?!1:y&&e.indexOf===y?-1!=e.indexOf(t):C(e,function(e){return e===t})},x.invoke=function(e,t){var n=u.call(arguments,2);return x.map(e,function(e){return(x.isFunction(t)?t:e[t]).apply(e,n)})},x.pluck=function(e,t){return x.map(e,function(e){return e[t]})},x.where=function(e,t){return x.isEmpty(t)?[]:x.filter(e,function(e){for(var n in t)if(t[n]!==e[n])return!1;return!0})},x.max=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&65535>e.length)return Math.max.apply(Math,e);if(!t&&x.isEmpty(e))return-1/0;var r={computed:-1/0,value:-1/0};return T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o>=r.computed&&(r={value:e,computed:o})}),r.value},x.min=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&65535>e.length)return Math.min.apply(Math,e);if(!t&&x.isEmpty(e))return 1/0;var r={computed:1/0,value:1/0};return T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;r.computed>o&&(r={value:e,computed:o})}),r.value},x.shuffle=function(e){var t,n=0,r=[];return T(e,function(e){t=x.random(n++),r[n-1]=r[t],r[t]=e}),r};var k=function(e){return x.isFunction(e)?e:function(t){return t[e]}};x.sortBy=function(e,t,n){var r=k(t);return x.pluck(x.map(e,function(e,t,i){return{value:e,index:t,criteria:r.call(n,e,t,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(r>n||void 0===r)return-1}return e.index<t.index?-1:1}),"value")};var L=function(e,t,n,r){var i={},s=k(t||x.identity);return T(e,function(t,o){var u=s.call(n,t,o,e);r(i,u,t)}),i};x.groupBy=function(e,t,n){return L(e,t,n,function(e,t,n){(x.has(e,t)?e[t]:e[t]=[]).push(n)})},x.countBy=function(e,t,n){return L(e,t,n,function(e,t){x.has(e,t)||(e[t]=0),e[t]++})},x.sortedIndex=function(e,t,n,r){n=null==n?x.identity:k(n);for(var i=n.call(r,t),s=0,o=e.length;o>s;){var u=s+o>>>1;i>n.call(r,e[u])?s=u+1:o=u}return s},x.toArray=function(e){return e?x.isArray(e)?u.call(e):e.length===+e.length?x.map(e,x.identity):x.values(e):[]},x.size=function(e){return null==e?0:e.length===+e.length?e.length:x.keys(e).length},x.first=x.head=x.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:u.call(e,0,t)},x.initial=function(e,t,n){return u.call(e,0,e.length-(null==t||n?1:t))},x.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:u.call(e,Math.max(e.length-t,0))},x.rest=x.tail=x.drop=function(e,t,n){return u.call(e,null==t||n?1:t)},x.compact=function(e){return x.filter(e,x.identity)};var A=function(e,t,n){return T(e,function(e){x.isArray(e)?t?o.apply(n,e):A(e,t,n):n.push(e)}),n};x.flatten=function(e,t){return A(e,t,[])},x.without=function(e){return x.difference(e,u.call(arguments,1))},x.uniq=x.unique=function(e,t,n,r){x.isFunction(t)&&(r=n,n=t,t=!1);var i=n?x.map(e,n,r):e,s=[],o=[];return T(i,function(n,r){(t?r&&o[o.length-1]===n:x.contains(o,n))||(o.push(n),s.push(e[r]))}),s},x.union=function(){return x.uniq(a.apply(r,arguments))},x.intersection=function(e){var t=u.call(arguments,1);return x.filter(x.uniq(e),function(e){return x.every(t,function(t){return x.indexOf(t,e)>=0})})},x.difference=function(e){var t=a.apply(r,u.call(arguments,1));return x.filter(e,function(e){return!x.contains(t,e)})},x.zip=function(){for(var e=u.call(arguments),t=x.max(x.pluck(e,"length")),n=Array(t),r=0;t>r;r++)n[r]=x.pluck(e,""+r);return n},x.object=function(e,t){if(null==e)return{};for(var n={},r=0,i=e.length;i>r;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},x.indexOf=function(e,t,n){if(null==e)return-1;var r=0,i=e.length;if(n){if("number"!=typeof n)return r=x.sortedIndex(e,t),e[r]===t?r:-1;r=0>n?Math.max(0,i+n):n}if(y&&e.indexOf===y)return e.indexOf(t,n);for(;i>r;r++)if(e[r]===t)return r;return-1},x.lastIndexOf=function(e,t,n){if(null==e)return-1;var r=null!=n;if(b&&e.lastIndexOf===b)return r?e.lastIndexOf(t,n):e.lastIndexOf(t);for(var i=r?n:e.length;i--;)if(e[i]===t)return i;return-1},x.range=function(e,t,n){1>=arguments.length&&(t=e||0,e=0),n=arguments[2]||1;for(var r=Math.max(Math.ceil((t-e)/n),0),i=0,s=Array(r);r>i;)s[i++]=e,e+=n;return s};var O=function(){};x.bind=function(e,t){var n,r;if(e.bind===S&&S)return S.apply(e,u.call(arguments,1));if(!x.isFunction(e))throw new TypeError;return n=u.call(arguments,2),r=function(){if(this instanceof r){O.prototype=e.prototype;var i=new O;O.prototype=null;var s=e.apply(i,n.concat(u.call(arguments)));return Object(s)===s?s:i}return e.apply(t,n.concat(u.call(arguments)))}},x.bindAll=function(e){var t=u.call(arguments,1);return 0==t.length&&(t=x.functions(e)),T(t,function(t){e[t]=x.bind(e[t],e)}),e},x.memoize=function(e,t){var n={};return t||(t=x.identity),function(){var r=t.apply(this,arguments);return x.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},x.delay=function(e,t){var n=u.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},x.defer=function(e){return x.delay.apply(x,[e,1].concat(u.call(arguments,1)))},x.throttle=function(e,t){var n,r,i,s,o=0,u=function(){o=new Date,i=null,s=e.apply(n,r)};return function(){var a=new Date,f=t-(a-o);return n=this,r=arguments,0>=f?(clearTimeout(i),i=null,o=a,s=e.apply(n,r)):i||(i=setTimeout(u,f)),s}},x.debounce=function(e,t,n){var r,i;return function(){var s=this,o=arguments,u=function(){r=null,n||(i=e.apply(s,o))},a=n&&!r;return clearTimeout(r),r=setTimeout(u,t),a&&(i=e.apply(s,o)),i}},x.once=function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}},x.wrap=function(e,t){return function(){var n=[e];return o.apply(n,arguments),t.apply(this,n)}},x.compose=function(){var e=arguments;return function(){for(var t=arguments,n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},x.after=function(e,t){return 0>=e?t():function(){return 1>--e?t.apply(this,arguments):void 0}},x.keys=E||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)x.has(e,n)&&(t[t.length]=n);return t},x.values=function(e){var t=[];for(var n in e)x.has(e,n)&&t.push(e[n]);return t},x.pairs=function(e){var t=[];for(var n in e)x.has(e,n)&&t.push([n,e[n]]);return t},x.invert=function(e){var t={};for(var n in e)x.has(e,n)&&(t[e[n]]=n);return t},x.functions=x.methods=function(e){var t=[];for(var n in e)x.isFunction(e[n])&&t.push(n);return t.sort()},x.extend=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},x.pick=function(e){var t={},n=a.apply(r,u.call(arguments,1));return T(n,function(n){n in e&&(t[n]=e[n])}),t},x.omit=function(e){var t={},n=a.apply(r,u.call(arguments,1));for(var i in e)x.contains(n,i)||(t[i]=e[i]);return t},x.defaults=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)null==e[n]&&(e[n]=t[n])}),e},x.clone=function(e){return x.isObject(e)?x.isArray(e)?e.slice():x.extend({},e):e},x.tap=function(e,t){return t(e),e};var M=function(e,t,n,r){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof x&&(e=e._wrapped),t instanceof x&&(t=t._wrapped);var i=f.call(e);if(i!=f.call(t))return!1;switch(i){case"[object String]":return e==t+"";case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var s=n.length;s--;)if(n[s]==e)return r[s]==t;n.push(e),r.push(t);var o=0,u=!0;if("[object Array]"==i){if(o=e.length,u=o==t.length)for(;o--&&(u=M(e[o],t[o],n,r)););}else{var a=e.constructor,l=t.constructor;if(a!==l&&!(x.isFunction(a)&&a instanceof a&&x.isFunction(l)&&l instanceof l))return!1;for(var c in e)if(x.has(e,c)&&(o++,!(u=x.has(t,c)&&M(e[c],t[c],n,r))))break;if(u){for(c in t)if(x.has(t,c)&&!(o--))break;u=!o}}return n.pop(),r.pop(),u};x.isEqual=function(e,t){return M(e,t,[],[])},x.isEmpty=function(e){if(null==e)return!0;if(x.isArray(e)||x.isString(e))return 0===e.length;for(var t in e)if(x.has(e,t))return!1;return!0},x.isElement=function(e){return!!e&&1===e.nodeType},x.isArray=w||function(e){return"[object Array]"==f.call(e)},x.isObject=function(e){return e===Object(e)},T(["Arguments","Function","String","Number","Date","RegExp"],function(e){x["is"+e]=function(t){return f.call(t)=="[object "+e+"]"}}),x.isArguments(arguments)||(x.isArguments=function(e){return!!e&&!!x.has(e,"callee")}),x.isFunction=function(e){return"function"==typeof e},x.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},x.isNaN=function(e){return x.isNumber(e)&&e!=+e},x.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==f.call(e)},x.isNull=function(e){return null===e},x.isUndefined=function(e){return void 0===e},x.has=function(e,t){return l.call(e,t)},x.noConflict=function(){return e._=t,this},x.identity=function(e){return e},x.times=function(e,t,n){for(var r=Array(e),i=0;e>i;i++)r[i]=t.call(n,i);return r},x.random=function(e,t){return null==t&&(t=e,e=0),e+(0|Math.random()*(t-e+1))};var _={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};_.unescape=x.invert(_.escape);var D={escape:RegExp("["+x.keys(_.escape).join("")+"]","g"),unescape:RegExp("("+x.keys(_.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(e){x[e]=function(t){return null==t?"":(""+t).replace(D[e],function(t){return _[e][t]})}}),x.result=function(e,t){if(null==e)return null;var n=e[t];return x.isFunction(n)?n.call(e):n},x.mixin=function(e){T(x.functions(e),function(t){var n=x[t]=e[t];x.prototype[t]=function(){var e=[this._wrapped];return o.apply(e,arguments),F.call(this,n.apply(x,e))}})};var P=0;x.uniqueId=function(e){var t=""+ ++P;return e?e+t:t},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var H=/(.)^/,B={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},j=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(e,t,n){n=x.defaults({},n,x.templateSettings);var r=RegExp([(n.escape||H).source,(n.interpolate||H).source,(n.evaluate||H).source].join("|")+"|$","g"),i=0,s="__p+='";e.replace(r,function(t,n,r,o,u){return s+=e.slice(i,u).replace(j,function(e){return"\\"+B[e]}),n&&(s+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(s+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),o&&(s+="';\n"+o+"\n__p+='"),i=u+t.length,t}),s+="';\n",n.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{var o=Function(n.variable||"obj","_",s)}catch(u){throw u.source=s,u}if(t)return o(t,x);var a=function(e){return o.call(this,e,x)};return a.source="function("+(n.variable||"obj")+"){\n"+s+"}",a},x.chain=function(e){return x(e).chain()};var F=function(e){return this._chain?x(e).chain():e};x.mixin(x),T(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];x.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!=e&&"splice"!=e||0!==n.length||delete n[0],F.call(this,n)}}),T(["concat","join","slice"],function(e){var t=r[e];x.prototype[e]=function(){return F.call(this,t.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),function(e,t){var n=function(){var t=e._data(document,"events");return t&&t.click&&e.grep(t.click,function(e){return e.namespace==="rails"}).length};n()&&e.error("jquery-ujs has already been loaded!");var r;e.rails=r={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with]",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type])",disableSelector:"input[data-disable-with], button[data-disable-with], textarea[data-disable-with]",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input:file",linkDisableSelector:"a[data-disable-with]",CSRFProtection:function(t){var n=e('meta[name="csrf-token"]').attr("content");n&&t.setRequestHeader("X-CSRF-Token",n)},fire:function(t,n,r){var i=e.Event(n);return t.trigger(i,r),i.result!==!1},confirm:function(e){return confirm(e)},ajax:function(t){return e.ajax(t)},href:function(e){return e.attr("href")},handleRemote:function(n){var i,s,o,u,a,f,l,c;if(r.fire(n,"ajax:before")){u=n.data("cross-domain"),a=u===t?null:u,f=n.data("with-credentials")||null,l=n.data("type")||e.ajaxSettings&&e.ajaxSettings.dataType;if(n.is("form")){i=n.attr("method"),s=n.attr("action"),o=n.serializeArray();var h=n.data("ujs:submit-button");h&&(o.push(h),n.data("ujs:submit-button",null))}else n.is(r.inputChangeSelector)?(i=n.data("method"),s=n.data("url"),o=n.serialize(),n.data("params")&&(o=o+"&"+n.data("params"))):(i=n.data("method"),s=r.href(n),o=n.data("params")||null);c={type:i||"GET",data:o,dataType:l,beforeSend:function(e,i){return i.dataType===t&&e.setRequestHeader("accept","*/*;q=0.5, "+i.accepts.script),r.fire(n,"ajax:beforeSend",[e,i])},success:function(e,t,r){n.trigger("ajax:success",[e,t,r])},complete:function(e,t){n.trigger("ajax:complete",[e,t])},error:function(e,t,r){n.trigger("ajax:error",[e,t,r])},xhrFields:{withCredentials:f},crossDomain:a},s&&(c.url=s);var p=r.ajax(c);return n.trigger("ajax:send",p),p}return!1},handleMethod:function(n){var i=r.href(n),s=n.data("method"),o=n.attr("target"),u=e("meta[name=csrf-token]").attr("content"),a=e("meta[name=csrf-param]").attr("content"),f=e('<form method="post" action="'+i+'"></form>'),l='<input name="_method" value="'+s+'" type="hidden" />';a!==t&&u!==t&&(l+='<input name="'+a+'" value="'+u+'" type="hidden" />'),o&&f.attr("target",o),f.hide().append(l).appendTo("body"),f.submit()},disableFormElements:function(t){t.find(r.disableSelector).each(function(){var t=e(this),n=t.is("button")?"html":"val";t.data("ujs:enable-with",t[n]()),t[n](t.data("disable-with")),t.prop("disabled",!0)})},enableFormElements:function(t){t.find(r.enableSelector).each(function(){var t=e(this),n=t.is("button")?"html":"val";t.data("ujs:enable-with")&&t[n](t.data("ujs:enable-with")),t.prop("disabled",!1)})},allowAction:function(e){var t=e.data("confirm"),n=!1,i;return t?(r.fire(e,"confirm")&&(n=r.confirm(t),i=r.fire(e,"confirm:complete",[n])),n&&i):!0},blankInputs:function(t,n,r){var i=e(),s,o,u=n||"input,textarea",a=t.find(u);return a.each(function(){s=e(this),o=s.is(":checkbox,:radio")?s.is(":checked"):s.val();if(!o==!r){if(s.is(":radio")&&a.filter('input:radio:checked[name="'+s.attr("name")+'"]').length)return!0;i=i.add(s)}}),i.length?i:!1},nonBlankInputs:function(e,t){return r.blankInputs(e,t,!0)},stopEverything:function(t){return e(t.target).trigger("ujs:everythingStopped"),t.stopImmediatePropagation(),!1},callFormSubmitBindings:function(n,r){var i=n.data("events"),s=!0;return i!==t&&i.submit!==t&&e.each(i.submit,function(e,t){if(typeof t.handler=="function")return s=t.handler(r)}),s},disableElement:function(e){e.data("ujs:enable-with",e.html()),e.html(e.data("disable-with")),e.bind("click.railsDisable",function(e){return r.stopEverything(e)})},enableElement:function(e){e.data("ujs:enable-with")!==t&&(e.html(e.data("ujs:enable-with")),e.data("ujs:enable-with",!1)),e.unbind("click.railsDisable")}},r.fire(e(document),"rails:attachBindings")&&(e.ajaxPrefilter(function(e,t,n){e.crossDomain||r.CSRFProtection(n)}),e(document).delegate(r.linkDisableSelector,"ajax:complete",function(){r.enableElement(e(this))}),e(document).delegate(r.linkClickSelector,"click.rails",function(n){var i=e(this),s=i.data("method"),o=i.data("params");if(!r.allowAction(i))return r.stopEverything(n);i.is(r.linkDisableSelector)&&r.disableElement(i);if(i.data("remote")!==t){if((n.metaKey||n.ctrlKey)&&(!s||s==="GET")&&!o)return!0;var u=r.handleRemote(i);return u===!1?r.enableElement(i):u.error(function(){r.enableElement(i)}),!1}if(i.data("method"))return r.handleMethod(i),!1}),e(document).delegate(r.inputChangeSelector,"change.rails",function(t){var n=e(this);return r.allowAction(n)?(r.handleRemote(n),!1):r.stopEverything(t)}),e(document).delegate(r.formSubmitSelector,"submit.rails",function(n){var i=e(this),s=i.data("remote")!==t,o=r.blankInputs(i,r.requiredInputSelector),u=r.nonBlankInputs(i,r.fileInputSelector);if(!r.allowAction(i))return r.stopEverything(n);if(o&&i.attr("novalidate")==t&&r.fire(i,"ajax:aborted:required",[o]))return r.stopEverything(n);if(s){if(u){setTimeout(function(){r.disableFormElements(i)},13);var a=r.fire(i,"ajax:aborted:file",[u]);return a||setTimeout(function(){r.enableFormElements(i)},13),a}return!e.support.submitBubbles&&e().jquery<"1.7"&&r.callFormSubmitBindings(i,n)===!1?r.stopEverything(n):(r.handleRemote(i),!1)}setTimeout(function(){r.disableFormElements(i)},13)}),e(document).delegate(r.formInputClickSelector,"click.rails",function(t){var n=e(this);if(!r.allowAction(n))return r.stopEverything(t);var i=n.attr("name"),s=i?{name:i,value:n.val()}:null;n.closest("form").data("ujs:submit-button",s)}),e(document).delegate(r.formSubmitSelector,"ajax:beforeSend.rails",function(t){this==t.target&&r.disableFormElements(e(this))}),e(document).delegate(r.formSubmitSelector,"ajax:complete.rails",function(t){this==t.target&&r.enableFormElements(e(this))}),e(function(){csrf_token=e("meta[name=csrf-token]").attr("content"),csrf_param=e("meta[name=csrf-param]").attr("content"),e('form input[name="'+csrf_param+'"]').val(csrf_token)}))}(jQuery),function(e,t){function n(t,n){var i,s,o,u=t.nodeName.toLowerCase();return"area"===u?(i=t.parentNode,s=i.name,!t.href||!s||i.nodeName.toLowerCase()!=="map"?!1:(o=e("img[usemap=#"+s+"]")[0],!!o&&r(o))):(/input|select|textarea|button|object/.test(u)?!t.disabled:"a"===u?t.href||n:n)&&r(t)}function r(t){return e.expr.filters.visible(t)&&!e(t).parents().andSelf().filter(function(){return e.css(this,"visibility")==="hidden"}).length}var i=0,s=/^ui-id-\d+$/;e.ui=e.ui||{};if(e.ui.version)return;e.extend(e.ui,{version:"1.9.2",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({_focus:e.fn.focus,focus:function(t,n){return typeof t=="number"?this.each(function(){var r=this;setTimeout(function(){e(r).focus(),n&&n.call(r)},t)}):this._focus.apply(this,arguments)},scrollParent:function(){var t;return e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?t=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):t=this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(n){if(n!==t)return this.css("zIndex",n);if(this.length){var r=e(this[0]),i,s;while(r.length&&r[0]!==document){i=r.css("position");if(i==="absolute"||i==="relative"||i==="fixed"){s=parseInt(r.css("zIndex"),10);if(!isNaN(s)&&s!==0)return s}r=r.parent()}}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++i)})},removeUniqueId:function(){return this.each(function(){s.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,r){return!!e.data(t,r[3])},focusable:function(t){return n(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var r=e.attr(t,"tabindex"),i=isNaN(r);return(i||r>=0)&&n(t,!i)}}),e(function(){var t=document.body,n=t.appendChild(n=document.createElement("div"));n.offsetHeight,e.extend(n.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),e.support.minHeight=n.offsetHeight===100,e.support.selectstart="onselectstart"in n,t.removeChild(n).style.display="none"}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(n,r){function i(t,n,r,i){return e.each(s,function(){n-=parseFloat(e.css(t,"padding"+this))||0,r&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),i&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}var s=r==="Width"?["Left","Right"]:["Top","Bottom"],o=r.toLowerCase(),u={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+r]=function(n){return n===t?u["inner"+r].call(this):this.each(function(){e(this).css(o,i(this,n)+"px")})},e.fn["outer"+r]=function(t,n){return typeof t!="number"?u["outer"+r].call(this,t):this.each(function(){e(this).css(o,i(this,t,!0,n)+"px")})}}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(n){return arguments.length?t.call(this,e.camelCase(n)):t.call(this)}}(e.fn.removeData)),function(){var t=/msie ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||[];e.ui.ie=t.length?!0:!1,e.ui.ie6=parseFloat(t[1],10)===6}(),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,n,r){var i,s=e.ui[t].prototype;for(i in r)s.plugins[i]=s.plugins[i]||[],s.plugins[i].push([n,r[i]])},call:function(e,t,n){var r,i=e.plugins[t];if(!i||!e.element[0].parentNode||e.element[0].parentNode.nodeType===11)return;for(r=0;r<i.length;r++)e.options[i[r][0]]&&i[r][1].apply(e.element,n)}},contains:e.contains,hasScroll:function(t,n){if(e(t).css("overflow")==="hidden")return!1;var r=n&&n==="left"?"scrollLeft":"scrollTop",i=!1;return t[r]>0?!0:(t[r]=1,i=t[r]>0,t[r]=0,i)},isOverAxis:function(e,t,n){return e>t&&e<t+n},isOver:function(t,n,r,i,s,o){return e.ui.isOverAxis(t,r,s)&&e.ui.isOverAxis(n,i,o)}})}(jQuery),function(e,t){var n=0,r=Array.prototype.slice,i=e.cleanData;e.cleanData=function(t){for(var n=0,r;(r=t[n])!=null;n++)try{e(r).triggerHandler("remove")}catch(s){}i(t)},e.widget=function(t,n,r){var i,s,o,u,a=t.split(".")[0];t=t.split(".")[1],i=a+"-"+t,r||(r=n,n=e.Widget),e.expr[":"][i.toLowerCase()]=function(t){return!!e.data(t,i)},e[a]=e[a]||{},s=e[a][t],o=e[a][t]=function(e,t){if(!this._createWidget)return new o(e,t);arguments.length&&this._createWidget(e,t)},e.extend(o,s,{version:r.version,_proto:e.extend({},r),_childConstructors:[]}),u=new n,u.options=e.widget.extend({},u.options),e.each(r,function(t,i){e.isFunction(i)&&(r[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},r=function(e){return n.prototype[t].apply(this,e)};return function(){var t=this._super,n=this._superApply,s;return this._super=e,this._superApply=r,s=i.apply(this,arguments),this._super=t,this._superApply=n,s}}())}),o.prototype=e.widget.extend(u,{widgetEventPrefix:s?u.widgetEventPrefix:t},r,{constructor:o,namespace:a,widgetName:t,widgetBaseClass:i,widgetFullName:i}),s?(e.each(s._childConstructors,function(t,n){var r=n.prototype;e.widget(r.namespace+"."+r.widgetName,o,n._proto)}),delete s._childConstructors):n._childConstructors.push(o),e.widget.bridge(t,o)},e.widget.extend=function(n){var i=r.call(arguments,1),s=0,o=i.length,u,a;for(;s<o;s++)for(u in i[s])a=i[s][u],i[s].hasOwnProperty(u)&&a!==t&&(e.isPlainObject(a)?n[u]=e.isPlainObject(n[u])?e.widget.extend({},n[u],a):e.widget.extend({},a):n[u]=a);return n},e.widget.bridge=function(n,i){var s=i.prototype.widgetFullName||n;e.fn[n]=function(o){var u=typeof o=="string",a=r.call(arguments,1),f=this;return o=!u&&a.length?e.widget.extend.apply(null,[o].concat(a)):o,u?this.each(function(){var r,i=e.data(this,s);if(!i)return e.error("cannot call methods on "+n+" prior to initialization; "+"attempted to call method '"+o+"'");if(!e.isFunction(i[o])||o.charAt(0)==="_")return e.error("no such method '"+o+"' for "+n+" widget instance");r=i[o].apply(i,a);if(r!==i&&r!==t)return f=r&&r.jquery?f.pushStack(r.get()):r,!1}):this.each(function(){var t=e.data(this,s);t?t.option(o||{})._init():e.data(this,s,new i(o,this))}),f}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,r){r=e(r||this.defaultElement||this)[0],this.element=e(r),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),r!==this&&(e.data(r,this.widgetName,this),e.data(r,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===r&&this.destroy()}}),this.document=e(r.style?r.ownerDocument:r.document||r),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(n,r){var i=n,s,o,u;if(arguments.length===0)return e.widget.extend({},this.options);if(typeof n=="string"){i={},s=n.split("."),n=s.shift();if(s.length){o=i[n]=e.widget.extend({},this.options[n]);for(u=0;u<s.length-1;u++)o[s[u]]=o[s[u]]||{},o=o[s[u]];n=s.pop();if(r===t)return o[n]===t?null:o[n];o[n]=r}else{if(r===t)return this.options[n]===t?null:this.options[n];i[n]=r}}return this._setOptions(i),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,e==="disabled"&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,n,r){var i,s=this;typeof t!="boolean"&&(r=n,n=t,t=!1),r?(n=i=e(n),this.bindings=this.bindings.add(n)):(r=n,n=this.element,i=this.widget()),e.each(r,function(r,o){function u(){if(!t&&(s.options.disabled===!0||e(this).hasClass("ui-state-disabled")))return;return(typeof o=="string"?s[o]:o).apply(s,arguments)}typeof o!="string"&&(u.guid=o.guid=o.guid||u.guid||e.guid++);var a=r.match(/^(\w+)\s*(.*)$/),f=a[1]+s.eventNamespace,l=a[2];l?i.delegate(l,f,u):n.bind(f,u)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function n(){return(typeof e=="string"?r[e]:e).apply(r,arguments)}var r=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,r){var i,s,o=this.options[t];r=r||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],s=n.originalEvent;if(s)for(i in s)i in n||(n[i]=s[i]);return this.element.trigger(n,r),!(e.isFunction(o)&&o.apply(this.element[0],[n].concat(r))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(r,i,s){typeof i=="string"&&(i={effect:i});var o,u=i?i===!0||typeof i=="number"?n:i.effect||n:t;i=i||{},typeof i=="number"&&(i={duration:i}),o=!e.isEmptyObject(i),i.complete=s,i.delay&&r.delay(i.delay),o&&e.effects&&(e.effects.effect[u]||e.
uiBackCompat!==!1&&e.effects[u])?r[t](i):u!==t&&r[u]?r[u](i.duration,i.easing,s):r.queue(function(n){e(this)[t](),s&&s.call(r[0]),n()})}}),e.uiBackCompat!==!1&&(e.Widget.prototype._getCreateOptions=function(){return e.metadata&&e.metadata.get(this.element[0])[this.widgetName]})}(jQuery),function(e,t){var n=!1;e(document).mouseup(function(e){n=!1}),e.widget("ui.mouse",{version:"1.9.2",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){if(!0===e.data(n.target,t.widgetName+".preventClickEvent"))return e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(n)return;this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var r=this,i=t.which===1,s=typeof this.options.cancel=="string"&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;if(!i||s||!this._mouseCapture(t))return!0;this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){r.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)){this._mouseStarted=this._mouseStart(t)!==!1;if(!this._mouseStarted)return t.preventDefault(),!0}return!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return r._mouseMove(e)},this._mouseUpDelegate=function(e){return r._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),n=!0,!0},_mouseMove:function(t){return!e.ui.ie||document.documentMode>=9||!!t.button?this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted):this._mouseUp(t)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(e){return this.mouseDelayMet},_mouseStart:function(e){},_mouseDrag:function(e){},_mouseStop:function(e){},_mouseCapture:function(e){return!0}})}(jQuery),function(e,t){e.widget("ui.sortable",e.ui.mouse,{version:"1.9.2",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?e.axis==="x"||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,n){t==="disabled"?(this.options[t]=n,this.widget().toggleClass("ui-sortable-disabled",!!n)):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,n){var r=this;if(this.reverting)return!1;if(this.options.disabled||this.options.type=="static")return!1;this._refreshItems(t);var i=null,s=e(t.target).parents().each(function(){if(e.data(this,r.widgetName+"-item")==r)return i=e(this),!1});e.data(t.target,r.widgetName+"-item")==r&&(i=e(t.target));if(!i)return!1;if(this.options.handle&&!n){var o=!1;e(this.options.handle,i).find("*").andSelf().each(function(){this==t.target&&(o=!0)});if(!o)return!1}return this.currentItem=i,this._removeCurrentsFromItems(),!0},_mouseStart:function(t,n,r){var i=this.options;this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),i.containment&&this._setContainment(),i.cursor&&(e("body").css("cursor")&&(this._storedCursor=e("body").css("cursor")),e("body").css("cursor",i.cursor)),i.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",i.opacity)),i.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",i.zIndex)),this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions();if(!r)for(var s=this.containers.length-1;s>=0;s--)this.containers[s]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);if(this.options.scroll){var n=this.options,r=!1;this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<n.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+n.scrollSpeed:t.pageY-this.overflowOffset.top<n.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-n.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<n.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+n.scrollSpeed:t.pageX-this.overflowOffset.left<n.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-n.scrollSpeed)):(t.pageY-e(document).scrollTop()<n.scrollSensitivity?r=e(document).scrollTop(e(document).scrollTop()-n.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<n.scrollSensitivity&&(r=e(document).scrollTop(e(document).scrollTop()+n.scrollSpeed)),t.pageX-e(document).scrollLeft()<n.scrollSensitivity?r=e(document).scrollLeft(e(document).scrollLeft()-n.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<n.scrollSensitivity&&(r=e(document).scrollLeft(e(document).scrollLeft()+n.scrollSpeed))),r!==!1&&e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";for(var i=this.items.length-1;i>=0;i--){var s=this.items[i],o=s.item[0],u=this._intersectsWithPointer(s);if(!u)continue;if(s.instance!==this.currentContainer)continue;if(o!=this.currentItem[0]&&this.placeholder[u==1?"next":"prev"]()[0]!=o&&!e.contains(this.placeholder[0],o)&&(this.options.type=="semi-dynamic"?!e.contains(this.element[0],o):!0)){this.direction=u==1?"down":"up";if(this.options.tolerance!="pointer"&&!this._intersectsWithSides(s))break;this._rearrange(t,s),this._trigger("change",t,this._uiHash());break}}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,n){if(!t)return;e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t);if(this.options.revert){var r=this,i=this.placeholder.offset();this.reverting=!0,e(this.helper).animate({left:i.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:i.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){r._clear(t)})}else this._clear(t,n);return!1},cancel:function(){if(this.dragging){this._mouseUp({target:null}),this.options.helper=="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.options.helper!="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},e(n).each(function(){var n=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[-=_](.+)/);n&&r.push((t.key||n[1]+"[]")+"="+(t.key&&t.expression?n[1]:n[2]))}),!r.length&&t.key&&r.push(t.key+"="),r.join("&")},toArray:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},n.each(function(){r.push(e(t.item||this).attr(t.attribute||"id")||"")}),r},_intersectsWith:function(e){var t=this.positionAbs.left,n=t+this.helperProportions.width,r=this.positionAbs.top,i=r+this.helperProportions.height,s=e.left,o=s+e.width,u=e.top,a=u+e.height,f=this.offset.click.top,l=this.offset.click.left,c=r+f>u&&r+f<a&&t+l>s&&t+l<o;return this.options.tolerance=="pointer"||this.options.forcePointerForContainers||this.options.tolerance!="pointer"&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?c:s<t+this.helperProportions.width/2&&n-this.helperProportions.width/2<o&&u<r+this.helperProportions.height/2&&i-this.helperProportions.height/2<a},_intersectsWithPointer:function(t){var n=this.options.axis==="x"||e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),r=this.options.axis==="y"||e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),i=n&&r,s=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return i?this.floating?o&&o=="right"||s=="down"?2:1:s&&(s=="down"?2:1):!1},_intersectsWithSides:function(t){var n=e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),r=e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),i=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return this.floating&&s?s=="right"&&r||s=="left"&&!r:i&&(i=="down"&&n||i=="up"&&!n)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return e!=0&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return e!=0&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor==String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var n=[],r=[],i=this._connectWith();if(i&&t)for(var s=i.length-1;s>=0;s--){var o=e(i[s]);for(var u=o.length-1;u>=0;u--){var a=e.data(o[u],this.widgetName);a&&a!=this&&!a.options.disabled&&r.push([e.isFunction(a.options.items)?a.options.items.call(a.element):e(a.options.items,a.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),a])}}r.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(var s=r.length-1;s>=0;s--)r[s][0].each(function(){n.push(this)});return e(n)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var n=0;n<t.length;n++)if(t[n]==e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var n=this.items,r=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],i=this._connectWith();if(i&&this.ready)for(var s=i.length-1;s>=0;s--){var o=e(i[s]);for(var u=o.length-1;u>=0;u--){var a=e.data(o[u],this.widgetName);a&&a!=this&&!a.options.disabled&&(r.push([e.isFunction(a.options.items)?a.options.items.call(a.element[0],t,{item:this.currentItem}):e(a.options.items,a.element),a]),this.containers.push(a))}}for(var s=r.length-1;s>=0;s--){var f=r[s][1],l=r[s][0];for(var u=0,c=l.length;u<c;u++){var h=e(l[u]);h.data(this.widgetName+"-item",f),n.push({item:h,instance:f,width:0,height:0,left:0,top:0})}}},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var n=this.items.length-1;n>=0;n--){var r=this.items[n];if(r.instance!=this.currentContainer&&this.currentContainer&&r.item[0]!=this.currentItem[0])continue;var i=this.options.toleranceElement?e(this.options.toleranceElement,r.item):r.item;t||(r.width=i.outerWidth(),r.height=i.outerHeight());var s=i.offset();r.left=s.left,r.top=s.top}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(var n=this.containers.length-1;n>=0;n--){var s=this.containers[n].element.offset();this.containers[n].containerCache.left=s.left,this.containers[n].containerCache.top=s.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight()}return this},_createPlaceholder:function(t){t=t||this;var n=t.options;if(!n.placeholder||n.placeholder.constructor==String){var r=n.placeholder;n.placeholder={element:function(){var n=e(document.createElement(t.currentItem[0].nodeName)).addClass(r||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return r||(n.style.visibility="hidden"),n},update:function(e,i){if(r&&!n.forcePlaceholderSize)return;i.height()||i.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),i.width()||i.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10))}}}t.placeholder=e(n.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),n.placeholder.update(t,t.placeholder)},_contactContainers:function(t){var n=null,r=null;for(var i=this.containers.length-1;i>=0;i--){if(e.contains(this.currentItem[0],this.containers[i].element[0]))continue;if(this._intersectsWith(this.containers[i].containerCache)){if(n&&e.contains(this.containers[i].element[0],n.element[0]))continue;n=this.containers[i],r=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",t,this._uiHash(this)),this.containers[i].containerCache.over=0)}if(!n)return;if(this.containers.length===1)this.containers[r]._trigger("over",t,this._uiHash(this)),this.containers[r].containerCache.over=1;else{var s=1e4,o=null,u=this.containers[r].floating?"left":"top",a=this.containers[r].floating?"width":"height",f=this.positionAbs[u]+this.offset.click[u];for(var l=this.items.length-1;l>=0;l--){if(!e.contains(this.containers[r].element[0],this.items[l].item[0]))continue;if(this.items[l].item[0]==this.currentItem[0])continue;var c=this.items[l].item.offset()[u],h=!1;Math.abs(c-f)>Math.abs(c+this.items[l][a]-f)&&(h=!0,c+=this.items[l][a]),Math.abs(c-f)<s&&(s=Math.abs(c-f),o=this.items[l],this.direction=h?"up":"down")}if(!o&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[r],o?this._rearrange(t,o,null,!0):this._rearrange(t,null,this.containers[r].element,!0),this._trigger("change",t,this._uiHash()),this.containers[r]._trigger("change",t,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[r]._trigger("over",t,this._uiHash(this)),this.containers[r].containerCache.over=1}},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t,this.currentItem])):n.helper=="clone"?this.currentItem.clone():this.currentItem;return r.parents("body").length||e(n.appendTo!="parent"?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(r[0]),r[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(r[0].style.width==""||n.forceHelperSize)&&r.width(this.currentItem.width()),(r[0].style.height==""||n.forceHelperSize)&&r.height(this.currentItem.height()),r},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&e.ui.ie)t={top:0,left:0};return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;t.containment=="parent"&&(t.containment=this.helper[0].parentNode);if(t.containment=="document"||t.containment=="window")this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e(t.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(e(t.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(t.containment)){var n=e(t.containment)[0],r=e(t.containment).offset(),i=e(n).css("overflow")!="hidden";this.containment=[r.left+(parseInt(e(n).css("borderLeftWidth"),10)||0)+(parseInt(e(n).css("paddingLeft"),10)||0)-this.margins.left,r.top+(parseInt(e(n).css("borderTopWidth"),10)||0)+(parseInt(e(n).css("paddingTop"),10)||0)-this.margins.top,r.left+(i?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(e(n).css("borderLeftWidth"),10)||0)-(parseInt(e(n).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,r.top+(i?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(e(n).css("borderTopWidth"),10)||0)-(parseInt(e(n).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(t,n){n||(n=this.position);var r=t=="absolute"?1:-1,i=this.options,s=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(s[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():o?0:s.scrollTop())*r,left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():o?0:s.scrollLeft())*r}},_generatePosition:function(t){var n=this.options,r=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=/(html|body)/i.test(r[0].tagName);this.cssPosition=="relative"&&(this.scrollParent[0]==document||this.scrollParent[0]==this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset());var s=t.pageX,o=t.pageY;if(this.originalPosition){this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(s=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(s=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top));if(n.grid){var u=this.originalPageY+Math.round((o-this.originalPageY)/n.grid[1])*n.grid[1];o=this.containment?u-this.offset.click.top<this.containment[1]||u-this.offset.click.top>this.containment[3]?u-this.offset.click.top<this.containment[1]?u+n.grid[1]:u-n.grid[1]:u:u;var a=this.originalPageX+Math.round((s-this.originalPageX)/n.grid[0])*n.grid[0];s=this.containment?a-this.offset.click.left<this.containment[0]||a-this.offset.click.left>this.containment[2]?a-this.offset.click.left<this.containment[0]?a+n.grid[0]:a-n.grid[0]:a:a}}return{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():i?0:r.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():i?0:r.scrollLeft())}},_rearrange:function(e,t,n,r){n?n[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],this.direction=="down"?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var i=this.counter;this._delay(function(){i==this.counter&&this.refreshPositions(!r)})},_clear:function(t,n){this.reverting=!1;var r=[];!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var i in this._storedCSS)if(this._storedCSS[i]=="auto"||this._storedCSS[i]=="static")this._storedCSS[i]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!n&&r.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!n&&r.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(n||(r.push(function(e){this._trigger("remove",e,this._uiHash())}),r.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),r.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer))));for(var i=this.containers.length-1;i>=0;i--)n||r.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over&&(r.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over=0);this._storedCursor&&e("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex",this._storedZIndex=="auto"?"":this._storedZIndex),this.dragging=!1;if(this.cancelHelperRemoval){if(!n){this._trigger("beforeStop",t,this._uiHash());for(var i=0;i<r.length;i++)r[i].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!1}n||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null;if(!n){for(var i=0;i<r.length;i++)r[i].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var n=t||this;return{helper:n.helper,placeholder:n.placeholder||e([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:t?t.element:null}}})}(jQuery),jQuery.effects||function(e,t){var n=e.uiBackCompat!==!1,r="ui-effects-";e.effects={effect:{}},function(t,n){function r(e,t,n){var r=c[t.type]||{};return e==null?n||!t.def?null:t.def:(e=r.floor?~~e:parseFloat(e),isNaN(e)?t.def:r.mod?(e+r.mod)%r.mod:0>e?0:r.max<e?r.max:e)}function i(e){var n=f(),r=n._rgba=[];return e=e.toLowerCase(),v(a,function(t,i){var s,o=i.re.exec(e),u=o&&i.parse(o),a=i.space||"rgba";if(u)return s=n[a](u),n[l[a].cache]=s[l[a].cache],r=n._rgba=s._rgba,!1}),r.length?(r.join()==="0,0,0,0"&&t.extend(r,d.transparent),n):d[e]}function s(e,t,n){return n=(n+1)%1,n*6<1?e+(t-e)*n*6:n*2<1?t:n*3<2?e+(t-e)*(2/3-n)*6:e}var o="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor".split(" "),u=/^([\-+])=\s*(\d+\.?\d*)/,a=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1]*2.55,e[2]*2.55,e[3]*2.55,e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],f=t.Color=function(e,n,r,i){return new t.Color.fn.parse(e,n,r,i)},l={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},c={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},h=f.support={},p=t("<p>")[0],d,v=t.each;p.style.cssText="background-color:rgba(1,1,1,.5)",h.rgba=p.style.backgroundColor.indexOf("rgba")>-1,v(l,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),f.fn=t.extend(f.prototype,{parse:function(s,o,u,a){if(s===n)return this._rgba=[null,null,null,null],this;if(s.jquery||s.nodeType)s=t(s).css(o),o=n;var c=this,h=t.type(s),p=this._rgba=[];o!==n&&(s=[s,o,u,a],h="array");if(h==="string")return this.parse(i(s)||d._default);if(h==="array")return v(l.rgba.props,function(e,t){p[t.idx]=r(s[t.idx],t)}),this;if(h==="object")return s instanceof f?v(l,function(e,t){s[t.cache]&&(c[t.cache]=s[t.cache].slice())}):v(l,function(t,n){var i=n.cache;v(n.props,function(e,t){if(!c[i]&&n.to){if(e==="alpha"||s[e]==null)return;c[i]=n.to(c._rgba)}c[i][t.idx]=r(s[e],t,!0)}),c[i]&&e.inArray(null,c[i].slice(0,3))<0&&(c[i][3]=1,n.from&&(c._rgba=n.from(c[i])))}),this},is:function(e){var t=f(e),n=!0,r=this;return v(l,function(e,i){var s,o=t[i.cache];return o&&(s=r[i.cache]||i.to&&i.to(r._rgba)||[],v(i.props,function(e,t){if(o[t.idx]!=null)return n=o[t.idx]===s[t.idx],n})),n}),n},_space:function(){var e=[],t=this;return v(l,function(n,r){t[r.cache]&&e.push(n)}),e.pop()},transition:function(e,t){var n=f(e),i=n._space(),s=l[i],o=this.alpha()===0?f("transparent"):this,u=o[s.cache]||s.to(o._rgba),a=u.slice();return n=n[s.cache],v(s.props,function(e,i){var s=i.idx,o=u[s],f=n[s],l=c[i.type]||{};if(f===null)return;o===null?a[s]=f:(l.mod&&(f-o>l.mod/2?o+=l.mod:o-f>l.mod/2&&(o-=l.mod)),a[s]=r((f-o)*t+o,i))}),this[i](a)},blend:function(e){if(this._rgba[3]===1)return this;var n=this._rgba.slice(),r=n.pop(),i=f(e)._rgba;return f(t.map(n,function(e,t){return(1-r)*i[t]+r*e}))},toRgbaString:function(){var e="rgba(",n=t.map(this._rgba,function(e,t){return e==null?t>2?1:0:e});return n[3]===1&&(n.pop(),e="rgb("),e+n.join()+")"},toHslaString:function(){var e="hsla(",n=t.map(this.hsla(),function(e,t){return e==null&&(e=t>2?1:0),t&&t<3&&(e=Math.round(e*100)+"%"),e});return n[3]===1&&(n.pop(),e="hsl("),e+n.join()+")"},toHexString:function(e){var n=this._rgba.slice(),r=n.pop();return e&&n.push(~~(r*255)),"#"+t.map(n,function(e){return e=(e||0).toString(16),e.length===1?"0"+e:e}).join("")},toString:function(){return this._rgba[3]===0?"transparent":this.toRgbaString()}}),f.fn.parse.prototype=f.fn,l.hsla.to=function(e){if(e[0]==null||e[1]==null||e[2]==null)return[null,null,null,e[3]];var t=e[0]/255,n=e[1]/255,r=e[2]/255,i=e[3],s=Math.max(t,n,r),o=Math.min(t,n,r),u=s-o,a=s+o,f=a*.5,l,c;return o===s?l=0:t===s?l=60*(n-r)/u+360:n===s?l=60*(r-t)/u+120:l=60*(t-n)/u+240,f===0||f===1?c=f:f<=.5?c=u/a:c=u/(2-a),[Math.round(l)%360,c,f,i==null?1:i]},l.hsla.from=function(e){if(e[0]==null||e[1]==null||e[2]==null)return[null,null,null,e[3]];var t=e[0]/360,n=e[1],r=e[2],i=e[3],o=r<=.5?r*(1+n):r+n-r*n,u=2*r-o;return[Math.round(s(u,o,t+1/3)*255),Math.round(s(u,o,t)*255),Math.round(s(u,o,t-1/3)*255),i]},v(l,function(e,i){var s=i.props,o=i.cache,a=i.to,l=i.from;f.fn[e]=function(e){a&&!this[o]&&(this[o]=a(this._rgba));if(e===n)return this[o].slice();var i,u=t.type(e),c=u==="array"||u==="object"?e:arguments,h=this[o].slice();return v(s,function(e,t){var n=c[u==="object"?e:t.idx];n==null&&(n=h[t.idx]),h[t.idx]=r(n,t)}),l?(i=f(l(h)),i[o]=h,i):f(h)},v(s,function(n,r){if(f.fn[n])return;f.fn[n]=function(i){var s=t.type(i),o=n==="alpha"?this._hsla?"hsla":"rgba":e,a=this[o](),f=a[r.idx],l;return s==="undefined"?f:(s==="function"&&(i=i.call(this,f),s=t.type(i)),i==null&&r.empty?this:(s==="string"&&(l=u.exec(i),l&&(i=f+parseFloat(l[2])*(l[1]==="+"?1:-1))),a[r.idx]=i,this[o](a)))}})}),v(o,function(e,n){t.cssHooks[n]={set:function(e,r){var s,o,u="";if(t.type(r)!=="string"||(s=i(r))){r=f(s||r);if(!h.rgba&&r._rgba[3]!==1){o=n==="backgroundColor"?e.parentNode:e;while((u===""||u==="transparent")&&o&&o.style)try{u=t.css(o,"backgroundColor"),o=o.parentNode}catch(a){}r=r.blend(u&&u!=="transparent"?u:"_default")}r=r.toRgbaString()}try{e.style[n]=r}catch(l){}}},t.fx.step[n]=function(e){e.colorInit||(e.start=f(e.elem,n),e.end=f(e.end),e.colorInit=!0),t.cssHooks[n].set(e.elem,e.start.transition(e.end,e.pos))}}),t.cssHooks.borderColor={expand:function(e){var t={};return v(["Top","Right","Bottom","Left"],function(n,r){t["border"+r+"Color"]=e}),t}},d=t.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",
navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function n(){var t=this.ownerDocument.defaultView?this.ownerDocument.defaultView.getComputedStyle(this,null):this.currentStyle,n={},r,i;if(t&&t.length&&t[0]&&t[t[0]]){i=t.length;while(i--)r=t[i],typeof t[r]=="string"&&(n[e.camelCase(r)]=t[r])}else for(r in t)typeof t[r]=="string"&&(n[r]=t[r]);return n}function r(t,n){var r={},i,o;for(i in n)o=n[i],t[i]!==o&&!s[i]&&(e.fx.step[i]||!isNaN(parseFloat(o)))&&(r[i]=o);return r}var i=["add","remove","toggle"],s={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,n){e.fx.step[n]=function(e){if(e.end!=="none"&&!e.setAttr||e.pos===1&&!e.setAttr)jQuery.style(e.elem,n,e.end),e.setAttr=!0}}),e.effects.animateClass=function(t,s,o,u){var a=e.speed(s,o,u);return this.queue(function(){var s=e(this),o=s.attr("class")||"",u,f=a.children?s.find("*").andSelf():s;f=f.map(function(){var t=e(this);return{el:t,start:n.call(this)}}),u=function(){e.each(i,function(e,n){t[n]&&s[n+"Class"](t[n])})},u(),f=f.map(function(){return this.end=n.call(this.el[0]),this.diff=r(this.start,this.end),this}),s.attr("class",o),f=f.map(function(){var t=this,n=e.Deferred(),r=jQuery.extend({},a,{queue:!1,complete:function(){n.resolve(t)}});return this.el.animate(this.diff,r),n.promise()}),e.when.apply(e,f.get()).done(function(){u(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})}),a.complete.call(s[0])})})},e.fn.extend({_addClass:e.fn.addClass,addClass:function(t,n,r,i){return n?e.effects.animateClass.call(this,{add:t},n,r,i):this._addClass(t)},_removeClass:e.fn.removeClass,removeClass:function(t,n,r,i){return n?e.effects.animateClass.call(this,{remove:t},n,r,i):this._removeClass(t)},_toggleClass:e.fn.toggleClass,toggleClass:function(n,r,i,s,o){return typeof r=="boolean"||r===t?i?e.effects.animateClass.call(this,r?{add:n}:{remove:n},i,s,o):this._toggleClass(n,r):e.effects.animateClass.call(this,{toggle:n},r,i,s)},switchClass:function(t,n,r,i,s){return e.effects.animateClass.call(this,{add:n,remove:t},r,i,s)}})}(),function(){function i(t,n,r,i){e.isPlainObject(t)&&(n=t,t=t.effect),t={effect:t},n==null&&(n={}),e.isFunction(n)&&(i=n,r=null,n={});if(typeof n=="number"||e.fx.speeds[n])i=r,r=n,n={};return e.isFunction(r)&&(i=r,r=null),n&&e.extend(t,n),r=r||n.duration,t.duration=e.fx.off?0:typeof r=="number"?r:r in e.fx.speeds?e.fx.speeds[r]:e.fx.speeds._default,t.complete=i||n.complete,t}function s(t){return!t||typeof t=="number"||e.fx.speeds[t]?!0:typeof t=="string"&&!e.effects.effect[t]?n&&e.effects[t]?!1:!0:!1}e.extend(e.effects,{version:"1.9.2",save:function(e,t){for(var n=0;n<t.length;n++)t[n]!==null&&e.data(r+t[n],e[0].style[t[n]])},restore:function(e,n){var i,s;for(s=0;s<n.length;s++)n[s]!==null&&(i=e.data(r+n[s]),i===t&&(i=""),e.css(n[s],i))},setMode:function(e,t){return t==="toggle"&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var n,r;switch(e[0]){case"top":n=0;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=e[0]/t.height}switch(e[1]){case"left":r=0;break;case"center":r=.5;break;case"right":r=1;break;default:r=e[1]/t.width}return{x:r,y:n}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var n={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},r=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),i={width:t.width(),height:t.height()},s=document.activeElement;try{s.id}catch(o){s=document.body}return t.wrap(r),(t[0]===s||e.contains(t[0],s))&&e(s).focus(),r=t.parent(),t.css("position")==="static"?(r.css({position:"relative"}),t.css({position:"relative"})):(e.extend(n,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,r){n[r]=t.css(r),isNaN(parseInt(n[r],10))&&(n[r]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(i),r.css(n).show()},removeWrapper:function(t){var n=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===n||e.contains(t[0],n))&&e(n).focus()),t},setTransition:function(t,n,r,i){return i=i||{},e.each(n,function(e,n){var s=t.cssUnit(n);s[0]>0&&(i[n]=s[0]*r+s[1])}),i}}),e.fn.extend({effect:function(){function t(t){function n(){e.isFunction(s)&&s.call(i[0]),e.isFunction(t)&&t()}var i=e(this),s=r.complete,o=r.mode;(i.is(":hidden")?o==="hide":o==="show")?n():u.call(i[0],r,n)}var r=i.apply(this,arguments),s=r.mode,o=r.queue,u=e.effects.effect[r.effect],a=!u&&n&&e.effects[r.effect];return e.fx.off||!u&&!a?s?this[s](r.duration,r.complete):this.each(function(){r.complete&&r.complete.call(this)}):u?o===!1?this.each(t):this.queue(o||"fx",t):a.call(this,{options:r,duration:r.duration,callback:r.complete,mode:r.mode})},_show:e.fn.show,show:function(e){if(s(e))return this._show.apply(this,arguments);var t=i.apply(this,arguments);return t.mode="show",this.effect.call(this,t)},_hide:e.fn.hide,hide:function(e){if(s(e))return this._hide.apply(this,arguments);var t=i.apply(this,arguments);return t.mode="hide",this.effect.call(this,t)},__toggle:e.fn.toggle,toggle:function(t){if(s(t)||typeof t=="boolean"||e.isFunction(t))return this.__toggle.apply(this,arguments);var n=i.apply(this,arguments);return n.mode="toggle",this.effect.call(this,n)},cssUnit:function(t){var n=this.css(t),r=[];return e.each(["em","px","%","pt"],function(e,t){n.indexOf(t)>0&&(r=[parseFloat(n),t])}),r}})}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,n){t[n]=function(t){return Math.pow(t,e+2)}}),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return e===0||e===1?e:-Math.pow(2,8*(e-1))*Math.sin(((e-1)*80-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){var t,n=4;while(e<((t=Math.pow(2,--n))-1)/11);return 1/Math.pow(4,3-n)-7.5625*Math.pow((t*3-2)/22-e,2)}}),e.each(t,function(t,n){e.easing["easeIn"+t]=n,e.easing["easeOut"+t]=function(e){return 1-n(1-e)},e.easing["easeInOut"+t]=function(e){return e<.5?n(e*2)/2:1-n(e*-2+2)/2}})}()}(jQuery),function(e,t){var n=/up|down|vertical/,r=/up|left|vertical|horizontal/;e.effects.effect.blind=function(t,i){var s=e(this),o=["position","top","bottom","left","right","height","width"],u=e.effects.setMode(s,t.mode||"hide"),a=t.direction||"up",f=n.test(a),l=f?"height":"width",c=f?"top":"left",h=r.test(a),p={},d=u==="show",v,m,g;s.parent().is(".ui-effects-wrapper")?e.effects.save(s.parent(),o):e.effects.save(s,o),s.show(),v=e.effects.createWrapper(s).css({overflow:"hidden"}),m=v[l](),g=parseFloat(v.css(c))||0,p[l]=d?m:0,h||(s.css(f?"bottom":"right",0).css(f?"top":"left","auto").css({position:"absolute"}),p[c]=d?g:m+g),d&&(v.css(l,0),h||v.css(c,g+m)),v.animate(p,{duration:t.duration,easing:t.easing,queue:!1,complete:function(){u==="hide"&&s.hide(),e.effects.restore(s,o),e.effects.removeWrapper(s),i()}})}}(jQuery),function(e,t){e.effects.effect.bounce=function(t,n){var r=e(this),i=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(r,t.mode||"effect"),o=s==="hide",u=s==="show",a=t.direction||"up",f=t.distance,l=t.times||5,c=l*2+(u||o?1:0),h=t.duration/c,p=t.easing,d=a==="up"||a==="down"?"top":"left",v=a==="up"||a==="left",m,g,y,b=r.queue(),w=b.length;(u||o)&&i.push("opacity"),e.effects.save(r,i),r.show(),e.effects.createWrapper(r),f||(f=r[d==="top"?"outerHeight":"outerWidth"]()/3),u&&(y={opacity:1},y[d]=0,r.css("opacity",0).css(d,v?-f*2:f*2).animate(y,h,p)),o&&(f/=Math.pow(2,l-1)),y={},y[d]=0;for(m=0;m<l;m++)g={},g[d]=(v?"-=":"+=")+f,r.animate(g,h,p).animate(y,h,p),f=o?f*2:f/2;o&&(g={opacity:0},g[d]=(v?"-=":"+=")+f,r.animate(g,h,p)),r.queue(function(){o&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}),w>1&&b.splice.apply(b,[1,0].concat(b.splice(w,c+1))),r.dequeue()}}(jQuery),function(e,t){e.effects.effect.clip=function(t,n){var r=e(this),i=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(r,t.mode||"hide"),o=s==="show",u=t.direction||"vertical",a=u==="vertical",f=a?"height":"width",l=a?"top":"left",c={},h,p,d;e.effects.save(r,i),r.show(),h=e.effects.createWrapper(r).css({overflow:"hidden"}),p=r[0].tagName==="IMG"?h:r,d=p[f](),o&&(p.css(f,0),p.css(l,d/2)),c[f]=o?d:0,c[l]=o?0:d/2,p.animate(c,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){o||r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}})}}(jQuery),function(e,t){e.effects.effect.drop=function(t,n){var r=e(this),i=["position","top","bottom","left","right","opacity","height","width"],s=e.effects.setMode(r,t.mode||"hide"),o=s==="show",u=t.direction||"left",a=u==="up"||u==="down"?"top":"left",f=u==="up"||u==="left"?"pos":"neg",l={opacity:o?1:0},c;e.effects.save(r,i),r.show(),e.effects.createWrapper(r),c=t.distance||r[a==="top"?"outerHeight":"outerWidth"](!0)/2,o&&r.css("opacity",0).css(a,f==="pos"?-c:c),l[a]=(o?f==="pos"?"+=":"-=":f==="pos"?"-=":"+=")+c,r.animate(l,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){s==="hide"&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}})}}(jQuery),function(e,t){e.effects.effect.explode=function(t,n){function r(){p.push(this),p.length===s*o&&i()}function i(){u.css({visibility:"visible"}),e(p).remove(),f||u.hide(),n()}var s=t.pieces?Math.round(Math.sqrt(t.pieces)):3,o=s,u=e(this),a=e.effects.setMode(u,t.mode||"hide"),f=a==="show",l=u.show().css("visibility","hidden").offset(),c=Math.ceil(u.outerWidth()/o),h=Math.ceil(u.outerHeight()/s),p=[],d,v,m,g,y,b;for(d=0;d<s;d++){g=l.top+d*h,b=d-(s-1)/2;for(v=0;v<o;v++)m=l.left+v*c,y=v-(o-1)/2,u.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-v*c,top:-d*h}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:c,height:h,left:m+(f?y*c:0),top:g+(f?b*h:0),opacity:f?0:1}).animate({left:m+(f?0:y*c),top:g+(f?0:b*h),opacity:f?1:0},t.duration||500,t.easing,r)}}}(jQuery),function(e,t){e.effects.effect.fade=function(t,n){var r=e(this),i=e.effects.setMode(r,t.mode||"toggle");r.animate({opacity:i},{queue:!1,duration:t.duration,easing:t.easing,complete:n})}}(jQuery),function(e,t){e.effects.effect.fold=function(t,n){var r=e(this),i=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(r,t.mode||"hide"),o=s==="show",u=s==="hide",a=t.size||15,f=/([0-9]+)%/.exec(a),l=!!t.horizFirst,c=o!==l,h=c?["width","height"]:["height","width"],p=t.duration/2,d,v,m={},g={};e.effects.save(r,i),r.show(),d=e.effects.createWrapper(r).css({overflow:"hidden"}),v=c?[d.width(),d.height()]:[d.height(),d.width()],f&&(a=parseInt(f[1],10)/100*v[u?0:1]),o&&d.css(l?{height:0,width:a}:{height:a,width:0}),m[h[0]]=o?v[0]:a,g[h[1]]=o?v[1]:0,d.animate(m,p,t.easing).animate(g,p,t.easing,function(){u&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()})}}(jQuery),function(e,t){e.effects.effect.highlight=function(t,n){var r=e(this),i=["backgroundImage","backgroundColor","opacity"],s=e.effects.setMode(r,t.mode||"show"),o={backgroundColor:r.css("backgroundColor")};s==="hide"&&(o.opacity=0),e.effects.save(r,i),r.show().css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(o,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){s==="hide"&&r.hide(),e.effects.restore(r,i),n()}})}}(jQuery),function(e,t){e.effects.effect.pulsate=function(t,n){var r=e(this),i=e.effects.setMode(r,t.mode||"show"),s=i==="show",o=i==="hide",u=s||i==="hide",a=(t.times||5)*2+(u?1:0),f=t.duration/a,l=0,c=r.queue(),h=c.length,p;if(s||!r.is(":visible"))r.css("opacity",0).show(),l=1;for(p=1;p<a;p++)r.animate({opacity:l},f,t.easing),l=1-l;r.animate({opacity:l},f,t.easing),r.queue(function(){o&&r.hide(),n()}),h>1&&c.splice.apply(c,[1,0].concat(c.splice(h,a+1))),r.dequeue()}}(jQuery),function(e,t){e.effects.effect.puff=function(t,n){var r=e(this),i=e.effects.setMode(r,t.mode||"hide"),s=i==="hide",o=parseInt(t.percent,10)||150,u=o/100,a={height:r.height(),width:r.width(),outerHeight:r.outerHeight(),outerWidth:r.outerWidth()};e.extend(t,{effect:"scale",queue:!1,fade:!0,mode:i,complete:n,percent:s?o:100,from:s?a:{height:a.height*u,width:a.width*u,outerHeight:a.outerHeight*u,outerWidth:a.outerWidth*u}}),r.effect(t)},e.effects.effect.scale=function(t,n){var r=e(this),i=e.extend(!0,{},t),s=e.effects.setMode(r,t.mode||"effect"),o=parseInt(t.percent,10)||(parseInt(t.percent,10)===0?0:s==="hide"?0:100),u=t.direction||"both",a=t.origin,f={height:r.height(),width:r.width(),outerHeight:r.outerHeight(),outerWidth:r.outerWidth()},l={y:u!=="horizontal"?o/100:1,x:u!=="vertical"?o/100:1};i.effect="size",i.queue=!1,i.complete=n,s!=="effect"&&(i.origin=a||["middle","center"],i.restore=!0),i.from=t.from||(s==="show"?{height:0,width:0,outerHeight:0,outerWidth:0}:f),i.to={height:f.height*l.y,width:f.width*l.x,outerHeight:f.outerHeight*l.y,outerWidth:f.outerWidth*l.x},i.fade&&(s==="show"&&(i.from.opacity=0,i.to.opacity=1),s==="hide"&&(i.from.opacity=1,i.to.opacity=0)),r.effect(i)},e.effects.effect.size=function(t,n){var r,i,s,o=e(this),u=["position","top","bottom","left","right","width","height","overflow","opacity"],a=["position","top","bottom","left","right","overflow","opacity"],f=["width","height","overflow"],l=["fontSize"],c=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],h=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],p=e.effects.setMode(o,t.mode||"effect"),d=t.restore||p!=="effect",v=t.scale||"both",m=t.origin||["middle","center"],g=o.css("position"),y=d?u:a,b={height:0,width:0,outerHeight:0,outerWidth:0};p==="show"&&o.show(),r={height:o.height(),width:o.width(),outerHeight:o.outerHeight(),outerWidth:o.outerWidth()},t.mode==="toggle"&&p==="show"?(o.from=t.to||b,o.to=t.from||r):(o.from=t.from||(p==="show"?b:r),o.to=t.to||(p==="hide"?b:r)),s={from:{y:o.from.height/r.height,x:o.from.width/r.width},to:{y:o.to.height/r.height,x:o.to.width/r.width}};if(v==="box"||v==="both")s.from.y!==s.to.y&&(y=y.concat(c),o.from=e.effects.setTransition(o,c,s.from.y,o.from),o.to=e.effects.setTransition(o,c,s.to.y,o.to)),s.from.x!==s.to.x&&(y=y.concat(h),o.from=e.effects.setTransition(o,h,s.from.x,o.from),o.to=e.effects.setTransition(o,h,s.to.x,o.to));(v==="content"||v==="both")&&s.from.y!==s.to.y&&(y=y.concat(l).concat(f),o.from=e.effects.setTransition(o,l,s.from.y,o.from),o.to=e.effects.setTransition(o,l,s.to.y,o.to)),e.effects.save(o,y),o.show(),e.effects.createWrapper(o),o.css("overflow","hidden").css(o.from),m&&(i=e.effects.getBaseline(m,r),o.from.top=(r.outerHeight-o.outerHeight())*i.y,o.from.left=(r.outerWidth-o.outerWidth())*i.x,o.to.top=(r.outerHeight-o.to.outerHeight)*i.y,o.to.left=(r.outerWidth-o.to.outerWidth)*i.x),o.css(o.from);if(v==="content"||v==="both")c=c.concat(["marginTop","marginBottom"]).concat(l),h=h.concat(["marginLeft","marginRight"]),f=u.concat(c).concat(h),o.find("*[width]").each(function(){var n=e(this),r={height:n.height(),width:n.width(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth()};d&&e.effects.save(n,f),n.from={height:r.height*s.from.y,width:r.width*s.from.x,outerHeight:r.outerHeight*s.from.y,outerWidth:r.outerWidth*s.from.x},n.to={height:r.height*s.to.y,width:r.width*s.to.x,outerHeight:r.height*s.to.y,outerWidth:r.width*s.to.x},s.from.y!==s.to.y&&(n.from=e.effects.setTransition(n,c,s.from.y,n.from),n.to=e.effects.setTransition(n,c,s.to.y,n.to)),s.from.x!==s.to.x&&(n.from=e.effects.setTransition(n,h,s.from.x,n.from),n.to=e.effects.setTransition(n,h,s.to.x,n.to)),n.css(n.from),n.animate(n.to,t.duration,t.easing,function(){d&&e.effects.restore(n,f)})});o.animate(o.to,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){o.to.opacity===0&&o.css("opacity",o.from.opacity),p==="hide"&&o.hide(),e.effects.restore(o,y),d||(g==="static"?o.css({position:"relative",top:o.to.top,left:o.to.left}):e.each(["top","left"],function(e,t){o.css(t,function(t,n){var r=parseInt(n,10),i=e?o.to.left:o.to.top;return n==="auto"?i+"px":r+i+"px"})})),e.effects.removeWrapper(o),n()}})}}(jQuery),function(e,t){e.effects.effect.shake=function(t,n){var r=e(this),i=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(r,t.mode||"effect"),o=t.direction||"left",u=t.distance||20,a=t.times||3,f=a*2+1,l=Math.round(t.duration/f),c=o==="up"||o==="down"?"top":"left",h=o==="up"||o==="left",p={},d={},v={},m,g=r.queue(),y=g.length;e.effects.save(r,i),r.show(),e.effects.createWrapper(r),p[c]=(h?"-=":"+=")+u,d[c]=(h?"+=":"-=")+u*2,v[c]=(h?"-=":"+=")+u*2,r.animate(p,l,t.easing);for(m=1;m<a;m++)r.animate(d,l,t.easing).animate(v,l,t.easing);r.animate(d,l,t.easing).animate(p,l/2,t.easing).queue(function(){s==="hide"&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}),y>1&&g.splice.apply(g,[1,0].concat(g.splice(y,f+1))),r.dequeue()}}(jQuery),function(e,t){e.effects.effect.slide=function(t,n){var r=e(this),i=["position","top","bottom","left","right","width","height"],s=e.effects.setMode(r,t.mode||"show"),o=s==="show",u=t.direction||"left",a=u==="up"||u==="down"?"top":"left",f=u==="up"||u==="left",l,c={};e.effects.save(r,i),r.show(),l=t.distance||r[a==="top"?"outerHeight":"outerWidth"](!0),e.effects.createWrapper(r).css({overflow:"hidden"}),o&&r.css(a,f?isNaN(l)?"-"+l:-l:l),c[a]=(o?f?"+=":"-=":f?"-=":"+=")+l,r.animate(c,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){s==="hide"&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}})}}(jQuery),function(e,t){e.effects.effect.transfer=function(t,n){var r=e(this),i=e(t.to),s=i.css("position")==="fixed",o=e("body"),u=s?o.scrollTop():0,a=s?o.scrollLeft():0,f=i.offset(),l={top:f.top-u,left:f.left-a,height:i.innerHeight(),width:i.innerWidth()},c=r.offset(),h=e('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(t.className).css({top:c.top-u,left:c.left-a,height:r.innerHeight(),width:r.innerWidth(),position:s?"fixed":"absolute"}).animate(l,t.duration,t.easing,function(){h.remove(),n()})}}(jQuery),function(){var e=this,t=e.Backbone,n=[],r=n.push,i=n.slice,s=n.splice,o;typeof exports!="undefined"?o=exports:o=e.Backbone={},o.VERSION="1.0.0";var u=e._;!u&&typeof require!="undefined"&&(u=require("underscore")),o.$=e.jQuery||e.Zepto||e.ender||e.$,o.noConflict=function(){return e.Backbone=t,this},o.emulateHTTP=!1,o.emulateJSON=!1;var a=o.Events={on:function(e,t,n){if(!l(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);return r.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,n){if(!l(this,"once",e,[t,n])||!t)return this;var r=this,i=u.once(function(){r.off(e,i),t.apply(this,arguments)});return i._callback=t,this.on(e,i,n)},off:function(e,t,n){var r,i,s,o,a,f,c,h;if(!this._events||!l(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events={},this;o=e?[e]:u.keys(this._events);for(a=0,f=o.length;a<f;a++){e=o[a];if(s=this._events[e]){this._events[e]=r=[];if(t||n)for(c=0,h=s.length;c<h;c++)i=s[c],(t&&t!==i.callback&&t!==i.callback._callback||n&&n!==i.context)&&r.push(i);r.length||delete this._events[e]}}return this},trigger:function(e){if(!this._events)return this;var t=i.call(arguments,1);if(!l(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&c(n,t),r&&c(r,arguments),this},stopListening:function(e,t,n){var r=this._listeners;if(!r)return this;var i=!t&&!n;typeof t=="object"&&(n=this),e&&((r={})[e._listenerId]=e);for(var s in r)r[s].off(t,n,this),i&&delete this._listeners[s];return this}},f=/\s+/,l=function(e,t,n,r){if(!n)return!0;if(typeof n=="object"){for(var i in n)e[t].apply(e,[i,n[i]].concat(r));return!1}if(f.test(n)){var s=n.split(f);for(var o=0,u=s.length;o<u;o++)e[t].apply(e,[s[o]].concat(r));return!1}return!0},c=function(e,t){var n,r=-1,i=e.length,s=t[0],o=t[1],u=t[2];switch(t.length){case 0:while(++r<i)(n=e[r]).callback.call(n.ctx);return;case 1:while(++r<i)(n=e[r]).callback.call(n.ctx,s);return;case 2:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o);return;case 3:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o,u);return;default:while(++r<i)(n=e[r]).callback.apply(n.ctx,t)}},h={listenTo:"on",listenToOnce:"once"};u.each(h,function(e,t){a[t]=function(t,n,r){var i=this._listeners||(this._listeners={}),s=t._listenerId||(t._listenerId=u.uniqueId("l"));return i[s]=t,typeof n=="object"&&(r=this),t[e](n,r,this),this}}),a.bind=a.on,a.unbind=a.off,u.extend(o,a);var p=o.Model=function(e,t){var n,r=e||{};t||(t={}),this.cid=u.uniqueId("c"),this.attributes={},u.extend(this,u.pick(t,d)),t.parse&&(r=this.parse(r,t)||{});if(n=u.result(this,"defaults"))r=u.defaults({},r,n);this.set(r,t),this.changed={},this.initialize.apply(this,arguments)},d=["url","urlRoot","collection"];u.extend(p.prototype,a,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return u.clone(this.attributes)},sync:function(){return o.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return u.escape(this.get(e))},has:function(e){return this.get(e)!=null},set:function(e,t,n){var r,i,s,o,a,f,l,c;if(e==null)return this;typeof e=="object"?(i=e,n=t):(i={})[e]=t,n||(n={});if(!this._validate(i,n))return!1;s=n.unset,a=n.silent,o=[],f=this._changing,this._changing=!0,f||(this._previousAttributes=u.clone(this.attributes),this.changed={}),c=this.attributes,l=this._previousAttributes,this.idAttribute in i&&(this.id=i[this.idAttribute]);for(r in i)t=i[r],u.isEqual(c[r],t)||o.push(r),u.isEqual(l[r],t)?delete this.changed[r]:this.changed[r]=t,s?delete c[r]:c[r]=t;if(!a){o.length&&(this._pending=!0);for(var h=0,p=o.length;h<p;h++)this.trigger("change:"+o[h],this,c[o[h]],n)}if(f)return this;if(!a)while(this._pending)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,u.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,u.extend({},e,{unset:!0}))},hasChanged:function(e){return e==null?!u.isEmpty(this.changed):u.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?u.clone(this.changed):!1;var t,n=!1,r=this._changing?this._previousAttributes:this.attributes;for(var i in e){if(u.isEqual(r[i],t=e[i]))continue;(n||(n={}))[i]=t}return n},previous:function(e){return e==null||!this._previousAttributes?null:this._previousAttributes[e]},previousAttributes:function(){return u.clone(this._previousAttributes)},fetch:function(e){e=e?u.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=this,n=e.success;return e.success=function(r){if(!t.set(t.parse(r,e),e))return!1;n&&n(t,r,e),t.trigger("sync",t,r,e)},j(this,e),this.sync("read",this,e)},save:function(e,t,n){var r,i,s,o=this.attributes;e==null||typeof e=="object"?(r=e,n=t):(r={})[e]=t;if(r&&(!n||!n.wait)&&!this.set(r,n))return!1;n=u.extend({validate:!0},n);if(!this._validate(r,n))return!1;r&&n.wait&&(this.attributes=u.extend({},o,r)),n.parse===void 0&&(n.parse=!0);var a=this,f=n.success;return n.success=function(e){a.attributes=o;var t=a.parse(e,n);n.wait&&(t=u.extend(r||{},t));if(u.isObject(t)&&!a.set(t,n))return!1;f&&f(a,e,n),a.trigger("sync",a,e,n)},j(this,n),i=this.isNew()?"create":n.patch?"patch":"update",i==="patch"&&(n.attrs=r),s=this.sync(i,this,n),r&&n.wait&&(this.attributes=o),s},destroy:function(e){e=e?u.clone(e):{};var t=this,n=e.success,r=function(){t.trigger("destroy",t,t.collection,e)};e.success=function(i){(e.wait||t.isNew())&&r(),n&&n(t,i,e),t.isNew()||t.trigger("sync",t,i,e)};if(this.isNew())return e.success(),!1;j(this,e);var i=this.sync("delete",this,e);return e.wait||r(),i},url:function(){var e=u.result(this,"urlRoot")||u.result(this.collection,"url")||B();return this.isNew()?e:e+(e.charAt(e.length-1)==="/"?"":"/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return this.id==null},isValid:function(e){return this._validate({},u.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=u.extend({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;return n?(this.trigger("invalid",this,n,u.extend(t||{},{validationError:n})),!1):!0}});var v=["keys","values","pairs","invert","pick","omit"];u.each(v,function(e){p.prototype[e]=function(){var t=i.call(arguments);return t.unshift(this.attributes),u[e].apply(u,t)}});var m=o.Collection=function(e,t){t||(t={}),t.url&&(this.url=t.url),t.model&&(this.model=t.model),t.comparator!==void 0&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,u.extend({silent:!0},t))},g={add:!0,remove:!0,merge:!0},y={add:!0,merge:!1,remove:!1};u.extend(m.prototype,a,{model:p,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return o.sync.apply(this,arguments)},add:function(e,t){return this.set(e,u.defaults(t||{},y))},remove:function(e,t){e=u.isArray(e)?e.slice():[e],t||(t={});var n,r,i,s;for(n=0,r=e.length;n<r;n++){s=this.get(e[n]);if(!s)continue;delete this._byId[s.id],delete this._byId[s.cid],i=this.indexOf(s),this.models.splice(i,1),this.length--,t.silent||(t.index=i,s.trigger("remove",s,this,t)),this._removeReference(s)}return this},set:function(e,t){t=u.defaults(t||{},g),t.parse&&(e=this.parse(e,t)),u.isArray(e)||(e=e?[e]:[]);var n,i,o,a,f,l,c=t.at,h=this.comparator&&c==null&&t.sort!==!1,p=u.isString(this.comparator)?this.comparator:null,d=[],v=[],m={};for(n=0,i=e.length;n<i;n++){if(!(o=this._prepareModel(e[n],t)))continue;(f=this.get(o))?(t.remove&&(m[f.cid]=!0),t.merge&&(f.set(o.attributes,t),h&&!l&&f.hasChanged(p)&&(l=!0))):t.add&&(d.push(o),o.on("all",this._onModelEvent,this),this._byId[o.cid]=o,o.id!=null&&(this._byId[o.id]=o))}if(t.remove){for(n=0,i=this.length;n<i;++n)m[(o=this.models[n]).cid]||v.push(o);v.length&&this.remove(v,t)}d.length&&(h&&(l=!0),this.length+=d.length,c!=null?s.apply(this.models,[c,0].concat(d)):r.apply(this.models,d)),l&&this.sort({silent:!0});if(t.silent)return this;for(n=0,i=d.length;n<i;n++)(o=d[n]).trigger("add",o,this,t);return l&&this.trigger("sort",this,t),this},reset:function(e,t){t||(t={});for(var n=0,r=this.models.length;n<r;n++)this._removeReference(this.models[n]);return t.previousModels=this.models,this._reset(),this.add(e,u.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),this},push:function(e,t){return e=this._prepareModel(e,t),this.add(e,u.extend({at:this.length},t)),e},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return e=this._prepareModel(e,t),this.add(e,u.extend({at:0},t)),e},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(e,t){return this.models.slice(e,t)},get:function(e){return e==null?void 0:this._byId[e.id!=null?e.id:e.cid||e]},at:function(e){return this.models[e]},where:function(e,t){return u.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),u.isString(this.comparator)||this.comparator.length===1?this.models=this.sortBy(this.comparator,this):this.models.sort(u.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},sortedIndex:function(e,t,n){t||(t=this.comparator);var r=u.isFunction(t)?t:function(e){return e.get(t)};return u.sortedIndex(this.models,e,r,n)},pluck:function(e){return u.invoke(this.models,"get",e)},fetch:function(e){e=e?u.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=e.success,n=this;return e.success=function(r){var i=e.reset?"reset":"set";n[i](r,e),t&&t(n,r,e),n.trigger("sync",n,r,e)},j(this,e),this.sync("read",this,e)},create:function(e,t){t=t?u.clone(t):{};if(!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var n=this,r=t.success;return t.success=function(i){t.wait&&n.add(e,t),r&&r(e,i,t)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof p)return e.collection||(e.collection=this),e;t||(t={}),t.collection=this;var n=new this.model(e,t);return n._validate(e,t)?n:(this.trigger("invalid",this,e,t),!1)},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if((e==="add"||e==="remove")&&n!==this)return;e==="destroy"&&this.remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],t.id!=null&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments)}});var b=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];u.each(b,function(e){m.prototype[e]=function(){var t=i.call(arguments);return t.unshift(this.models),u[e].apply(u,t)}});var w=["groupBy","countBy","sortBy"];u.each(w,function(e){m.prototype[e]=function(t,n){var r=u.isFunction(t)?t:function(e){return e.get(t)};return u[e](this.models,r,n)}});var E=o.View=function(e){this.cid=u.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},S=/^(\S+)\s*(.*)$/,x=["model","collection","el","id","attributes","className","tagName","events"];u.extend(E.prototype,a,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,t){return this.$el&&this.undelegateEvents(),this.$el=e instanceof o.$?e:o.$(e),this.el=this.$el[0],t!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=u.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var n=e[t];u.isFunction(n)||(n=this[e[t]]);if(!n)continue;var r=t.match(S),i=r[1],s=r[2];n=u.bind(n,this),i+=".delegateEvents"+this.cid,s===""?this.$el.on(i,n):this.$el.on(i,s,n)}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_configure:function(e){this.options&&(e=u.extend({},u.result(this,"options"),e)),u.extend(this,u.pick(e,x)),this.options=e},_ensureElement:function(){if(!this.el){var e=u.extend({},u.result(this,"attributes"));this.id&&(e.id=u.result(this,"id")),this.className&&(e["class"]=u.result(this,"className"));var t=o.$("<"+u.result(this,"tagName")+">").attr(e);this.setElement(t,!1)}else this.setElement(u.result(this,"el"),!1)}}),o.sync=function(e,t,n){var r=T[e];u.defaults(n||(n={}),{emulateHTTP:o.emulateHTTP,emulateJSON:o.emulateJSON});var i={type:r,dataType:"json"};n.url||(i.url=u.result(t,"url")||B()),n.data==null&&t&&(e==="create"||e==="update"||e==="patch")&&(i.contentType="application/json",i.data=JSON.stringify(n.attrs||t.toJSON(n))),n.emulateJSON&&(i.contentType="application/x-www-form-urlencoded",i.data=i.data?{model:i.data}:{});if(n.emulateHTTP&&(r==="PUT"||r==="DELETE"||r==="PATCH")){i.type="POST",n.emulateJSON&&(i.data._method=r);var s=n.beforeSend;n.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",r);if(s)return s.apply(this,arguments)}}i.type!=="GET"&&!n.emulateJSON&&(i.processData=!1),i.type==="PATCH"&&window.ActiveXObject&&(!window.external||!window.external.msActiveXFilteringEnabled)&&(i.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var a=n.xhr=o.ajax(u.extend(i,n));return t.trigger("request",t,a,n),a};var T={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};o.ajax=function(){return o.$.ajax.apply(o.$,arguments)};var N=o.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},C=/\((.*?)\)/g,k=/(\(\?)?:\w+/g,L=/\*\w+/g,A=/[\-{}\[\]+?.,\\\^$|#\s]/g;u.extend(N.prototype,a,{initialize:function(){},route:function(e,t,n){u.isRegExp(e)||(e=this._routeToRegExp(e)),u.isFunction(t)&&(n=t,t=""),n||(n=this[t]);var r=this;return o.history.route(e,function(i){var s=r._extractParameters(e,i);n&&n.apply(r,s),r.trigger.apply(r,["route:"+t].concat(s)),r.trigger("route",t,s),o.history.trigger("route",r,t,s)}),this
},navigate:function(e,t){return o.history.navigate(e,t),this},_bindRoutes:function(){if(!this.routes)return;this.routes=u.result(this,"routes");var e,t=u.keys(this.routes);while((e=t.pop())!=null)this.route(e,this.routes[e])},_routeToRegExp:function(e){return e=e.replace(A,"\\$&").replace(C,"(?:$1)?").replace(k,function(e,t){return t?e:"([^/]+)"}).replace(L,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){var n=e.exec(t).slice(1);return u.map(n,function(e){return e?decodeURIComponent(e):null})}});var O=o.History=function(){this.handlers=[],u.bindAll(this,"checkUrl"),typeof window!="undefined"&&(this.location=window.location,this.history=window.history)},M=/^[#\/]|\s+$/g,_=/^\/+|\/+$/g,D=/msie [\w.]+/,P=/\/$/;O.started=!1,u.extend(O.prototype,a,{interval:50,getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(e==null)if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var n=this.root.replace(P,"");e.indexOf(n)||(e=e.substr(n.length))}else e=this.getHash();return e.replace(M,"")},start:function(e){if(O.started)throw new Error("Backbone.history has already been started");O.started=!0,this.options=u.extend({},{root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var t=this.getFragment(),n=document.documentMode,r=D.exec(navigator.userAgent.toLowerCase())&&(!n||n<=7);this.root=("/"+this.root+"/").replace(_,"/"),r&&this._wantsHashChange&&(this.iframe=o.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(t)),this._hasPushState?o.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?o.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=t;var i=this.location,s=i.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!s)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._wantsPushState&&this._hasPushState&&s&&i.hash&&(this.fragment=this.getHash().replace(M,""),this.history.replaceState({},document.title,this.root+this.fragment+i.search));if(!this.options.silent)return this.loadUrl()},stop:function(){o.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),O.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe)));if(t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(e){var t=this.fragment=this.getFragment(e),n=u.any(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0});return n},navigate:function(e,t){if(!O.started)return!1;if(!t||t===!0)t={trigger:t};e=this.getFragment(e||"");if(this.fragment===e)return;this.fragment=e;var n=this.root+e;if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}t.trigger&&this.loadUrl(e)},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),o.history=new O;var H=function(e,t){var n=this,r;e&&u.has(e,"constructor")?r=e.constructor:r=function(){return n.apply(this,arguments)},u.extend(r,n,t);var i=function(){this.constructor=r};return i.prototype=n.prototype,r.prototype=new i,e&&u.extend(r.prototype,e),r.__super__=n.prototype,r};p.extend=m.extend=N.extend=E.extend=O.extend=H;var B=function(){throw new Error('A "url" property or function must be specified')},j=function(e,t){var n=t.error;t.error=function(r){n&&n(e,r,t),e.trigger("error",e,r,t)}}}.call(this),typeof JSON!="object"&&(JSON={}),function(){"use strict";function f(e){return e<10?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return typeof t=="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,s,o=gap,u,a=t[e];a&&typeof a=="object"&&typeof a.toJSON=="function"&&(a=a.toJSON(e)),typeof rep=="function"&&(a=rep.call(t,e,a));switch(typeof a){case"string":return quote(a);case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"object":if(!a)return"null";gap+=indent,u=[];if(Object.prototype.toString.apply(a)==="[object Array]"){s=a.length;for(n=0;n<s;n+=1)u[n]=str(n,a)||"null";return i=u.length===0?"[]":gap?"[\n"+gap+u.join(",\n"+gap)+"\n"+o+"]":"["+u.join(",")+"]",gap=o,i}if(rep&&typeof rep=="object"){s=rep.length;for(n=0;n<s;n+=1)typeof rep[n]=="string"&&(r=rep[n],i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i))}else for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i));return i=u.length===0?"{}":gap?"{\n"+gap+u.join(",\n"+gap)+"\n"+o+"}":"{"+u.join(",")+"}",gap=o,i}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;typeof JSON.stringify!="function"&&(JSON.stringify=function(e,t,n){var r;gap="",indent="";if(typeof n=="number")for(r=0;r<n;r+=1)indent+=" ";else typeof n=="string"&&(indent=n);rep=t;if(!t||typeof t=="function"||typeof t=="object"&&typeof t.length=="number")return str("",{"":e});throw new Error("JSON.stringify")}),typeof JSON.parse!="function"&&(JSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&typeof i=="object")for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r=walk(i,n),r!==undefined?i[n]=r:delete i[n]);return reviver.call(e,t,i)}var j;text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),window.Modernizr=function(e,t,n){function A(e){f.cssText=e}function O(e,t){return A(p.join(e+";")+(t||""))}function M(e,t){return typeof e===t}function _(e,t){return!!~(""+e).indexOf(t)}function D(e,t){for(var r in e){var i=e[r];if(!_(i,"-")&&f[i]!==n)return t=="pfx"?i:!0}return!1}function P(e,t,r){for(var i in e){var s=t[e[i]];if(s!==n)return r===!1?e[i]:M(s,"function")?s.bind(r||t):s}return!1}function H(e,t,n){var r=e.charAt(0).toUpperCase()+e.slice(1),i=(e+" "+v.join(r+" ")+r).split(" ");return M(t,"string")||M(t,"undefined")?D(i,t):(i=(e+" "+m.join(r+" ")+r).split(" "),P(i,t,n))}function B(){i.input=function(n){for(var r=0,i=n.length;r<i;r++)w[n[r]]=n[r]in l;return w.list&&(w.list=!!t.createElement("datalist")&&!!e.HTMLDataListElement),w}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")),i.inputtypes=function(e){for(var r=0,i,s,u,a=e.length;r<a;r++)l.setAttribute("type",s=e[r]),i=l.type!=="text",i&&(l.value=c,l.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(s)&&l.style.WebkitAppearance!==n?(o.appendChild(l),u=t.defaultView,i=u.getComputedStyle&&u.getComputedStyle(l,null).WebkitAppearance!=="textfield"&&l.offsetHeight!==0,o.removeChild(l)):/^(search|tel)$/.test(s)||(/^(url|email)$/.test(s)?i=l.checkValidity&&l.checkValidity()===!1:i=l.value!=c)),b[e[r]]=!!i;return b}("search tel url email datetime date month week time datetime-local number range color".split(" "))}var r="2.6.2",i={},s=!0,o=t.documentElement,u="modernizr",a=t.createElement(u),f=a.style,l=t.createElement("input"),c=":)",h={}.toString,p=" -webkit- -moz- -o- -ms- ".split(" "),d="Webkit Moz O ms",v=d.split(" "),m=d.toLowerCase().split(" "),g={svg:"http://www.w3.org/2000/svg"},y={},b={},w={},E=[],S=E.slice,x,T=function(e,n,r,i){var s,a,f,l,c=t.createElement("div"),h=t.body,p=h||t.createElement("body");if(parseInt(r,10))while(r--)f=t.createElement("div"),f.id=i?i[r]:u+(r+1),c.appendChild(f);return s=["&#173;",'<style id="s',u,'">',e,"</style>"].join(""),c.id=u,(h?c:p).innerHTML+=s,p.appendChild(c),h||(p.style.background="",p.style.overflow="hidden",l=o.style.overflow,o.style.overflow="hidden",o.appendChild(p)),a=n(c,e),h?c.parentNode.removeChild(c):(p.parentNode.removeChild(p),o.style.overflow=l),!!a},N=function(t){var n=e.matchMedia||e.msMatchMedia;if(n)return n(t).matches;var r;return T("@media "+t+" { #"+u+" { position: absolute; } }",function(t){r=(e.getComputedStyle?getComputedStyle(t,null):t.currentStyle)["position"]=="absolute"}),r},C=function(){function r(r,i){i=i||t.createElement(e[r]||"div"),r="on"+r;var s=r in i;return s||(i.setAttribute||(i=t.createElement("div")),i.setAttribute&&i.removeAttribute&&(i.setAttribute(r,""),s=M(i[r],"function"),M(i[r],"undefined")||(i[r]=n),i.removeAttribute(r))),i=null,s}var e={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return r}(),k={}.hasOwnProperty,L;!M(k,"undefined")&&!M(k.call,"undefined")?L=function(e,t){return k.call(e,t)}:L=function(e,t){return t in e&&M(e.constructor.prototype[t],"undefined")},Function.prototype.bind||(Function.prototype.bind=function(t){var n=this;if(typeof n!="function")throw new TypeError;var r=S.call(arguments,1),i=function(){if(this instanceof i){var e=function(){};e.prototype=n.prototype;var s=new e,o=n.apply(s,r.concat(S.call(arguments)));return Object(o)===o?o:s}return n.apply(t,r.concat(S.call(arguments)))};return i}),y.flexbox=function(){return H("flexWrap")},y.flexboxlegacy=function(){return H("boxDirection")},y.canvas=function(){var e=t.createElement("canvas");return!!e.getContext&&!!e.getContext("2d")},y.canvastext=function(){return!!i.canvas&&!!M(t.createElement("canvas").getContext("2d").fillText,"function")},y.webgl=function(){return!!e.WebGLRenderingContext},y.touch=function(){var n;return"ontouchstart"in e||e.DocumentTouch&&t instanceof DocumentTouch?n=!0:T(["@media (",p.join("touch-enabled),("),u,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(e){n=e.offsetTop===9}),n},y.geolocation=function(){return"geolocation"in navigator},y.postmessage=function(){return!!e.postMessage},y.websqldatabase=function(){return!!e.openDatabase},y.indexedDB=function(){return!!H("indexedDB",e)},y.hashchange=function(){return C("hashchange",e)&&(t.documentMode===n||t.documentMode>7)},y.history=function(){return!!e.history&&!!history.pushState},y.draganddrop=function(){var e=t.createElement("div");return"draggable"in e||"ondragstart"in e&&"ondrop"in e},y.websockets=function(){return"WebSocket"in e||"MozWebSocket"in e},y.rgba=function(){return A("background-color:rgba(150,255,150,.5)"),_(f.backgroundColor,"rgba")},y.hsla=function(){return A("background-color:hsla(120,40%,100%,.5)"),_(f.backgroundColor,"rgba")||_(f.backgroundColor,"hsla")},y.multiplebgs=function(){return A("background:url(https://),url(https://),red url(https://)"),/(url\s*\(.*?){3}/.test(f.background)},y.backgroundsize=function(){return H("backgroundSize")},y.borderimage=function(){return H("borderImage")},y.borderradius=function(){return H("borderRadius")},y.boxshadow=function(){return H("boxShadow")},y.textshadow=function(){return t.createElement("div").style.textShadow===""},y.opacity=function(){return O("opacity:.55"),/^0.55$/.test(f.opacity)},y.cssanimations=function(){return H("animationName")},y.csscolumns=function(){return H("columnCount")},y.cssgradients=function(){var e="background-image:",t="gradient(linear,left top,right bottom,from(#9f9),to(white));",n="linear-gradient(left top,#9f9, white);";return A((e+"-webkit- ".split(" ").join(t+e)+p.join(n+e)).slice(0,-e.length)),_(f.backgroundImage,"gradient")},y.cssreflections=function(){return H("boxReflect")},y.csstransforms=function(){return!!H("transform")},y.csstransforms3d=function(){var e=!!H("perspective");return e&&"webkitPerspective"in o.style&&T("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(t,n){e=t.offsetLeft===9&&t.offsetHeight===3}),e},y.csstransitions=function(){return H("transition")},y.fontface=function(){var e;return T('@font-face {font-family:"font";src:url("https://")}',function(n,r){var i=t.getElementById("smodernizr"),s=i.sheet||i.styleSheet,o=s?s.cssRules&&s.cssRules[0]?s.cssRules[0].cssText:s.cssText||"":"";e=/src/i.test(o)&&o.indexOf(r.split(" ")[0])===0}),e},y.generatedcontent=function(){var e;return T(["#",u,"{font:0/0 a}#",u,':after{content:"',c,'";visibility:hidden;font:3px/1 a}'].join(""),function(t){e=t.offsetHeight>=3}),e},y.video=function(){var e=t.createElement("video"),n=!1;try{if(n=!!e.canPlayType)n=new Boolean(n),n.ogg=e.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),n.h264=e.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),n.webm=e.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")}catch(r){}return n},y.audio=function(){var e=t.createElement("audio"),n=!1;try{if(n=!!e.canPlayType)n=new Boolean(n),n.ogg=e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),n.mp3=e.canPlayType("audio/mpeg;").replace(/^no$/,""),n.wav=e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),n.m4a=(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,"")}catch(r){}return n},y.localstorage=function(){try{return localStorage.setItem(u,u),localStorage.removeItem(u),!0}catch(e){return!1}},y.sessionstorage=function(){try{return sessionStorage.setItem(u,u),sessionStorage.removeItem(u),!0}catch(e){return!1}},y.webworkers=function(){return!!e.Worker},y.applicationcache=function(){return!!e.applicationCache},y.svg=function(){return!!t.createElementNS&&!!t.createElementNS(g.svg,"svg").createSVGRect},y.inlinesvg=function(){var e=t.createElement("div");return e.innerHTML="<svg/>",(e.firstChild&&e.firstChild.namespaceURI)==g.svg},y.smil=function(){return!!t.createElementNS&&/SVGAnimate/.test(h.call(t.createElementNS(g.svg,"animate")))},y.svgclippaths=function(){return!!t.createElementNS&&/SVGClipPath/.test(h.call(t.createElementNS(g.svg,"clipPath")))};for(var j in y)L(y,j)&&(x=j.toLowerCase(),i[x]=y[j](),E.push((i[x]?"":"no-")+x));return i.input||B(),i.addTest=function(e,t){if(typeof e=="object")for(var r in e)L(e,r)&&i.addTest(r,e[r]);else{e=e.toLowerCase();if(i[e]!==n)return i;t=typeof t=="function"?t():t,typeof s!="undefined"&&s&&(o.className+=" "+(t?"":"no-")+e),i[e]=t}return i},A(""),a=l=null,function(e,t){function l(e,t){var n=e.createElement("p"),r=e.getElementsByTagName("head")[0]||e.documentElement;return n.innerHTML="x<style>"+t+"</style>",r.insertBefore(n.lastChild,r.firstChild)}function c(){var e=g.elements;return typeof e=="string"?e.split(" "):e}function h(e){var t=a[e[o]];return t||(t={},u++,e[o]=u,a[u]=t),t}function p(e,n,s){n||(n=t);if(f)return n.createElement(e);s||(s=h(n));var o;return s.cache[e]?o=s.cache[e].cloneNode():i.test(e)?o=(s.cache[e]=s.createElem(e)).cloneNode():o=s.createElem(e),o.canHaveChildren&&!r.test(e)?s.frag.appendChild(o):o}function d(e,n){e||(e=t);if(f)return e.createDocumentFragment();n=n||h(e);var r=n.frag.cloneNode(),i=0,s=c(),o=s.length;for(;i<o;i++)r.createElement(s[i]);return r}function v(e,t){t.cache||(t.cache={},t.createElem=e.createElement,t.createFrag=e.createDocumentFragment,t.frag=t.createFrag()),e.createElement=function(n){return g.shivMethods?p(n,e,t):t.createElem(n)},e.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+c().join().replace(/\w+/g,function(e){return t.createElem(e),t.frag.createElement(e),'c("'+e+'")'})+");return n}")(g,t.frag)}function m(e){e||(e=t);var n=h(e);return g.shivCSS&&!s&&!n.hasCSS&&(n.hasCSS=!!l(e,"article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}mark{background:#FF0;color:#000}")),f||v(e,n),e}var n=e.html5||{},r=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,i=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,s,o="_html5shiv",u=0,a={},f;(function(){try{var e=t.createElement("a");e.innerHTML="<xyz></xyz>",s="hidden"in e,f=e.childNodes.length==1||function(){t.createElement("a");var e=t.createDocumentFragment();return typeof e.cloneNode=="undefined"||typeof e.createDocumentFragment=="undefined"||typeof e.createElement=="undefined"}()}catch(n){s=!0,f=!0}})();var g={elements:n.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:n.shivCSS!==!1,supportsUnknownElements:f,shivMethods:n.shivMethods!==!1,type:"default",shivDocument:m,createElement:p,createDocumentFragment:d};e.html5=g,m(t)}(this,t),i._version=r,i._prefixes=p,i._domPrefixes=m,i._cssomPrefixes=v,i.mq=N,i.hasEvent=C,i.testProp=function(e){return D([e])},i.testAllProps=H,i.testStyles=T,i.prefixed=function(e,t,n){return t?H(e,t,n):H(e,"pfx")},o.className=o.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(s?" js "+E.join(" "):""),i}(this,this.document),function(e){e.extend(e.fn,{validate:function(t){if(!this.length){t&&t.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing");return}var n=e.data(this[0],"validator");return n?n:(this.attr("novalidate","novalidate"),n=new e.validator(t,this[0]),e.data(this[0],"validator",n),n.settings.onsubmit&&(this.validateDelegate(":submit","click",function(t){n.settings.submitHandler&&(n.submitButton=t.target),e(t.target).hasClass("cancel")&&(n.cancelSubmit=!0)}),this.submit(function(t){function r(){var r;return n.settings.submitHandler?(n.submitButton&&(r=e("<input type='hidden'/>").attr("name",n.submitButton.name).val(n.submitButton.value).appendTo(n.currentForm)),n.settings.submitHandler.call(n,n.currentForm,t),n.submitButton&&r.remove(),!1):!0}return n.settings.debug&&t.preventDefault(),n.cancelSubmit?(n.cancelSubmit=!1,r()):n.form()?n.pendingRequest?(n.formSubmitted=!0,!1):r():(n.focusInvalid(),!1)})),n)},valid:function(){if(e(this[0]).is("form"))return this.validate().form();var t=!0,n=e(this[0].form).validate();return this.each(function(){t&=n.element(this)}),t},removeAttrs:function(t){var n={},r=this;return e.each(t.split(/\s/),function(e,t){n[t]=r.attr(t),r.removeAttr(t)}),n},rules:function(t,n){var r=this[0];if(t){var i=e.data(r.form,"validator").settings,s=i.rules,o=e.validator.staticRules(r);switch(t){case"add":e.extend(o,e.validator.normalizeRule(n)),s[r.name]=o,n.messages&&(i.messages[r.name]=e.extend(i.messages[r.name],n.messages));break;case"remove":if(!n)return delete s[r.name],o;var u={};return e.each(n.split(/\s/),function(e,t){u[t]=o[t],delete o[t]}),u}}var f=e.validator.normalizeRules(e.extend({},e.validator.metadataRules(r),e.validator.classRules(r),e.validator.attributeRules(r),e.validator.staticRules(r)),r);if(f.required){var l=f.required;delete f.required,f=e.extend({required:l},f)}return f}}),e.extend(e.expr[":"],{blank:function(t){return!e.trim(""+t.value)},filled:function(t){return!!e.trim(""+t.value)},unchecked:function(e){return!e.checked}}),e.validator=function(t,n){this.settings=e.extend(!0,{},e.validator.defaults,t),this.currentForm=n,this.init()},e.validator.format=function(t,n){return arguments.length===1?function(){var n=e.makeArray(arguments);return n.unshift(t),e.validator.format.apply(this,n)}:(arguments.length>2&&n.constructor!==Array&&(n=e.makeArray(arguments).slice(1)),n.constructor!==Array&&(n=[n]),e.each(n,function(e,n){t=t.replace(new RegExp("\\{"+e+"\\}","g"),n)}),t)},e.extend(e.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:!0,errorContainer:e([]),errorLabelContainer:e([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(e,t){this.lastActive=e,this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,e,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(e)).hide())},onfocusout:function(e,t){!this.checkable(e)&&(e.name in this.submitted||!this.optional(e))&&this.element(e)},onkeyup:function(e,t){if(t.which===9&&this.elementValue(e)==="")return;(e.name in this.submitted||e===this.lastActive)&&this.element(e)},onclick:function(e,t){e.name in this.submitted?this.element(e):e.parentNode.name in this.submitted&&this.element(e.parentNode)},highlight:function(t,n,r){t.type==="radio"?this.findByName(t.name).addClass(n).removeClass(r):e(t).addClass(n).removeClass(r)},unhighlight:function(t,n,r){t.type==="radio"?this.findByName(t.name).removeClass(n).addClass(r):e(t).removeClass(n).addClass(r)}},setDefaults:function(t){e.extend(e.validator.defaults,t)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:e.validator.format("Please enter no more than {0} characters."),minlength:e.validator.format("Please enter at least {0} characters."),rangelength:e.validator.format("Please enter a value between {0} and {1} characters long."),range:e.validator.format("Please enter a value between {0} and {1}."),max:e.validator.format("Please enter a value less than or equal to {0}."),min:e.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function t(t){var n=e.data(this[0].form,"validator"),r="on"+t.type.replace(/^validate/,"");n.settings[r]&&n.settings[r].call(n,this[0],t)}this.labelContainer=e(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||e(this.currentForm),this.containers=e(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var n=this.groups={};e.each(this.settings.groups,function(t,r){e.each(r.split(/\s/),function(e,r){n[r]=t})});var r=this.settings.rules;e.each(r,function(t,n){r[t]=e.validator.normalizeRule(n)}),e(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",t).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",t),this.settings.invalidHandler&&e(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),e.extend(this.submitted,this.errorMap),this.invalid=e.extend({},this.errorMap),this.valid()||e(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var e=0,t=this.currentElements=this.elements();t[e];e++)this.check(t[e]);return this.valid()},element:function(t){t=this.validationTargetFor(this.clean(t)),this.lastElement=t,this.prepareElement(t),this.currentElements=e(t);var n=this.check(t)!==!1;return n?delete this.invalid[t.name]:this.invalid[t.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),n},showErrors:function(t){if(t){e.extend(this.errorMap,t),this.errorList=[];for(var n in t)this.errorList.push({message:t[n],element:this.findByName(n)[0]});this.successList=e.grep(this.successList,function(e){return!(e.name in t)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){e.fn.resetForm&&e(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass).removeData("previousValue")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(e){var t=0;for(var n in e)t++;return t},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return this.size()===0},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{e(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(t){}},findLastActive:function(){var t=this.lastActive;return t&&e.grep(this.errorList,function(e){return e.element.name===t.name}).length===1&&t},elements:function(){var t=this,n={};return e(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){return!this.name&&t.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.name in n||!t.objectLength(e(this).rules())?!1:(n[this.name]=!0,!0)})},clean:function(t){return e(t)[0]},errors:function(){var t=this.settings.errorClass.replace(" ",".");return e(this.settings.errorElement+"."+t,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=e([]),this.toHide=e([]),this.currentElements=e([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(e){this.reset(),this.toHide=this.errorsFor(e)},elementValue:function(t){var n=e(t).attr("type"),r=e(t).val();return n==="radio"||n==="checkbox"?e('input[name="'+e(t).attr("name")+'"]:checked').val():typeof r=="string"?r.replace(/\r/g,""):r},check:function(t){t=this.validationTargetFor(this.clean(t));var n=e(t).rules(),r=!1,i=this.elementValue(t),s;for(var o in n){var u={method:o,parameters:n[o]};try{s=e.validator.methods[o].call(this,i,t,u.parameters);if(s==="dependency-mismatch"){r=!0;continue}r=!1;if(s==="pending"){this.toHide=this.toHide.not(this.errorsFor(t));return}if(!s)return this.formatAndAdd(t,u),!1}catch(f){throw this.settings.debug&&window.console&&console.log("exception occured when checking element "+t.id+", check the '"+u.method+"' method",f),f}}if(r)return;return this.objectLength(n)&&this.successList.push(t),!0},customMetaMessage:function(t,n){if(!e.metadata)return;var r=this.settings.meta?e(t).metadata()[this.settings.meta]:e(t).metadata();return r&&r.messages&&r.messages[n]},customDataMessage:function(t,n){return e(t).data("msg-"+n.toLowerCase())||t.attributes&&e(t).attr("data-msg-"+n.toLowerCase())},customMessage:function(e,t){var n=this.settings.messages[e];return n&&(n.constructor===String?n:n[t])},findDefined:function(){for(var e=0;e<arguments.length;e++)if(arguments[e]!==undefined)return arguments[e];return undefined},defaultMessage:function(t,n){return this.findDefined(this.customMessage(t.name,n),this.customDataMessage(t,n),this.customMetaMessage(t,n),!this.settings.ignoreTitle&&t.title||undefined,e.validator.messages[n],"<strong>Warning: No message defined for "+t.name+"</strong>")},formatAndAdd:function(t,n){var r=this.defaultMessage(t,n.method),i=/\$?\{(\d+)\}/g;typeof r=="function"?r=r.call(this,n.parameters,t):i.test(r)&&(r=e.validator.format(r.replace(i,"{$1}"),n.parameters)),this.errorList.push({message:r,element:t}),this.errorMap[t.name]=r,this.submitted[t.name]=r},addWrapper:function(e){return this.settings.wrapper&&(e=e.add(e.parent(this.settings.wrapper))),e},defaultShowErrors:function(){var e,t;for(e=0;this.errorList[e];e++){var n=this.errorList[e];this.settings.highlight&&this.settings.highlight.call(this,n.element,this.settings.errorClass,this.settings.validClass),this.showLabel(n.element,n.message)}this.errorList.length&&(this.toShow=this.toShow.add(this.containers));if(this.settings.success)for(e=0;this.successList[e];e++)this.showLabel(this.successList[e]);if(this.settings.unhighlight)for(e=0,t=this.validElements();t[e];e++)this.settings.unhighlight.call(this,t[e],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return e(this.errorList).map(function(){return this.element})},showLabel:function(t,n){var r=this.errorsFor(t);r.length?(r.removeClass(this.settings.validClass).addClass(this.settings.errorClass),r.attr("generated")&&r.html(n)):(r=e("<"+this.settings.errorElement+"/>").attr({"for":this.idOrName(t),generated:!0}).addClass(this.settings.errorClass).html(n||""),this.settings.wrapper&&(r=r.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(r).length||(this.settings.errorPlacement?this.settings.errorPlacement(r,e(t)):r.insertAfter(t))),!n&&this.settings.success&&(r.text(""),typeof this.settings.success=="string"?r.addClass(this.settings.success):this.settings.success(r,t)),this.toShow=this.toShow.add(r)},errorsFor:function(t){var n=this.idOrName(t);return this.errors().filter(function(){return e(this).attr("for")===n})},idOrName:function(e){return this.groups[e.name]||(this.checkable(e)?e.name:e.id||e.name)},validationTargetFor:function(e){return this.checkable(e)&&(e=this.findByName(e.name).not(this.settings.ignore)[0]),e},checkable:function(e){return/radio|checkbox/i.test(e.type)},findByName:function(t){return e(this.currentForm).find('[name="'+t+'"]')},getLength:function(t,n){switch(n.nodeName.toLowerCase()){case"select":return e("option:selected",n).length;case"input":if(this.checkable(n))return this.findByName(n.name).filter(":checked").length}return t.length},depend:function(e,t){return this.dependTypes[typeof e]?this.dependTypes[typeof e](e,t):!0},dependTypes:{"boolean":function(e,t){return e},string:function(t,n){return!!e(t,n.form).length},"function":function(e,t){return e(t)}},optional:function(t){var n=this.elementValue(t);return!e.validator.methods.required.call(this,n,t)&&"dependency-mismatch"},startRequest:function(e){this.pending[e.name]||(this.pendingRequest++,this.pending[e.name]=!0)},stopRequest:function(t,n){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[t.name],n&&this.pendingRequest===0&&this.formSubmitted&&this.form()?(e(this.currentForm).submit(),this.formSubmitted=!1):!n&&this.pendingRequest===0&&this.formSubmitted&&(e(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(t){return e.data(t,"previousValue")||e.data(t,"previousValue",{old:null,valid:!0,message:this.defaultMessage(t,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(t,n){t.constructor===String?this.classRuleSettings[t]=n:e.extend(this.classRuleSettings,t)},classRules:function(t){var n={},r=e(t).attr("class");return r&&e.each(r.split(" "),function(){this in e.validator.classRuleSettings&&e.extend(n,e.validator.classRuleSettings[this])}),n},attributeRules:function(t){var n={},r=e(t);for(var i in e.validator.methods){var s;i==="required"?(s=r.get(0).getAttribute(i),s===""&&(s=!0),s=!!s):s=r.attr(i),s?n[i]=s:r[0].getAttribute("type")===i&&(n[i]=!0)}return n.maxlength&&/-1|2147483647|524288/.test(n.maxlength)&&delete n.maxlength,n},metadataRules:function(t){if(!e.metadata)return{};var n=e.data(t.form,"validator").settings.meta;return n?e(t).metadata()[n]:e(t).metadata()},staticRules:function(t){var n={},r=e.data(t.form
,"validator");return r.settings.rules&&(n=e.validator.normalizeRule(r.settings.rules[t.name])||{}),n},normalizeRules:function(t,n){return e.each(t,function(r,i){if(i===!1){delete t[r];return}if(i.param||i.depends){var s=!0;switch(typeof i.depends){case"string":s=!!e(i.depends,n.form).length;break;case"function":s=i.depends.call(n,n)}s?t[r]=i.param!==undefined?i.param:!0:delete t[r]}}),e.each(t,function(r,i){t[r]=e.isFunction(i)?i(n):i}),e.each(["minlength","maxlength","min","max"],function(){t[this]&&(t[this]=Number(t[this]))}),e.each(["rangelength","range"],function(){t[this]&&(t[this]=[Number(t[this][0]),Number(t[this][1])])}),e.validator.autoCreateRanges&&(t.min&&t.max&&(t.range=[t.min,t.max],delete t.min,delete t.max),t.minlength&&t.maxlength&&(t.rangelength=[t.minlength,t.maxlength],delete t.minlength,delete t.maxlength)),t.messages&&delete t.messages,t},normalizeRule:function(t){if(typeof t=="string"){var n={};e.each(t.split(/\s/),function(){n[this]=!0}),t=n}return t},addMethod:function(t,n,r){e.validator.methods[t]=n,e.validator.messages[t]=r!==undefined?r:e.validator.messages[t],n.length<3&&e.validator.addClassRules(t,e.validator.normalizeRule(t))},methods:{required:function(t,n,r){if(!this.depend(r,n))return"dependency-mismatch";if(n.nodeName.toLowerCase()==="select"){var i=e(n).val();return i&&i.length>0}return this.checkable(n)?this.getLength(t,n)>0:e.trim(t).length>0},remote:function(t,n,r){if(this.optional(n))return"dependency-mismatch";var i=this.previousValue(n);this.settings.messages[n.name]||(this.settings.messages[n.name]={}),i.originalMessage=this.settings.messages[n.name].remote,this.settings.messages[n.name].remote=i.message,r=typeof r=="string"&&{url:r}||r;if(this.pending[n.name])return"pending";if(i.old===t)return i.valid;i.old=t;var s=this;this.startRequest(n);var o={};return o[n.name]=t,e.ajax(e.extend(!0,{url:r,mode:"abort",port:"validate"+n.name,dataType:"json",data:o,success:function(r){s.settings.messages[n.name].remote=i.originalMessage;var o=r===!0||r==="true";if(o){var u=s.formSubmitted;s.prepareElement(n),s.formSubmitted=u,s.successList.push(n),delete s.invalid[n.name],s.showErrors()}else{var l={},h=r||s.defaultMessage(n,"remote");l[n.name]=i.message=e.isFunction(h)?h(t):h,s.invalid[n.name]=!0,s.showErrors(l)}i.valid=o,s.stopRequest(n,o)}},r)),"pending"},minlength:function(t,n,r){var i=e.isArray(t)?t.length:this.getLength(e.trim(t),n);return this.optional(n)||i>=r},maxlength:function(t,n,r){var i=e.isArray(t)?t.length:this.getLength(e.trim(t),n);return this.optional(n)||i<=r},rangelength:function(t,n,r){var i=e.isArray(t)?t.length:this.getLength(e.trim(t),n);return this.optional(n)||i>=r[0]&&i<=r[1]},min:function(e,t,n){return this.optional(t)||e>=n},max:function(e,t,n){return this.optional(t)||e<=n},range:function(e,t,n){return this.optional(t)||e>=n[0]&&e<=n[1]},email:function(e,t){return this.optional(t)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(e)},url:function(e,t){return this.optional(t)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)},date:function(e,t){return this.optional(t)||!/Invalid|NaN/.test(new Date(e))},dateISO:function(e,t){return this.optional(t)||/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(e)},number:function(e,t){return this.optional(t)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e)},digits:function(e,t){return this.optional(t)||/^\d+$/.test(e)},creditcard:function(e,t){if(this.optional(t))return"dependency-mismatch";if(/[^0-9 \-]+/.test(e))return!1;var n=0,r=0,i=!1;e=e.replace(/\D/g,"");for(var s=e.length-1;s>=0;s--){var o=e.charAt(s);r=parseInt(o,10),i&&(r*=2)>9&&(r-=9),n+=r,i=!i}return n%10===0},equalTo:function(t,n,r){var i=e(r);return this.settings.onfocusout&&i.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){e(n).valid()}),t===i.val()}}}),e.format=e.validator.format}(jQuery),function(e){var t={};if(e.ajaxPrefilter)e.ajaxPrefilter(function(e,n,r){var i=e.port;e.mode==="abort"&&(t[i]&&t[i].abort(),t[i]=r)});else{var n=e.ajax;e.ajax=function(r){var i=("mode"in r?r:e.ajaxSettings).mode,s=("port"in r?r:e.ajaxSettings).port;return i==="abort"?(t[s]&&t[s].abort(),t[s]=n.apply(this,arguments)):n.apply(this,arguments)}}}(jQuery),function(e){!jQuery.event.special.focusin&&!jQuery.event.special.focusout&&document.addEventListener&&e.each({focus:"focusin",blur:"focusout"},function(t,n){function r(t){return t=e.event.fix(t),t.type=n,e.event.handle.call(this,t)}e.event.special[n]={setup:function(){this.addEventListener(t,r,!0)},teardown:function(){this.removeEventListener(t,r,!0)},handler:function(t){var r=arguments;return r[0]=e.event.fix(t),r[0].type=n,e.event.handle.apply(this,r)}}}),e.extend(e.fn,{validateDelegate:function(t,n,r){return this.bind(n,function(n){var i=e(n.target);if(i.is(t))return r.apply(i,arguments)})}})}(jQuery),function(e){"use strict";typeof define=="function"&&define.amd?define(["jquery"],e):e(window.jQuery)}(function(e){"use strict";var t=0;e.ajaxTransport("iframe",function(n){if(n.async){var r,i,s;return{send:function(o,u){r=e('<form style="display:none;"></form>'),r.attr("accept-charset",n.formAcceptCharset),s=/\?/.test(n.url)?"&":"?",n.type==="DELETE"?(n.url=n.url+s+"_method=DELETE",n.type="POST"):n.type==="PUT"?(n.url=n.url+s+"_method=PUT",n.type="POST"):n.type==="PATCH"&&(n.url=n.url+s+"_method=PATCH",n.type="POST"),i=e('<iframe src="javascript:false;" name="iframe-transport-'+(t+=1)+'"></iframe>').bind("load",function(){var t,s=e.isArray(n.paramName)?n.paramName:[n.paramName];i.unbind("load").bind("load",function(){var t;try{t=i.contents();if(!t.length||!t[0].firstChild)throw new Error}catch(n){t=undefined}u(200,"success",{iframe:t}),e('<iframe src="javascript:false;"></iframe>').appendTo(r),r.remove()}),r.prop("target",i.prop("name")).prop("action",n.url).prop("method",n.type),n.formData&&e.each(n.formData,function(t,n){e('<input type="hidden"/>').prop("name",n.name).val(n.value).appendTo(r)}),n.fileInput&&n.fileInput.length&&n.type==="POST"&&(t=n.fileInput.clone(),n.fileInput.after(function(e){return t[e]}),n.paramName&&n.fileInput.each(function(t){e(this).prop("name",s[t]||n.paramName)}),r.append(n.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data")),r.submit(),t&&t.length&&n.fileInput.each(function(n,r){var i=e(t[n]);e(r).prop("name",i.prop("name")),i.replaceWith(r)})}),r.append(i).appendTo(document.body)},abort:function(){i&&i.unbind("load").prop("src","javascript".concat(":false;")),r&&r.remove()}}}}),e.ajaxSetup({converters:{"iframe text":function(t){return t&&e(t[0].body).text()},"iframe json":function(t){return t&&e.parseJSON(e(t[0].body).text())},"iframe html":function(t){return t&&e(t[0].body).html()},"iframe script":function(t){return t&&e.globalEval(e(t[0].body).text())}}})}),function(e){"use strict";typeof define=="function"&&define.amd?define(["jquery","jquery.ui.widget"],e):e(window.jQuery)}(function(e){"use strict";e.support.xhrFileUpload=!!window.XMLHttpRequestUpload&&!!window.FileReader,e.support.xhrFormDataFileUpload=!!window.FormData,e.propHooks.elements={get:function(t){return e.nodeName(t,"form")?e.grep(t.elements,function(t){return!e.nodeName(t,"input")||t.type!=="file"}):null}},e.widget("blueimp.fileupload",{options:{dropZone:e(document),pasteZone:e(document),fileInput:undefined,replaceFileInput:!0,paramName:undefined,singleFileUploads:!0,limitMultiFileUploads:undefined,sequentialUploads:!1,limitConcurrentUploads:undefined,forceIframeTransport:!1,redirect:undefined,redirectParamName:undefined,postMessage:undefined,multipart:!0,maxChunkSize:undefined,uploadedBytes:undefined,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,formData:function(e){return e.serializeArray()},add:function(e,t){t.submit()},processData:!1,contentType:!1,cache:!1},_refreshOptionsList:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_BitrateTimer:function(){this.timestamp=+(new Date),this.loaded=0,this.bitrate=0,this.getBitrate=function(e,t,n){var r=e-this.timestamp;if(!this.bitrate||!n||r>n)this.bitrate=(t-this.loaded)*(1e3/r)*8,this.loaded=t,this.timestamp=e;return this.bitrate}},_isXHRUpload:function(t){return!t.forceIframeTransport&&(!t.multipart&&e.support.xhrFileUpload||e.support.xhrFormDataFileUpload)},_getFormData:function(t){var n;return typeof t.formData=="function"?t.formData(t.form):e.isArray(t.formData)?t.formData:t.formData?(n=[],e.each(t.formData,function(e,t){n.push({name:e,value:t})}),n):[]},_getTotal:function(t){var n=0;return e.each(t,function(e,t){n+=t.size||1}),n},_onProgress:function(e,t){if(e.lengthComputable){var n=+(new Date),r,i;if(t._time&&t.progressInterval&&n-t._time<t.progressInterval&&e.loaded!==e.total)return;t._time=n,r=t.total||this._getTotal(t.files),i=parseInt(e.loaded/e.total*(t.chunkSize||r),10)+(t.uploadedBytes||0),this._loaded+=i-(t.loaded||t.uploadedBytes||0),t.lengthComputable=!0,t.loaded=i,t.total=r,t.bitrate=t._bitrateTimer.getBitrate(n,i,t.bitrateInterval),this._trigger("progress",e,t),this._trigger("progressall",e,{lengthComputable:!0,loaded:this._loaded,total:this._total,bitrate:this._bitrateTimer.getBitrate(n,this._loaded,t.bitrateInterval)})}},_initProgressListener:function(t){var n=this,r=t.xhr?t.xhr():e.ajaxSettings.xhr();r.upload&&(e(r.upload).bind("progress",function(e){var r=e.originalEvent;e.lengthComputable=r.lengthComputable,e.loaded=r.loaded,e.total=r.total,n._onProgress(e,t)}),t.xhr=function(){return r})},_initXHRData:function(t){var n,r=t.files[0],i=t.multipart||!e.support.xhrFileUpload,s=t.paramName[0];t.headers=t.headers||{},t.contentRange&&(t.headers["Content-Range"]=t.contentRange),i?e.support.xhrFormDataFileUpload&&(t.postMessage?(n=this._getFormData(t),t.blob?n.push({name:s,value:t.blob}):e.each(t.files,function(e,r){n.push({name:t.paramName[e]||s,value:r})})):(t.formData instanceof FormData?n=t.formData:(n=new FormData,e.each(this._getFormData(t),function(e,t){n.append(t.name,t.value)})),t.blob?(t.headers["Content-Disposition"]='attachment; filename="'+encodeURI(r.name)+'"',n.append(s,t.blob,r.name)):e.each(t.files,function(e,r){(window.Blob&&r instanceof Blob||window.File&&r instanceof File)&&n.append(t.paramName[e]||s,r,r.name)})),t.data=n):(t.headers["Content-Disposition"]='attachment; filename="'+encodeURI(r.name)+'"',t.contentType=r.type,t.data=t.blob||r),t.blob=null},_initIframeSettings:function(t){t.dataType="iframe "+(t.dataType||""),t.formData=this._getFormData(t),t.redirect&&e("<a></a>").prop("href",t.url).prop("host")!==location.host&&t.formData.push({name:t.redirectParamName||"redirect",value:t.redirect})},_initDataSettings:function(e){this._isXHRUpload(e)?(this._chunkedUpload(e,!0)||(e.data||this._initXHRData(e),this._initProgressListener(e)),e.postMessage&&(e.dataType="postmessage "+(e.dataType||""))):this._initIframeSettings(e,"iframe")},_getParamName:function(t){var n=e(t.fileInput),r=t.paramName;return r?e.isArray(r)||(r=[r]):(r=[],n.each(function(){var t=e(this),n=t.prop("name")||"files[]",i=(t.prop("files")||[1]).length;while(i)r.push(n),i-=1}),r.length||(r=[n.prop("name")||"files[]"])),r},_initFormSettings:function(t){if(!t.form||!t.form.length)t.form=e(t.fileInput.prop("form")),t.form.length||(t.form=e(this.options.fileInput.prop("form")));t.paramName=this._getParamName(t),t.url||(t.url=t.form.prop("action")||location.href),t.type=(t.type||t.form.prop("method")||"").toUpperCase(),t.type!=="POST"&&t.type!=="PUT"&&t.type!=="PATCH"&&(t.type="POST"),t.formAcceptCharset||(t.formAcceptCharset=t.form.attr("accept-charset"))},_getAJAXSettings:function(t){var n=e.extend({},this.options,t);return this._initFormSettings(n),this._initDataSettings(n),n},_enhancePromise:function(e){return e.success=e.done,e.error=e.fail,e.complete=e.always,e},_getXHRPromise:function(t,n,r){var i=e.Deferred(),s=i.promise();return n=n||this.options.context||s,t===!0?i.resolveWith(n,r):t===!1&&i.rejectWith(n,r),s.abort=i.promise,this._enhancePromise(s)},_getUploadedBytes:function(e){var t=e.getResponseHeader("Range"),n=t&&t.split("-"),r=n&&n.length>1&&parseInt(n[1],10);return r&&r+1},_chunkedUpload:function(t,n){var r=this,i=t.files[0],s=i.size,o=t.uploadedBytes=t.uploadedBytes||0,u=t.maxChunkSize||s,a=i.slice||i.webkitSlice||i.mozSlice,f=e.Deferred(),l=f.promise(),c,h;return!(this._isXHRUpload(t)&&a&&(o||u<s))||t.data?!1:n?!0:o>=s?(i.error="Uploaded bytes exceed file size",this._getXHRPromise(!1,t.context,[null,"error",i.error])):(h=function(n){var l=e.extend({},t);l.blob=a.call(i,o,o+u,i.type),l.chunkSize=l.blob.size,l.contentRange="bytes "+o+"-"+(o+l.chunkSize-1)+"/"+s,r._initXHRData(l),r._initProgressListener(l),c=(r._trigger("chunksend",null,l)!==!1&&e.ajax(l)||r._getXHRPromise(!1,l.context)).done(function(n,i,u){o=r._getUploadedBytes(u)||o+l.chunkSize,(!l.loaded||l.loaded<l.total)&&r._onProgress(e.Event("progress",{lengthComputable:!0,loaded:o-l.uploadedBytes,total:o-l.uploadedBytes}),l),t.uploadedBytes=l.uploadedBytes=o,l.result=n,l.textStatus=i,l.jqXHR=u,r._trigger("chunkdone",null,l),r._trigger("chunkalways",null,l),o<s?h():f.resolveWith(l.context,[n,i,u])}).fail(function(e,t,n){l.jqXHR=e,l.textStatus=t,l.errorThrown=n,r._trigger("chunkfail",null,l),r._trigger("chunkalways",null,l),f.rejectWith(l.context,[e,t,n])})},this._enhancePromise(l),l.abort=function(){return c.abort()},h(),l)},_beforeSend:function(e,t){this._active===0&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer),this._active+=1,this._loaded+=t.uploadedBytes||0,this._total+=this._getTotal(t.files)},_onDone:function(t,n,r,i){if(!this._isXHRUpload(i)||!i.loaded||i.loaded<i.total){var s=this._getTotal(i.files)||1;this._onProgress(e.Event("progress",{lengthComputable:!0,loaded:s,total:s}),i)}i.result=t,i.textStatus=n,i.jqXHR=r,this._trigger("done",null,i)},_onFail:function(e,t,n,r){r.jqXHR=e,r.textStatus=t,r.errorThrown=n,this._trigger("fail",null,r),r.recalculateProgress&&(this._loaded-=r.loaded||r.uploadedBytes||0,this._total-=r.total||this._getTotal(r.files))},_onAlways:function(e,t,n,r){this._active-=1,this._trigger("always",null,r),this._active===0&&(this._trigger("stop"),this._loaded=this._total=0,this._bitrateTimer=null)},_onSend:function(t,n){var r=this,i,s,o,u,a=r._getAJAXSettings(n),f=function(){return r._sending+=1,a._bitrateTimer=new r._BitrateTimer,i=i||((s||r._trigger("send",t,a)===!1)&&r._getXHRPromise(!1,a.context,s)||r._chunkedUpload(a)||e.ajax(a)).done(function(e,t,n){r._onDone(e,t,n,a)}).fail(function(e,t,n){r._onFail(e,t,n,a)}).always(function(e,t,n){r._sending-=1,r._onAlways(e,t,n,a);if(a.limitConcurrentUploads&&a.limitConcurrentUploads>r._sending){var i=r._slots.shift(),s;while(i){s=i.state?i.state()==="pending":!i.isRejected();if(s){i.resolve();break}i=r._slots.shift()}}}),i};return this._beforeSend(t,a),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(o=e.Deferred(),this._slots.push(o),u=o.pipe(f)):u=this._sequence=this._sequence.pipe(f,f),u.abort=function(){return s=[undefined,"abort","abort"],i?i.abort():(o&&o.rejectWith(a.context,s),f())},this._enhancePromise(u)):f()},_onAdd:function(t,n){var r=this,i=!0,s=e.extend({},this.options,n),o=s.limitMultiFileUploads,u=this._getParamName(s),a,f,l,c;if(!s.singleFileUploads&&!o||!this._isXHRUpload(s))l=[n.files],a=[u];else if(!s.singleFileUploads&&o){l=[],a=[];for(c=0;c<n.files.length;c+=o)l.push(n.files.slice(c,c+o)),f=u.slice(c,c+o),f.length||(f=u),a.push(f)}else a=u;return n.originalFiles=n.files,e.each(l||n.files,function(s,o){var u=e.extend({},n);return u.files=l?o:[o],u.paramName=a[s],u.submit=function(){return u.jqXHR=this.jqXHR=r._trigger("submit",t,this)!==!1&&r._onSend(t,this),this.jqXHR},i=r._trigger("add",t,u),i}),i},_replaceFileInput:function(t){var n=t.clone(!0);e("<form></form>").append(n)[0].reset(),t.after(n).detach(),e.cleanData(t.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(e,r){return r===t[0]?n[0]:r}),t[0]===this.element[0]&&(this.element=n)},_handleFileTreeEntry:function(t,n){var r=this,i=e.Deferred(),s=function(e){e&&!e.entry&&(e.entry=t),i.resolve([e])},o;return n=n||"",t.isFile?t._file?(t._file.relativePath=n,i.resolve(t._file)):t.file(function(e){e.relativePath=n,i.resolve(e)},s):t.isDirectory?(o=t.createReader(),o.readEntries(function(e){r._handleFileTreeEntries(e,n+t.name+"/").done(function(e){i.resolve(e)}).fail(s)},s)):i.resolve([]),i.promise()},_handleFileTreeEntries:function(t,n){var r=this;return e.when.apply(e,e.map(t,function(e){return r._handleFileTreeEntry(e,n)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(t){t=t||{};var n=t.items;return n&&n.length&&(n[0].webkitGetAsEntry||n[0].getAsEntry)?this._handleFileTreeEntries(e.map(n,function(e){var t;return e.webkitGetAsEntry?(t=e.webkitGetAsEntry(),t&&(t._file=e.getAsFile()),t):e.getAsEntry()})):e.Deferred().resolve(e.makeArray(t.files)).promise()},_getSingleFileInputFiles:function(t){t=e(t);var n=t.prop("webkitEntries")||t.prop("entries"),r,i;if(n&&n.length)return this._handleFileTreeEntries(n);r=e.makeArray(t.prop("files"));if(!r.length){i=t.prop("value");if(!i)return e.Deferred().resolve([]).promise();r=[{name:i.replace(/^.*\\/,"")}]}else r[0].name===undefined&&r[0].fileName&&e.each(r,function(e,t){t.name=t.fileName,t.size=t.fileSize});return e.Deferred().resolve(r).promise()},_getFileInputFiles:function(t){return t instanceof e&&t.length!==1?e.when.apply(e,e.map(t,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(t)},_onChange:function(t){var n=this,r={fileInput:e(t.target),form:e(t.target.form)};this._getFileInputFiles(r.fileInput).always(function(e){r.files=e,n.options.replaceFileInput&&n._replaceFileInput(r.fileInput),n._trigger("change",t,r)!==!1&&n._onAdd(t,r)})},_onPaste:function(t){var n=t.originalEvent.clipboardData,r=n&&n.items||[],i={files:[]};e.each(r,function(e,t){var n=t.getAsFile&&t.getAsFile();n&&i.files.push(n)});if(this._trigger("paste",t,i)===!1||this._onAdd(t,i)===!1)return!1},_onDrop:function(e){var t=this,n=e.dataTransfer=e.originalEvent.dataTransfer,r={};n&&n.files&&n.files.length&&e.preventDefault(),this._getDroppedFiles(n).always(function(n){r.files=n,t._trigger("drop",e,r)!==!1&&t._onAdd(e,r)})},_onDragOver:function(t){var n=t.dataTransfer=t.originalEvent.dataTransfer;if(this._trigger("dragover",t)===!1)return!1;n&&e.inArray("Files",n.types)!==-1&&(n.dropEffect="copy",t.preventDefault())},_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop}),this._on(this.options.pasteZone,{paste:this._onPaste})),this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragover drop"),this._off(this.options.pasteZone,"paste"),this._off(this.options.fileInput,"change")},_setOption:function(t,n){var r=e.inArray(t,this._refreshOptionsList)!==-1;r&&this._destroyEventHandlers(),this._super(t,n),r&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var t=this.options;t.fileInput===undefined?t.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):t.fileInput instanceof e||(t.fileInput=e(t.fileInput)),t.dropZone instanceof e||(t.dropZone=e(t.dropZone)),t.pasteZone instanceof e||(t.pasteZone=e(t.pasteZone))},_create:function(){var t=this.options;e.extend(t,e(this.element[0].cloneNode(!1)).data()),this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=this._loaded=this._total=0,this._initEventHandlers()},_destroy:function(){this._destroyEventHandlers()},add:function(t){var n=this;if(!t||this.options.disabled)return;t.fileInput&&!t.files?this._getFileInputFiles(t.fileInput).always(function(e){t.files=e,n._onAdd(null,t)}):(t.files=e.makeArray(t.files),this._onAdd(null,t))},send:function(t){if(t&&!this.options.disabled){if(t.fileInput&&!t.files){var n=this,r=e.Deferred(),i=r.promise(),s,o;return i.abort=function(){return o=!0,s?s.abort():(r.reject(null,"abort","abort"),i)},this._getFileInputFiles(t.fileInput).always(function(e){if(o)return;t.files=e,s=n._onSend(null,t).then(function(e,t,n){r.resolve(e,t,n)},function(e,t,n){r.reject(e,t,n)})}),this._enhancePromise(i)}t.files=e.makeArray(t.files);if(t.files.length)return this._onSend(null,t)}return this._getXHRPromise(!1,t&&t.context)}})}),!function(e){"use strict";e(function(){e.support.transition=function(){var e=function(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},n;for(n in t)if(e.style[n]!==undefined)return t[n]}();return e&&{end:e}}()})}(window.jQuery),!function(e){"use strict";var t=function(t,n){this.options=e.extend({},e.fn.affix.defaults,n),this.$window=e(window).on("scroll.affix.data-api",e.proxy(this.checkPosition,this)).on("click.affix.data-api",e.proxy(function(){setTimeout(e.proxy(this.checkPosition,this),1)},this)),this.$element=e(t),this.checkPosition()};t.prototype.checkPosition=function(){if(!this.$element.is(":visible"))return;var t=e(document).height(),n=this.$window.scrollTop(),r=this.$element.offset(),i=this.options.offset,s=i.bottom,o=i.top,u="affix affix-top affix-bottom",a;typeof i!="object"&&(s=o=i),typeof o=="function"&&(o=i.top()),typeof s=="function"&&(s=i.bottom()),a=this.unpin!=null&&n+this.unpin<=r.top?!1:s!=null&&r.top+this.$element.height()>=t-s?"bottom":o!=null&&n<=o?"top":!1;if(this.affixed===a)return;this.affixed=a,this.unpin=a=="bottom"?r.top-n:null,this.$element.removeClass(u).addClass("affix"+(a?"-"+a:""))};var n=e.fn.affix;e.fn.affix=function(n){return this.each(function(){var r=e(this),i=r.data("affix"),s=typeof n=="object"&&n;i||r.data("affix",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.affix.Constructor=t,e.fn.affix.defaults={offset:0},e.fn.affix.noConflict=function(){return e.fn.affix=n,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var t=e(this),n=t.data();n.offset=n.offset||{},n.offsetBottom&&(n.offset.bottom=n.offsetBottom),n.offsetTop&&(n.offset.top=n.offsetTop),t.affix(n)})})}(window.jQuery),!function(e){"use strict";var t='[data-dismiss="alert"]',n=function(n){e(n).on("click",t,this.close)};n.prototype.close=function(t){function s(){i.trigger("closed").remove()}var n=e(this),r=n.attr("data-target"),i;r||(r=n.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,"")),i=e(r),t&&t.preventDefault(),i.length||(i=n.hasClass("alert")?n:n.parent()),i.trigger(t=e.Event("close"));if(t.isDefaultPrevented())return;i.removeClass("in"),e.support.transition&&i.hasClass("fade")?i.on(e.support.transition.end,s):s()};var r=e.fn.alert;e.fn.alert=function(t){return this.each(function(){var r=e(this),i=r.data("alert");i||r.data("alert",i=new n(this)),typeof t=="string"&&i[t].call(r)})},e.fn.alert.Constructor=n,e.fn.alert.noConflict=function(){return e.fn.alert=r,this},e(document).on("click.alert.data-api",t,n.prototype.close)}(window.jQuery),!function(e){"use strict";var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.button.defaults,n)};t.prototype.setState=function(e){var t="disabled",n=this.$element,r=n.data(),i=n.is("input")?"val":"html";e+="Text",r.resetText||n.data("resetText",n[i]()),n[i](r[e]||this.options[e]),setTimeout(function(){e=="loadingText"?n.addClass(t).attr(t,t):n.removeClass(t).removeAttr(t)},0)},t.prototype.toggle=function(){var e=this.$element.closest('[data-toggle="buttons-radio"]');e&&e.find(".active").removeClass("active"),this.$element.toggleClass("active")};var n=e.fn.button;e.fn.button=function(n){return this.each(function(){var r=e(this),i=r.data("button"),s=typeof n=="object"&&n;i||r.data("button",i=new t(this,s)),n=="toggle"?i.toggle():n&&i.setState(n)})},e.fn.button.defaults={loadingText:"loading..."},e.fn.button.Constructor=t,e.fn.button.noConflict=function(){return e.fn.button=n,this},e(document).on("click.button.data-api","[data-toggle^=button]",function(t){var n=e(t.target);n.hasClass("btn")||(n=n.closest(".btn")),n.button("toggle")})}(window.jQuery),!function(e){"use strict";var t=function(t,n){this.$element=e(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.options.pause=="hover"&&this.$element.on("mouseenter",e.proxy(this.pause,this)).on("mouseleave",e.proxy(this.cycle,this))};t.prototype={cycle:function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},getActiveIndex:function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},to:function(t){var n=this.getActiveIndex(),r=this;if(t>this.$items.length-1||t<0)return;return this.sliding?this.$element.one("slid",function(){r.to(t)}):n==t?this.pause().cycle():this.slide(t>n?"next":"prev",e(this.$items[t]))},pause:function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition.end&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),clearInterval(this.interval),this.interval=null,this},next:function(){if(this.sliding)return;return this.slide("next")},prev:function(){if(this.sliding)return;return this.slide("prev")},slide:function(t,n){var r=this.$element.find(".item.active"),i=n||r[t](),s=this.interval,o=t=="next"?"left":"right",u=t=="next"?"first":"last",a=this,f;this.sliding=!0,s&&this.pause(),i=i.length?i:this.$element.find(".item")[u](),f=e.Event("slide",{relatedTarget:i[0],direction:o});if(i.hasClass("active"))return;this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid",function(){var t=e(a.$indicators.children()[a.getActiveIndex()]);t&&t.addClass("active")}));if(e.support.transition&&this.$element.hasClass("slide")){this.$element.trigger(f);if(f.isDefaultPrevented())return;i.addClass(t),i[0].offsetWidth,r.addClass(o),i.addClass(o),this.$element.one(e.support.transition.end,function(){i.removeClass([t,o].join(" ")).addClass("active"),r.removeClass(["active",o].join(" ")),a.sliding=!1,setTimeout(function(){a.$element.trigger("slid")},0)})}else{this.$element.trigger(f);if(f.isDefaultPrevented())return;r.removeClass("active"),i.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return s&&this.cycle(),this}};var n=e.fn.carousel;e.fn.carousel=function(n){return this.each(function(){var r=e(this),i=r.data("carousel"),s=e.extend({},e.fn.carousel.defaults,typeof n=="object"&&n),o=typeof n=="string"?n:s.slide;i||r.data("carousel",i=new t(this,s)),typeof n=="number"?i.to(n):o?i[o]():s.interval&&i.pause().cycle()})},e.fn.carousel.defaults={interval:5e3,pause:"hover"},e.fn.carousel.Constructor=t,e.fn.carousel.noConflict=function(){return e.fn.carousel=n,this},e(document).on("click.carousel.data-api","[data-slide], [data-slide-to]",function(t){var n=e(this),r,i=e(n.attr("data-target")||(r=n.attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,"")),s=e.extend({},i.data(),n.data()),o;i.carousel(s),(o=n.attr("data-slide-to"))&&i.data("carousel").pause().to(o).cycle(),t.preventDefault()})}(window.jQuery),!function(e){"use strict";var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.collapse.defaults,n),this.options.parent&&(this.$parent=e(this.options.parent)),this.options.toggle&&this.toggle()};t.prototype={constructor:t,dimension:function(){var e=this.$element.hasClass("width");return e?"width":"height"},show:function(){var t,n,r,i;if(this.transitioning||this.$element.hasClass("in"))return;t=this.dimension(),n=e.camelCase(["scroll",t].join("-")),r=this.$parent&&this.$parent.find("> .accordion-group > .in");if(r&&r.length){i=r.data("collapse");if(i&&i.transitioning)return;r.collapse("hide"),i||r.data("collapse",null)}this.$element[t](0),this.transition("addClass",e.Event("show"),"shown"),e.support.transition&&this.$element[t](this.$element[0][n])},hide:function(){var t;if(this.transitioning||!this.$element.hasClass("in"))return;t=this.dimension(),this.reset(this.$element[t]()),this.transition("removeClass",e.Event("hide"),"hidden"),this.$element[t](0)},reset:function(e){var t=this.dimension();return this.$element.removeClass("collapse")[t](e||"auto")[0].offsetWidth,this.$element[e!==null?"addClass":"removeClass"]("collapse"),this},transition:function(t,n,r){var i=this,s=function(){n.type=="show"&&i.reset(),i.transitioning=0,i.$element.trigger(r)};this.$element.trigger(n);if(n.isDefaultPrevented())return;this.transitioning=1,this.$element[t]("in"),e.support.transition&&this.$element.hasClass("collapse")?this.$element.one(e.support.transition.end,s):s()},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}};var n=e.fn.collapse;e.fn.collapse=function(n){return this.each(function(){var r=e(this),i=r.data("collapse"),s=e.extend({},e.fn.collapse.defaults,r.data(),typeof n=="object"&&n);i||r.data("collapse",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.collapse.defaults={toggle:!0},e.fn.collapse.Constructor=t,e.fn.collapse.noConflict=function(){return e.fn.collapse=n,this},e(document).on("click.collapse.data-api","[data-toggle=collapse]",function(t){var n=e(this),r,i=n.attr("data-target")||t.preventDefault()||(r=n.attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,""),s=e(i).data("collapse")?"toggle":n.data();n[e(i).hasClass("in")?"addClass":"removeClass"]("collapsed"),e(i).collapse(s)})}(window.jQuery),!function(e){"use strict";function r(){e(".dropdown-backdrop").remove(),e(t).each(function(){i(e(this)).removeClass("open")})}function i(t){var n=t.attr("data-target"),r;n||(n=t.attr("href"),n=n&&/#/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,"")),r=n&&e(n);if(!r||!r.length)r=t.parent();return r}var t="[data-toggle=dropdown]",n=function(t){var n=e(t).on("click.dropdown.data-api",this.toggle);e("html").on("click.dropdown.data-api",function(){n.parent().removeClass("open")})};n.prototype={constructor:n,toggle:function(t){var n=e(this),s,o;if(n.is(".disabled, :disabled"))return;return s=i(n),o=s.hasClass("open"),r(),o||("ontouchstart"in document.documentElement&&e('<div class="dropdown-backdrop"/>').insertBefore(e(this)).on("click",r),s.toggleClass("open")),n.focus(),!1},keydown:function(n){var r,s,o,u,a,f;if(!/(38|40|27)/.test(n.keyCode))return;r=e(this),n.preventDefault(),n.stopPropagation();if(r.is(".disabled, :disabled"))return;u=i(r),a=u.hasClass("open");if(!a||a&&n.keyCode==27)return n.which==27&&u.find(t).focus(),r.click();s=e("[role=menu] li:not(.divider):visible a",u);if(!s.length)return;f=s.index(s.filter(":focus")),n.keyCode==38&&
f>0&&f--,n.keyCode==40&&f<s.length-1&&f++,~f||(f=0),s.eq(f).focus()}};var s=e.fn.dropdown;e.fn.dropdown=function(t){return this.each(function(){var r=e(this),i=r.data("dropdown");i||r.data("dropdown",i=new n(this)),typeof t=="string"&&i[t].call(r)})},e.fn.dropdown.Constructor=n,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=s,this},e(document).on("click.dropdown.data-api",r).on("click.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.dropdown.data-api",t,n.prototype.toggle).on("keydown.dropdown.data-api",t+", [role=menu]",n.prototype.keydown)}(window.jQuery),!function(e){"use strict";var t=function(t,n){this.options=n,this.$element=e(t).delegate('[data-dismiss="modal"]',"click.dismiss.modal",e.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};t.prototype={constructor:t,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var t=this,n=e.Event("show");this.$element.trigger(n);if(this.isShown||n.isDefaultPrevented())return;this.isShown=!0,this.escape(),this.backdrop(function(){var n=e.support.transition&&t.$element.hasClass("fade");t.$element.parent().length||t.$element.appendTo(document.body),t.$element.show(),n&&t.$element[0].offsetWidth,t.$element.addClass("in").attr("aria-hidden",!1),t.enforceFocus(),n?t.$element.one(e.support.transition.end,function(){t.$element.focus().trigger("shown")}):t.$element.focus().trigger("shown")})},hide:function(t){t&&t.preventDefault();var n=this;t=e.Event("hide"),this.$element.trigger(t);if(!this.isShown||t.isDefaultPrevented())return;this.isShown=!1,this.escape(),e(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),e.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal()},enforceFocus:function(){var t=this;e(document).on("focusin.modal",function(e){t.$element[0]!==e.target&&!t.$element.has(e.target).length&&t.$element.focus()})},escape:function(){var e=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(t){t.which==27&&e.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var t=this,n=setTimeout(function(){t.$element.off(e.support.transition.end),t.hideModal()},500);this.$element.one(e.support.transition.end,function(){clearTimeout(n),t.hideModal()})},hideModal:function(){var e=this;this.$element.hide(),this.backdrop(function(){e.removeBackdrop(),e.$element.trigger("hidden")})},removeBackdrop:function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},backdrop:function(t){var n=this,r=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var i=e.support.transition&&r;this.$backdrop=e('<div class="modal-backdrop '+r+'" />').appendTo(document.body),this.$backdrop.click(this.options.backdrop=="static"?e.proxy(this.$element[0].focus,this.$element[0]):e.proxy(this.hide,this)),i&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in");if(!t)return;i?this.$backdrop.one(e.support.transition.end,t):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(e.support.transition.end,t):t()):t&&t()}};var n=e.fn.modal;e.fn.modal=function(n){return this.each(function(){var r=e(this),i=r.data("modal"),s=e.extend({},e.fn.modal.defaults,r.data(),typeof n=="object"&&n);i||r.data("modal",i=new t(this,s)),typeof n=="string"?i[n]():s.show&&i.show()})},e.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},e.fn.modal.Constructor=t,e.fn.modal.noConflict=function(){return e.fn.modal=n,this},e(document).on("click.modal.data-api",'[data-toggle="modal"]',function(t){var n=e(this),r=n.attr("href"),i=e(n.attr("data-target")||r&&r.replace(/.*(?=#[^\s]+$)/,"")),s=i.data("modal")?"toggle":e.extend({remote:!/#/.test(r)&&r},i.data(),n.data());t.preventDefault(),i.modal(s).one("hide",function(){n.focus()})})}(window.jQuery),!function(e){"use strict";function t(t,n){var r=e.proxy(this.process,this),i=e(t).is("body")?e(window):e(t),s;this.options=e.extend({},e.fn.scrollspy.defaults,n),this.$scrollElement=i.on("scroll.scroll-spy.data-api",r),this.selector=(this.options.target||(s=e(t).attr("href"))&&s.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.$body=e("body"),this.refresh(),this.process()}t.prototype={constructor:t,refresh:function(){var t=this,n;this.offsets=e([]),this.targets=e([]),n=this.$body.find(this.selector).map(function(){var n=e(this),r=n.data("target")||n.attr("href"),i=/^#\w/.test(r)&&e(r);return i&&i.length&&[[i.position().top+(!e.isWindow(t.$scrollElement.get(0))&&t.$scrollElement.scrollTop()),r]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){t.offsets.push(this[0]),t.targets.push(this[1])})},process:function(){var e=this.$scrollElement.scrollTop()+this.options.offset,t=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,n=t-this.$scrollElement.height(),r=this.offsets,i=this.targets,s=this.activeTarget,o;if(e>=n)return s!=(o=i.last()[0])&&this.activate(o);for(o=r.length;o--;)s!=i[o]&&e>=r[o]&&(!r[o+1]||e<=r[o+1])&&this.activate(i[o])},activate:function(t){var n,r;this.activeTarget=t,e(this.selector).parent(".active").removeClass("active"),r=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',n=e(r).parent("li").addClass("active"),n.parent(".dropdown-menu").length&&(n=n.closest("li.dropdown").addClass("active")),n.trigger("activate")}};var n=e.fn.scrollspy;e.fn.scrollspy=function(n){return this.each(function(){var r=e(this),i=r.data("scrollspy"),s=typeof n=="object"&&n;i||r.data("scrollspy",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.scrollspy.Constructor=t,e.fn.scrollspy.defaults={offset:10},e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=n,this},e(window).on("load",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);t.scrollspy(t.data())})})}(window.jQuery),!function(e){"use strict";var t=function(t){this.element=e(t)};t.prototype={constructor:t,show:function(){var t=this.element,n=t.closest("ul:not(.dropdown-menu)"),r=t.attr("data-target"),i,s,o;r||(r=t.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,""));if(t.parent("li").hasClass("active"))return;i=n.find(".active:last a")[0],o=e.Event("show",{relatedTarget:i}),t.trigger(o);if(o.isDefaultPrevented())return;s=e(r),this.activate(t.parent("li"),n),this.activate(s,s.parent(),function(){t.trigger({type:"shown",relatedTarget:i})})},activate:function(t,n,r){function o(){i.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),t.addClass("active"),s?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu")&&t.closest("li.dropdown").addClass("active"),r&&r()}var i=n.find("> .active"),s=r&&e.support.transition&&i.hasClass("fade");s?i.one(e.support.transition.end,o):o(),i.removeClass("in")}};var n=e.fn.tab;e.fn.tab=function(n){return this.each(function(){var r=e(this),i=r.data("tab");i||r.data("tab",i=new t(this)),typeof n=="string"&&i[n]()})},e.fn.tab.Constructor=t,e.fn.tab.noConflict=function(){return e.fn.tab=n,this},e(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(t){t.preventDefault(),e(this).tab("show")})}(window.jQuery),!function(e){"use strict";var t=function(e,t){this.init("tooltip",e,t)};t.prototype={constructor:t,init:function(t,n,r){var i,s,o,u,a;this.type=t,this.$element=e(n),this.options=this.getOptions(r),this.enabled=!0,o=this.options.trigger.split(" ");for(a=o.length;a--;)u=o[a],u=="click"?this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this)):u!="manual"&&(i=u=="hover"?"mouseenter":"focus",s=u=="hover"?"mouseleave":"blur",this.$element.on(i+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(s+"."+this.type,this.options.selector,e.proxy(this.leave,this)));this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(t){return t=e.extend({},e.fn[this.type].defaults,this.$element.data(),t),t.delay&&typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),t},enter:function(t){var n=e.fn[this.type].defaults,r={},i;this._options&&e.each(this._options,function(e,t){n[e]!=t&&(r[e]=t)},this),i=e(t.currentTarget)[this.type](r).data(this.type);if(!i.options.delay||!i.options.delay.show)return i.show();clearTimeout(this.timeout),i.hoverState="in",this.timeout=setTimeout(function(){i.hoverState=="in"&&i.show()},i.options.delay.show)},leave:function(t){var n=e(t.currentTarget)[this.type](this._options).data(this.type);this.timeout&&clearTimeout(this.timeout);if(!n.options.delay||!n.options.delay.hide)return n.hide();n.hoverState="out",this.timeout=setTimeout(function(){n.hoverState=="out"&&n.hide()},n.options.delay.hide)},show:function(){var t,n,r,i,s,o,u=e.Event("show");if(this.hasContent()&&this.enabled){this.$element.trigger(u);if(u.isDefaultPrevented())return;t=this.tip(),this.setContent(),this.options.animation&&t.addClass("fade"),s=typeof this.options.placement=="function"?this.options.placement.call(this,t[0],this.$element[0]):this.options.placement,t.detach().css({top:0,left:0,display:"block"}),this.options.container?t.appendTo(this.options.container):t.insertAfter(this.$element),n=this.getPosition(),r=t[0].offsetWidth,i=t[0].offsetHeight;switch(s){case"bottom":o={top:n.top+n.height,left:n.left+n.width/2-r/2};break;case"top":o={top:n.top-i,left:n.left+n.width/2-r/2};break;case"left":o={top:n.top+n.height/2-i/2,left:n.left-r};break;case"right":o={top:n.top+n.height/2-i/2,left:n.left+n.width}}this.applyPlacement(o,s),this.$element.trigger("shown")}},applyPlacement:function(e,t){var n=this.tip(),r=n[0].offsetWidth,i=n[0].offsetHeight,s,o,u,a;n.offset(e).addClass(t).addClass("in"),s=n[0].offsetWidth,o=n[0].offsetHeight,t=="top"&&o!=i&&(e.top=e.top+i-o,a=!0),t=="bottom"||t=="top"?(u=0,e.left<0&&(u=e.left*-2,e.left=0,n.offset(e),s=n[0].offsetWidth,o=n[0].offsetHeight),this.replaceArrow(u-r+s,s,"left")):this.replaceArrow(o-i,o,"top"),a&&n.offset(e)},replaceArrow:function(e,t,n){this.arrow().css(n,e?50*(1-e/t)+"%":"")},setContent:function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},hide:function(){function i(){var t=setTimeout(function(){n.off(e.support.transition.end).detach()},500);n.one(e.support.transition.end,function(){clearTimeout(t),n.detach()})}var t=this,n=this.tip(),r=e.Event("hide");this.$element.trigger(r);if(r.isDefaultPrevented())return;return n.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?i():n.detach(),this.$element.trigger("hidden"),this},fixTitle:function(){var e=this.$element;(e.attr("title")||typeof e.attr("data-original-title")!="string")&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var t=this.$element[0];return e.extend({},typeof t.getBoundingClientRect=="function"?t.getBoundingClientRect():{width:t.offsetWidth,height:t.offsetHeight},this.$element.offset())},getTitle:function(){var e,t=this.$element,n=this.options;return e=t.attr("data-original-title")||(typeof n.title=="function"?n.title.call(t[0]):n.title),e},tip:function(){return this.$tip=this.$tip||e(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(t){var n=t?e(t.currentTarget)[this.type](this._options).data(this.type):this;n.tip().hasClass("in")?n.hide():n.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var n=e.fn.tooltip;e.fn.tooltip=function(n){return this.each(function(){var r=e(this),i=r.data("tooltip"),s=typeof n=="object"&&n;i||r.data("tooltip",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.tooltip.Constructor=t,e.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},e.fn.tooltip.noConflict=function(){return e.fn.tooltip=n,this}}(window.jQuery),!function(e){"use strict";var t=function(e,t){this.init("popover",e,t)};t.prototype=e.extend({},e.fn.tooltip.Constructor.prototype,{constructor:t,setContent:function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content")[this.options.html?"html":"text"](n),e.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var e,t=this.$element,n=this.options;return e=(typeof n.content=="function"?n.content.call(t[0]):n.content)||t.attr("data-content"),e},tip:function(){return this.$tip||(this.$tip=e(this.options.template)),this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}});var n=e.fn.popover;e.fn.popover=function(n){return this.each(function(){var r=e(this),i=r.data("popover"),s=typeof n=="object"&&n;i||r.data("popover",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.popover.Constructor=t,e.fn.popover.defaults=e.extend({},e.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),e.fn.popover.noConflict=function(){return e.fn.popover=n,this}}(window.jQuery),!function(e){"use strict";var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.typeahead.defaults,n),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.source=this.options.source,this.$menu=e(this.options.menu),this.shown=!1,this.listen()};t.prototype={constructor:t,select:function(){var e=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(e)).change(),this.hide()},updater:function(e){return e},show:function(){var t=e.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return this.$menu.insertAfter(this.$element).css({top:t.top+t.height,left:t.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(t){var n;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(n=e.isFunction(this.source)?this.source(this.query,e.proxy(this.process,this)):this.source,n?this.process(n):this)},process:function(t){var n=this;return t=e.grep(t,function(e){return n.matcher(e)}),t=this.sorter(t),t.length?this.render(t.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(e){return~e.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(e){var t=[],n=[],r=[],i;while(i=e.shift())i.toLowerCase().indexOf(this.query.toLowerCase())?~i.indexOf(this.query)?n.push(i):r.push(i):t.push(i);return t.concat(n,r)},highlighter:function(e){var t=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return e.replace(new RegExp("("+t+")","ig"),function(e,t){return"<strong>"+t+"</strong>"})},render:function(t){var n=this;return t=e(t).map(function(t,r){return t=e(n.options.item).attr("data-value",r),t.find("a").html(n.highlighter(r)),t[0]}),t.first().addClass("active"),this.$menu.html(t),this},next:function(t){var n=this.$menu.find(".active").removeClass("active"),r=n.next();r.length||(r=e(this.$menu.find("li")[0])),r.addClass("active")},prev:function(e){var t=this.$menu.find(".active").removeClass("active"),n=t.prev();n.length||(n=this.$menu.find("li").last()),n.addClass("active")},listen:function(){this.$element.on("focus",e.proxy(this.focus,this)).on("blur",e.proxy(this.blur,this)).on("keypress",e.proxy(this.keypress,this)).on("keyup",e.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",e.proxy(this.keydown,this)),this.$menu.on("click",e.proxy(this.click,this)).on("mouseenter","li",e.proxy(this.mouseenter,this)).on("mouseleave","li",e.proxy(this.mouseleave,this))},eventSupported:function(e){var t=e in this.$element;return t||(this.$element.setAttribute(e,"return;"),t=typeof this.$element[e]=="function"),t},move:function(e){if(!this.shown)return;switch(e.keyCode){case 9:case 13:case 27:e.preventDefault();break;case 38:e.preventDefault(),this.prev();break;case 40:e.preventDefault(),this.next()}e.stopPropagation()},keydown:function(t){this.suppressKeyPressRepeat=~e.inArray(t.keyCode,[40,38,9,13,27]),this.move(t)},keypress:function(e){if(this.suppressKeyPressRepeat)return;this.move(e)},keyup:function(e){switch(e.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}e.stopPropagation(),e.preventDefault()},focus:function(e){this.focused=!0},blur:function(e){this.focused=!1,!this.mousedover&&this.shown&&this.hide()},click:function(e){e.stopPropagation(),e.preventDefault(),this.select(),this.$element.focus()},mouseenter:function(t){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),e(t.currentTarget).addClass("active")},mouseleave:function(e){this.mousedover=!1,!this.focused&&this.shown&&this.hide()}};var n=e.fn.typeahead;e.fn.typeahead=function(n){return this.each(function(){var r=e(this),i=r.data("typeahead"),s=typeof n=="object"&&n;i||r.data("typeahead",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},e.fn.typeahead.Constructor=t,e.fn.typeahead.noConflict=function(){return e.fn.typeahead=n,this},e(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(t){var n=e(this);if(n.data("typeahead"))return;n.typeahead(n.data())})}(window.jQuery),!function(e){function t(){return new Date(Date.UTC.apply(Date,arguments))}function n(){var e=new Date;return t(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate())}var r=function(t,n){var r=this;this.element=e(t),this.language=n.language||this.element.data("date-language")||"en",this.language=this.language in i?this.language:"en",this.format=s.parseFormat(n.format||this.element.data("date-format")||"mm/dd/yyyy"),this.isInline=!1,this.isInput=this.element.is("input"),this.component=this.element.is(".date")?this.element.find(".add-on"):!1,this.hasInput=this.component&&this.element.find("input").length,this.component&&this.component.length===0&&(this.component=!1),this._attachEvents(),this.forceParse=!0,"forceParse"in n?this.forceParse=n.forceParse:"dateForceParse"in this.element.data()&&(this.forceParse=this.element.data("date-force-parse")),this.picker=e(s.template).appendTo(this.isInline?this.element:"body").on({click:e.proxy(this.click,this),mousedown:e.proxy(this.mousedown,this)}),this.isInline?this.picker.addClass("datepicker-inline"):this.picker.addClass("datepicker-dropdown dropdown-menu"),e(document).on("mousedown",function(t){e(t.target).closest(".datepicker").length===0&&r.hide()}),this.autoclose=!1,"autoclose"in n?this.autoclose=n.autoclose:"dateAutoclose"in this.element.data()&&(this.autoclose=this.element.data("date-autoclose")),this.keyboardNavigation=!0,"keyboardNavigation"in n?this.keyboardNavigation=n.keyboardNavigation:"dateKeyboardNavigation"in this.element.data()&&(this.keyboardNavigation=this.element.data("date-keyboard-navigation")),this.viewMode=this.startViewMode=0;switch(n.startView||this.element.data("date-start-view")){case 2:case"decade":this.viewMode=this.startViewMode=2;break;case 1:case"year":this.viewMode=this.startViewMode=1}this.todayBtn=n.todayBtn||this.element.data("date-today-btn")||!1,this.todayHighlight=n.todayHighlight||this.element.data("date-today-highlight")||!1,this.weekStart=(n.weekStart||this.element.data("date-weekstart")||i[this.language].weekStart||0)%7,this.weekEnd=(this.weekStart+6)%7,this.startDate=-Infinity,this.endDate=Infinity,this.daysOfWeekDisabled=[],this.setStartDate(n.startDate||this.element.data("date-startdate")),this.setEndDate(n.endDate||this.element.data("date-enddate")),this.setDaysOfWeekDisabled(n.daysOfWeekDisabled||this.element.data("date-days-of-week-disabled")),this.fillDow(),this.fillMonths(),this.update(),this.showMode(),this.isInline&&this.show()};r.prototype={constructor:r,_events:[],_attachEvents:function(){this._detachEvents(),this.isInput?this._events=[[this.element,{focus:e.proxy(this.show,this),keyup:e.proxy(this.update,this),keydown:e.proxy(this.keydown,this)}]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),{focus:e.proxy(this.show,this),keyup:e.proxy(this.update,this),keydown:e.proxy(this.keydown,this)}],[this.component,{click:e.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:e.proxy(this.show,this)}]];for(var t=0,n,r;t<this._events.length;t++)n=this._events[t][0],r=this._events[t][1],n.on(r)},_detachEvents:function(){for(var e=0,t,n;e<this._events.length;e++)t=this._events[e][0],n=this._events[e][1],t.off(n);this._events=[]},show:function(t){this.picker.show(),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.update(),this.place(),e(window).on("resize",e.proxy(this.place,this)),t&&(t.stopPropagation(),t.preventDefault()),this.element.trigger({type:"show",date:this.date})},hide:function(t){if(this.isInline)return;this.picker.hide(),e(window).off("resize",this.place),this.viewMode=this.startViewMode,this.showMode(),this.isInput||e(document).off("mousedown",this.hide),this.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this.element.trigger({type:"hide",date:this.date})},remove:function(){this._detachEvents(),this.picker.remove(),delete this.element.data().datepicker},getDate:function(){var e=this.getUTCDate();return new Date(e.getTime()+e.getTimezoneOffset()*6e4)},getUTCDate:function(){return this.date},setDate:function(e){this.setUTCDate(new Date(e.getTime()-e.getTimezoneOffset()*6e4))},setUTCDate:function(e){this.date=e,this.setValue()},setValue:function(){var e=this.getFormattedDate();this.isInput?this.element.prop("value",e):(this.component&&this.element.find("input").prop("value",e),this.element.data("date",e))},getFormattedDate:function(e){return e==undefined&&(e=this.format),s.formatDate(this.date,e,this.language)},setStartDate:function(e){this.startDate=e||-Infinity,this.startDate!==-Infinity&&(this.startDate=s.parseDate(this.startDate,this.format,this.language)),this.update(),this.updateNavArrows()},setEndDate:function(e){this.endDate=e||Infinity,this.endDate!==Infinity&&(this.endDate=s.parseDate(this.endDate,this.format,this.language)),this.update(),this.updateNavArrows()},setDaysOfWeekDisabled:function(t){this.daysOfWeekDisabled=t||[],e.isArray(this.daysOfWeekDisabled)||(this.daysOfWeekDisabled=this.daysOfWeekDisabled.split(/,\s*/)),this.daysOfWeekDisabled=e.map(this.daysOfWeekDisabled,function(e){return parseInt(e,10)}),this.update(),this.updateNavArrows()},place:function(){if(this.isInline)return;var t=parseInt(this.element.parents().filter(function(){return e(this).css("z-index")!="auto"}).first().css("z-index"))+10,n=this.component?this.component.offset():this.element.offset();this.picker.css({top:n.top+this.height,left:n.left,zIndex:t})},update:function(){var e,t=!1;arguments&&arguments.length&&(typeof arguments[0]=="string"||arguments[0]instanceof Date)?(e=arguments[0],t=!0):e=this.isInput?this.element.prop("value"):this.element.data("date")||this.element.find("input").prop("value"),this.date=s.parseDate(e,this.format,this.language),t&&this.setValue(),this.date<this.startDate?this.viewDate=new Date(this.startDate):this.date>this.endDate?this.viewDate=new Date(this.endDate):this.viewDate=new Date(this.date),this.fill()},fillDow:function(){var e=this.weekStart,t="<tr>";while(e<this.weekStart+7)t+='<th class="dow">'+i[this.language].daysMin[e++%7]+"</th>";t+="</tr>",this.picker.find(".datepicker-days thead").append(t)},fillMonths:function(){var e="",t=0;while(t<12)e+='<span class="month">'+i[this.language].monthsShort[t++]+"</span>";this.picker.find(".datepicker-months td").html(e)},fill:function(){var n=new Date(this.viewDate),r=n.getUTCFullYear(),o=n.getUTCMonth(),u=this.startDate!==-Infinity?this.startDate.getUTCFullYear():-Infinity,a=this.startDate!==-Infinity?this.startDate.getUTCMonth():-Infinity,f=this.endDate!==Infinity?this.endDate.getUTCFullYear():Infinity,l=this.endDate!==Infinity?this.endDate.getUTCMonth():Infinity,c=this.date.valueOf(),h=new Date;this.picker.find(".datepicker-days thead th:eq(1)").text(i[this.language].months[o]+" "+r),this.picker.find("tfoot th.today").text(i[this.language].today).toggle(this.todayBtn!==!1),this.updateNavArrows(),this.fillMonths();var p=t(r,o-1,28,0,0,0,0),d=s.getDaysInMonth(p.getUTCFullYear(),p.getUTCMonth());p.setUTCDate(d),p.setUTCDate(d-(p.getUTCDay()-this.weekStart+7)%7);var v=new Date(p);v.setUTCDate(v.getUTCDate()+42),v=v.valueOf();var m=[],g;while(p.valueOf()<v){p.getUTCDay()==this.weekStart&&m.push("<tr>"),g="";if(p.getUTCFullYear()<r||p.getUTCFullYear()==r&&p.getUTCMonth()<o)g+=" old";else if(p.getUTCFullYear()>r||p.getUTCFullYear()==r&&p.getUTCMonth()>o)g+=" new";this.todayHighlight&&p.getUTCFullYear()==h.getFullYear()&&p.getUTCMonth()==h.getMonth()&&p.getUTCDate()==h.getDate()&&(g+=" today"),p.valueOf()==c&&(g+=" active");if(p.valueOf()<this.startDate||p.valueOf()>this.endDate||e.inArray(p.getUTCDay(),this.daysOfWeekDisabled)!==-1)g+=" disabled";m.push('<td class="day'+g+'">'+p.getUTCDate()+"</td>"),p.getUTCDay()==this.weekEnd&&m.push("</tr>"),p.setUTCDate(p.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(m.join(""));var y=this.date.getUTCFullYear(),b=this.picker.find(".datepicker-months").find("th:eq(1)").text(r).end().find("span").removeClass("active");y==r&&b.eq(this.date.getUTCMonth()).addClass("active"),(r<u||r>f)&&b.addClass("disabled"),r==u&&b.slice(0,a).addClass("disabled"),r==f&&b.slice(l+1).addClass("disabled"),m="",r=parseInt(r/10,10)*10;var w=this.picker.find(".datepicker-years").find("th:eq(1)").text(r+"-"+(r+9)).end().find("td");r-=1;for(var E=-1;E<11;E++)m+='<span class="year'+(E==-1||E==10?" old":"")+(y==r?" active":"")+(r<u||r>f?" disabled":"")+'">'+r+"</span>",r+=1;w.html(m)},updateNavArrows:function(){var e=new Date(this.viewDate),t=e.getUTCFullYear(),n=e.getUTCMonth();switch(this.viewMode){case 0:this.startDate!==-Infinity&&t<=this.startDate.getUTCFullYear()&&n<=this.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.endDate!==Infinity&&t>=this.endDate.getUTCFullYear()&&n>=this.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:case 2:this.startDate!==-Infinity&&t<=this.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.endDate!==Infinity&&t>=this.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}},click:function(n){n.stopPropagation(),n.preventDefault();var r=e(n.target).closest("span, td, th");if(r.length==1)switch(r[0].nodeName.toLowerCase()){case"th":switch(r[0].className){case"switch":this.showMode(1);break;case"prev":case"next":var i=s.modes[this.viewMode].navStep*(r[0].className=="prev"?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,i);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,i)}this.fill();break;case"today":var o=new Date;o=t(o.getFullYear(),o.getMonth(),o.getDate(),0,0,0),this.showMode(-2);var u=this.todayBtn=="linked"?null:"view";this._setDate(o,u)}break;case"span":if(!r.is(".disabled")){this.viewDate.setUTCDate(1);if(r.is(".month")){var a=r.parent().find("span").index(r);this.viewDate.setUTCMonth(a),this.element.trigger({type:"changeMonth",date:this.viewDate})}else{var f=parseInt(r.text(),10)||0;this.viewDate.setUTCFullYear(f),this.element.trigger({type:"changeYear",date:this.viewDate})}this.showMode(-1),this.fill()}break;case"td":if(r.is(".day")&&!r.is(".disabled")){var l=parseInt(r.text(),10)||1,f=this.viewDate.getUTCFullYear(),a=this.viewDate.getUTCMonth();r.is(".old")?a===0?(a=11,f-=1):a-=1:r.is(".new")&&(a==11?(a=0,f+=1):a+=1),this._setDate(t(f,a,l,0,0,0,0))}}},_setDate:function(e,t){if(!t||t=="date")this.date=e;if(!t||t=="view")this.viewDate=e;this.fill(),this.setValue(),this.element.trigger({type:"changeDate",date:this.date});var n;this.isInput?n=this.element:this.component&&(n=this.element.find("input")),n&&(n.change(),this.autoclose&&(!t||t=="date")&&this.hide())},moveMonth:function(e,t){if(!t)return e;var n=new Date(e.valueOf()),r=n.getUTCDate(),i=n.getUTCMonth(),s=Math.abs(t),o,u;t=t>0?1:-1;if(s==1){u=t==-1?function(){return n.getUTCMonth()==i}:function(){return n.getUTCMonth()!=o},o=i+t,n.setUTCMonth(o);if(o<0||o>11)o=(o+12)%12}else{for(var a=0;a<s;a++)n=this.moveMonth(n,t);o=n.getUTCMonth(),n.setUTCDate(r),u=function(){return o!=n.getUTCMonth()}}while(u())n.setUTCDate(--r),n.setUTCMonth(o);return n},moveYear:function(e,t){return this.moveMonth(e,t*12)},dateWithinRange:function(e){return e>=this.startDate&&e<=this.endDate},keydown:function(e){if(this.picker.is(":not(:visible)")){e.keyCode==27&&this.show();return}var t=!1,n,r,i,s,o;switch(e.keyCode){case 27:this.hide(),e.preventDefault();break;case 37:case 39:if(!this.keyboardNavigation)break;n=e.keyCode==37?-1:1,e.ctrlKey?(s=this.moveYear(this.date,n),o=this.moveYear(this.viewDate,n)):e.shiftKey?(s=this.moveMonth(this.date,n),o=this.moveMonth(this.viewDate,n)):(s=new Date(this.date),s.setUTCDate(this.date.getUTCDate()+n),o=new Date(this.viewDate),o.setUTCDate(this.viewDate.getUTCDate()+n)),this.dateWithinRange(s)&&(this.date=s,this.viewDate=o,this.setValue(),this.update(),e.preventDefault(),t=!0);break;case 38:case 40:if(!this.keyboardNavigation)break;n=e.keyCode==38?-1:1,e.ctrlKey?(s=this.moveYear(this.date,n),o=this.moveYear(this.viewDate,n)):e.shiftKey?(s=this.moveMonth(this.date,n),o=this.moveMonth(this.viewDate,n)):(s=new Date(this.date),s.setUTCDate(this.date.getUTCDate()+n*7),o=new Date(this.viewDate),o.setUTCDate(this.viewDate.getUTCDate()+n*7)),this.dateWithinRange(s)&&(this.date=s,this.viewDate=o,this.setValue(),this.update(),e.preventDefault(),t=!0);break;case 13:this.hide(),e.preventDefault();break;case 9:this.hide()}if(t){this.element.trigger({type:"changeDate",date:this.date});var u;this.isInput?u=this.element:this.component&&(u=this.element.find("input")),u&&u.change()}},showMode:function(e){e&&(this.viewMode=Math.max(0,Math.min(2,this.viewMode+e))),this.picker.find(">div").hide().filter(".datepicker-"+s.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()}},e.fn.datepicker=function(t){var n=Array.apply(null,arguments);return n.shift(),this.each(function(){var i=e(this),s=i.data("datepicker"),o=typeof t=="object"&&t;s||i.data("datepicker",s=new r(this,e.extend({},e.fn.datepicker.defaults,o))),typeof t=="string"&&typeof s[t]=="function"&&s[t].apply(s,n)})},e.fn.datepicker.defaults={},e.fn.datepicker.Constructor=r;var i=e.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today"}},s={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(e){return e%4===0&&e%100!==0||e%400===0},getDaysInMonth:function(e,t){return[31,s.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},validParts:/dd?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[-`{-~\t\n\r]+/g,parseFormat:function(e){var t=e.replace(this.validParts,"\0").split("\0"),n=e.match(this.validParts);if(!t||!t.length||!n||n.length==0)throw new Error("Invalid date format.");return{separators:t,parts:n}},parseDate:function(n,s,o){if(n instanceof 
Date)return n;if(/^[-+]\d+[dmwy]([\s,]+[-+]\d+[dmwy])*$/.test(n)){var u=/([-+]\d+)([dmwy])/,a=n.match(/([-+]\d+)([dmwy])/g),f,l;n=new Date;for(var c=0;c<a.length;c++){f=u.exec(a[c]),l=parseInt(f[1]);switch(f[2]){case"d":n.setUTCDate(n.getUTCDate()+l);break;case"m":n=r.prototype.moveMonth.call(r.prototype,n,l);break;case"w":n.setUTCDate(n.getUTCDate()+l*7);break;case"y":n=r.prototype.moveYear.call(r.prototype,n,l)}}return t(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),0,0,0)}var a=n&&n.match(this.nonpunctuation)||[],n=new Date,h={},p=["yyyy","yy","M","MM","m","mm","d","dd"],d={yyyy:function(e,t){return e.setUTCFullYear(t)},yy:function(e,t){return e.setUTCFullYear(2e3+t)},m:function(e,t){t-=1;while(t<0)t+=12;t%=12,e.setUTCMonth(t);while(e.getUTCMonth()!=t)e.setUTCDate(e.getUTCDate()-1);return e},d:function(e,t){return e.setUTCDate(t)}},v,m,f;d.M=d.MM=d.mm=d.m,d.dd=d.d,n=t(n.getFullYear(),n.getMonth(),n.getDate(),0,0,0);if(a.length==s.parts.length){for(var c=0,g=s.parts.length;c<g;c++){v=parseInt(a[c],10),f=s.parts[c];if(isNaN(v))switch(f){case"MM":m=e(i[o].months).filter(function(){var e=this.slice(0,a[c].length),t=a[c].slice(0,e.length);return e==t}),v=e.inArray(m[0],i[o].months)+1;break;case"M":m=e(i[o].monthsShort).filter(function(){var e=this.slice(0,a[c].length),t=a[c].slice(0,e.length);return e==t}),v=e.inArray(m[0],i[o].monthsShort)+1}h[f]=v}for(var c=0,y;c<p.length;c++)y=p[c],y in h&&!isNaN(h[y])&&d[y](n,h[y])}return n},formatDate:function(t,n,r){var s={d:t.getUTCDate(),m:t.getUTCMonth()+1,M:i[r].monthsShort[t.getUTCMonth()],MM:i[r].months[t.getUTCMonth()],yy:t.getUTCFullYear().toString().substring(2),yyyy:t.getUTCFullYear()};s.dd=(s.d<10?"0":"")+s.d,s.mm=(s.m<10?"0":"")+s.m;var t=[],o=e.extend([],n.separators);for(var u=0,a=n.parts.length;u<a;u++)o.length&&t.push(o.shift()),t.push(s[n.parts[u]]);return t.join("")},headTemplate:'<thead><tr><th class="prev"><i class="icon-arrow-left"/></th><th colspan="5" class="switch"></th><th class="next"><i class="icon-arrow-right"/></th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr></tfoot>'};s.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+s.headTemplate+"<tbody></tbody>"+s.footTemplate+"</table>"+"</div>"+'<div class="datepicker-months">'+'<table class="table-condensed">'+s.headTemplate+s.contTemplate+s.footTemplate+"</table>"+"</div>"+'<div class="datepicker-years">'+'<table class="table-condensed">'+s.headTemplate+s.contTemplate+s.footTemplate+"</table>"+"</div>"+"</div>",e.fn.datepicker.DPGlobal=s}(window.jQuery),function(e){e.fn.datepicker.dates["zh-CN"]={days:["星期日","星期一","星期二","星期三","星期四","星期五","星期六","星期日"],daysShort:["周日","周一","周二","周三","周四","周五","周六","周日"],daysMin:["日","一","二","三","四","五","六","日"],months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthsShort:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]}}(jQuery),!function(e){var t=function(t,n){this.$element=e(t),this.$note=e('<div class="alert"></div>'),this.options=e.extend(!0,e.fn.notify.defaults,n),this.options.transition?this.options.transition=="fade"?this.$note.addClass("in").addClass(this.options.transition):this.$note.addClass(this.options.transition):this.$note.addClass("fade").addClass("in"),this.options.type?this.$note.addClass("alert-"+this.options.type):this.$note.addClass("alert-success"),!this.options.message&&this.$element.data("message")!==""?this.$note.html(this.$element.data("message")):typeof this.options.message=="object"&&(this.options.message.html?this.$note.html(this.options.message.html):this.options.message.text?this.$note.text(this.options.message.text):this.$note.html(this.options.message));if(this.options.closable)var r=e('<a class="close pull-right" href="#">&times;</a>');return e(r).on("click",e.proxy(onClose,this)),this.$note.prepend(r),this};onClose=function(){this.options.onClose(),e(this.$note).remove(),this.options.onClosed()},t.prototype.show=function(){this.options.fadeOut.enabled&&this.$note.delay(this.options.fadeOut.delay||3e3).fadeOut("fast",e.proxy(onClose,this)),this.$element.append(this.$note),this.$note.alert()},t.prototype.hide=function(){this.options.fadeOut.enabled?this.$note.delay(this.options.fadeOut.delay||3e3).fadeOut("fast",e.proxy(onClose,this)):onClose.call(this)},e.fn.notify=function(e){return new t(this,e)},e.fn.notify.defaults={type:"success",closable:!0,transition:"fade",fadeOut:{enabled:!0,delay:3e3},message:null,onClose:function(){},onClosed:function(){}}}(window.jQuery),!function(e){"use strict";var t=function(e,t){this.cinit("clickover",e,t)};t.prototype=e.extend({},e.fn.popover.Constructor.prototype,{constructor:t,cinit:function(t,n,r){this.attr={},this.attr.me=(Math.random()*10+"").replace(/\D/g,""),this.attr.click_event_ns="click."+this.attr.me,r||(r={}),r.trigger="manual",this.init(t,n,r),this.$element.on("click",this.options.selector,e.proxy(this.clickery,this))},clickery:function(t){t&&(t.preventDefault(),t.stopPropagation()),this.options.width&&this.tip().find(".popover-inner").width(this.options.width),this.options.height&&this.tip().find(".popover-inner").height(this.options.height),this.options.tip_id&&this.tip().attr("id",this.options.tip_id),this.options.class_name&&this.tip().addClass(this.options.class_name),this.toggle();if(this.isShown()){var n=this;this.options.global_close&&e("body").on(this.attr.click_event_ns,function(e){n.tip().has(e.target).length||n.clickery()}),this.options.esc_close&&e(document).bind("keyup.clickery",function(e){e.keyCode==27&&n.clickery();return}),!this.options.allow_multiple&&e("[data-clickover-open=1]").each(function(){e(this).data("clickover")&&e(this).data("clickover").clickery()}),this.$element.attr("data-clickover-open",1),this.tip().on("click",'[data-dismiss="clickover"]',e.proxy(this.clickery,this)),this.options.auto_close&&this.options.auto_close>0&&(this.attr.tid=setTimeout(e.proxy(this.clickery,this),this.options.auto_close)),typeof this.options.onShown=="function"&&this.options.onShown.call(this),this.$element.trigger("shown")}else this.$element.removeAttr("data-clickover-open"),this.options.esc_close&&e(document).unbind("keyup.clickery"),e("body").off(this.attr.click_event_ns),typeof this.attr.tid=="number"&&(clearTimeout(this.attr.tid),delete this.attr.tid),typeof this.options.onHidden=="function"&&this.options.onHidden.call(this),this.$element.trigger("hidden")},isShown:function(){return this.tip().hasClass("in")},resetPosition:function(){var e,t,n,r,i,s,o;if(this.hasContent()&&this.enabled){e=this.tip(),s=typeof this.options.placement=="function"?this.options.placement.call(this,e[0],this.$element[0]):this.options.placement,t=/in/.test(s),n=this.getPosition(t),r=e[0].offsetWidth,i=e[0].offsetHeight;switch(t?s.split(" ")[1]:s){case"bottom":o={top:n.top+n.height,left:n.left+n.width/2-r/2};break;case"top":o={top:n.top-i,left:n.left+n.width/2-r/2};break;case"left":o={top:n.top+n.height/2-i/2,left:n.left-r};break;case"right":o={top:n.top+n.height/2-i/2,left:n.left+n.width}}e.css(o)}},debughide:function(){var e=(new Date).toString();console.log(e+": clickover hide"),this.hide()}}),e.fn.clickover=function(n){return this.each(function(){var r=e(this),i=r.data("clickover"),s=typeof n=="object"&&n;i||r.data("clickover",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.clickover.Constructor=t,e.fn.clickover.defaults=e.extend({},e.fn.popover.defaults,{trigger:"manual",auto_close:0,global_close:1,esc_close:1,onShown:null,onHidden:null,width:null,height:null,tip_id:null,class_name:"clickover",allow_multiple:0})}(window.jQuery),function(e){"use strict";var t=function(t,n){this.element=e(t),this.options=e.extend({},e.fn.progressbar.defaults,n)};t.prototype={constructor:t,transition:function(){var t=this.element,n=t.parent(),r=this.back,i=this.front,s=this.options,o=t.attr("data-percentage"),u=t.attr("data-amount-part"),a=t.attr("data-amount-total"),f,l,c,h;f=n.hasClass("vertical"),l=s.update&&typeof s.update=="function"?s.update:e.fn.progressbar.defaults.update,c=s.done&&typeof s.done=="function"?s.done:e.fn.progressbar.defaults.done,h=s.fail&&typeof s.fail=="function"?s.fail:e.fn.progressbar.defaults.fail;if(s.use_percentage&&!o){h("bootstrap-progressbar: you can't use percentage without data-percentage being set");return}if(!s.use_percentage){if(!u&&!a){h("bootstrap-progressbar: you can't use values without data-amount-part and data-amount-total being set");return}o=Math.round(100*u/a)}if(s.display_text===e.fn.progressbar.display_text.center&&!i&&!r){this.back=r=e("<span>").addClass("progressbar-back-text"),this.front=i=e("<span>").addClass("progressbar-front-text"),n.prepend(r),t.prepend(i);var p;f?(p=n.css("height"),r.css("height",p),r.css("line-height",p),i.css("height",p),i.css("line-height",p),e(window).resize(function(){p=n.css("height"),r.css("height",p),r.css("line-height",p),i.css("height",p),i.css("line-height",p)})):(p=n.css("width"),i.css("width",p),e(window).resize(function(){p=n.css("width"),i.css("width",p)}))}setTimeout(function(){var h,p,d,v,m;f?t.css("height",o+"%"):t.css("width",o+"%");var g=setInterval(function(){f?(d=t.height(),v=n.height()):(d=t.width(),v=n.width()),h=Math.round(100*d/v),p=Math.round(d/v*a),h>=o&&(h=o,p=u,c(),clearInterval(g)),s.display_text!==e.fn.progressbar.display_text.none&&(m=s.use_percentage?h+"%":p+" / "+a,s.display_text===e.fn.progressbar.display_text.filled?t.text(m):s.display_text===e.fn.progressbar.display_text.center&&(r.text(m),i.text(m))),l(h)},s.refresh_speed)},s.transition_delay)}},e.fn.progressbar=function(n){return this.each(function(){var r=e(this),i=r.data("progressbar"),s=typeof n=="object"&&n;i||r.data("progressbar",i=new t(this,s)),typeof n=="string"&&i[n](),i.transition()})},e.fn.progressbar.display_text={none:0,filled:1,center:2},e.fn.progressbar.defaults={transition_delay:300,refresh_speed:50,display_text:e.fn.progressbar.display_text.none,use_percentage:!0,update:e.noop,done:e.noop,fail:e.noop},e.fn.progressbar.Constructor=t}(window.jQuery),function(){function xt(e,t){var n;e||(e={});for(n in t)e[n]=t[n];return e}function Tt(){var e,t=arguments.length,n={},r=function(e,t){var n,i;for(i in t)t.hasOwnProperty(i)&&(n=t[i],typeof e!="object"&&(e={}),n&&typeof n=="object"&&Object.prototype.toString.call(n)!=="[object Array]"&&typeof n.nodeType!="number"?e[i]=r(e[i]||{},n):e[i]=t[i]);return e};for(e=0;e<t;e++)n=r(n,arguments[e]);return n}function Nt(){var e=0,t=arguments,n=t.length,r={};for(;e<n;e++)r[t[e++]]=t[e];return r}function Ct(e,t){return parseInt(e,t||10)}function kt(e){return typeof e=="string"}function Lt(e){return typeof e=="object"}function At(e){return Object.prototype.toString.call(e)==="[object Array]"}function Ot(e){return typeof e=="number"}function Mt(e){return r.log(e)/r.LN10}function _t(e){return r.pow(10,e)}function Dt(e,t){var n=e.length;while(n--)if(e[n]===t){e.splice(n,1);break}}function Pt(t){return t!==e&&t!==null}function Ht(e,t,n){var r,i="setAttribute",s;if(kt(t))Pt(n)?e[i](t,n):e&&e.getAttribute&&(s=e.getAttribute(t));else if(Pt(t)&&Lt(t))for(r in t)e[i](r,t[r]);return s}function Bt(e){return At(e)?e:[e]}function jt(){var e=arguments,t,n,r=e.length;for(t=0;t<r;t++){n=e[t];if(typeof n!="undefined"&&n!==null)return n}}function Ft(t,n){m&&n&&n.opacity!==e&&(n.filter="alpha(opacity="+n.opacity*100+")"),xt(t.style,n)}function It(e,n,r,i,s){var o=t.createElement(e);return n&&xt(o,n),s&&Ft(o,{padding:0,border:V,margin:0}),r&&Ft(o,r),i&&i.appendChild(o),o}function qt(e,t){var n=function(){};return n.prototype=new e,xt(n.prototype,t),n}function Rt(e){return e=(e||0).toString(),e.indexOf(".")>-1?e.split(".")[1].length:0}function Ut(e,t,n,r){var i=O.lang,s=e,o=t===-1?Rt(e):isNaN(t=f(t))?2:t,u=n===undefined?i.decimalPoint:n,a=r===undefined?i.thousandsSep:r,l=s<0?"-":"",c=String(Ct(s=f(+s||0).toFixed(o))),h=c.length>3?c.length%3:0;return l+(h?c.substr(0,h)+a:"")+c.substr(h).replace(/(\d{3})(?=\d)/g,"$1"+a)+(o?u+f(s-c).toFixed(o).slice(2):"")}function zt(e,t){return(new Array((t||2)+1-String(e).length)).join(0)+e}function Wt(e,t,n){var r=e[t];e[t]=function(){var e=Array.prototype.slice.call(arguments);return e.unshift(r),n.apply(this,e)}}function Xt(e,t){var n=/f$/,r=/\.([0-9])/,i=O.lang,s;return n.test(e)?(s=e.match(r),s=s?s[1]:6,t=Ut(t,s,i.decimalPoint,e.indexOf(",")>-1?i.thousandsSep:"")):t=M(e,t),t}function Vt(e,t){var n="{",r=!1,i,s,o,u,a,f=[],l,c;while((c=e.indexOf(n))!==-1){i=e.slice(0,c);if(r){s=i.split(":"),o=s.shift().split("."),a=o.length,l=t;for(u=0;u<a;u++)l=l[o[u]];s.length&&(l=Xt(s.join(":"),l)),f.push(l)}else f.push(i);e=e.slice(c+1),r=!r,n=r?"}":"{"}return f.push(e),f.join("")}function $t(e,t,n,r){var i,s;n=jt(n,1),i=e/n,t||(t=[1,2,2.5,5,10],r&&r.allowDecimals===!1&&(n===1?t=[1,2,5,10]:n<=.1&&(t=[1/n])));for(s=0;s<t.length;s++){e=t[s];if(i<=(t[s]+(t[s+1]||t[s]))/2)break}return e*=n,e}function Jt(e,t){var n=t||[[Z,[1,2,5,10,20,25,50,100,200,500]],[et,[1,2,5,10,15,30]],[tt,[1,2,5,10,15,30]],[nt,[1,2,3,4,6,8,12]],[rt,[1,2]],[it,[1,2]],[st,[1,2,3,4,6]],[ot,null]],r=n[n.length-1],i=P[r[0]],s=r[1],o,u;for(u=0;u<n.length;u++){r=n[u],i=P[r[0]],s=r[1];if(n[u+1]){var a=(i*s[s.length-1]+P[n[u+1][0]])/2;if(e<=a)break}}return i===P[ot]&&e<5*i&&(s=[1,2,5]),i===P[ot]&&e<5*i&&(s=[1,2,5]),o=$t(e/i,s),{unitRange:i,count:o,unitName:r[0]}}function Kt(e,t,n,r){var i=[],o,u={},a=O.global.useUTC,f,l=new Date(t),c=e.unitRange,h=e.count;if(Pt(t)){c>=P[et]&&(l.setMilliseconds(0),l.setSeconds(c>=P[tt]?0:h*s(l.getSeconds()/h))),c>=P[tt]&&l[gt](c>=P[nt]?0:h*s(l[ct]()/h)),c>=P[nt]&&l[yt](c>=P[rt]?0:h*s(l[ht]()/h)),c>=P[rt]&&l[bt](c>=P[st]?1:h*s(l[dt]()/h)),c>=P[st]&&(l[wt](c>=P[ot]?0:h*s(l[vt]()/h)),f=l[mt]()),c>=P[ot]&&(f-=f%h,l[Et](f)),c===P[it]&&l[bt](l[dt]()-l[pt]()+jt(r,1)),o=1,f=l[mt]();var p=l.getTime(),d=l[vt](),v=l[dt](),m=a?0:(864e5+l.getTimezoneOffset()*60*1e3)%864e5;while(p<n)i.push(p),c===P[ot]?p=lt(f+o*h,0):c===P[st]?p=lt(f,d+o*h):!!a||c!==P[rt]&&c!==P[it]?(p+=c*h,c<=P[nt]&&p%P[rt]===m&&(u[p]=rt)):p=lt(f,d,v+o*h*(c===P[rt]?1:7)),o++;i.push(p)}return i.info=xt(e,{higherRanks:u,totalRange:c*h}),i}function Qt(){this.color=0,this.symbol=0}function Gt(e,t){var n=e.length,r,i;for(i=0;i<n;i++)e[i].ss_i=i;e.sort(function(e,n){return r=t(e,n),r===0?e.ss_i-n.ss_i:r});for(i=0;i<n;i++)delete e[i].ss_i}function Yt(e){var t=e.length,n=e[0];while(t--)e[t]<n&&(n=e[t]);return n}function Zt(e){var t=e.length,n=e[0];while(t--)e[t]>n&&(n=e[t]);return n}function en(e,t){var n;for(n in e)e[n]&&e[n]!==t&&e[n].destroy&&e[n].destroy(),delete e[n]}function tn(e){A||(A=It(I)),e&&A.appendChild(e),A.innerHTML=""}function nn(e,t){var r="Highcharts error #"+e+": www.highcharts.com/errors/"+e;if(t)throw r;n.console&&console.log(r)}function rn(e){return parseFloat(e.toPrecision(14))}function sn(e,t){_=jt(e,t.animation)}function Tn(){var e=O.global.useUTC,t=e?"getUTC":"get",n=e?"setUTC":"set";lt=e?Date.UTC:function(e,t,n,r,i,s){return(new Date(e,t,jt(n,1),jt(r,0),jt(i,0),jt(s,0))).getTime()},ct=t+"Minutes",ht=t+"Hours",pt=t+"Day",dt=t+"Date",vt=t+"Month",mt=t+"FullYear",gt=n+"Minutes",yt=n+"Hours",bt=n+"Date",wt=n+"Month",Et=n+"FullYear"}function Nn(e){return O=Tt(O,e),Tn(),O}function Cn(){return O}function Ln(){}function Hn(e,t,n,r){this.axis=e,this.pos=t,this.type=n||"",this.isNew=!0,!n&&!r&&this.addLabel()}function Bn(e,t){this.axis=e,t&&(this.options=t,this.id=t.id)}function jn(e,t,n,r,i,s){var o=e.chart.inverted;this.axis=e,this.isNegative=n,this.options=t,this.x=r,this.stack=i,this.percent=s==="percent",this.alignOptions={align:t.align||(o?n?"left":"right":"center"),verticalAlign:t.verticalAlign||(o?"middle":n?"bottom":"top"),y:jt(t.y,o?4:n?14:-6),x:jt(t.x,o?n?-6:6:0)},this.textAlign=t.textAlign||(o?n?"right":"left":"center")}function Fn(){this.init.apply(this,arguments)}function In(){this.init.apply(this,arguments)}function qn(e,t){this.init(e,t)}function Rn(e,t){this.init(e,t)}function Un(){this.init.apply(this,arguments)}var e,t=document,n=window,r=Math,i=r.round,s=r.floor,o=r.ceil,u=r.max,a=r.min,f=r.abs,l=r.cos,c=r.sin,h=r.PI,p=h*2/360,d=navigator.userAgent,v=n.opera,m=/msie/i.test(d)&&!v,g=t.documentMode===8,y=/AppleWebKit/.test(d),b=/Firefox/.test(d),w=/(Mobile|Android|Windows Phone)/.test(d),E="http://www.w3.org/2000/svg",S=!!t.createElementNS&&!!t.createElementNS(E,"svg").createSVGRect,x=b&&parseInt(d.split("Firefox/")[1],10)<4,T=!S&&!m&&!!t.createElement("canvas").getContext,N,C=t.documentElement.ontouchstart!==e,k={},L=0,A,O,M,_,D,P,H=function(){},B=[],j="Highcharts",F="3.0.0",I="div",q="absolute",R="relative",U="hidden",z="highcharts-",W="visible",X="px",V="none",$="M",J="L",K="rgba(192,192,192,"+(S?1e-4:.002)+")",Q="",G="hover",Y="select",Z="millisecond",et="second",tt="minute",nt="hour",rt="day",it="week",st="month",ot="year",ut="linearGradient",at="stops",ft="stroke-width",lt,ct,ht,pt,dt,vt,mt,gt,yt,bt,wt,Et,St={};n.Highcharts=n.Highcharts?nn(16,!0):{},M=function(e,t,n){if(!Pt(t)||isNaN(t))return"Invalid date";e=jt(e,"%Y-%m-%d %H:%M:%S");var r=new Date(t),s,o=r[ht](),u=r[pt](),a=r[dt](),f=r[vt](),l=r[mt](),c=O.lang,h=c.weekdays,p=xt({a:h[u].substr(0,3),A:h[u],d:zt(a),e:a,b:c.shortMonths[f],B:c.months[f],m:zt(f+1),y:l.toString().substr(2,2),Y:l,H:zt(o),I:zt(o%12||12),l:o%12||12,M:zt(r[ct]()),p:o<12?"AM":"PM",P:o<12?"am":"pm",S:zt(r.getSeconds()),L:zt(i(t%1e3),3)},Highcharts.dateFormats);for(s in p)while(e.indexOf("%"+s)!==-1)e=e.replace("%"+s,typeof p[s]=="function"?p[s](t):p[s]);return n?e.substr(0,1).toUpperCase()+e.substr(1):e},Qt.prototype={wrapColor:function(e){this.color>=e&&(this.color=0)},wrapSymbol:function(e){this.symbol>=e&&(this.symbol=0)}},P=Nt(Z,1,et,1e3,tt,6e4,nt,36e5,rt,864e5,it,6048e5,st,26784e5,ot,31556952e3),D={init:function(e,t,n){t=t||"";var r=e.shift,i=t.indexOf("C")>-1,s=i?7:3,o,u,a,f=t.split(" "),l=[].concat(n),c,h,p=function(e){a=e.length;while(a--)e[a]===$&&e.splice(a+1,0,e[a+1],e[a+2],e[a+1],e[a+2])};i&&(p(f),p(l)),e.isArea&&(c=f.splice(f.length-6,6),h=l.splice(l.length-6,6));if(r<=l.length/s)while(r--)l=[].concat(l).splice(0,s).concat(l);e.shift=0;if(f.length){o=l.length;while(f.length<o)u=[].concat(f).splice(f.length-s,s),i&&(u[s-6]=u[s-2],u[s-5]=u[s-1]),f=f.concat(u)}return c&&(f=f.concat(c),l=l.concat(h)),[f,l]},step:function(e,t,n,r){var i=[],s=e.length,o;if(n===1)i=r;else if(s===t.length&&n<1)while(s--)o=parseFloat(e[s]),i[s]=isNaN(o)?e[s]:n*parseFloat(t[s]-o)+o;else i=t;return i}},function(r){n.HighchartsAdapter=n.HighchartsAdapter||r&&{init:function(t){var n=r.fx,i=n.step,s,o=r.Tween,u=o&&o.propHooks;r.extend(r.easing,{easeOutQuad:function(e,t,n,r,i){return-r*(t/=i)*(t-2)+n}}),r.each(["cur","_default","width","height","opacity"],function(t,r){var s=i,a,f;r==="cur"?s=n.prototype:r==="_default"&&o&&(s=u[r],r="set"),a=s[r],a&&(s[r]=function(n){return n=t?n:this,f=n.elem,f.attr?f.attr(n.prop,r==="cur"?e:n.now):a.apply(this,arguments)})}),s=function(e){var n=e.elem,r;e.started||(r=t.init(n,n.d,n.toD),e.start=r[0],e.end=r[1],e.started=!0),n.attr("d",t.step(e.start,e.end,e.pos,n.toD))},o?u.d={set:s}:i.d=s,this.each=Array.prototype.forEach?function(e,t){return Array.prototype.forEach.call(e,t)}:function(e,t){var n=0,r=e.length;for(;n<r;n++)if(t.call(e[n],e[n],n,e)===!1)return n},r.fn.highcharts=function(){var t="Chart",n=arguments,r,i,s;return kt(n[0])&&(t=n[0],n=Array.prototype.slice.call(n,1)),r=n[0],r!==e&&(r.chart=r.chart||{},r.chart.renderTo=this[0],s=new Highcharts[t](r,n[1]),i=this),r===e&&(i=B[Ht(this[0],"data-highcharts-chart")]),i}},getScript:r.getScript,inArray:r.inArray,adapterRun:function(e,t){return r(e)[t]()},grep:r.grep,map:function(e,t){var n=[],r=0,i=e.length;for(;r<i;r++)n[r]=t.call(e[r],e[r],r,e);return n},offset:function(e){return r(e).offset()},addEvent:function(e,t,n){r(e).bind(t,n)},removeEvent:function(e,n,i){var s=t.removeEventListener?"removeEventListener":"detachEvent";t[s]&&!e[s]&&(e[s]=function(){}),r(e).unbind(n,i)},fireEvent:function(e,t,n,i){var s=r.Event(t),o="detached"+t,u;!m&&n&&(delete n.layerX,delete n.layerY),xt(s,n),e[t]&&(e[o]=e[t],e[t]=null),r.each(["preventDefault","stopPropagation"],function(e,t){var n=s[t];s[t]=function(){try{n.call(s)}catch(e){t==="preventDefault"&&(u=!0)}}}),r(e).trigger(s),e[o]&&(e[t]=e[o],e[o]=null),i&&!s.isDefaultPrevented()&&!u&&i(s)},washMouseEvent:function(t){var n=t.originalEvent||t;return n.pageX===e&&(n.pageX=t.pageX,n.pageY=t.pageY),n},animate:function(t,n,i){var s=r(t);n.d&&(t.toD=n.d,n.d=1),s.stop(),n.opacity!==e&&t.attr&&(n.opacity+="px"),s.animate(n,i)},stop:function(e){r(e).stop()}}}(n.jQuery);var on=n.HighchartsAdapter,un=on||{};on&&on.init.call(on,D);var an=un.adapterRun,fn=un.getScript,ln=un.inArray,cn=un.each,hn=un.grep,pn=un.offset,dn=un.map,vn=un.addEvent,mn=un.removeEvent,gn=un.fireEvent,yn=un.washMouseEvent,bn=un.animate,wn=un.stop,En={enabled:!0,align:"center",x:0,y:15,style:{color:"#666",cursor:"default",fontSize:"11px",lineHeight:"14px"}};O={colors:["#2f7ed8","#0d233a","#8bbc21","#910000","#1aadce","#492970","#f28f43","#77a1e5","#c42525","#a6c96a"],symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],decimalPoint:".",numericSymbols:["k","M","G","T","P","E"],resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:","},global:{useUTC:!0,canvasToolsURL:"http://code.highcharts.com/3.0.0/modules/canvas-tools.js",VMLRadialGradientURL:"http://code.highcharts.com/3.0.0/gfx/vml-radial-gradient.png"},chart:{borderColor:"#4572A7",borderRadius:5,defaultSeriesType:"line",ignoreHiddenSeries:!0,spacingTop:10,spacingRight:10,spacingBottom:15,spacingLeft:10,style:{fontFamily:'"Lucida Grande", "Lucida Sans Unicode", Verdana, Arial, Helvetica, sans-serif',fontSize:"12px"},backgroundColor:"#FFFFFF",plotBorderColor:"#C0C0C0",resetZoomButton:{theme:{zIndex:20},position:{align:"right",x:-10,y:10}}},title:{text:"Chart title",align:"center",y:15,style:{color:"#274b6d",fontSize:"16px"}},subtitle:{text:"",align:"center",y:30,style:{color:"#4d759e"}},plotOptions:{line:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:2,marker:{enabled:!0,lineWidth:0,radius:4,lineColor:"#FFFFFF",states:{hover:{enabled:!0},select:{fillColor:"#FFFFFF",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:Tt(En,{enabled:!1,formatter:function(){return this.y},verticalAlign:"bottom",y:0}),cropThreshold:300,pointRange:0,showInLegend:!0,states:{hover:{marker:{}},select:{marker:{}}},stickyTracking:!0}},labels:{style:{position:q,color:"#3E576F"}},legend:{enabled:!0,align:"center",layout:"horizontal",labelFormatter:function(){return this.name},borderWidth:1,borderColor:"#909090",borderRadius:5,navigation:{activeColor:"#274b6d",inactiveColor:"#CCC"},shadow:!1,itemStyle:{cursor:"pointer",color:"#274b6d",fontSize:"12px"},itemHoverStyle:{color:"#000"},itemHiddenStyle:{color:"#CCC"},itemCheckboxStyle:{position:q,width:"13px",height:"13px"},symbolWidth:16,symbolPadding:5,verticalAlign:"bottom",x:0,y:0,title:{style:{fontWeight:"bold"}}},loading:{labelStyle:{fontWeight:"bold",position:R,top:"1em"},style:{position:q,backgroundColor:"white",opacity:.5,textAlign:"center"}},tooltip:{enabled:!0,animation:S,backgroundColor:"rgba(255, 255, 255, .85)",borderWidth:1,borderRadius:3,dateTimeLabelFormats:{millisecond:"%A, %b %e, %H:%M:%S.%L",second:"%A, %b %e, %H:%M:%S",minute:"%A, %b %e, %H:%M",hour:"%A, %b %e, %H:%M",day:"%A, %b %e, %Y",week:"Week from %A, %b %e, %Y",month:"%B %Y",year:"%Y"},headerFormat:'<span style="font-size: 10px">{point.key}</span><br/>',pointFormat:'<span style="color:{series.color}">{series.name}</span>: <b>{point.y}</b><br/>',shadow:!0,snap:w?25:10,style:{color:"#333333",cursor:"default",fontSize:"12px",padding:"8px",whiteSpace:"nowrap"}},credits:{enabled:!0,text:"Highcharts.com",href:"http://www.highcharts.com",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#909090",fontSize:"9px"}}};var Sn=O.plotOptions,xn=Sn.line;Tn();var kn=function(e){function i(e){e&&e.stops?r=dn(e.stops,function(e){return kn(e[1])}):(n=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/.exec(e),n?t=[Ct(n[1]),Ct(n[2]),Ct(n[3]),parseFloat(n[4],10)]:(n=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(e),n?t=[Ct(n[1],16),Ct(n[2],16),Ct(n[3],16),1]:(n=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(e),n&&(t=[Ct(n[1]),Ct(n[2]),Ct(n[3]),1]))))}function s(n){var i;return r?(i=Tt(e),i.stops=[].concat(i.stops),cn(r,function(e,t){i.stops[t]=[i.stops[t][0],e.get(n)]})):t&&!isNaN(t[0])?n==="rgb"?i="rgb("+t[0]+","+t[1]+","+t[2]+")":n==="a"?i=t[3]:i="rgba("+t.join(",")+")":i=e,i}function o(e){if(r)cn(r,function(t){t.brighten(e)});else if(Ot(e)&&e!==0){var n;for(n=0;n<3;n++)t[n]+=Ct(e*255),t[n]<0&&(t[n]=0),t[n]>255&&(t[n]=255)}return this}function u(e){return t[3]=e,this}var t=[],n,r;return i(e),{get:s,brighten:o,rgba:t,setOpacity:u}};Ln.prototype={init:function(e,n){var r=this;r.element=n==="span"?It(n):t.createElementNS(E,n),r.renderer=e,r.attrSetters={}},opacity:1,animate:function(e,t,n){var r=jt(t,_,!0);wn(this),r?(r=Tt(r),n&&(r.complete=n),bn(this,e,r)):(this.attr(e),n&&n())},attr:function(n,r){var i=this,s,o,a,f,l,c=i.element,h=c.nodeName.toLowerCase(),p=i.renderer,d,v,m=i.attrSetters,g=i.shadows,y,b,w=i;kt(n)&&Pt(r)&&(s=n,n={},n[s]=r);if(kt(n))s=n,h==="circle"?s={x:"cx",y:"cy"}[s]||s:s==="strokeWidth"&&(s="stroke-width"),w=Ht(c,s)||i[s]||0,s!=="d"&&s!=="visibility"&&(w=parseFloat(w));else{for(s in n){d=!1,o=n[s],a=m[s]&&m[s].call(i,o,s);if(a!==!1){a!==e&&(o=a);if(s==="d")o&&o.join&&(o=o.join(" ")),/(NaN| {2}|^$)/.test(o)&&(o="M 0 0");else if(s==="x"&&h==="text")for(f=0;f<c.childNodes.length;f++)l=c.childNodes[f],Ht(l,"x")===Ht(c,"x")&&Ht(l,"x",o);else if(!i.rotation||s!=="x"&&s!=="y")if(s==="fill")o=p.color(o,c,s);else if(h!=="circle"||s!=="x"&&s!=="y")if(h==="rect"&&s==="r")Ht(c,{rx:o,ry:o}),d=!0;else if(s==="translateX"||s==="translateY"||s==="rotation"||s==="verticalAlign"||s==="scaleX"||s==="scaleY")b=!0,d=!0;else if(s==="stroke")o=p.color(o,c,s);else if(s==="dashstyle"){s="stroke-dasharray",o=o&&o.toLowerCase();if(o==="solid")o=V;else if(o){o=o.replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(","),f=o.length;while(f--)o[f]=Ct(o[f])*n["stroke-width"];o=o.join(",")}}else s==="width"?o=Ct(o):s==="align"?(s="text-anchor",o={left:"start",center:"middle",right:"end"}[o]):s==="title"&&(v=c.getElementsByTagName("title")[0],v||(v=t.createElementNS(E,"title"),c.appendChild(v)),v.textContent=o);else s={x:"cx",y:"cy"}[s]||s;else b=!0;s==="strokeWidth"&&(s="stroke-width");if(s==="stroke-width"||s==="stroke")i[s]=o,i.stroke&&i["stroke-width"]?(Ht(c,"stroke",i.stroke),Ht(c,"stroke-width",i["stroke-width"]),i.hasStroke=!0):s==="stroke-width"&&o===0&&i.hasStroke&&(c.removeAttribute("stroke"),i.hasStroke=!1),d=!0;i.symbolName&&/^(x|y|width|height|r|start|end|innerR|anchorX|anchorY)/.test(s)&&(y||(i.symbolAttr(n),y=!0),d=!0);if(g&&/^(width|height|visibility|x|y|d|transform)$/.test(s)){f=g.length;while(f--)Ht(g[f],s,s==="height"?u(o-(g[f].cutHeight||0),0):o)}(s==="width"||s==="height")&&h==="rect"&&o<0&&(o=0),i[s]=o,s==="text"?(o!==i.textStr&&delete i.bBox,i.textStr=o,i.added&&p.buildText(i)):d||Ht(c,s,o)}}b&&i.updateTransform()}return w},addClass:function(e){return Ht(this.element,"class",Ht(this.element,"class")+" "+e),this},symbolAttr:function(e){var t=this;cn(["x","y","r","start","end","width","height","innerR","anchorX","anchorY"],function(n){t[n]=jt(e[n],t[n])}),t.attr({d:t.renderer.symbols[t.symbolName](t.x,t.y,t.width,t.height,t)})},clip:function(e){return this.attr("clip-path",e?"url("+this.renderer.url+"#"+e.id+")":V)},crisp:function(e,t,n,r,o){var u=this,a,f={},l={},c;e=e||u.strokeWidth||u.attr&&u.attr("stroke-width")||0,c=i(e)%2/2,l.x=s(t||u.x||0)+c,l.y=s(n||u.y||0)+c,l.width=s((r||u.width||0)-2*c),l.height=s((o||u.height||0)-2*c),l.strokeWidth=e;for(a in l)u[a]!==l[a]&&(u[a]=f[a]=l[a]);return f},css:function(e){var t=this,n=t.element,r=e&&e.width&&n.nodeName.toLowerCase()==="text",i,s="",o=function(e,t){return"-"+t.toLowerCase()};e&&e.color&&(e.fill=e.color),e=xt(t.styles,e),t.styles=e,T&&r&&delete e.width;if(m&&!S)r&&delete e.width,Ft(t.element,e);else{for(i in e)s+=i.replace(/([A-Z])/g,o)+":"+e[i]+";";t.attr({style:s})}return r&&t.added&&t.renderer.buildText(t),t},on:function(e,t){return C&&e==="click"&&(this.element.ontouchstart=function(e){e.preventDefault(),t()}),this.element["on"+e]=t,this},setRadialReference:function(e){return this.element.radialReference=e,this},translate:function(e,t){return this.attr({translateX:e,translateY:t})},invert:function(){var e=this;return e.inverted=!0,e.updateTransform(),e},htmlCss:function(e){var t=this,n=t.element,r=e&&n.tagName==="SPAN"&&e.width;return r&&(delete e.width,t.textWidth=r,t.updateTransform()),t.styles=xt(t.styles,e),Ft(t.element,e),t},htmlGetBBox:function(){var e=this,t=e.element,n=e.bBox;return n||(t.nodeName==="text"&&(t.style.position=q),n=e.bBox={x:t.offsetLeft,y:t.offsetTop,width:t.offsetWidth,height:t.offsetHeight}),n},htmlUpdateTransform:function(){if(!this.added){this.alignOnAdd=!0;return}var e=this,t=e.renderer,n=e.element,r=e.translateX||0,i=e.translateY||0,s=e.x||0,o=e.y||0,u=e.textAlign||"left",a={left:0,center:.5,right:1}[u],f=u&&u!=="left",h=e.shadows;if(r||i)Ft(n,{marginLeft:r,marginTop:i}),h&&cn(h,function(e){Ft(e,{marginLeft:r+1,marginTop:i+1})});e.inverted&&cn(n.childNodes,function(e){t.invertChild(e,n)});if(n.tagName==="SPAN"){var d,g,w=e.rotation,E,S=0,x=1,T=0,N,C=Ct(e.textWidth),k=e.xCorr||0,L=e.yCorr||0,A=[w,u,n.innerHTML,e.textWidth].join(","),O={},M;A!==e.cTT&&(Pt(w)&&(t.isSVG?(M=m?"-ms-transform":y?"-webkit-transform":b?"MozTransform":v?"-o-transform":"",O[M]=O.transform="rotate("+w+"deg)"):(S=w*p,x=l(S),T=c(S),O.filter=w?["progid:DXImageTransform.Microsoft.Matrix(M11=",x,", M12=",-T,", M21=",T,", M22=",x,", sizingMethod='auto expand')"].join(""):V),Ft(n,O)),d=jt(e.elemWidth,n.offsetWidth),g=jt(e.elemHeight,n.offsetHeight),d>C&&/[ \-]/.test(n.textContent||n.innerText)&&(Ft(n,{width:C+X,display:"block",whiteSpace:"normal"}),d=C),E=t.fontMetrics(n.style.fontSize).b,k=x<0&&-d,L=T<0&&-g,N=x*T<0,k+=T*E*(N?1-a:a),L-=x*E*(w?N?a:1-a:1),f&&(k-=d*a*(x<0?-1:1),w&&(L-=g*a*(T<0?-1:1)),Ft(n,{textAlign:u})),e.xCorr=k,e.yCorr=L),Ft(n,{left:s+k+X,top:o+L+X}),y&&(g=n.offsetHeight),e.cTT=A}},updateTransform:function(){var e=this,t=e.translateX||0,n=e.translateY||0,r=e.scaleX,i=e.scaleY,s=e.inverted,o=e.rotation,u=[];s&&(t+=e.attr("width"),n+=e.attr("height")),(t||n)&&u.push("translate("+t+","+n+")"),s?u.push("rotate(90) scale(-1,1)"):o&&u.push("rotate("+o+" "+(e.x||0)+" "+(e.y||0)+")"),(Pt(r)||Pt(i))&&u.push("scale("+jt(r,1)+" "+jt(i,1)+")"),u.length&&Ht(e.element,"transform",u.join(" "))},toFront:function(){var e=this.element;return e.parentNode.appendChild(e),this},align:function(e,t,n){var r,s,o,u,a={},f,l=this.renderer,c=l.alignedObjects;if(e){this.alignOptions=e,this.alignByTranslate=t;if(!n||kt(n))this.alignTo=f=n||"renderer",Dt(c,this),c.push(this),n=null}else e=this.alignOptions,t=this.alignByTranslate,f=this.alignTo;n=jt(n,l[f],l),r=e.align,s=e.verticalAlign,o=(n.x||0)+(e.x||0),u=(n.y||0)+(e.y||0);if(r==="right"||r==="center")o+=(n.width-(e.width||0))/{right:1,center:2}[r];a[t?"translateX":"x"]=i(o);if(s==="bottom"||s==="middle")u+=(n.height-(e.height||0))/({bottom:1,middle:2}[s]||1);return a[t?"translateY":"y"]=i(u),this[this.placed?"animate":"attr"](a),this.placed=!0,this.alignAttr=a,this},getBBox:function(){var e=this,t=e.bBox,n=e.renderer,r,i,s=e.rotation,o=e.element,u=e.styles,a=s*p;if(!t){if(o.namespaceURI===E||n.forExport){try{t=o.getBBox?xt({},o.getBBox()):{width:o.offsetWidth,height:o.offsetHeight}}catch(h){}if(!t||t.width<0)t={width:0,height:0}}else t=e.htmlGetBBox();n.isSVG&&(r=t.width,i=t.height,m&&u&&u.fontSize==="11px"&&i.toPrecision(3)===22.7&&(t.height=i=14),s&&(t.width=f(i*c(a))+f(r*l(a)),t.height=f(i*l(a))+f(r*c(a)))),e.bBox=t}return t},show:function(){return this.attr({visibility:W})},hide:function(){return this.attr({visibility:U})},fadeOut:function(e){var t=this;t.animate({opacity:0},{duration:e||150,complete:function(){t.hide()}})},add:function(e){var t=this.renderer,n=e||t,r=n.element||t.box,i=r.childNodes,s=this.element,o=Ht(s,"zIndex"),u,a,f,l;e&&(this.parentGroup=e),this.parentInverted=
e&&e.inverted,this.textStr!==undefined&&t.buildText(this),o&&(n.handleZ=!0,o=Ct(o));if(n.handleZ)for(f=0;f<i.length;f++){u=i[f],a=Ht(u,"zIndex");if(u!==s&&(Ct(a)>o||!Pt(o)&&Pt(a))){r.insertBefore(s,u),l=!0;break}}return l||r.appendChild(s),this.added=!0,gn(this,"add"),this},safeRemoveChild:function(e){var t=e.parentNode;t&&t.removeChild(e)},destroy:function(){var e=this,t=e.element||{},n=e.shadows,r,i;t.onclick=t.onmouseout=t.onmouseover=t.onmousemove=t.point=null,wn(e),e.clipPath&&(e.clipPath=e.clipPath.destroy());if(e.stops){for(i=0;i<e.stops.length;i++)e.stops[i]=e.stops[i].destroy();e.stops=null}e.safeRemoveChild(t),n&&cn(n,function(t){e.safeRemoveChild(t)}),e.alignTo&&Dt(e.renderer.alignedObjects,e);for(r in e)delete e[r];return null},shadow:function(e,t,n){var r=[],i,s,o=this.element,a,f,l,c;if(e){f=jt(e.width,3),l=(e.opacity||.15)/f,c=this.parentInverted?"(-1,-1)":"("+jt(e.offsetX,1)+", "+jt(e.offsetY,1)+")";for(i=1;i<=f;i++)s=o.cloneNode(0),a=f*2+1-2*i,Ht(s,{isShadow:"true",stroke:e.color||"black","stroke-opacity":l*i,"stroke-width":a,transform:"translate"+c,fill:V}),n&&(Ht(s,"height",u(Ht(s,"height")-a,0)),s.cutHeight=a),t?t.element.appendChild(s):o.parentNode.insertBefore(s,o),r.push(s);this.shadows=r}return this}};var An=function(){this.init.apply(this,arguments)};An.prototype={Element:Ln,init:function(e,r,i,s){var u=this,a=location,f,l;f=u.createElement("svg").attr({xmlns:E,version:"1.1"}),e.appendChild(f.element),u.isSVG=!0,u.box=f.element,u.boxWrapper=f,u.alignedObjects=[],u.url=(b||y)&&t.getElementsByTagName("base").length?a.href.replace(/#.*?$/,"").replace(/([\('\)])/g,"\\$1").replace(/ /g,"%20"):"",l=this.createElement("desc").add(),l.element.appendChild(t.createTextNode("Created with "+j+" "+F)),u.defs=this.createElement("defs").add(),u.forExport=s,u.gradients={},u.setSize(r,i,!1);var c,h;b&&e.getBoundingClientRect&&(u.subPixelFix=c=function(){Ft(e,{left:0,top:0}),h=e.getBoundingClientRect(),Ft(e,{left:o(h.left)-h.left+X,top:o(h.top)-h.top+X})},c(),vn(n,"resize",c))},isHidden:function(){return!this.boxWrapper.getBBox().width},destroy:function(){var e=this,t=e.defs;return e.box=null,e.boxWrapper=e.boxWrapper.destroy(),en(e.gradients||{}),e.gradients=null,t&&(e.defs=t.destroy()),e.subPixelFix&&mn(n,"resize",e.subPixelFix),e.alignedObjects=null,null},createElement:function(e){var t=new this.Element;return t.init(this,e),t},draw:function(){},buildText:function(e){var n=e.element,r=this,i=r.forExport,s=jt(e.textStr,"").toString().replace(/<(b|strong)>/g,'<span style="font-weight:bold">').replace(/<(i|em)>/g,'<span style="font-style:italic">').replace(/<a/g,"<span").replace(/<\/(b|strong|i|em|a)>/g,"</span>").split(/<br.*?>/g),o=n.childNodes,u=/style="([^"]+)"/,a=/href="([^"]+)"/,f=Ht(n,"x"),l=e.styles,c=l&&l.width&&Ct(l.width),h=l&&l.lineHeight,p=o.length;while(p--)n.removeChild(o[p]);c&&!e.added&&this.box.appendChild(n),s[s.length-1]===""&&s.pop(),cn(s,function(s,o){var p,d=0;s=s.replace(/<span/g,"|||<span").replace(/<\/span>/g,"</span>|||"),p=s.split("|||"),cn(p,function(s){if(s!==""||p.length===1){var v={},m=t.createElementNS(E,"tspan"),g;u.test(s)&&(g=s.match(u)[1].replace(/(;| |^)color([ :])/,"$1fill$2"),Ht(m,"style",g)),a.test(s)&&!i&&(Ht(m,"onclick",'location.href="'+s.match(a)[1]+'"'),Ft(m,{cursor:"pointer"})),s=(s.replace(/<(.|\n)*?>/g,"")||" ").replace(/&lt;/g,"<").replace(/&gt;/g,">"),m.appendChild(t.createTextNode(s)),d?v.dx=0:v.x=f,Ht(m,v),!d&&o&&(!S&&i&&Ft(m,{display:"block"}),Ht(m,"dy",h||r.fontMetrics(/px$/.test(m.style.fontSize)?m.style.fontSize:l.fontSize).h,y&&m.offsetHeight)),n.appendChild(m),d++;if(c){var b=s.replace(/([^\^])-/g,"$1- ").split(" "),w,x,T=[];while(b.length||T.length)delete e.bBox,x=e.getBBox().width,w=x>c,!w||b.length===1?(b=T,T=[],b.length&&(m=t.createElementNS(E,"tspan"),Ht(m,{dy:h||16,x:f}),g&&Ht(m,"style",g),n.appendChild(m),x>c&&(c=x))):(m.removeChild(m.firstChild),T.unshift(b.pop())),b.length&&m.appendChild(t.createTextNode(b.join(" ").replace(/- /g,"-")))}}})})},button:function(e,t,n,r,i,s,o){var u=this.label(e,t,n,null,null,null,null,null,"button"),a=0,f,l,c,h,p,d="style",v={x1:0,y1:0,x2:0,y2:1};return i=Tt({"stroke-width":1,stroke:"#CCCCCC",fill:{linearGradient:v,stops:[[0,"#FEFEFE"],[1,"#F6F6F6"]]},r:2,padding:5,style:{color:"black"}},i),c=i[d],delete i[d],s=Tt(i,{stroke:"#68A",fill:{linearGradient:v,stops:[[0,"#FFF"],[1,"#ACF"]]}},s),h=s[d],delete s[d],o=Tt(i,{stroke:"#68A",fill:{linearGradient:v,stops:[[0,"#9BD"],[1,"#CDF"]]}},o),p=o[d],delete o[d],vn(u.element,"mouseenter",function(){u.attr(s).css(h)}),vn(u.element,"mouseleave",function(){f=[i,s,o][a],l=[c,h,p][a],u.attr(f).css(l)}),u.setState=function(e){a=e,e?e===2&&u.attr(o).css(p):u.attr(i).css(c)},u.on("click",function(){r.call(u)}).attr(i).css(xt({cursor:"default"},c))},crispLine:function(e,t){return e[1]===e[4]&&(e[1]=e[4]=i(e[1])-t%2/2),e[2]===e[5]&&(e[2]=e[5]=i(e[2])+t%2/2),e},path:function(e){var t={fill:V};return At(e)?t.d=e:Lt(e)&&xt(t,e),this.createElement("path").attr(t)},circle:function(e,t,n){var r=Lt(e)?e:{x:e,y:t,r:n};return this.createElement("circle").attr(r)},arc:function(e,t,n,r,i,s){return Lt(e)&&(t=e.y,n=e.r,r=e.innerR,i=e.start,s=e.end,e=e.x),this.symbol("arc",e||0,t||0,n||0,n||0,{innerR:r||0,start:i||0,end:s||0})},rect:function(e,t,n,r,i,s){i=Lt(e)?e.r:i;var o=this.createElement("rect").attr({rx:i,ry:i,fill:V});return o.attr(Lt(e)?e:o.crisp(s,e,t,u(n,0),u(r,0)))},setSize:function(e,t,n){var r=this,i=r.alignedObjects,s=i.length;r.width=e,r.height=t,r.boxWrapper[jt(n,!0)?"animate":"attr"]({width:e,height:t});while(s--)i[s].align()},g:function(e){var t=this.createElement("g");return Pt(e)?t.attr({"class":z+e}):t},image:function(e,t,n,r,i){var s={preserveAspectRatio:V},o;return arguments.length>1&&xt(s,{x:t,y:n,width:r,height:i}),o=this.createElement("image").attr(s),o.element.setAttributeNS?o.element.setAttributeNS("http://www.w3.org/1999/xlink","href",e):o.element.setAttribute("hc-svg-href",e),o},symbol:function(e,t,n,r,s,o){var u,a=this.symbols[e],f=a&&a(i(t),i(n),r,s,o),l,c=/^url\((.*?)\)$/,h,p,d;return f?(u=this.path(f),xt(u,{symbolName:e,x:t,y:n,width:r,height:s}),o&&xt(u,o)):c.test(e)&&(d=function(e,t){e.element&&(e.attr({width:t[0],height:t[1]}),e.alignByTranslate||e.translate(i((r-t[0])/2),i((s-t[1])/2)))},h=e.match(c)[1],p=k[h],u=this.image(h).attr({x:t,y:n}),p?d(u,p):(u.attr({width:0,height:0}),l=It("img",{onload:function(){d(u,k[h]=[this.width,this.height])},src:h}))),u},symbols:{circle:function(e,t,n,r){var i=.166*n;return[$,e+n/2,t,"C",e+n+i,t,e+n+i,t+r,e+n/2,t+r,"C",e-i,t+r,e-i,t,e+n/2,t,"Z"]},square:function(e,t,n,r){return[$,e,t,J,e+n,t,e+n,t+r,e,t+r,"Z"]},triangle:function(e,t,n,r){return[$,e+n/2,t,J,e+n,t+r,e,t+r,"Z"]},"triangle-down":function(e,t,n,r){return[$,e,t,J,e+n,t,e+n/2,t+r,"Z"]},diamond:function(e,t,n,r){return[$,e+n/2,t,J,e+n,t+r/2,e+n/2,t+r,e,t+r/2,"Z"]},arc:function(e,t,n,r,i){var s=i.start,o=i.r||n||r,u=i.end-.001,a=i.innerR,f=i.open,p=l(s),d=c(s),v=l(u),m=c(u),g=i.end-s<h?0:1;return[$,e+o*p,t+o*d,"A",o,o,0,g,1,e+o*v,t+o*m,f?$:J,e+a*v,t+a*m,"A",a,a,0,g,0,e+a*p,t+a*d,f?"":"Z"]}},clipRect:function(e,t,n,r){var i,s=z+L++,o=this.createElement("clipPath").attr({id:s}).add(this.defs);return i=this.rect(e,t,n,r,0).add(o),i.id=s,i.clipPath=o,i},color:function(e,t,n){var r=this,i,s=/^rgba/,o,u,a,f,l,c,h,p,d,v,m=[];e&&e.linearGradient?o="linearGradient":e&&e.radialGradient&&(o="radialGradient");if(o){u=e[o],a=r.gradients,l=e.stops,p=t.radialReference,At(u)&&(e[o]=u={x1:u[0],y1:u[1],x2:u[2],y2:u[3],gradientUnits:"userSpaceOnUse"}),o==="radialGradient"&&p&&!Pt(u.gradientUnits)&&(u=Tt(u,{cx:p[0]-p[2]/2+u.cx*p[2],cy:p[1]-p[2]/2+u.cy*p[2],r:u.r*p[2],gradientUnits:"userSpaceOnUse"}));for(d in u)d!=="id"&&m.push(d,u[d]);for(d in l)m.push(l[d]);return m=m.join(","),a[m]?v=a[m].id:(u.id=v=z+L++,a[m]=f=r.createElement(o).attr(u).add(r.defs),f.stops=[],cn(l,function(e){var t;s.test(e[1])?(i=kn(e[1]),c=i.get("rgb"),h=i.get("a")):(c=e[1],h=1),t=r.createElement("stop").attr({offset:e[0],"stop-color":c,"stop-opacity":h}).add(f),f.stops.push(t)})),"url("+r.url+"#"+v+")"}return s.test(e)?(i=kn(e),Ht(t,n+"-opacity",i.get("a")),i.get("rgb")):(t.removeAttribute(n+"-opacity"),e)},text:function(e,t,n,r){var s=this,o=O.chart.style,u=T||!S&&s.forExport,a;return r&&!s.forExport?s.html(e,t,n):(t=i(jt(t,0)),n=i(jt(n,0)),a=s.createElement("text").attr({x:t,y:n,text:e}).css({fontFamily:o.fontFamily,fontSize:o.fontSize}),u&&a.css({position:q}),a.x=t,a.y=n,a)},html:function(e,t,n){var r=O.chart.style,s=this.createElement("span"),o=s.attrSetters,u=s.element,a=s.renderer;return o.text=function(e){return e!==u.innerHTML&&delete this.bBox,u.innerHTML=e,!1},o.x=o.y=o.align=function(e,t){return t==="align"&&(t="textAlign"),s[t]=e,s.htmlUpdateTransform(),!1},s.attr({text:e,x:i(t),y:i(n)}).css({position:q,whiteSpace:"nowrap",fontFamily:r.fontFamily,fontSize:r.fontSize}),s.css=s.htmlCss,a.isSVG&&(s.add=function(e){var t,n=a.box.parentNode,r,i=[];if(e){t=e.div;if(!t){r=e;while(r)i.push(r),r=r.parentGroup;cn(i.reverse(),function(e){var r;t=e.div=e.div||It(I,{className:Ht(e.element,"class")},{position:q,left:(e.translateX||0)+X,top:(e.translateY||0)+X},t||n),r=t.style,xt(e.attrSetters,{translateX:function(e){r.left=e+X},translateY:function(e){r.top=e+X},visibility:function(e,t){r[t]=e}})})}}else t=n;return t.appendChild(u),s.added=!0,s.alignOnAdd&&s.htmlUpdateTransform(),s}),s},fontMetrics:function(e){e=Ct(e||11);var t=e<24?e+4:i(e*1.2),n=i(t*.8);return{h:t,b:n}},label:function(t,n,r,s,o,u,a,f,l){function L(){var e,t,n=p.element.style;v=(b===undefined||w===undefined||h.styles.textAlign)&&p.getBBox(),h.width=(b||v.width||0)+2*g+y,h.height=(w||v.height||0)+2*g,N=g+c.fontMetrics(n&&n.fontSize).b,k&&(d||(e=i(-m*g),t=f?-N:0,h.box=d=s?c.symbol(s,e,t,h.width,h.height):c.rect(e,t,h.width,h.height,0,T[ft]),d.add(h)),d.attr(Tt({width:h.width,height:h.height},T)),T=null)}function A(){var e=h.styles,t=e&&e.textAlign,n=y+g*(1-m),r;r=f?0:N,Pt(b)&&(t==="center"||t==="right")&&(n+={center:.5,right:1}[t]*(b-v.width)),(n!==p.x||r!==p.y)&&p.attr({x:n,y:r}),p.x=n,p.y=r}function O(e,t){d?d.attr(e,t):T[e]=t}function M(){p.add(h),h.attr({text:t,x:n,y:r}),d&&Pt(o)&&h.attr({anchorX:o,anchorY:u})}var c=this,h=c.g(l),p=c.text("",0,0,a).attr({zIndex:1}),d,v,m=0,g=3,y=0,b,w,E,S,x=0,T={},N,C=h.attrSetters,k;vn(h,"add",M),C.width=function(e){return b=e,!1},C.height=function(e){return w=e,!1},C.padding=function(e){return Pt(e)&&e!==g&&(g=e,A()),!1},C.paddingLeft=function(e){return Pt(e)&&e!==y&&(y=e,A()),!1},C.align=function(e){return m={left:0,center:.5,right:1}[e],!1},C.text=function(e,t){return p.attr(t,e),L(),A(),!1},C[ft]=function(e,t){return k=!0,x=e%2/2,O(t,e),!1},C.stroke=C.fill=C.r=function(e,t){return t==="fill"&&(k=!0),O(t,e),!1},C.anchorX=function(e,t){return o=e,O(t,e+x-E),!1},C.anchorY=function(e,t){return u=e,O(t,e-S),!1},C.x=function(e){return h.x=e,e-=m*((b||v.width)+g),E=i(e),h.attr("translateX",E),!1},C.y=function(e){return S=h.y=i(e),h.attr("translateY",S),!1};var _=h.css;return xt(h,{css:function(t){if(t){var n={};t=Tt(t),cn(["fontSize","fontWeight","fontFamily","color","lineHeight","width"],function(r){t[r]!==e&&(n[r]=t[r],delete t[r])}),p.css(n)}return _.call(h,t)},getBBox:function(){return{width:v.width+2*g,height:v.height+2*g,x:v.x-g,y:v.y-g}},shadow:function(e){return d&&d.shadow(e),h},destroy:function(){mn(h,"add",M),mn(h.element,"mouseenter"),mn(h.element,"mouseleave"),p&&(p=p.destroy()),d&&(d=d.destroy()),Ln.prototype.destroy.call(h),h=c=L=A=O=M=null}})}},N=An;var On,Mn;if(!S&&!T){Highcharts.VMLElement=Mn={init:function(e,t){var n=this,r=["<",t,' filled="f" stroked="f"'],i=["position: ",q,";"],s=t===I;(t==="shape"||s)&&i.push("left:0;top:0;width:1px;height:1px;"),i.push("visibility: ",s?U:W),r.push(' style="',i.join(""),'"/>'),t&&(r=s||t==="span"||t==="img"?r.join(""):e.prepVML(r),n.element=It(r)),n.renderer=e,n.attrSetters={}},add:function(e){var t=this,n=t.renderer,r=t.element,i=n.box,s=e&&e.inverted,o=e?e.element||e:i;return s&&n.invertChild(r,o),o.appendChild(r),t.added=!0,t.alignOnAdd&&!t.deferUpdateTransform&&t.updateTransform(),gn(t,"add"),t},updateTransform:Ln.prototype.htmlUpdateTransform,attr:function(t,n){var r=this,s,o,a,f,h=r.element||{},d=h.style,v=h.nodeName,m=r.renderer,y=r.symbolName,b,w=r.shadows,E,S=r.attrSetters,x=r;kt(t)&&Pt(n)&&(s=t,t={},t[s]=n);if(kt(t))s=t,s==="strokeWidth"||s==="stroke-width"?x=r.strokeweight:x=r[s];else for(s in t){o=t[s],E=!1,f=S[s]&&S[s].call(r,o,s);if(f!==!1&&o!==null){f!==e&&(o=f);if(y&&/^(x|y|r|start|end|width|height|innerR|anchorX|anchorY)/.test(s))b||(r.symbolAttr(t),b=!0),E=!0;else if(s==="d"){o=o||[],r.d=o.join(" "),a=o.length;var T=[];while(a--)if(Ot(o[a]))T[a]=i(o[a]*10)-5;else if(o[a]==="Z")T[a]="x";else{T[a]=o[a];if(o[a]==="wa"||o[a]==="at")T[a+5]===T[a+7]&&(T[a+7]-=1),T[a+6]===T[a+8]&&(T[a+8]-=1)}o=T.join(" ")||"x",h.path=o;if(w){a=w.length;while(a--)w[a].path=w[a].cutOff?this.cutOffPath(o,w[a].cutOff):o}E=!0}else if(s==="visibility"){if(w){a=w.length;while(a--)w[a].style[s]=o}v==="DIV"&&(o=o===U?"-999em":0,g||(d[s]=o?U:W),s="top"),d[s]=o,E=!0}else if(s==="zIndex")o&&(d[s]=o),E=!0;else if(ln(s,["x","y","width","height"])!==-1)r[s]=o,s==="x"||s==="y"?s={x:"left",y:"top"}[s]:o=u(0,o),r.updateClipping?(r[s]=o,r.updateClipping()):d[s]=o,E=!0;else if(s==="class"&&v==="DIV")h.className=o;else if(s==="stroke")o=m.color(o,h,s),s="strokecolor";else if(s==="stroke-width"||s==="strokeWidth")h.stroked=o?!0:!1,s="strokeweight",r[s]=o,Ot(o)&&(o+=X);else if(s==="dashstyle"){var N=h.getElementsByTagName("stroke")[0]||It(m.prepVML(["<stroke/>"]),null,null,h);N[s]=o||"solid",r.dashstyle=o,E=!0}else s==="fill"?v==="SPAN"?d.color=o:v!=="IMG"&&(h.filled=o!==V?!0:!1,o=m.color(o,h,s,r),s="fillcolor"):s==="opacity"?E=!0:v==="shape"&&s==="rotation"?(r[s]=o,h.style.left=-i(c(o*p)+1)+X,h.style.top=i(l(o*p))+X):s==="translateX"||s==="translateY"||s==="rotation"?(r[s]=o,r.updateTransform(),E=!0):s==="text"&&(this.bBox=null,h.innerHTML=o,E=!0);E||(g?h[s]=o:Ht(h,s,o))}}return x},clip:function(e){var t=this,n,r;return e?(n=e.members,Dt(n,t),n.push(t),t.destroyClip=function(){Dt(n,t)},r=e.getCSS(t)):(t.destroyClip&&t.destroyClip(),r={clip:g?"inherit":"rect(auto)"}),t.css(r)},css:Ln.prototype.htmlCss,safeRemoveChild:function(e){e.parentNode&&tn(e)},destroy:function(){return this.destroyClip&&this.destroyClip(),Ln.prototype.destroy.apply(this)},on:function(e,t){return this.element["on"+e]=function(){var e=n.event;e.target=e.srcElement,t(e)},this},cutOffPath:function(e,t){var n;e=e.split(/[ ,]/),n=e.length;if(n===9||n===11)e[n-4]=e[n-2]=Ct(e[n-2])-10*t;return e.join(" ")},shadow:function(e,t,n){var r=[],i,s=this.element,o=this.renderer,u,a=s.style,f,l=s.path,c,h,p,d;l&&typeof l.value!="string"&&(l="x"),h=l;if(e){p=jt(e.width,3),d=(e.opacity||.15)/p;for(i=1;i<=3;i++)c=p*2+1-2*i,n&&(h=this.cutOffPath(l.value,c+.5)),f=['<shape isShadow="true" strokeweight="',c,'" filled="false" path="',h,'" coordsize="10 10" style="',s.style.cssText,'" />'],u=It(o.prepVML(f),null,{left:Ct(a.left)+jt(e.offsetX,1),top:Ct(a.top)+jt(e.offsetY,1)}),n&&(u.cutOff=c+1),f=['<stroke color="',e.color||"black",'" opacity="',d*i,'"/>'],It(o.prepVML(f),null,null,u),t?t.element.appendChild(u):s.parentNode.insertBefore(u,s),r.push(u);this.shadows=r}return this}},Mn=qt(Ln,Mn);var _n={Element:Mn,isIE8:d.indexOf("MSIE 8.0")>-1,init:function(e,n,r){var i=this,s,o;i.alignedObjects=[],s=i.createElement(I),o=s.element,o.style.position=R,e.appendChild(s.element),i.isVML=!0,i.box=o,i.boxWrapper=s,i.setSize(n,r,!1),t.namespaces.hcv||(t.namespaces.add("hcv","urn:schemas-microsoft-com:vml"),t.createStyleSheet().cssText="hcv\\:fill, hcv\\:path, hcv\\:shape, hcv\\:stroke{ behavior:url(#default#VML); display: inline-block; } ")},isHidden:function(){return!this.box.offsetWidth},clipRect:function(e,t,n,r){var s=this.createElement(),o=Lt(e);return xt(s,{members:[],left:o?e.x:e,top:o?e.y:t,width:o?e.width:n,height:o?e.height:r,getCSS:function(e){var t=e.element,n=t.nodeName,r=n==="shape",s=e.inverted,o=this,u=o.top-(r?t.offsetTop:0),a=o.left,f=a+o.width,l=u+o.height,c={clip:"rect("+i(s?a:u)+"px,"+i(s?l:f)+"px,"+i(s?f:l)+"px,"+i(s?u:a)+"px)"};return!s&&g&&n==="DIV"&&xt(c,{width:f+X,height:l+X}),c},updateClipping:function(){cn(s.members,function(e){e.css(s.getCSS(e))})}})},color:function(e,t,n,i){var s=this,o,u=/^rgba/,a,f,l=V;e&&e.linearGradient?f="gradient":e&&e.radialGradient&&(f="pattern");if(f){var c,p,d=e.linearGradient||e.radialGradient,v,m,g,y,b,w,E,S,x="",T=e.stops,N,C,k=[],L=function(){a=['<fill colors="'+k.join(",")+'" opacity="',w,'" o:opacity2="',b,'" type="',f,'" ',x,'focus="100%" method="any" />'],It(s.prepVML(a),null,null,t)};N=T[0],C=T[T.length-1],N[0]>0&&T.unshift([0,N[1]]),C[0]<1&&T.push([1,C[1]]),cn(T,function(e,t){u.test(e[1])?(o=kn(e[1]),c=o.get("rgb"),p=o.get("a")):(c=e[1],p=1),k.push(e[0]*100+"% "+c),t?(w=p,E=c):(b=p,S=c)});if(n==="fill")if(f==="gradient")v=d.x1||d[0]||0,m=d.y1||d[1]||0,g=d.x2||d[2]||0,y=d.y2||d[3]||0,x='angle="'+(90-r.atan((y-m)/(g-v))*180/h)+'"',L();else{var A=d.r,M=A*2,_=A*2,D=d.cx,P=d.cy,H=t.radialReference,B,j=function(){H&&(B=i.getBBox(),D+=(H[0]-B.x)/B.width-.5,P+=(H[1]-B.y)/B.height-.5,M*=H[2]/B.width,_*=H[2]/B.height),x='src="'+O.global.VMLRadialGradientURL+'" '+'size="'+M+","+_+'" '+'origin="0.5,0.5" '+'position="'+D+","+P+'" '+'color2="'+S+'" ',L()};i.added?j():vn(i,"add",j),l=E}else l=c}else if(u.test(e)&&t.tagName!=="IMG")o=kn(e),a=["<",n,' opacity="',o.get("a"),'"/>'],It(this.prepVML(a),null,null,t),l=o.get("rgb");else{var F=t.getElementsByTagName(n);F.length&&(F[0].opacity=1,F[0].type="solid"),l=e}return l},prepVML:function(e){var t="display:inline-block;behavior:url(#default#VML);",n=this.isIE8;return e=e.join(""),n?(e=e.replace("/>",' xmlns="urn:schemas-microsoft-com:vml" />'),e.indexOf('style="')===-1?e=e.replace("/>",' style="'+t+'" />'):e=e.replace('style="','style="'+t)):e=e.replace("<","<hcv:"),e},text:An.prototype.html,path:function(e){var t={coordsize:"10 10"};return At(e)?t.d=e:Lt(e)&&xt(t,e),this.createElement("shape").attr(t)},circle:function(e,t,n){return Lt(e)&&(n=e.r,t=e.y,e=e.x),this.symbol("circle").attr({x:e-n,y:t-n,width:2*n,height:2*n})},g:function(e){var t,n;return e&&(n={className:z+e,"class":z+e}),t=this.createElement(I).attr(n),t},image:function(e,t,n,r,i){var s=this.createElement("img").attr({src:e});return arguments.length>1&&s.attr({x:t,y:n,width:r,height:i}),s},rect:function(e,t,n,r,i,s){Lt(e)&&(t=e.y,n=e.width,r=e.height,s=e.strokeWidth,e=e.x);var o=this.symbol("rect");return o.r=i,o.attr(o.crisp(s,e,t,u(n,0),u(r,0)))},invertChild:function(e,t){var n=t.style;Ft(e,{flip:"x",left:Ct(n.width)-1,top:Ct(n.height)-1,rotation:-90})},symbols:{arc:function(e,t,n,r,i){var s=i.start,o=i.end,u=i.r||n||r,a=i.innerR,f=l(s),h=c(s),p=l(o),d=c(o),v;return o-s===0?["x"]:(v=["wa",e-u,t-u,e+u,t+u,e+u*f,t+u*h,e+u*p,t+u*d],i.open&&!a&&v.push("e",$,e,t),v.push("at",e-a,t-a,e+a,t+a,e+a*p,t+a*d,e+a*f,t+a*h,"x","e"),v)},circle:function(e,t,n,r){return["wa",e,t,e+n,t+r,e+n,t+r/2,e+n,t+r/2,"e"]},rect:function(e,t,n,r,i){var s=e+n,o=t+r,u,f;return!Pt(i)||!i.r?u=An.prototype.symbols.square.apply(0,arguments):(f=a(i.r,n,r),u=[$,e+f,t,J,s-f,t,"wa",s-2*f,t,s,t+2*f,s-f,t,s,t+f,J,s,o-f,"wa",s-2*f,o-2*f,s,o,s,o-f,s-f,o,J,e+f,o,"wa",e,o-2*f,e+2*f,o,e+f,o,e,o-f,J,e,t+f,"wa",e,t,e+2*f,t+2*f,e,t+f,e+f,t,"x","e"]),u}}};Highcharts.VMLRenderer=On=function(){this.init.apply(this,arguments)},On.prototype=Tt(An.prototype,_n),N=On}var Dn,Pn;T&&(Highcharts.CanVGRenderer=Dn=function(){E="http://www.w3.org/1999/xhtml"},Dn.prototype.symbols={},Pn=function(){function t(){var t=e.length,n;for(n=0;n<t;n++)e[n]();e=[]}var e=[];return{push:function(n,r){e.length===0&&fn(r,t),e.push(n)}}}(),N=Dn),Hn.prototype={addLabel:function(){var e=this,t=e.axis,n=t.options,r=t.chart,s=t.horiz,o=t.categories,a=t.series[0]&&t.series[0].names,f=e.pos,l=n.labels,c,h=t.tickPositions,p=s&&o&&!l.step&&!l.staggerLines&&!l.rotation&&r.plotWidth/h.length||!s&&r.plotWidth/2,d=f===h[0],v=f===h[h.length-1],m,g,y=o?jt(o[f],a&&a[f],f):f,b=e.label,w=h.info,E;t.isDatetimeAxis&&w&&(E=n.dateTimeLabelFormats[w.higherRanks[f]||w.unitName]),e.isFirst=d,e.isLast=v,c=t.labelFormatter.call({axis:t,chart:r,isFirst:d,isLast:v,dateTimeLabelFormat:E,value:t.isLog?rn(_t(y)):y}),m=p&&{width:u(1,i(p-2*(l.padding||10)))+X},m=xt(m,l.style),Pt(b)?b&&b.attr({text:c}).css(m):(g={align:l.align},Ot(l.rotation)&&(g.rotation=l.rotation),e.label=Pt(c)&&l.enabled?r.renderer.text(c,0,0,l.useHTML).attr(g).css(m).add(t.labelGroup):null)},getLabelSize:function(){var e=this.label,t=this.axis;return e?(this.labelBBox=e.getBBox())[t.horiz?"height":"width"]:0},getLabelSides:function(){var e=this.labelBBox,t=this.axis,n=t.options,r=n.labels,i=e.width,s=i*{left:0,center:.5,right:1}[r.align]-r.x;return[-s,i-s]},handleOverflow:function(e,t){var n=!0,r=this.axis,i=r.chart,s=this.isFirst,o=this.isLast,u=t.x,a=r.reversed,f=r.tickPositions;if(s||o){var l=this.getLabelSides(),c=l[0],h=l[1],p=i.plotLeft,d=p+r.len,v=r.ticks[f[e+(s?1:-1)]],m=v&&v.label.xy&&v.label.xy.x+v.getLabelSides()[s?0:1];s&&!a||o&&a?u+c<p&&(u=p-c,v&&u+h>m&&(n=!1)):u+h>d&&(u=d-h,v&&u+c<m&&(n=!1)),t.x=u}return n},getPosition:function(e,t,n,r){var i=this.axis,s=i.chart,o=r&&s.oldChartHeight||s.chartHeight;return{x:e?i.translate(t+n,null,null,r)+i.transB:i.left+i.offset+(i.opposite?(r&&s.oldChartWidth||s.chartWidth)-i.right-i.left:0),y:e?o-i.bottom+i.offset-(i.opposite?i.height:0):o-i.translate(t+n,null,null,r)-i.transB}},getLabelPosition:function(e,t,n,r,i,s,o,u){var a=this.axis,f=a.transA,l=a.reversed,c=a.staggerLines;return e=e+i.x-(s&&r?s*f*(l?-1:1):0),t=t+i.y-(s&&!r?s*f*(l?1:-1):0),Pt(i.y)||(t+=Ct(n.styles.lineHeight)*.9-n.getBBox().height/2),c&&(t+=o/(u||1)%c*16),{x:e,y:t}},getMarkPath:function(e,t,n,r,i,s){return s.crispLine([$,e,t,J,e+(i?0:-n),t+(i?n:0)],r)},render:function(t,n,r){var i=this,s=i.axis,o=s.options,u=s.chart,a=u.renderer,f=s.horiz,l=i.type,c=i.label,h=i.pos,p=o.labels,d=i.gridLine,v=l?l+"Grid":"grid",m=l?l+"Tick":"tick",g=o[v+"LineWidth"],y=o[v+"LineColor"],b=o[v+"LineDashStyle"],w=o[m+"Length"],E=o[m+"Width"]||0,S=o[m+"Color"],x=o[m+"Position"],T,N=i.mark,C,k=p.step,L,A=!0,O=s.tickmarkOffset,M=i.getPosition(f,h,O,n),_=M.x,D=M.y,P=f&&_===s.pos||!f&&D===s.pos+s.len?-1:1,H=s.staggerLines;this.isActive=!0,g&&(T=s.getPlotLinePath(h+O,g*P,n,!0),d===e&&(L={stroke:y,"stroke-width":g},b&&(L.dashstyle=b),l||(L.zIndex=1),n&&(L.opacity=0),i.gridLine=d=g?a.path(T).attr(L).add(s.gridGroup):null),!n&&d&&T&&d[i.isNew?"attr":"animate"]({d:T,opacity:r})),E&&w&&(x==="inside"&&(w=-w),s.opposite&&(w=-w),C=i.getMarkPath(_,D,w,E*P,f,a),N?N.animate({d:C,opacity:r}):i.mark=a.path(C).attr({stroke:S,"stroke-width":E,opacity:r}).add(s.axisGroup)),c&&!isNaN(_)&&(c.xy=M=i.getLabelPosition(_,D,c,f,p,O,t,k),i.isFirst&&!jt(o.showFirstLabel,1)||i.isLast&&!jt(o.showLastLabel,1)?A=!1:!H&&f&&p.overflow==="justify"&&!i.handleOverflow(t,M)&&(A=!1),k&&t%k&&(A=!1),A&&!isNaN(M.y)?(M.opacity=r,c[i.isNew?"attr":"animate"](M),i.isNew=!1):c.attr("y",-9999))},destroy:function(){en(this,this.axis)}},Bn.prototype={render:function(){var e=this,t=e.axis,n=t.horiz,r=(t.pointRange||0)/2,i=e.options,s=i.label,o=e.label,f=i.width,l=i.to,c=i.from,h=Pt(c)&&Pt(l),p=i.value,d=i.dashStyle,v=e.svgElem,m=[],g,y,b,w,E,S,x=i.color,T=i.zIndex,N=i.events,C,k=t.chart.renderer;t.isLog&&(c=Mt(c),l=Mt(l),p=Mt(p));if(f)m=t.getPlotLinePath(p,f),C={stroke:x,"stroke-width":f},d&&(C.dashstyle=d);else{if(!h)return;c=u(c,t.min-r),l=a(l,t.max+r),m=t.getPlotBandPath(c,l,i),C={fill:x},i.borderWidth&&(C.stroke=i.borderColor,C["stroke-width"]=i.borderWidth)}Pt(T)&&(C.zIndex=T);if(v)m?v.animate({d:m},null,v.onGetPath):(v.hide(),v.onGetPath=function(){v.show()});else if(m&&m.length){e.svgElem=v=k.path(m).attr(C).add();if(N){g=function(t){v.on(t,function(n){N[t].apply(e,[n])})};for(y in N)g(y)}}return s&&Pt(s.text)&&m&&m.length&&t.width>0&&t.height>0?(s=Tt({align:n&&h&&"center",x:n?!h&&4:10,verticalAlign:!n&&h&&"middle",y:n?h?16:10:h?6:-4,rotation:n&&!h&&90},s),o||(e.label=o=k.text(s.text,0,0).attr({align:s.textAlign||s.align,rotation:s.rotation,zIndex:T}).css(s.style).add()),b=[m[1],m[4],jt(m[6],m[1])],w=[m[2],m[5],jt(m[7],m[2])],E=Yt(b),S=Yt(w),o.align(s,!1,{x:E,y:S,width:Zt(b)-E,height:Zt(w)-S}),o.show()):o&&o.hide(),e},destroy:function(){var e=this,t=e.axis;Dt(t.plotLinesAndBands,e),en(e,this.axis)}},jn.prototype={destroy:function(){en(this,this.axis)},setTotal:function(e){this.total=e,this.cum=e},render:function(e){var t=this.options,n=t.formatter.call(this);this.label?this.label.attr({text:n,visibility:U}):this.label=this.axis.chart.renderer.text(n,0,0,t.useHTML).css(t.style).attr({align:this.textAlign,rotation:t.rotation,visibility:U}).add(e)},setOffset:function(e,t){var n=this,r=n.axis,i=r.chart,s=i.inverted,o=this.isNegative,u=r.translate(this.percent?100:this.total,0,0,0,1),a=r.translate(0),l=f(u-a),c=i.xAxis[0].translate(this.x)+e,h=i.plotHeight,p={x:s?o?u:u-l:c,y:s?h-c-t:o?h-u-l:h-u,width:s?l:t,height:s?t:l},d=this.label,v;d&&(d.align(this.alignOptions,null,p),v=d.alignAttr,d.attr({visibility:this.options.crop===!1||i.isInsidePlot(v.x,v.y)?S?"inherit":W:U}))}},Fn.prototype={defaultOptions:{dateTimeLabelFormats:{millisecond:"%H:%M:%S.%L",second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%e. %b",week:"%e. %b",month:"%b '%y",year:"%Y"},endOnTick:!1,gridLineColor:"#C0C0C0",labels:En,lineColor:"#C0D0E0",lineWidth:1,minPadding:.01,maxPadding:.01,minorGridLineColor:"#E0E0E0",minorGridLineWidth:1,minorTickColor:"#A0A0A0",minorTickLength:2,minorTickPosition:"outside",startOfWeek:1,startOnTick:!1,tickColor:"#C0D0E0",tickLength:5,tickmarkPlacement:"between",tickPixelInterval:100,tickPosition:"outside",tickWidth:1,title:{align:"middle",style:{color:"#4d759e",fontWeight:"bold"}},type:"linear"},defaultYAxisOptions:{endOnTick:!0,gridLineWidth:1,tickPixelInterval:72,showLastLabel:!0,labels:{align:"right",x:-8,y:3},lineWidth:0,maxPadding:.05,minPadding:.05,startOnTick:!0,tickWidth:0,title:{rotation:270,text:"Values"},stackLabels:{enabled:!1,formatter:function(){return this.total},style:En.style}},defaultLeftAxisOptions:{labels:{align:"right",x:-8,y:null},title:{rotation:270}},defaultRightAxisOptions:{labels:{align:"left",x:8,y:null},title:{rotation:90}},defaultBottomAxisOptions:{labels:{align:"center",x:0,y:14},title:{rotation:0}},defaultTopAxisOptions:{labels:{align:"center",x:0,y:-5},title:{rotation:0}},init:function(t,n){var r=n.isX,i=this;i.horiz=t.inverted?!r:r,i.isXAxis=r,i.xOrY=r?"x":"y",i.opposite=n.opposite,i.side=i.horiz?i.opposite?0:2:i.opposite?1:3,i.setOptions(n);var s=this.options,o=s.type,u=o==="datetime";i.labelFormatter=s.labels.formatter||i.defaultLabelFormatter,i.staggerLines=i.horiz&&s.labels.staggerLines,i.userOptions=n,i.minPixelPadding=0,i.chart=t,i.reversed=s.reversed,i.zoomEnabled=s.zoomEnabled!==!1,i.categories=s.categories||o==="category",i.isLog=o==="logarithmic",i.isDatetimeAxis=u,i.isLinked=Pt(s.linkedTo),i.tickmarkOffset=i.categories&&s.tickmarkPlacement==="between"?.5:0,i.ticks={},i.minorTicks={},i.plotLinesAndBands=[],i.alternateBands={},i.len=0,i.minRange=i.userMinRange=s.minRange||s.maxZoom,i.range=s.range,i.offset=s.offset||0,i.stacks={},i._stacksTouched=0,i.max=null,i.min=null;var a,f=i.options.events;ln(i,t.axes)===-1&&(t.axes.push(i),t[r?"xAxis":"yAxis"].push(i)),i.series=i.series||[],t.inverted&&r&&i.reversed===e&&(i.reversed=!0),i.removePlotBand=i.removePlotBandOrLine,i.removePlotLine=i.removePlotBandOrLine;for(a in f)vn(i,a,f[a]);i.isLog&&(i.val2lin=Mt,i.lin2val=_t)},setOptions:function(e){this.options=Tt(this.defaultOptions,this.isXAxis?{}:this.defaultYAxisOptions,[this.defaultTopAxisOptions,this.defaultRightAxisOptions,this.defaultBottomAxisOptions,this.defaultLeftAxisOptions][this.side],Tt(O[this.isXAxis?"xAxis":"yAxis"],e))},update:function(e,t){var n=this.chart;e=n.options[this.xOrY+"Axis"][this.options.index]=Tt(this.userOptions,e),this.destroy(),this._addedPlotLB=!1,this.init(n,e),n.isDirtyBox=!0,jt(t,!0)&&n.redraw()},remove:function(e){var t=this.chart,n=this.xOrY+"Axis";cn(this.series,function(e){e.remove(!1)}),Dt(t.axes,this),Dt(t[n],this),t.options[n].splice(this.options.index,1),this.destroy(),t.isDirtyBox=!0,jt(e,!0)&&t.redraw()},defaultLabelFormatter:function(){var t=this.axis,n=this.value,r=t.categories,i=this.dateTimeLabelFormat,s=O.lang.numericSymbols,o=s&&s.length,u,a,f=t.options.labels.format,l=t.isLog?n:t.tickInterval;if(f)a=Vt(f,this);else if(r)a=n;else if(i)a=M(i,n);else if(o&&l>=1e3)while(o--&&a===e)u=Math.pow(1e3,o+1),l>=u&&s[o]!==null&&(a=Ut(n/u,-1)+s[o]);return a===e&&(n>=1e3?a=Ut(n,0):a=Ut(n,-1)),a},getSeriesExtremes:function(){var t=this,n=t.chart,r=t.stacks,i=[],s=[],o=t._stacksTouched=t._stacksTouched+1,f,l;t.hasVisibleSeries=!1,t.dataMin=t.dataMax=null,cn(t.series,function(f){if(f.visible||!n.options.chart.ignoreHiddenSeries){var c=f.options,h,p,d,v,m,g,y,b,w,E,S=c.threshold,x,T=[],N,C,k=0;t.hasVisibleSeries=!0,t.isLog&&S<=0&&(S=c.threshold=null);if(t.isXAxis)y=f.xData,y.length&&(t.dataMin=a(jt(t.dataMin,y[0]),Yt(y)),t.dataMax=u(jt(t.dataMax,y[0]),Zt(y)));else{var L,A,O,M=f.cropped,_=f.xAxis.getExtremes(),D,P=!!f.modifyValue;h=c.stacking,t.usePercentage=h==="percent",h&&(m=c.stack,v=f.type+jt(m,""),g="-"+v,f.stackKey=v,p=i[v]||[],i[v]=p,d=s[g]||[],s[g]=d),t.usePercentage&&(t.dataMin=0,t.dataMax=99),y=f.processedXData,b=f.processedYData,x=b.length;for(l=0;l<x;l++){w=y[l],E=b[l],h&&(L=E<S,A=L?d:p,O=L?g:v,Pt(A[w])?(A[w]=rn(A[w]+E),E=[E,A[w]]):A[w]=E,r[O]||(r[O]={}),r[O][w]||(r[O][w]=new jn(t,t.options.stackLabels,L,w,m,h)),r[O][w].setTotal(A[w]),r[O][w].touched=o);if(E!==null&&E!==e&&(!t.isLog||E>0)){P&&(E=f.modifyValue(E));if(f.getExtremesFromAll||M||(y[l+1]||w)>=_.min&&(y[l-1]||w)<=_.max){D=E.length;if(D)while(D--)E[D]!==null&&(T[k++]=E[D]);else T[k++]=E}}}!t.usePercentage&&T.length&&(f.dataMin=N=Yt(T),f.dataMax=C=Zt(T),t.dataMin=a(jt(t.dataMin,N),N),t.dataMax=u(jt(t.dataMax,C),C)),Pt(S)&&(t.dataMin>=S?(t.dataMin=S,t.ignoreMinPadding=!0):t.dataMax<S&&(t.dataMax=S,t.ignoreMaxPadding=!0))}}});for(f in r)for(l in r[f])r[f][l].touched<o&&(r[f][l].destroy(),delete r[f][l])},translate:function(e,t,n,r,i,s){var o=this,u=o.len,a=1,f=0,l=r?o.oldTransA:o.transA,c=r?o.oldMin:o.min,h,p=o.minPixelPadding,d=(o.options.ordinal||o.isLog&&i)&&o.lin2val;return l||(l=o.transA),n&&(a*=-1,f=u),o.reversed&&(a*=-1,f-=a*u),t?(e=e*a+f,e-=p,h=e/l+c,d&&(h=o.lin2val(h))):(d&&(e=o.val2lin(e)),h=a*(e-c)*l+f+a*p+(s?l*o.pointRange/2:0)),h},toPixels:function(e,t){return this.translate(e,!1,!this.horiz,null,!0)+(t?0:this.pos)},toValue:function(e,t){return this.translate(e-(t?0:this.pos),!0,!this.horiz,null,!0)},getPlotLinePath:function(e,t,n,r){var s=this,o=s.chart,u=s.left,a=s.top,f,l,c,h,p=s.translate(e,null,null,n),d=n&&o.oldChartHeight||o.chartHeight,v=n&&o.oldChartWidth||o.chartWidth,m,g=s.transB;f=c=i(p+g),l=h=i(d-p-g);if(isNaN(p))m=!0;else if(s.horiz){l=a,h=d-s.bottom;if(f<u||f>u+s.width)m=!0}else{f=u,c=v-s.right;if(l<a||l>a+s.height)m=!0}return m&&!r?null:o.renderer.crispLine([$,f,l,J,c,h],t||0)},getPlotBandPath:function(e,t){var n=this.getPlotLinePath(t),r=this.getPlotLinePath(e);return r&&n?r.push(n[4],n[5],n[1],n[2]):r=null,r},getLinearTickPositions:function(e,t,n){var r,i,u=rn(s(t/e)*e),a=rn(o(n/e)*e),f=[];r=u;while(r<=a){f.push(r),r=rn(r+e);if(r===i)break;i=r}return f},getLogTickPositions:function(e,t,n,o){var u=this,a=u.options,f=u.len,l=[];o||(u._minorAutoInterval=null);if(e>=.5)e=i(e),l=u.getLinearTickPositions(e,t,n);else if(e>=.08){var c=s(t),h,p,d,v,m,g,y;e>.3?h=[1,2,4]:e>.15?h=[1,2,4,6,8]:h=[1,2,3,4,5,6,7,8,9];for(p=c;p<n+1&&!y;p++){v=h.length;for(d=0;d<v&&!y;d++)m=Mt(_t(p)*h[d]),m>t&&g<=n&&l.push(g),g>n&&(y=!0),g=m}}else{var b=_t(t),w=_t(n),E=a[o?"minorTickInterval":"tickInterval"],S=E==="auto"?null:E,x=a.tickPixelInterval/(o?5:1),T=o?f/u.tickPositions.length:f;e=jt(S,u._minorAutoInterval,(w-b)*x/(T||1)),e=$t(e,null,r.pow(10,s(r.log(e)/r.LN10))),l=dn(u.getLinearTickPositions(e,b,w),Mt),o||(u._minorAutoInterval=e/5)}return o||(u.tickInterval=e),l},getMinorTickPositions:function(){var e=this,t=e.options,n=e.tickPositions,r=e.minorTickInterval,i=[],s,o,u;if(e.isLog){u=n.length;for(o=1;o<u;o++)i=i.concat(e.getLogTickPositions(r,n[o-1],n[o],!0))}else if(e.isDatetimeAxis&&t.minorTickInterval==="auto")i=i.concat(Kt(Jt(r),e.min,e.max,t.startOfWeek)),i[0]<e.min&&i.shift();else for(s=e.min+(n[0]-e.min)%r;s<=e.max;s+=r)i.push(s);return i},adjustForMinRange:function(){var t=this,n=t.options,r=t.min,i=t.max,s,o=t.dataMax-t.dataMin>=t.minRange,u,f,l,c,h,p,d;t.isXAxis&&t.minRange===e&&!t.isLog&&(Pt(n.min)||Pt(n.max)?t.minRange=null:(cn(t.series,function(t){c=t.xData,h=t.xIncrement?1:c.length-1;for(f=h;f>0;f--){l=c[f]-c[f-1];if(u===e||l<u)u=l}}),t.minRange=a(u*5,t.dataMax-t.dataMin)));if(i-r<t.minRange){var v=t.minRange;s=(v-i+r)/2,p=[r-s,jt(n.min,r-s)],o&&
(p[2]=t.dataMin),r=Zt(p),d=[r+v,jt(n.max,r+v)],o&&(d[2]=t.dataMax),i=Yt(d),i-r<v&&(p[0]=i-v,p[1]=jt(n.min,i-v),r=Zt(p))}t.min=r,t.max=i},setAxisTranslation:function(e){var t=this,n=t.max-t.min,r=0,i,s=0,o=0,f=t.linkedParent,l=t.transA;t.isXAxis&&(f?(s=f.minPointOffset,o=f.pointRangePadding):cn(t.series,function(e){var t=e.pointRange,f=e.options.pointPlacement,l=e.closestPointRange;t>n&&(t=0),r=u(r,t),s=u(s,f?0:t/2),o=u(o,f==="on"?0:t),!e.noSharedTooltip&&Pt(l)&&(i=Pt(i)?a(i,l):l)}),t.minPointOffset=s,t.pointRangePadding=o,t.pointRange=a(r,n),t.closestPointRange=i),e&&(t.oldTransA=l),t.translationSlope=t.transA=l=t.len/(n+o||1),t.transB=t.horiz?t.left:t.bottom,t.minPixelPadding=l*s},setTickPositions:function(e){var t=this,n=t.chart,i=t.options,o=t.isLog,f=t.isDatetimeAxis,l=t.isXAxis,c=t.isLinked,h=t.options.tickPositioner,p,d=i.maxPadding,v=i.minPadding,m,g,y=i.tickInterval,b=i.minTickInterval,w=i.tickPixelInterval,E,S=t.categories;c?(t.linkedParent=n[l?"xAxis":"yAxis"][i.linkedTo],g=t.linkedParent.getExtremes(),t.min=jt(g.min,g.dataMin),t.max=jt(g.max,g.dataMax),i.type!==t.linkedParent.options.type&&nn(11,1)):(t.min=jt(t.userMin,i.min,t.dataMin),t.max=jt(t.userMax,i.max,t.dataMax)),o&&(!e&&a(t.min,jt(t.dataMin,t.min))<=0&&nn(10,1),t.min=rn(Mt(t.min)),t.max=rn(Mt(t.max))),t.range&&(t.userMin=t.min=u(t.min,t.max-t.range),t.userMax=t.max,e&&(t.range=null)),t.beforePadding&&t.beforePadding(),t.adjustForMinRange(),!S&&!t.usePercentage&&!c&&Pt(t.min)&&Pt(t.max)&&(m=t.max-t.min,m&&(!Pt(i.min)&&!Pt(t.userMin)&&v&&(t.dataMin<0||!t.ignoreMinPadding)&&(t.min-=m*v),!Pt(i.max)&&!Pt(t.userMax)&&d&&(t.dataMax>0||!t.ignoreMaxPadding)&&(t.max+=m*d))),t.min===t.max||t.min===undefined||t.max===undefined?t.tickInterval=1:c&&!y&&w===t.linkedParent.options.tickPixelInterval?t.tickInterval=t.linkedParent.tickInterval:t.tickInterval=jt(y,S?1:(t.max-t.min)*w/(t.len||1)),l&&!e&&cn(t.series,function(e){e.processData(t.min!==t.oldMin||t.max!==t.oldMax)}),t.setAxisTranslation(!0),t.beforeSetTickPositions&&t.beforeSetTickPositions(),t.postProcessTickInterval&&(t.tickInterval=t.postProcessTickInterval(t.tickInterval)),!y&&t.tickInterval<b&&(t.tickInterval=b),!f&&!o&&(p=r.pow(10,s(r.log(t.tickInterval)/r.LN10)),y||(t.tickInterval=$t(t.tickInterval,null,p,i))),t.minorTickInterval=i.minorTickInterval==="auto"&&t.tickInterval?t.tickInterval/5:i.minorTickInterval,t.tickPositions=E=i.tickPositions?[].concat(i.tickPositions):h&&h.apply(t,[t.min,t.max]),E||(f?E=(t.getNonLinearTimeTicks||Kt)(Jt(t.tickInterval,i.units),t.min,t.max,i.startOfWeek,t.ordinalPositions,t.closestPointRange,!0):o?E=t.getLogTickPositions(t.tickInterval,t.min,t.max):E=t.getLinearTickPositions(t.tickInterval,t.min,t.max),t.tickPositions=E);if(!c){var x=E[0],T=E[E.length-1],N=t.minPointOffset||0,C;i.startOnTick?t.min=x:t.min-N>x&&E.shift(),i.endOnTick?t.max=T:t.max+N<T&&E.pop(),E.length===1&&(C=.001,t.min-=C,t.max+=C)}},setMaxTicks:function(){var e=this.chart,t=e.maxTicks||{},n=this.tickPositions,r=this._maxTicksKey=[this.xOrY,this.pos,this.len].join("-");!this.isLinked&&!this.isDatetimeAxis&&n&&n.length>(t[r]||0)&&this.options.alignTicks!==!1&&(t[r]=n.length),e.maxTicks=t},adjustTickAmount:function(){var e=this,t=e.chart,n=e._maxTicksKey,r=e.tickPositions,i=t.maxTicks;if(i&&i[n]&&!e.isDatetimeAxis&&!e.categories&&!e.isLinked&&e.options.alignTicks!==!1){var s=e.tickAmount,o=r.length,u;e.tickAmount=u=i[n];if(o<u){while(r.length<u)r.push(rn(r[r.length-1]+e.tickInterval));e.transA*=(o-1)/(u-1),e.max=r[r.length-1]}Pt(s)&&u!==s&&(e.isDirty=!0)}},setScale:function(){var e=this,t=e.stacks,n,r,i,s;e.oldMin=e.min,e.oldMax=e.max,e.oldAxisLength=e.len,e.setAxisSize(),s=e.len!==e.oldAxisLength,cn(e.series,function(e){if(e.isDirtyData||e.isDirty||e.xAxis.isDirty)i=!0});if(s||i||e.isLinked||e.forceRedraw||e.userMin!==e.oldUserMin||e.userMax!==e.oldUserMax)e.forceRedraw=!1,e.getSeriesExtremes(),e.setTickPositions(),e.oldUserMin=e.userMin,e.oldUserMax=e.userMax,e.isDirty||(e.isDirty=s||e.min!==e.oldMin||e.max!==e.oldMax);if(!e.isXAxis)for(n in t)for(r in t[n])t[n][r].cum=t[n][r].total;e.setMaxTicks()},setExtremes:function(e,t,n,r,i){var s=this,o=s.chart;n=jt(n,!0),i=xt(i,{min:e,max:t}),gn(s,"setExtremes",i,function(){s.userMin=e,s.userMax=t,s.isDirtyExtremes=!0,n&&o.redraw(r)})},zoom:function(t,n){return t<=this.dataMin&&(t=e),n>=this.dataMax&&(n=e),this.displayBtn=t!==e||n!==e,this.setExtremes(t,n,!1,e,{trigger:"zoom"}),!0},setAxisSize:function(){var e=this.chart,t=this.options,n=t.offsetLeft||0,r=t.offsetRight||0,i=this.horiz,s,o,a,f;this.left=f=jt(t.left,e.plotLeft+n),this.top=a=jt(t.top,e.plotTop),this.width=s=jt(t.width,e.plotWidth-n+r),this.height=o=jt(t.height,e.plotHeight),this.bottom=e.chartHeight-o-a,this.right=e.chartWidth-s-f,this.len=u(i?s:o,0),this.pos=i?f:a},getExtremes:function(){var e=this,t=e.isLog;return{min:t?rn(_t(e.min)):e.min,max:t?rn(_t(e.max)):e.max,dataMin:e.dataMin,dataMax:e.dataMax,userMin:e.userMin,userMax:e.userMax}},getThreshold:function(e){var t=this,n=t.isLog,r=n?_t(t.min):t.min,i=n?_t(t.max):t.max;return r>e||e===null?e=r:i<e&&(e=i),t.translate(e,0,1,0,1)},addPlotBand:function(e){this.addPlotBandOrLine(e,"plotBands")},addPlotLine:function(e){this.addPlotBandOrLine(e,"plotLines")},addPlotBandOrLine:function(e,t){var n=(new Bn(this,e)).render(),r=this.userOptions;return t&&(r[t]=r[t]||[],r[t].push(e)),this.plotLinesAndBands.push(n),n},getOffset:function(){var e=this,t=e.chart,n=t.renderer,r=e.options,i=e.tickPositions,s=e.ticks,o=e.horiz,a=e.side,f=t.inverted?[1,0,3,2][a]:a,l,c,h=0,p,d=0,v=r.title,m=r.labels,g=0,y=t.axisOffset,b=t.clipOffset,w=[-1,1,1,-1][a],E;e.hasData=l=e.hasVisibleSeries||Pt(e.min)&&Pt(e.max)&&!!i,e.showAxis=c=l||jt(r.showEmpty,!0),e.axisGroup||(e.gridGroup=n.g("grid").attr({zIndex:r.gridZIndex||1}).add(),e.axisGroup=n.g("axis").attr({zIndex:r.zIndex||2}).add(),e.labelGroup=n.g("axis-labels").attr({zIndex:m.zIndex||7}).add());if(l||e.isLinked)cn(i,function(t){s[t]?s[t].addLabel():s[t]=new Hn(e,t)}),cn(i,function(e){if(a===0||a===2||{1:"left",3:"right"}[a]===m.align)g=u(s[e].getLabelSize(),g)}),e.staggerLines&&(g+=(e.staggerLines-1)*16);else for(E in s)s[E].destroy(),delete s[E];v&&v.text&&v.enabled!==!1&&(e.axisTitle||(e.axisTitle=n.text(v.text,0,0,v.useHTML).attr({zIndex:7,rotation:v.rotation||0,align:v.textAlign||{low:"left",middle:"center",high:"right"}[v.align]}).css(v.style).add(e.axisGroup),e.axisTitle.isNew=!0),c&&(h=e.axisTitle.getBBox()[o?"height":"width"],d=jt(v.margin,o?5:10),p=v.offset),e.axisTitle[c?"show":"hide"]()),e.offset=w*jt(r.offset,y[a]),e.axisTitleMargin=jt(p,g+d+(a!==2&&g&&w*r.labels[o?"y":"x"])),y[a]=u(y[a],e.axisTitleMargin+h+w*e.offset),b[f]=u(b[f],r.lineWidth)},getLinePath:function(e){var t=this.chart,n=this.opposite,r=this.offset,i=this.horiz,s=this.left+(n?this.width:0)+r,o=t.chartHeight-this.bottom-(n?this.height:0)+r;return this.lineTop=o,n||(e*=-1),t.renderer.crispLine([$,i?this.left:s,i?o:this.top,J,i?t.chartWidth-this.right:s,i?o:t.chartHeight-this.bottom],e)},getTitlePosition:function(){var e=this.horiz,t=this.left,n=this.top,r=this.len,i=this.options.title,s=e?t:n,o=this.opposite,u=this.offset,a=Ct(i.style.fontSize||12),f={low:s+(e?0:r),middle:s+r/2,high:s+(e?r:0)}[i.align],l=(e?n+this.height:t)+(e?1:-1)*(o?-1:1)*this.axisTitleMargin+(this.side===2?a:0);return{x:e?f:l+(o?this.width:0)+u+(i.x||0),y:e?l-(o?this.height:0)+u:f+(i.y||0)}},render:function(){var t=this,n=t.chart,r=n.renderer,i=t.options,s=t.isLog,o=t.isLinked,u=t.tickPositions,a=t.axisTitle,f=t.stacks,l=t.ticks,c=t.minorTicks,h=t.alternateBands,p=i.stackLabels,d=i.alternateGridColor,v=t.tickmarkOffset,m=i.lineWidth,g,y=n.hasRendered,b=y&&Pt(t.oldMin)&&!isNaN(t.oldMin),w=t.hasData,E=t.showAxis,S,x;if(w||o)cn([l,c,h],function(e){var t;for(t in e)e[t].isActive=!1}),t.minorTickInterval&&!t.categories&&cn(t.getMinorTickPositions(),function(e){c[e]||(c[e]=new Hn(t,e,"minor")),b&&c[e].isNew&&c[e].render(null,!0),c[e].render(null,!1,1)}),u.length&&(cn(u.slice(1).concat([u[0]]),function(e,n){n=n===u.length-1?0:n+1;if(!o||e>=t.min&&e<=t.max)l[e]||(l[e]=new Hn(t,e)),b&&l[e].isNew&&l[e].render(n,!0),l[e].render(n,!1,1)}),v&&t.min===0&&(l[-1]||(l[-1]=new Hn(t,-1,null,!0)),l[-1].render(-1))),d&&cn(u,function(n,r){r%2===0&&n<t.max&&(h[n]||(h[n]=new Bn(t)),S=n+v,x=u[r+1]!==e?u[r+1]+v:t.max,h[n].options={from:s?_t(S):S,to:s?_t(x):x,color:d},h[n].render(),h[n].isActive=!0)}),t._addedPlotLB||(cn((i.plotLines||[]).concat(i.plotBands||[]),function(e){t.addPlotBandOrLine(e)}),t._addedPlotLB=!0);cn([l,c,h],function(e){var t,r,i=[],s=_?_.duration||500:0,o=function(){r=i.length;while(r--)e[i[r]]&&!e[i[r]].isActive&&(e[i[r]].destroy(),delete e[i[r]])};for(t in e)e[t].isActive||(e[t].render(t,!1,0),e[t].isActive=!1,i.push(t));e===h||!n.hasRendered||!s?o():s&&setTimeout(o,s)}),m&&(g=t.getLinePath(m),t.axisLine?t.axisLine.animate({d:g}):t.axisLine=r.path(g).attr({stroke:i.lineColor,"stroke-width":m,zIndex:7}).add(t.axisGroup),t.axisLine[E?"show":"hide"]()),a&&E&&(a[a.isNew?"attr":"animate"](t.getTitlePosition()),a.isNew=!1);if(p&&p.enabled){var T,N,C,k=t.stackTotalGroup;k||(t.stackTotalGroup=k=r.g("stack-labels").attr({visibility:W,zIndex:6}).add()),k.translate(n.plotLeft,n.plotTop);for(T in f){N=f[T];for(C in N)N[C].render(k)}}t.isDirty=!1},removePlotBandOrLine:function(e){var t=this.plotLinesAndBands,n=t.length;while(n--)t[n].id===e&&t[n].destroy()},setTitle:function(e,t){this.update({title:e},t)},redraw:function(){var e=this,t=e.chart,n=t.pointer;n.reset&&n.reset(!0),e.render(),cn(e.plotLinesAndBands,function(e){e.render()}),cn(e.series,function(e){e.isDirty=!0})},setCategories:function(e,t){this.update({categories:e},t)},destroy:function(){var e=this,t=e.stacks,n;mn(e);for(n in t)en(t[n]),t[n]=null;cn([e.ticks,e.minorTicks,e.alternateBands,e.plotLinesAndBands],function(e){en(e)}),cn(["stackTotalGroup","axisLine","axisGroup","gridGroup","labelGroup","axisTitle"],function(t){e[t]&&(e[t]=e[t].destroy())})}},In.prototype={init:function(e,t){var n=t.borderWidth,r=t.style,i=Ct(r.padding);this.chart=e,this.options=t,this.crosshairs=[],this.now={x:0,y:0},this.isHidden=!0,this.label=e.renderer.label("",0,0,t.shape,null,null,t.useHTML,null,"tooltip").attr({padding:i,fill:t.backgroundColor,"stroke-width":n,r:t.borderRadius,zIndex:8}).css(r).css({padding:0}).hide().add(),T||this.label.shadow(t.shadow),this.shared=t.shared},destroy:function(){cn(this.crosshairs,function(e){e&&e.destroy()}),this.label&&(this.label=this.label.destroy())},move:function(e,t,n,r){var i=this,s=i.now,o=i.options.animation!==!1&&!i.isHidden;xt(s,{x:o?(2*s.x+e)/3:e,y:o?(s.y+t)/2:t,anchorX:o?(2*s.anchorX+n)/3:n,anchorY:o?(s.anchorY+r)/2:r}),i.label.attr(s),o&&(f(e-s.x)>1||f(t-s.y)>1)&&(clearTimeout(this.tooltipTimeout),this.tooltipTimeout=setTimeout(function(){i&&i.move(e,t,n,r)},32))},hide:function(){var e=this,t;this.isHidden||(t=this.chart.hoverPoints,this.hideTimer=setTimeout(function(){e.label.fadeOut(),e.isHidden=!0},jt(this.options.hideDelay,500)),t&&cn(t,function(e){e.setState()}),this.chart.hoverPoints=null)},hideCrosshairs:function(){cn(this.crosshairs,function(e){e&&e.hide()})},getAnchor:function(t,n){var r,s=this.chart,o=s.inverted,u=s.plotTop,a=0,f=0,l;return t=Bt(t),r=t[0].tooltipPos,this.followPointer&&n&&(n.chartX===e&&(n=s.pointer.normalize(n)),r=[n.chartX-s.plotLeft,n.chartY-u]),r||(cn(t,function(e){l=e.series.yAxis,a+=e.plotX,f+=(e.plotLow?(e.plotLow+e.plotHigh)/2:e.plotY)+(!o&&l?l.top-u:0)}),a/=t.length,f/=t.length,r=[o?s.plotWidth-f:a,this.shared&&!o&&t.length>1&&n?n.chartY-u:o?s.plotHeight-a:f]),dn(r,i)},getPosition:function(e,t,n){var r=this.chart,i=r.plotLeft,s=r.plotTop,o=r.plotWidth,a=r.plotHeight,f=jt(this.options.distance,12),l=n.plotX,c=n.plotY,h=l+i+(r.inverted?f:-e-f),p=c-t+s+15,d;return h<7&&(h=i+u(l,0)+f),h+e>i+o&&(h-=h+e-(i+o),p=c-t+s-f,d=!0),p<s+5&&(p=s+5,d&&c>=p&&c<=p+t&&(p=c+s+f)),p+t>s+a&&(p=u(s,s+a-t-f)),{x:h,y:p}},defaultFormatter:function(e){var t=this.points||Bt(this),n=t[0].series,r;return r=[n.tooltipHeaderFormatter(t[0])],cn(t,function(e){n=e.series,r.push(n.tooltipFormatter&&n.tooltipFormatter(e)||e.point.tooltipFormatter(n.tooltipOptions.pointFormat))}),r.push(e.options.footerFormat||""),r.join("")},refresh:function(e,t){var n=this,r=n.chart,i=n.label,s=n.options,o,u,a,f,l={},c,h=[],p=s.formatter||n.defaultFormatter,d=r.hoverPoints,v,m=s.crosshairs,g=n.shared,y;clearTimeout(this.hideTimer),n.followPointer=Bt(e)[0].series.tooltipOptions.followPointer,f=n.getAnchor(e,t),o=f[0],u=f[1],g&&(!e.series||!e.series.noSharedTooltip)?(r.hoverPoints=e,d&&cn(d,function(e){e.setState()}),cn(e,function(e){e.setState(G),h.push(e.getLabelConfig())}),l={x:e[0].category,y:e[0].y},l.points=h,e=e[0]):l=e.getLabelConfig(),c=p.call(l,n),y=e.series,a=g||!y.isCartesian||y.tooltipOutsidePlot||r.isInsidePlot(o,u),c===!1||!a?this.hide():(n.isHidden&&(wn(i),i.attr("opacity",1).show()),i.attr({text:c}),v=s.borderColor||e.color||y.color||"#606060",i.attr({stroke:v}),n.updatePosition({plotX:o,plotY:u}),this.isHidden=!1);if(m){m=Bt(m);var b,w=m.length,E,S;while(w--)S=e.series[w?"yAxis":"xAxis"],m[w]&&S&&(b=S.getPlotLinePath(w?jt(e.stackY,e.y):e.x,1),n.crosshairs[w]?n.crosshairs[w].attr({d:b,visibility:W}):(E={"stroke-width":m[w].width||1,stroke:m[w].color||"#C0C0C0",zIndex:m[w].zIndex||2},m[w].dashStyle&&(E.dashstyle=m[w].dashStyle),n.crosshairs[w]=r.renderer.path(b).attr(E).add()))}gn(r,"tooltipRefresh",{text:c,x:o+r.plotLeft,y:u+r.plotTop,borderColor:v})},updatePosition:function(e){var t=this.chart,n=this.label,r=(this.options.positioner||this.getPosition).call(this,n.width,n.height,e);this.move(i(r.x),i(r.y),e.plotX+t.plotLeft,e.plotY+t.plotTop)}},qn.prototype={init:function(e,t){var n=T?"":t.chart.zoomType,r=e.inverted,i,s;this.options=t,this.chart=e,this.zoomX=i=/x/.test(n),this.zoomY=s=/y/.test(n),this.zoomHor=i&&!r||s&&r,this.zoomVert=s&&!r||i&&r,this.pinchDown=[],this.lastValidTouch={},t.tooltip.enabled&&(e.tooltip=new In(e,t.tooltip)),this.setDOMEvents()},normalize:function(t){var r,s,o,u;return t=t||n.event,t.target||(t.target=t.srcElement),t=yn(t),u=t.touches?t.touches.item(0):t,this.chartPosition=r=pn(this.chart.container),u.pageX===e?(s=t.x,o=t.y):(s=u.pageX-r.left,o=u.pageY-r.top),xt(t,{chartX:i(s),chartY:i(o)})},getCoordinates:function(e){var t={xAxis:[],yAxis:[]};return cn(this.chart.axes,function(n){t[n.isXAxis?"xAxis":"yAxis"].push({axis:n,value:n.toValue(e[n.horiz?"chartX":"chartY"])})}),t},getIndex:function(e){var t=this.chart;return t.inverted?t.plotHeight+t.plotTop-e.chartY:e.chartX-t.plotLeft},runPointActions:function(e){var t=this,n=t.chart,r=n.series,i=n.tooltip,s,o,u=n.hoverPoint,l=n.hoverSeries,c,h,p=n.chartWidth,d=t.getIndex(e),v;if(i&&t.options.tooltip.shared&&(!l||!l.noSharedTooltip)){o=[],c=r.length;for(h=0;h<c;h++)r[h].visible&&r[h].options.enableMouseTracking!==!1&&!r[h].noSharedTooltip&&r[h].tooltipPoints.length&&(s=r[h].tooltipPoints[d],s.series&&(s._dist=f(d-s.clientX),p=a(p,s._dist),o.push(s)));c=o.length;while(c--)o[c]._dist>p&&o.splice(c,1);o.length&&o[0].clientX!==t.hoverX&&(i.refresh(o,e),t.hoverX=o[0].clientX)}l&&l.tracker?(s=l.tooltipPoints[d],s&&s!==u&&s.onMouseOver(e)):i&&i.followPointer&&!i.isHidden&&(v=i.getAnchor([{}],e),i.updatePosition({plotX:v[0],plotY:v[1]}))},reset:function(t){var n=this,r=n.chart,i=r.hoverSeries,s=r.hoverPoint,o=r.tooltip,u=o&&o.shared?r.hoverPoints:s;t=t&&o&&u,t&&Bt(u)[0].plotX===e&&(t=!1),t?o.refresh(u):(s&&s.onMouseOut(),i&&i.onMouseOut(),o&&(o.hide(),o.hideCrosshairs()),n.hoverX=null)},scaleGroups:function(e,t){var n=this.chart;cn(n.series,function(r){r.xAxis.zoomEnabled&&(r.group.attr(e),r.markerGroup&&(r.markerGroup.attr(e),r.markerGroup.clip(t?n.clipRect:null)),r.dataLabelsGroup&&r.dataLabelsGroup.attr(e))}),n.clipRect.attr(t||n.clipBox)},pinchTranslateDirection:function(e,t,n,r,i,s,o){var u=this.chart,a=e?"x":"y",l=e?"X":"Y",c="chart"+l,h=e?"width":"height",p=u["plot"+(e?"Left":"Top")],d,v,m,g=1,y=u.inverted,b=u.bounds[e?"h":"v"],w=t.length===1,E=t[0][c],S=n[0][c],x=!w&&t[1][c],T=!w&&n[1][c],N,C,k,L=function(){!w&&f(E-x)>20&&(g=f(S-T)/f(E-x)),m=(p-S)/g+E,d=u["plot"+(e?"Width":"Height")]/g};L(),v=m,v<b.min?(v=b.min,N=!0):v+d>b.max&&(v=b.max-d,N=!0),N?(S-=.8*(S-o[a][0]),w||(T-=.8*(T-o[a][1])),L()):o[a]=[S,T],y||(s[a]=m-p,s[h]=d),k=y?e?"scaleY":"scaleX":"scale"+l,C=y?1/g:g,i[h]=d,i[a]=v,r[k]=g,r["translate"+l]=C*p+(S-C*E)},pinch:function(e){var t=this,n=t.chart,r=t.pinchDown,i=e.touches,s=t.lastValidTouch,o=t.zoomHor||t.pinchHor,f=t.zoomVert||t.pinchVert,l=t.selectionMarker,c={},h={};e.type==="touchstart"&&(t.inClass(e.target,z+"tracker")?n.runTrackerClick||e.preventDefault():n.runChartClick||e.preventDefault()),dn(i,function(e){return t.normalize(e)}),e.type==="touchstart"?(cn(i,function(e,t){r[t]={chartX:e.chartX,chartY:e.chartY}}),s.x=[r[0].chartX,r[1]&&r[1].chartX],s.y=[r[0].chartY,r[1]&&r[1].chartY],cn(n.axes,function(e){if(e.zoomEnabled){var t=n.bounds[e.horiz?"h":"v"],r=e.minPixelPadding,i=e.toPixels(e.dataMin),s=e.toPixels(e.dataMax),o=a(i,s),f=u(i,s);t.min=a(e.pos,o-r),t.max=u(e.pos+e.len,f+r)}})):r.length&&(l||(t.selectionMarker=l=xt({destroy:H},n.plotBox)),o&&t.pinchTranslateDirection(!0,r,i,c,l,h,s),f&&t.pinchTranslateDirection(!1,r,i,c,l,h,s),t.hasPinched=o||f,t.scaleGroups(c,h))},dragStart:function(e){var t=this.chart;t.mouseIsDown=e.type,t.cancelClick=!1,t.mouseDownX=this.mouseDownX=e.chartX,this.mouseDownY=e.chartY},drag:function(e){var t=this.chart,n=t.options.chart,r=e.chartX,i=e.chartY,s=this.zoomHor,o=this.zoomVert,u=t.plotLeft,a=t.plotTop,l=t.plotWidth,c=t.plotHeight,h,p,d=this.mouseDownX,v=this.mouseDownY;r<u?r=u:r>u+l&&(r=u+l),i<a?i=a:i>a+c&&(i=a+c),this.hasDragged=Math.sqrt(Math.pow(d-r,2)+Math.pow(v-i,2)),this.hasDragged>10&&(h=t.isInsidePlot(d-u,v-a),t.hasCartesianSeries&&(this.zoomX||this.zoomY)&&h&&(this.selectionMarker||(this.selectionMarker=t.renderer.rect(u,a,s?1:l,o?1:c,0).attr({fill:n.selectionMarkerFill||"rgba(69,114,167,0.25)",zIndex:7}).add())),this.selectionMarker&&s&&(p=r-d,this.selectionMarker.attr({width:f(p),x:(p>0?0:p)+d})),this.selectionMarker&&o&&(p=i-v,this.selectionMarker.attr({height:f(p),y:(p>0?0:p)+v})),h&&!this.selectionMarker&&n.panning&&t.pan(r))},drop:function(e){var t=this.chart,n=this.hasPinched;if(this.selectionMarker){var r={xAxis:[],yAxis:[],originalEvent:e.originalEvent||e},i=this.selectionMarker,s=i.x,o=i.y,f;if(this.hasDragged||n)cn(t.axes,function(e){if(e.zoomEnabled){var t=e.horiz,n=e.minPixelPadding,l=e.toValue((t?s:o)+n),c=e.toValue((t?s+i.width:o+i.height)-n);!isNaN(l)&&!isNaN(c)&&(r[e.xOrY+"Axis"].push({axis:e,min:a(l,c),max:u(l,c)}),f=!0)}}),f&&gn(t,"selection",r,function(e){t.zoom(xt(e,n?{animation:!1}:null))});this.selectionMarker=this.selectionMarker.destroy(),n&&this.scaleGroups({translateX:t.plotLeft,translateY:t.plotTop,scaleX:1,scaleY:1})}t&&(Ft(t.container,{cursor:"auto"}),t.cancelClick=this.hasDragged,t.mouseIsDown=this.hasDragged=this.hasPinched=!1,this.pinchDown=[])},onContainerMouseDown:function(e){e=this.normalize(e),e.preventDefault&&e.preventDefault(),this.dragStart(e)},onDocumentMouseUp:function(e){this.drop(e)},onDocumentMouseMove:function(e){var t=this.chart,n=this.chartPosition,r=t.hoverSeries;e=yn(e),n&&r&&r.isCartesian&&!t.isInsidePlot(e.pageX-n.left-t.plotLeft,e.pageY-n.top-t.plotTop)&&this.reset()},onContainerMouseLeave:function(){this.reset(),this.chartPosition=null},onContainerMouseMove:function(e){var t=this.chart;e=this.normalize(e),e.returnValue=!1,t.mouseIsDown==="mousedown"&&this.drag(e),t.isInsidePlot(e.chartX-t.plotLeft,e.chartY-t.plotTop)&&this.runPointActions(e)},inClass:function(e,t){var n;while(e){n=Ht(e,"class");if(n){if(n.indexOf(t)!==-1)return!0;if(n.indexOf(z+"container")!==-1)return!1}e=e.parentNode}},onTrackerMouseOut:function(e){var t=this.chart.hoverSeries;t&&!t.options.stickyTracking&&!this.inClass(e.toElement||e.relatedTarget,z+"tooltip")&&t.onMouseOut()},onContainerClick:function(e){var t=this.chart,n=t.hoverPoint,r=t.plotLeft,i=t.plotTop,s=t.inverted,o,u,a;e=this.normalize(e),e.cancelBubble=!0,t.cancelClick||(n&&this.inClass(e.target,z+"tracker")?(o=this.chartPosition,u=n.plotX,a=n.plotY,xt(n,{pageX:o.left+r+(s?t.plotWidth-a:u),pageY:o.top+i+(s?t.plotHeight-u:a)}),gn(n.series,"click",xt(e,{point:n})),n.firePointEvent("click",e)):(xt(e,this.getCoordinates(e)),t.isInsidePlot(e.chartX-r,e.chartY-i)&&gn(t,"click",e)))},onContainerTouchStart:function(e){var t=this.chart;e.touches.length===1?(e=this.normalize(e),t.isInsidePlot(e.chartX-t.plotLeft,e.chartY-t.plotTop)&&(this.runPointActions(e),this.pinch(e))):e.touches.length===2&&this.pinch(e)},onContainerTouchMove:function(e){(e.touches.length===1||e.touches.length===2)&&this.pinch(e)},onDocumentTouchEnd:function(e){this.drop(e)},setDOMEvents:function(){var e=this,n=e.chart.container,r;this._events=r=[[n,"onmousedown","onContainerMouseDown"],[n,"onmousemove","onContainerMouseMove"],[n,"onclick","onContainerClick"],[n,"mouseleave","onContainerMouseLeave"],[t,"mousemove","onDocumentMouseMove"],[t,"mouseup","onDocumentMouseUp"]],C&&r.push([n,"ontouchstart","onContainerTouchStart"],[n,"ontouchmove","onContainerTouchMove"],[t,"touchend","onDocumentTouchEnd"]),cn(r,function(t){e["_"+t[2]]=function(n){e[t[2]](n)},t[1].indexOf("on")===0?t[0][t[1]]=e["_"+t[2]]:vn(t[0],t[1],e["_"+t[2]])})},destroy:function(){var e=this;cn(e._events,function(t){t[1].indexOf("on")===0?t[0][t[1]]=null:mn(t[0],t[1],e["_"+t[2]])}),delete e._events,clearInterval(e.tooltipTimeout)}},Rn.prototype={init:function(e,t){var n=this,r=t.itemStyle,i=jt(t.padding,8),s=t.itemMarginTop||0;this.options=t;if(!t.enabled)return;n.baseline=Ct(r.fontSize)+3+s,n.itemStyle=r,n.itemHiddenStyle=Tt(r,t.itemHiddenStyle),n.itemMarginTop=s,n.padding=i,n.initialItemX=i,n.initialItemY=i-5,n.maxItemWidth=0,n.chart=e,n.itemHeight=0,n.lastLineHeight=0,n.render(),vn(n.chart,"endResize",function(){n.positionCheckboxes()})},colorizeItem:function(t,n){var r=this,i=r.options,s=t.legendItem,o=t.legendLine,u=t.legendSymbol,a=r.itemHiddenStyle.color,f=n?i.itemStyle.color:a,l=n?t.color:a,c=t.options&&t.options.marker,h={stroke:l,fill:l},p,d;s&&s.css({fill:f,color:f}),o&&o.attr({stroke:l});if(u){if(c){c=t.convertAttribs(c);for(p in c)d=c[p],d!==e&&(h[p]=d)}u.attr(h)}},positionItem:function(e){var t=this,n=t.options,r=n.symbolPadding,i=!n.rtl,s=e._legendItemPos,o=s[0],u=s[1],a=e.checkbox;e.legendGroup&&e.legendGroup.translate(i?o:t.legendWidth-o-2*r-4,u),a&&(a.x=o,a.y=u)},destroyItem:function(e){var t=e.checkbox;cn(["legendItem","legendLine","legendSymbol","legendGroup"],function(t){e[t]&&e[t].destroy()}),t&&tn(e.checkbox)},destroy:function(){var e=this,t=e.group,n=e.box;n&&(e.box=n.destroy()),t&&(e.group=t.destroy())},positionCheckboxes:function(e){var t=this.group.alignAttr,n,r=this.clipHeight||this.legendHeight;t&&(n=t.translateY,cn(this.allItems,function(i){var s=i.checkbox,o;s&&(o=n+s.y+(e||0)+3,Ft(s,{left:t.translateX+i.legendItemWidth+s.x-20+X,top:o+X,display:o>n-6&&o<n+r-6?"":V}))}))},renderTitle:function(){var e=this.options,t=this.padding,n=e.title,r=0;n.text&&(this.title||(this.title=this.chart.renderer.label(n.text,t-3,t-4,null,null,null,null,null,"legend-title").attr({zIndex:1}).css(n.style).add(this.group)),r=this.title.getBBox().height,this.contentGroup.attr({translateY:r})),this.titleHeight=r},renderItem:function(e){var t=this,n=t.chart,r=n.renderer,i=t.options,s=i.layout==="horizontal",o=i.symbolWidth,a=i.symbolPadding,f=t.itemStyle,l=t.itemHiddenStyle,c=t.padding,h=!i.rtl,p,d=i.width,v=i.itemMarginBottom||0,m=t.itemMarginTop,g=t.initialItemX,y,b,w=e.legendItem,E=e.series||e,S=E.options,x=S.showCheckbox,T=i.useHTML;w||(e.legendGroup=r.g("legend-item").attr({zIndex:1}).add(t.scrollGroup),E.drawLegendSymbol(t,e),e.legendItem=w=r.text(i.labelFormat?Vt(i.labelFormat,e):i.labelFormatter.call(e),h?o+a:-a,t.baseline,T).css(Tt(e.visible?f:l)).attr({align:h?"left":"right",zIndex:2}).add(e.legendGroup),(T?w:e.legendGroup).on("mouseover",function(){e.setState(G),w.css(t.options.itemHoverStyle)}).on("mouseout",function(){w.css(e.visible?f:l),e.setState()}).on("click",function(t){var n="legendItemClick",r=function(){e.setVisible()};t={browserEvent:t},e.firePointEvent?e.firePointEvent(n,t,r):gn(e,n,t,r)}),t.colorizeItem(e,e.visible),S&&x&&(e.checkbox=It("input",{type:"checkbox",checked:e.selected,defaultChecked:e.selected},i.itemCheckboxStyle,n.container),vn(e.checkbox,"click",function(t){var n=t.target;gn(e,"checkboxClick",{checked:n.checked},function(){e.select()})}))),y=w.getBBox(),b=e.legendItemWidth=i.itemWidth||o+a+y.width+c+(x?20:0),t.itemHeight=p=y.height,s&&t.itemX-g+b>(d||n.chartWidth-2*c-g)&&(t.itemX=g,t.itemY+=m+t.lastLineHeight+v,t.lastLineHeight=0),t.maxItemWidth=u(t.maxItemWidth,b),t.lastItemY=m+t.itemY+v,t.lastLineHeight=u(p,t.lastLineHeight),e._legendItemPos=[t.itemX,t.itemY],s?t.itemX+=b:(t.itemY+=m+p+v,t.lastLineHeight=p),t.offsetWidth=d||u(s?t.itemX-g:b,t.offsetWidth)},render:function(){var e=this,t=e.chart,n=t.renderer,r=e.group,i,s,o,u,a=e.box,f=e.options,l=e.padding,c=f.borderWidth,h=f.backgroundColor;e.itemX=e.initialItemX,e.itemY=e.initialItemY,e.offsetWidth=0,e.lastItemY=0,r||(e.group=r=n.g("legend").attr({zIndex:7}).add(),e.contentGroup=n.g().attr({zIndex:1}).add(r),e.scrollGroup=n.g().add(e.contentGroup),e.clipRect=n.clipRect(0,0,9999,t.chartHeight),e.contentGroup.clip(e.clipRect)),e.renderTitle(),i=[],cn(t.series,function(e){var t=e.options;if(!t.showInLegend||Pt(t.linkedTo))return;i=i.concat(e.legendItems||(t.legendType==="point"?e.data:e))}),Gt(i,function(e,t){return(e.options&&e.options.legendIndex||0)-(t.options&&t.options.legendIndex||0)}),f.reversed&&i.reverse(),e.allItems=i,e.display=s=!!i.length,cn(i,function(t){e.renderItem(t)}),o=f.width||e.offsetWidth,u=e.lastItemY+e.lastLineHeight+e.titleHeight,u=e.handleOverflow(u);if(c||h)o+=l,u+=l,a?o>0&&u>0&&(a[a.isNew?"attr":"animate"](a.crisp(null,null,null,o,u)),a.isNew=!1):(e.box=a=n.rect(0,0,o,u,f.borderRadius,c||0).attr({stroke:f.borderColor,"stroke-width":c||0,fill:h||V}).add(r).shadow(f.shadow),a.isNew=!0),a[s?"show":"hide"]();e.legendWidth=o,e.legendHeight=u,cn(i,function(t){e.positionItem(t)}),s&&r.align(xt({width:o,height:u},f),!0,"spacingBox"),t.isResizing||this.positionCheckboxes()},handleOverflow:function(e){var t=this,n=this.chart,r=n.renderer,i,s=this.options,u=s.y,f=s.verticalAlign==="top",l=n.spacingBox.height+(f?-u:u)-this.padding,c=s.maxHeight,h,p=this.clipRect,d=s.navigation,v=jt(d.animation,!0),m=d.arrowSize||12,g=this.nav;return s.layout==="horizontal"&&(l/=2),c&&(l=a(l,c)),e>l&&!s.useHTML?(this.clipHeight=h=l-20-this.titleHeight,this.pageCount=i=o(e/h),this.currentPage=jt(this.currentPage,1),this.fullHeight=e,p.attr({height:h}),g||(this.nav=g=r.g().attr({zIndex:1}).add(this.group),this.up=r.symbol("triangle",0,0,m,m).on("click",function(){t.scroll(-1,v)}).add(g),this.pager=r.text("",15,10).css(d.style).add(g),this.down=r.symbol("triangle-down",0,0,m,m).on("click",function(){t.scroll(1,v)}).add(g)),t.scroll(0),e=l):g&&(p.attr({height:n.chartHeight}),g.hide(),this.scrollGroup.attr({translateY:1}),this.clipHeight=0),e},scroll:function(t,n){var r=this.pageCount,i=this.currentPage+t,s=this.clipHeight,o=this.options.navigation,u=o.activeColor,f=o.inactiveColor,l=this.pager,c=this.padding,h;i>r&&(i=r),i>0&&(n!==e&&sn(n,this.chart),this.nav.attr({translateX:c,translateY:s+7+this.titleHeight,visibility:W}),this.up.attr({fill:i===1?f:u}).css({cursor:i===1?"default":"pointer"}),l.attr({text:i+"/"+this.pageCount}),this.down.attr({x:18+this.pager.getBBox().width,fill:i===r?f:u}).css({cursor:i===r?"default":"pointer"}),h=-a(s*(i-1),this.fullHeight-s+c)+1,this.scrollGroup.animate({translateY:h}),l.attr({text:i+"/"+r}),this.currentPage=i,this.positionCheckboxes(h))}},Un.prototype={init:function(e,t){var n,r=e.series;e.series=null,n=Tt(O,e),n.series=e.series=r;var i=n.chart,s=i.margin,o=Lt(s)?s:[s,s,s,s];this.optionsMarginTop=jt(i.marginTop,o[0]),this.optionsMarginRight=jt(i.marginRight,o[1]),this.optionsMarginBottom=jt(i.marginBottom,o[2]),this.optionsMarginLeft=jt(i.marginLeft,o[3]);var u=i.events;this.runChartClick=u&&!!u.click,this.bounds={h:{},v:{}},this.callback=t,this.isResizing=0,this.options=n,this.axes=[],this.series=[],this.hasCartesianSeries=i.showAxes;var a=this,f;a.index=B.length,B.push(a),i.reflow!==!1&&vn(a,"load",function(){a.initReflow()});if(u)for(f in u)vn(a,f,u[f]);a.xAxis=[],a.yAxis=[],a.animation=T?!1:jt(i.animation,!0),a.pointCount=0,a.counters=new Qt,a.firstRender()},initSeries:function(e){var t=this,n=t.options.chart,r=e.type||n.type||n.defaultSeriesType,i,s=St[r];return s||nn(17,!0),i=new s,i.init(this,e),i},addSeries:function(e,t,n){var r,i=this;return e&&(t=jt(t,!0),gn(i,"addSeries",{options:e},function(){r=i.initSeries(e),i.isDirtyLegend=!0,t&&i.redraw(n)})),r},addAxis:function(e,t,n,r){var i=t?"xAxis":"yAxis",s=this.options,o;o=new Fn(this,Tt(e,{index:this[i].length})),s[i]=Bt(s[i]||{}),s[i].push(e),jt(n,!0)&&this.redraw(r)},isInsidePlot:function(e,t,n){var r=n?t:e,i=n?e:t;return r>=0&&r<=this.plotWidth&&i>=0&&i<=this.plotHeight},adjustTickAmounts:function(){this.options.chart.alignTicks!==!1&&cn(this.axes,function(e){e.adjustTickAmount()}),this.maxTicks=null},redraw:function(e){var t=this,n=t.axes,r=t.series,i=t.pointer,s=t.legend,o=t.isDirtyLegend,u,a=t.isDirtyBox,f=r.length,l=f,c,h=t.renderer,p=h.isHidden(),d=[];sn(e,t),p&&t.cloneRenderTo();while(l--){c=r[l];if(c.isDirty&&c.options.stacking){u=!0;break}}if(u){l=f;while(l--)c=r[l],c.options.stacking&&(c.isDirty=!0)}cn(r,function(e){e.isDirty&&e.options.legendType==="point"&&(o=!0)}),o&&s.options.enabled&&(s.render(),t.isDirtyLegend=!1),t.hasCartesianSeries&&(t.isResizing||(t.maxTicks=null,cn(n,function(e){e.setScale()})),t.adjustTickAmounts(),t.getMargins(),cn(n,function(e){e.isDirtyExtremes&&(e.isDirtyExtremes=!1,d.push(function(){gn(e,"afterSetExtremes",e.getExtremes())}));if(e.isDirty||a||u)e.redraw(),a=!0})),a&&t.drawChartBox(),cn(r,function(e){e.isDirty&&e.visible&&(!e.isCartesian||e.xAxis)&&e.redraw()}),i&&i.reset&&i.reset(!0),h.draw(),gn(t,"redraw"),p&&t.cloneRenderTo(!0),cn(d,function(e){e.call()})},showLoading:function(e){var t=this,n=t.options,r=t.loadingDiv,i=n.loading;r||(t.loadingDiv=r=It(I,{className:z+"loading"},xt(i.style,{left:t.plotLeft+X,top:t.plotTop+X,width:t.plotWidth+X,height:t.plotHeight+X,zIndex:10,display:V}),t.container),t.loadingSpan=It("span",null,i.labelStyle,r)),t.loadingSpan.innerHTML=e||n.lang.loading,t.loadingShown||(Ft(r,{opacity:0,display:""}),bn(r,{opacity:i.style.opacity},{duration:i.showDuration||0}),t.loadingShown=!0)},hideLoading:function(){var e=this.options,t=this.loadingDiv;t&&bn(t,{opacity:0},{duration:e.loading.hideDuration||100,complete:function(){Ft(t,{display:V})}}),this.loadingShown=!1},get:function(e){var t=this,n=t.axes,r=t.series,i,s,o;for(i=0;i<n.length;i++)if(n[i].options.id===e)return n[i];for(i=0;i<r.length;i++)if(r[i].options.id===e)return r[i];for(i=0;i<r.length;i++){o=r[i].points||[];for(s=0;s<o.length;s++)if(o[s].id===e)return o[s]}return null},getAxes:function(){var e=this,t=this.options,n=t.xAxis=Bt(t.xAxis||{}),r=t.yAxis=Bt(t.yAxis||{}),i,s;cn(n,function(e,t){e.index=t,e.isX=!0}),cn(r,function(e,t){e.index=t}),i=n.concat(r),cn(i,function(t){s=new Fn(e,t)}),e.adjustTickAmounts()},getSelectedPoints:function(){var e=[];return cn(this.series,function(t){e=e.concat(hn(t.points,function(e){return e.selected}))}),e},getSelectedSeries:function(){return hn(this.series,function(e){return e.selected})},showResetZoom:function(){var e=this,t=O.lang,n=e.options.chart.resetZoomButton,r=n.theme,i=r.states,s=n.relativeTo==="chart"?null:"plotBox";this.resetZoomButton=e.renderer.button(t.resetZoom,null,null,function(){e.zoomOut()},r,i&&i.hover).attr({align:n.position.align,title:t.resetZoomTitle}).add().align(n.position,!1,s)},zoomOut:function(){var e=this;gn(e,"selection",{resetSelection:!0},function(){e.zoom()})},zoom:function(e){var t=this,n,r=t.pointer,i=!1,s;!e||e.resetSelection?cn(t.axes,function(e){n=e.zoom()}):cn(e.xAxis.concat(e.yAxis),function(e){var t=e.axis,s=t.isXAxis;if(r[s?"zoomX":"zoomY"]||r[s?"pinchX":"pinchY"])n=t.zoom(e.min,e.max),t.displayBtn&&(i=!0)}),s=t.resetZoomButton,i&&!s?t.showResetZoom():!i&&Lt(s)&&(t.resetZoomButton=s.destroy()),n&&t.redraw(jt(t.options.chart.animation,e&&e.animation,t.pointCount<100))},pan:function(e){var t=this,n=t.xAxis[0],r=t.mouseDownX,i=n.pointRange/2,s=n.getExtremes(),o=n.translate(r-e,!0)+i,f=n.translate(r+t.plotWidth-e,!0)-i,l=t.hoverPoints;l&&cn(l,function(e){e.setState()}),n.series.length&&o>a(s.dataMin,s.min)&&f<u(s.dataMax,s.max)&&n.setExtremes(o,f,!0,!1,{trigger:"pan"}),t.mouseDownX=e,Ft(t.container,{cursor:"move"})},setTitle:function(e,t){var n=this,r=n.options,i,s;i=r.title=Tt(r.title,e),s=r.subtitle=Tt(r.subtitle,t),cn([["title",e,i],["subtitle",t,s]],function(e){var t=e[0],r=n[t],i=e
[1],s=e[2];r&&i&&(n[t]=r=r.destroy()),s&&s.text&&!r&&(n[t]=n.renderer.text(s.text,0,0,s.useHTML).attr({align:s.align,"class":z+t,zIndex:s.zIndex||4}).css(s.style).add().align(s,!1,"spacingBox"))})},getChartSize:function(){var e=this,t=e.options.chart,n=e.renderToClone||e.renderTo;e.containerWidth=an(n,"width"),e.containerHeight=an(n,"height"),e.chartWidth=u(0,t.width||e.containerWidth||600),e.chartHeight=u(0,jt(t.height,e.containerHeight>19?e.containerHeight:400))},cloneRenderTo:function(e){var n=this.renderToClone,r=this.container;e?n&&(this.renderTo.appendChild(r),tn(n),delete this.renderToClone):(r&&this.renderTo.removeChild(r),this.renderToClone=n=this.renderTo.cloneNode(0),Ft(n,{position:q,top:"-9999px",display:"block"}),t.body.appendChild(n),r&&n.appendChild(r))},getContainer:function(){var e=this,n,r=e.options.chart,i,s,o,u="data-highcharts-chart",a,f;e.renderTo=o=r.renderTo,f=z+L++,kt(o)&&(e.renderTo=o=t.getElementById(o)),o||nn(13,!0),a=Ct(Ht(o,u)),!isNaN(a)&&B[a]&&B[a].destroy(),Ht(o,u,e.index),o.innerHTML="",o.offsetWidth||e.cloneRenderTo(),e.getChartSize(),i=e.chartWidth,s=e.chartHeight,e.container=n=It(I,{className:z+"container"+(r.className?" "+r.className:""),id:f},xt({position:R,overflow:U,width:i+X,height:s+X,textAlign:"left",lineHeight:"normal",zIndex:0},r.style),e.renderToClone||o),e.renderer=r.forExport?new An(n,i,s,!0):new N(n,i,s),T&&e.renderer.create(e,n,i,s)},getMargins:function(){var e=this,t=e.options.chart,n=t.spacingTop,r=t.spacingRight,i=t.spacingBottom,s=t.spacingLeft,o,a=e.legend,f=e.optionsMarginTop,l=e.optionsMarginLeft,c=e.optionsMarginRight,h=e.optionsMarginBottom,p=e.options.title,d=e.options.subtitle,v=e.options.legend,m=jt(v.margin,10),g=v.x,y=v.y,b=v.align,w=v.verticalAlign,E;e.resetMargins(),o=e.axisOffset,(e.title||e.subtitle)&&!Pt(e.optionsMarginTop)&&(E=u(e.title&&!p.floating&&!p.verticalAlign&&p.y||0,e.subtitle&&!d.floating&&!d.verticalAlign&&d.y||0),E&&(e.plotTop=u(e.plotTop,E+jt(p.margin,15)+n))),a.display&&!v.floating&&(b==="right"?Pt(c)||(e.marginRight=u(e.marginRight,a.legendWidth-g+m+r)):b==="left"?Pt(l)||(e.plotLeft=u(e.plotLeft,a.legendWidth+g+m+s)):w==="top"?Pt(f)||(e.plotTop=u(e.plotTop,a.legendHeight+y+m+n)):w==="bottom"&&(Pt(h)||(e.marginBottom=u(e.marginBottom,a.legendHeight-y+m+i)))),e.extraBottomMargin&&(e.marginBottom+=e.extraBottomMargin),e.extraTopMargin&&(e.plotTop+=e.extraTopMargin),e.hasCartesianSeries&&cn(e.axes,function(e){e.getOffset()}),Pt(l)||(e.plotLeft+=o[3]),Pt(f)||(e.plotTop+=o[0]),Pt(h)||(e.marginBottom+=o[2]),Pt(c)||(e.marginRight+=o[1]),e.setChartSize()},initReflow:function(){function o(o){var u=r.width||an(i,"width"),a=r.height||an(i,"height"),f=o?o.target:n;if(!e.hasUserSize&&u&&a&&(f===n||f===t)){if(u!==e.containerWidth||a!==e.containerHeight)clearTimeout(s),e.reflowTimeout=s=setTimeout(function(){e.container&&(e.setSize(u,a,!1),e.hasUserSize=null)},100);e.containerWidth=u,e.containerHeight=a}}var e=this,r=e.options.chart,i=e.renderTo,s;vn(n,"resize",o),vn(e,"destroy",function(){mn(n,"resize",o)})},setSize:function(e,t,n){var r=this,s,o,a;r.isResizing+=1,a=function(){r&&gn(r,"endResize",null,function(){r.isResizing-=1})},sn(n,r),r.oldChartHeight=r.chartHeight,r.oldChartWidth=r.chartWidth,Pt(e)&&(r.chartWidth=s=u(0,i(e)),r.hasUserSize=!!s),Pt(t)&&(r.chartHeight=o=u(0,i(t))),Ft(r.container,{width:s+X,height:o+X}),r.setChartSize(!0),r.renderer.setSize(s,o,n),r.maxTicks=null,cn(r.axes,function(e){e.isDirty=!0,e.setScale()}),cn(r.series,function(e){e.isDirty=!0}),r.isDirtyLegend=!0,r.isDirtyBox=!0,r.getMargins(),r.redraw(n),r.oldChartHeight=null,gn(r,"resize"),_===!1?a():setTimeout(a,_&&_.duration||500)},setChartSize:function(e){var t=this,n=t.inverted,r=t.renderer,a=t.chartWidth,f=t.chartHeight,l=t.options.chart,c=l.spacingTop,h=l.spacingRight,p=l.spacingBottom,d=l.spacingLeft,v=t.clipOffset,m,g,y,b,w,E,S;t.plotLeft=y=i(t.plotLeft),t.plotTop=b=i(t.plotTop),t.plotWidth=w=u(0,i(a-y-t.marginRight)),t.plotHeight=E=u(0,i(f-b-t.marginBottom)),t.plotSizeX=n?E:w,t.plotSizeY=n?w:E,t.plotBorderWidth=S=l.plotBorderWidth||0,t.spacingBox=r.spacingBox={x:d,y:c,width:a-d-h,height:f-c-p},t.plotBox=r.plotBox={x:y,y:b,width:w,height:E},m=o(u(S,v[3])/2),g=o(u(S,v[0])/2),t.clipBox={x:m,y:g,width:s(t.plotSizeX-u(S,v[1])/2-m),height:s(t.plotSizeY-u(S,v[2])/2-g)},e||cn(t.axes,function(e){e.setAxisSize(),e.setAxisTranslation()})},resetMargins:function(){var e=this,t=e.options.chart,n=t.spacingTop,r=t.spacingRight,i=t.spacingBottom,s=t.spacingLeft;e.plotTop=jt(e.optionsMarginTop,n),e.marginRight=jt(e.optionsMarginRight,r),e.marginBottom=jt(e.optionsMarginBottom,i),e.plotLeft=jt(e.optionsMarginLeft,s),e.axisOffset=[0,0,0,0],e.clipOffset=[0,0,0,0]},drawChartBox:function(){var e=this,t=e.options.chart,n=e.renderer,r=e.chartWidth,i=e.chartHeight,s=e.chartBackground,o=e.plotBackground,u=e.plotBorder,a=e.plotBGImage,f=t.borderWidth||0,l=t.backgroundColor,c=t.plotBackgroundColor,h=t.plotBackgroundImage,p=t.plotBorderWidth||0,d,v,m=e.plotLeft,g=e.plotTop,y=e.plotWidth,b=e.plotHeight,w=e.plotBox,E=e.clipRect,S=e.clipBox;d=f+(t.shadow?8:0);if(f||l)s?s.animate(s.crisp(null,null,null,r-d,i-d)):(v={fill:l||V},f&&(v.stroke=t.borderColor,v["stroke-width"]=f),e.chartBackground=n.rect(d/2,d/2,r-d,i-d,t.borderRadius,f).attr(v).add().shadow(t.shadow));c&&(o?o.animate(w):e.plotBackground=n.rect(m,g,y,b,0).attr({fill:c}).add().shadow(t.plotShadow)),h&&(a?a.animate(w):e.plotBGImage=n.image(h,m,g,y,b).add()),E?E.animate({width:S.width,height:S.height}):e.clipRect=n.clipRect(S),p&&(u?u.animate(u.crisp(null,m,g,y,b)):e.plotBorder=n.rect(m,g,y,b,0,p).attr({stroke:t.plotBorderColor,"stroke-width":p,zIndex:1}).add()),e.isDirtyBox=!1},propFromSeries:function(){var e=this,t=e.options.chart,n,r=e.options.series,i,s;cn(["inverted","angular","polar"],function(o){n=St[t.type||t.defaultSeriesType],s=e[o]||t[o]||n&&n.prototype[o],i=r&&r.length;while(!s&&i--)n=St[r[i].type],n&&n.prototype[o]&&(s=!0);e[o]=s})},render:function(){var e=this,t=e.axes,n=e.renderer,r=e.options,i=r.labels,s=r.credits,o;e.setTitle(),e.legend=new Rn(e,r.legend),cn(t,function(e){e.setScale()}),e.getMargins(),e.maxTicks=null,cn(t,function(e){e.setTickPositions(!0),e.setMaxTicks()}),e.adjustTickAmounts(),e.getMargins(),e.drawChartBox(),e.hasCartesianSeries&&cn(t,function(e){e.render()}),e.seriesGroup||(e.seriesGroup=n.g("series-group").attr({zIndex:3}).add()),cn(e.series,function(e){e.translate(),e.setTooltipPoints(),e.render()}),i.items&&cn(i.items,function(t){var r=xt(i.style,t.style),s=Ct(r.left)+e.plotLeft,o=Ct(r.top)+e.plotTop+12;delete r.left,delete r.top,n.text(t.html,s,o).attr({zIndex:2}).css(r).add()}),s.enabled&&!e.credits&&(o=s.href,e.credits=n.text(s.text,0,0).on("click",function(){o&&(location.href=o)}).attr({align:s.position.align,zIndex:8}).css(s.style).add().align(s.position)),e.hasRendered=!0},destroy:function(){var t=this,n=t.axes,r=t.series,i=t.container,s,o=i&&i.parentNode;gn(t,"destroy"),B[t.index]=e,t.renderTo.removeAttribute("data-highcharts-chart"),mn(t),s=n.length;while(s--)n[s]=n[s].destroy();s=r.length;while(s--)r[s]=r[s].destroy();cn(["title","subtitle","chartBackground","plotBackground","plotBGImage","plotBorder","seriesGroup","clipRect","credits","pointer","scroller","rangeSelector","legend","resetZoomButton","tooltip","renderer"],function(e){var n=t[e];n&&n.destroy&&(t[e]=n.destroy())}),i&&(i.innerHTML="",mn(i),o&&tn(i));for(s in t)delete t[s]},isReadyToRender:function(){var e=this;return!S&&n==n.top&&t.readyState!=="complete"||T&&!n.canvg?(T?Pn.push(function(){e.firstRender()},e.options.global.canvasToolsURL):t.attachEvent("onreadystatechange",function(){t.detachEvent("onreadystatechange",e.firstRender),t.readyState==="complete"&&e.firstRender()}),!1):!0},firstRender:function(){var e=this,t=e.options,n=e.callback;if(!e.isReadyToRender())return;e.getContainer(),gn(e,"init"),e.resetMargins(),e.setChartSize(),e.propFromSeries(),e.getAxes(),cn(t.series||[],function(t){e.initSeries(t)}),gn(e,"beforeRender"),e.pointer=new qn(e,t),e.render(),e.renderer.draw(),n&&n.apply(e,[e]),cn(e.callbacks,function(t){t.apply(e,[e])}),e.cloneRenderTo(!0),gn(e,"load")}},Un.prototype.callbacks=[];var zn=function(){};zn.prototype={init:function(e,t,n){var r=this,i;return r.series=e,r.applyOptions(t,n),r.pointAttr={},e.options.colorByPoint&&(i=e.options.colors||e.chart.options.colors,r.color=r.color||i[e.colorCounter++],e.colorCounter===i.length&&(e.colorCounter=0)),e.chart.pointCount++,r},applyOptions:function(t,n){var r=this,i=r.series,s=i.pointValKey;return t=zn.prototype.optionsToObject.call(this,t),xt(r,t),r.options=r.options?xt(r.options,t):t,s&&(r.y=r[s]),r.x===e&&i&&(r.x=n===e?i.autoIncrement():n),r},optionsToObject:function(e){var t,n=this.series,r=n.pointArrayMap||["y"],i=r.length,s,o=0,u=0;if(typeof e=="number"||e===null)t={y:e};else if(At(e)){t={},e.length>i&&(s=typeof e[0],s==="string"?t.name=e[0]:s==="number"&&(t.x=e[0]),o++);while(u<i)t[r[u++]]=e[o++]}else typeof e=="object"&&(t=e,e.dataLabels&&(n._hasPointLabels=!0),e.marker&&(n._hasPointMarkers=!0));return t},destroy:function(){var e=this,t=e.series,n=t.chart,r=n.hoverPoints,i;n.pointCount--,r&&(e.setState(),Dt(r,e),r.length||(n.hoverPoints=null)),e===n.hoverPoint&&e.onMouseOut();if(e.graphic||e.dataLabel)mn(e),e.destroyElements();e.legendItem&&n.legend.destroyItem(e);for(i in e)e[i]=null},destroyElements:function(){var e=this,t=["graphic","dataLabel","dataLabelUpper","group","connector","shadowGroup"],n,r=6;while(r--)n=t[r],e[n]&&(e[n]=e[n].destroy())},getLabelConfig:function(){var e=this;return{x:e.category,y:e.y,key:e.name||e.category,series:e.series,point:e,percentage:e.percentage,total:e.total||e.stackTotal}},select:function(e,t){var n=this,r=n.series,i=r.chart;e=jt(e,!n.selected),n.firePointEvent(e?"select":"unselect",{accumulate:t},function(){n.selected=n.options.selected=e,r.options.data[ln(n,r.data)]=n.options,n.setState(e&&Y),t||cn(i.getSelectedPoints(),function(e){e.selected&&e!==n&&(e.selected=e.options.selected=!1,r.options.data[ln(e,r.data)]=e.options,e.setState(Q),e.firePointEvent("unselect"))})})},onMouseOver:function(e){var t=this,n=t.series,r=n.chart,i=r.tooltip,s=r.hoverPoint;s&&s!==t&&s.onMouseOut(),t.firePointEvent("mouseOver"),i&&(!i.shared||n.noSharedTooltip)&&i.refresh(t,e),t.setState(G),r.hoverPoint=t},onMouseOut:function(){var e=this.series.chart,t=e.hoverPoints;if(!t||ln(this,t)===-1)this.firePointEvent("mouseOut"),this.setState(),e.hoverPoint=null},tooltipFormatter:function(e){var t=this.series,n=t.tooltipOptions,r=n.valueDecimals,i=n.valuePrefix||"",s=n.valueSuffix||"";return cn(t.pointArrayMap||["y"],function(t){t="{point."+t;if(i||s)e=e.replace(t+"}",i+t+"}"+s);Ot(r)&&(e=e.replace(t+"}",t+":,."+r+"f}"))}),Vt(e,{point:this,series:this.series})},update:function(e,t,n){var r=this,i=r.series,s=r.graphic,o,u=i.data,a=i.chart;t=jt(t,!0),r.firePointEvent("update",{options:e},function(){r.applyOptions(e),Lt(e)&&(i.getAttribs(),s&&s.attr(r.pointAttr[i.state])),o=ln(r,u),i.xData[o]=r.x,i.yData[o]=i.toYData?i.toYData(r):r.y,i.zData[o]=r.z,i.options.data[o]=r.options,i.isDirty=!0,i.isDirtyData=!0,t&&a.redraw(n)})},remove:function(e,t){var n=this,r=n.series,i=r.chart,s,o=r.data;sn(t,i),e=jt(e,!0),n.firePointEvent("remove",null,function(){s=ln(n,o),o.splice(s,1),r.options.data.splice(s,1),r.xData.splice(s,1),r.yData.splice(s,1),r.zData.splice(s,1),n.destroy(),r.isDirty=!0,r.isDirtyData=!0,e&&i.redraw()})},firePointEvent:function(e,t,n){var r=this,i=this.series,s=i.options;(s.point.events[e]||r.options&&r.options.events&&r.options.events[e])&&this.importEvents(),e==="click"&&s.allowPointSelect&&(n=function(e){r.select(null,e.ctrlKey||e.metaKey||e.shiftKey)}),gn(this,e,t,n)},importEvents:function(){if(!this.hasImportedEvents){var e=this,t=Tt(e.series.options.point,e.options),n=t.events,r;e.events=n;for(r in n)vn(e,r,n[r]);this.hasImportedEvents=!0}},setState:function(e){var t=this,n=t.plotX,r=t.plotY,i=t.series,s=i.options.states,o=Sn[i.type].marker&&i.options.marker,u=o&&!o.enabled,a=o&&o.states[e],f=a&&a.enabled===!1,l=i.stateMarkerGraphic,c=t.marker||{},h=i.chart,p,d,v=t.pointAttr;e=e||Q;if(e===t.state||t.selected&&e!==Y||s[e]&&s[e].enabled===!1||e&&(f||u&&!a.enabled))return;t.graphic?(p=o&&t.graphic.symbolName&&v[e].r,t.graphic.attr(Tt(v[e],p?{x:n-p,y:r-p,width:2*p,height:2*p}:{}))):(e&&a&&(p=a.radius,d=c.symbol||i.symbol,l&&l.currentSymbol!==d&&(l=l.destroy()),l?l.attr({x:n-p,y:r-p}):(i.stateMarkerGraphic=l=h.renderer.symbol(d,n-p,r-p,2*p,2*p).attr(v[e]).add(i.markerGroup),l.currentSymbol=d)),l&&l[e&&h.isInsidePlot(n,r)?"show":"hide"]()),t.state=e}};var Wn=function(){};Wn.prototype={isCartesian:!0,type:"line",pointClass:zn,sorted:!0,requireSorting:!0,pointAttrToOptions:{stroke:"lineColor","stroke-width":"lineWidth",fill:"fillColor",r:"radius"},colorCounter:0,init:function(e,t){var n=this,r,i,s,o=e.series;n.chart=e,n.options=t=n.setOptions(t),n.bindAxes(),xt(n,{name:t.name,state:Q,pointAttr:{},visible:t.visible!==!1,selected:t.selected===!0}),T&&(t.animation=!1),i=t.events;for(r in i)vn(n,r,i[r]);if(i&&i.click||t.point&&t.point.events&&t.point.events.click||t.allowPointSelect)e.runTrackerClick=!0;n.getColor(),n.getSymbol(),n.setData(t.data,!1),n.isCartesian&&(e.hasCartesianSeries=!0),o.push(n),n._i=o.length-1,Gt(o,function(e,t){return jt(e.options.index,e._i)-jt(t.options.index,e._i)}),cn(o,function(e,t){e.index=t,e.name=e.name||"Series "+(t+1)}),s=t.linkedTo,n.linkedSeries=[],kt(s)&&(s===":previous"?s=o[n.index-1]:s=e.get(s),s&&(s.linkedSeries.push(n),n.linkedParent=s))},bindAxes:function(){var t=this,n=t.options,r=t.chart,i;t.isCartesian&&cn(["xAxis","yAxis"],function(s){cn(r[s],function(r){i=r.options;if(n[s]===i.index||n[s]!==e&&n[s]===i.id||n[s]===e&&i.index===0)r.series.push(t),t[s]=r,r.isDirty=!0}),t[s]||nn(17,!0)})},autoIncrement:function(){var e=this,t=e.options,n=e.xIncrement;return n=jt(n,t.pointStart,0),e.pointInterval=jt(e.pointInterval,t.pointInterval,1),e.xIncrement=n+e.pointInterval,n},getSegments:function(){var e=this,t=-1,n=[],r,i=e.points,s=i.length;if(s)if(e.options.connectNulls){r=s;while(r--)i[r].y===null&&i.splice(r,1);i.length&&(n=[i])}else cn(i,function(e,r){e.y===null?(r>t+1&&n.push(i.slice(t+1,r)),t=r):r===s-1&&n.push(i.slice(t+1,r+1))});e.segments=n},setOptions:function(e){var t=this.chart,n=t.options,r=n.plotOptions,i=r[this.type],s;return this.userOptions=e,s=Tt(i,r.series,e),this.tooltipOptions=Tt(n.tooltip,s.tooltip),i.marker===null&&delete s.marker,s},getColor:function(){var e=this.options,t=this.userOptions,n=this.chart.options.colors,r=this.chart.counters,i,s;i=e.color||Sn[this.type].color,!i&&!e.colorByPoint&&(Pt(t._colorIndex)?s=t._colorIndex:(t._colorIndex=r.color,s=r.color++),i=n[s]),this.color=i,r.wrapColor(n.length)},getSymbol:function(){var e=this,t=e.userOptions,n=e.options.marker,r=e.chart,i=r.options.symbols,s=r.counters,o;e.symbol=n.symbol,e.symbol||(Pt(t._symbolIndex)?o=t._symbolIndex:(t._symbolIndex=s.symbol,o=s.symbol++),e.symbol=i[o]),/^url/.test(e.symbol)&&(n.radius=0),s.wrapSymbol(i.length)},drawLegendSymbol:function(e){var t=this.options,n=t.marker,r,i=e.options,s,o=i.symbolWidth,u=this.chart.renderer,a=this.legendGroup,f=e.baseline,l;t.lineWidth&&(l={"stroke-width":t.lineWidth},t.dashStyle&&(l.dashstyle=t.dashStyle),this.legendLine=u.path([$,0,f-4,J,o,f-4]).attr(l).add(a)),n&&n.enabled&&(r=n.radius,this.legendSymbol=s=u.symbol(this.symbol,o/2-r,f-4-r,2*r,2*r).add(a))},addPoint:function(e,t,n,r){var i=this,s=i.options,o=i.data,u=i.graph,a=i.area,f=i.chart,l=i.xData,c=i.yData,h=i.zData,p=i.names,d=u&&u.shift||0,v=s.data,m;sn(r,f),u&&n&&(u.shift=d+1),a&&(n&&(a.shift=d+1),a.isArea=!0),t=jt(t,!0),m={series:i},i.pointClass.prototype.applyOptions.apply(m,[e]),l.push(m.x),c.push(i.toYData?i.toYData(m):m.y),h.push(m.z),p&&(p[m.x]=m.name),v.push(e),s.legendType==="point"&&i.generatePoints(),n&&(o[0]&&o[0].remove?o[0].remove(!1):(o.shift(),l.shift(),c.shift(),h.shift(),v.shift())),i.getAttribs(),i.isDirty=!0,i.isDirtyData=!0,t&&f.redraw()},setData:function(t,n){var r=this,i=r.points,s=r.options,o=r.chart,u=null,a=r.xAxis,f=a&&a.categories&&!a.categories.length?[]:null,l;r.xIncrement=null,r.pointRange=a&&a.categories?1:s.pointRange,r.colorCounter=0;var c=[],h=[],p=[],d=t?t.length:[],v=s.turboThreshold||1e3,m,g=r.pointArrayMap,y=g&&g.length,b=!!r.toYData;if(d>v){l=0;while(u===null&&l<d)u=t[l],l++;if(Ot(u)){var w=jt(s.pointStart,0),E=jt(s.pointInterval,1);for(l=0;l<d;l++)c[l]=w,h[l]=t[l],w+=E;r.xIncrement=w}else if(At(u))if(y)for(l=0;l<d;l++)m=t[l],c[l]=m[0],h[l]=m.slice(1,y+1);else for(l=0;l<d;l++)m=t[l],c[l]=m[0],h[l]=m[1]}else for(l=0;l<d;l++)t[l]!==e&&(m={series:r},r.pointClass.prototype.applyOptions.apply(m,[t[l]]),c[l]=m.x,h[l]=b?r.toYData(m):m.y,p[l]=m.z,f&&m.name&&(f[l]=m.name));r.requireSorting&&c.length>1&&c[1]<c[0]&&nn(15),kt(h[0])&&nn(14,!0),r.data=[],r.options.data=t,r.xData=c,r.yData=h,r.zData=p,r.names=f,l=i&&i.length||0;while(l--)i[l]&&i[l].destroy&&i[l].destroy();a&&(a.minRange=a.userMinRange),r.isDirty=r.isDirtyData=o.isDirtyBox=!0,jt(n,!0)&&o.redraw(!1)},remove:function(e,t){var n=this,r=n.chart;e=jt(e,!0),n.isRemoving||(n.isRemoving=!0,gn(n,"remove",null,function(){n.destroy(),r.isDirtyLegend=r.isDirtyBox=!0,e&&r.redraw(t)})),n.isRemoving=!1},processData:function(t){var n=this,r=n.xData,i=n.yData,s=r.length,o=0,a=s,f,l,c,h=n.xAxis,p,d=n.options,v=d.cropThreshold,m=n.isCartesian;if(m&&!n.isDirty&&!h.isDirty&&!n.yAxis.isDirty&&!t)return!1;if(m&&n.sorted&&(!v||s>v||n.forceCrop)){var g=h.getExtremes(),y=g.min,b=g.max;if(r[s-1]<y||r[0]>b)r=[],i=[];else if(r[0]<y||r[s-1]>b){for(p=0;p<s;p++)if(r[p]>=y){o=u(0,p-1);break}for(;p<s;p++)if(r[p]>b){a=p+1;break}r=r.slice(o,a),i=i.slice(o,a),f=!0}}for(p=r.length-1;p>0;p--)l=r[p]-r[p-1],l>0&&(c===e||l<c)&&(c=l);n.cropped=f,n.cropStart=o,n.processedXData=r,n.processedYData=i,d.pointRange===null&&(n.pointRange=c||1),n.closestPointRange=c},generatePoints:function(){var t=this,n=t.options,r=n.data,i=t.data,s,o=t.processedXData,u=t.processedYData,a=t.pointClass,f=o.length,l=t.cropStart||0,c,h=t.hasGroupedData,p,d=[],v;if(!i&&!h){var m=[];m.length=r.length,i=t.data=m}for(v=0;v<f;v++)c=l+v,h?d[v]=(new a).init(t,[o[v]].concat(Bt(u[v]))):(i[c]?p=i[c]:r[c]!==e&&(i[c]=p=(new a).init(t,r[c],o[v])),d[v]=p);if(i&&(f!==(s=i.length)||h))for(v=0;v<s;v++)v===l&&!h&&(v+=f),i[v]&&(i[v].destroyElements(),i[v].plotX=e);t.data=i,t.points=d},translate:function(){this.processedXData||this.processData(),this.generatePoints();var t=this,n=t.options,r=n.stacking,s=t.xAxis,o=s.categories,u=t.yAxis,a=t.points,f=a.length,l=!!t.modifyValue,c,h=u.series,p=h.length,d=n.pointPlacement==="between",v=n.threshold;while(p--)if(h[p].visible){h[p]===t&&(c=!0);break}for(p=0;p<f;p++){var m=a[p],g=m.x,y=m.y,b=m.low,w=u.stacks[(y<v?"-":"")+t.stackKey],E,S;u.isLog&&y<=0&&(m.y=y=null),m.plotX=s.translate(g,0,0,0,1,d),r&&t.visible&&w&&w[g]&&(E=w[g],S=E.total,E.cum=b=E.cum-y,y=b+y,c&&(b=jt(v,u.min)),u.isLog&&b<=0&&(b=null),r==="percent"&&(b=S?b*100/S:0,y=S?y*100/S:0),m.percentage=S?m.y*100/S:0,m.total=m.stackTotal=S,m.stackY=y),m.yBottom=Pt(b)?u.translate(b,0,1,0,1):null,l&&(y=t.modifyValue(y,m)),m.plotY=typeof y=="number"&&y!==Infinity?i(u.translate(y,0,1,0,1)*10)/10:e,m.clientX=d?s.translate(g,0,0,0,1):m.plotX,m.negative=m.y<(v||0),m.category=o&&o[m.x]!==e?o[m.x]:m.x}t.getSegments()},setTooltipPoints:function(e){var t=this,n=[],r,i,o,a=t.xAxis,f=a?a.tooltipLen||a.len:t.chart.plotSizeX,l,c,h=[];if(t.options.enableMouseTracking===!1)return;e&&(t.tooltipPoints=null),cn(t.segments||t.points,function(e){n=n.concat(e)}),a&&a.reversed&&(n=n.reverse()),r=n.length;for(c=0;c<r;c++){l=n[c],i=n[c-1]?o+1:0,o=n[c+1]?u(0,s((l.clientX+(n[c+1]?n[c+1].clientX:f))/2)):f;while(i>=0&&i<=o)h[i++]=l}t.tooltipPoints=h},tooltipHeaderFormatter:function(e){var t=this,n=t.tooltipOptions,r=n.xDateFormat,i=t.xAxis,s=i&&i.options.type==="datetime",o=n.headerFormat,u;if(s&&!r)for(u in P)if(P[u]>=i.closestPointRange){r=n.dateTimeLabelFormats[u];break}return s&&r&&Ot(e.key)&&(o=o.replace("{point.key}","{point.key:"+r+"}")),Vt(o,{point:e,series:t})},onMouseOver:function(){var e=this,t=e.chart,n=t.hoverSeries;n&&n!==e&&n.onMouseOut(),e.options.events.mouseOver&&gn(e,"mouseOver"),e.setState(G),t.hoverSeries=e},onMouseOut:function(){var e=this,t=e.options,n=e.chart,r=n.tooltip,i=n.hoverPoint;i&&i.onMouseOut(),e&&t.events.mouseOut&&gn(e,"mouseOut"),r&&!t.stickyTracking&&(!r.shared||e.noSharedTooltip)&&r.hide(),e.setState(),n.hoverSeries=null},animate:function(e){var t=this,n=t.chart,r=n.renderer,i,s,o=t.options.animation,u=n.clipBox,a=n.inverted,f;o&&!Lt(o)&&(o=Sn[t.type].animation),f="_sharedClip"+o.duration+o.easing,e?(i=n[f],s=n[f+"m"],i||(n[f]=i=r.clipRect(xt(u,{width:0})),n[f+"m"]=s=r.clipRect(-99,a?-n.plotLeft:-n.plotTop,99,a?n.chartWidth:n.chartHeight)),t.group.clip(i),t.markerGroup.clip(s),t.sharedClipKey=f):(i=n[f],i&&(i.animate({width:n.plotSizeX},o),n[f+"m"].animate({width:n.plotSizeX+99},o)),t.animate=null,t.animationTimeout=setTimeout(function(){t.afterAnimate()},o.duration))},afterAnimate:function(){var e=this.chart,t=this.sharedClipKey,n=this.group;n&&this.options.clip!==!1&&(n.clip(e.clipRect),this.markerGroup.clip()),setTimeout(function(){t&&e[t]&&(e[t]=e[t].destroy(),e[t+"m"]=e[t+"m"].destroy())},100)},drawPoints:function(){var t=this,n,r=t.points,i=t.chart,s,o,u,a,f,l,c,h,p=t.options,d=p.marker,v,m,g,y=t.markerGroup;if(d.enabled||t._hasPointMarkers){u=r.length;while(u--)a=r[u],s=a.plotX,o=a.plotY,h=a.graphic,v=a.marker||{},m=d.enabled&&v.enabled===e||v.enabled,g=i.isInsidePlot(s,o,i.inverted),m&&o!==e&&!isNaN(o)&&a.y!==null?(n=a.pointAttr[a.selected?Y:Q],f=n.r,l=jt(v.symbol,t.symbol),c=l.indexOf("url")===0,h?h.attr({visibility:g?S?"inherit":W:U}).animate(xt({x:s-f,y:o-f},h.symbolName?{width:2*f,height:2*f}:{})):g&&(f>0||c)&&(a.graphic=h=i.renderer.symbol(l,s-f,o-f,2*f,2*f).attr(n).add(y))):h&&(a.graphic=h.destroy())}},convertAttribs:function(e,t,n,r){var i=this.pointAttrToOptions,s,o,u={};e=e||{},t=t||{},n=n||{},r=r||{};for(s in i)o=i[s],u[s]=jt(e[o],t[s],n[s],r[s]);return u},getAttribs:function(){var e=this,t=e.options,n=Sn[e.type].marker?t.marker:t,r=n.states,i=r[G],s,o=e.color,u={stroke:o,fill:o},a=e.points||[],f,l,c=[],h,p=e.pointAttrToOptions,d,v=t.negativeColor,m;t.marker?(i.radius=i.radius||n.radius+2,i.lineWidth=i.lineWidth||n.lineWidth+1):i.color=i.color||kn(i.color||o).brighten(i.brightness).get(),c[Q]=e.convertAttribs(n,u),cn([G,Y],function(t){c[t]=e.convertAttribs(r[t],c[Q])}),e.pointAttr=c,f=a.length;while(f--){l=a[f],n=l.options&&l.options.marker||l.options,n&&n.enabled===!1&&(n.radius=0),l.negative&&(l.color=l.fillColor=v),d=t.colorByPoint||l.color;if(l.options)for(m in p)Pt(n[p[m]])&&(d=!0);d?(n=n||{},h=[],r=n.states||{},s=r[G]=r[G]||{},t.marker||(s.color=kn(s.color||l.color).brighten(s.brightness||i.brightness).get()),h[Q]=e.convertAttribs(xt({color:l.color},n),c[Q]),h[G]=e.convertAttribs(r[G],c[G],h[Q]),h[Y]=e.convertAttribs(r[Y],c[Y],h[Q]),l.negative&&t.marker&&(h[Q].fill=h[G].fill=h[Y].fill=e.convertAttribs({fillColor:v}).fill)):h=c,l.pointAttr=h}},update:function(e,t){var n=this.chart,r=this.userOptions,i=this.type;e=Tt(r,{animation:!1,index:this.index,pointStart:this.xData[0]},e),this.remove(!1),xt(this,St[e.type||i].prototype),this.init(n,e),jt(t,!0)&&n.redraw(!1)},destroy:function(){var e=this,t=e.chart,n=/AppleWebKit\/533/.test(d),r,i,s=e.data||[],o,u,a;gn(e,"destroy"),mn(e),cn(["xAxis","yAxis"],function(t){a=e[t],a&&(Dt(a.series,e),a.isDirty=a.forceRedraw=!0)}),e.legendItem&&e.chart.legend.destroyItem(e),i=s.length;while(i--)o=s[i],o&&o.destroy&&o.destroy();e.points=null,clearTimeout(e.animationTimeout),cn(["area","graph","dataLabelsGroup","group","markerGroup","tracker","graphNeg","areaNeg","posClip","negClip"],function(t){e[t]&&(r=n&&t==="group"?"hide":"destroy",e[t][r]())}),t.hoverSeries===e&&(t.hoverSeries=null),Dt(t.series,e);for(u in e)delete e[u]},drawDataLabels:function(){var t=this,n=t.options,r=n.dataLabels,i=t.points,s,o,u,a;if(r.enabled||t._hasPointLabels)t.dlProcessOptions&&t.dlProcessOptions(r),a=t.plotGroup("dataLabelsGroup","data-labels",t.visible?W:U,r.zIndex||6),o=r,cn(i,function(n){var i,f=n.dataLabel,l,c,h,p,d=n.connector,v=!0;s=n.options&&n.options.dataLabels,i=o.enabled||s&&s.enabled;if(f&&!i)n.dataLabel=f.destroy();else if(i){p=r.rotation,r=Tt(o,s),l=n.getLabelConfig(),u=r.format?Vt(r.format,l):r.formatter.call(l,r),r.style.color=jt(r.color,r.style.color,t.color,"black");if(f)Pt(u)?(f.attr({text:u}),v=!1):(n.dataLabel=f=f.destroy(),d&&(n.connector=d.destroy()));else if(Pt(u)){c={fill:r.backgroundColor,stroke:r.borderColor,"stroke-width":r.borderWidth,r:r.borderRadius||0,rotation:p,padding:r.padding,zIndex:1};for(h in c)c[h]===e&&delete c[h];f=n.dataLabel=t.chart.renderer[p?"text":"label"](u,0,-999,null,null,null,r.useHTML).attr(c).css(r.style).add(a).shadow(r.shadow)}f&&t.alignDataLabel(n,f,r,null,v)}})},alignDataLabel:function(e,t,n,r,s){var o=this.chart,u=o.inverted,a=jt(e.plotX,-999),f=jt(e.plotY,-999),l=t.getBBox(),c;r=xt({x:u?o.plotWidth-f:a,y:i(u?o.plotHeight-a:f),width:0,height:0},r),xt(n,{width:l.width,height:l.height}),n.rotation?(c={align:n.align,x:r.x+n.x+r.width/2,y:r.y+n.y+r.height/2},t[s?"attr":"animate"](c)):(t.align(n,null,r),c=t.alignAttr),t.attr({visibility:n.crop===!1||o.isInsidePlot(a,f,u)?o.renderer.isSVG?"inherit":W:U})},getSegmentPath:function(e){var t=this,n=[],r=t.options.step;return cn(e,function(i,s){var o=i.plotX,u=i.plotY,a;t.getPointSpline?n.push.apply(n,t.getPointSpline(e,i,s)):(n.push(s?J:$),r&&s&&(a=e[s-1],r==="right"?n.push(a.plotX,u):r==="center"?n.push((a.plotX+o)/2,a.plotY,(a.plotX+o)/2,u):n.push(o,a.plotY)),n.push(i.plotX,i.plotY))}),n},getGraphPath:function(){var e=this,t=[],n,r=[];return cn(e.segments,function(i){n=e.getSegmentPath(i),i.length>1?t=t.concat(n):r.push(i[0])}),e.singlePoints=r,e.graphPath=t,t},drawGraph:function(){var e=this,t=this.options,n=[["graph",t.lineColor||this.color]],r=t.lineWidth,i=t.dashStyle,s=this.getGraphPath(),o=t.negativeColor;o&&n.push(["graphNeg",o]),cn(n,function(n,o){var u=n[0],a=e[u],f;a?(wn(a),a.animate({d:s})):r&&s.length&&(f={stroke:n[1],"stroke-width":r,zIndex:1},i&&(f.dashstyle=i),e[u]=e.chart.renderer.path(s).attr(f).add(e.group).shadow(!o&&t.shadow))})},clipNeg:function(){var e=this.options,t=this.chart,n=t.renderer,r=e.negativeColor,i,s,a,f=this.posClip,l=this.negClip,c=t.chartWidth,h=t.chartHeight,p=u(c,h),d,v;r&&this.graph&&(i=o(this.yAxis.len-this.yAxis.translate(e.threshold||0)),d={x:0,y:0,width:p,height:i},v={x:0,y:i,width:p,height:p-i},t.inverted&&n.isVML&&(d={x:t.plotWidth-i-t.plotLeft,y:0,width:c,height:h},v={x:i+t.plotLeft-c,y:0,width:t.plotLeft+i,height:c}),this.yAxis.reversed?(s=v,a=d):(s=d,a=v),f?(f.animate(s),l.animate(a)):(this.posClip=f=n.clipRect(s),this.graph.clip(f),this.negClip=l=n.clipRect(a),this.graphNeg.clip(l),this.area&&(this.area.clip(f),this.areaNeg.clip(l))))},invertGroups:function(){function n(){var t={width:e.yAxis.len,height:e.xAxis.len};cn(["group","markerGroup"],function(n){e[n]&&e[n].attr(t).invert()})}var e=this,t=e.chart;vn(t,"resize",n),vn(e,"destroy",function(){mn(t,"resize",n)}),n(),e.invertGroups=n},plotGroup:function(e,t,n,r,i){var s=this[e],o=!s,u=this.chart,a=this.xAxis,f=this.yAxis;return o&&(this[e]=s=u.renderer.g(t).attr({visibility:n,zIndex:r||.1}).add(i)),s[o?"attr":"animate"]({translateX:a?a.left:u.plotLeft,translateY:f?f.top:u.plotTop}),s},render:function(){var e=this,t=e.chart,n,r=e.options,i=r.animation,s=i&&!!e.animate&&t.renderer.isSVG,o=e.visible?W:U,u=r.zIndex,a=e.hasRendered,f=t.seriesGroup;n=e.plotGroup("group","series",o,u,f),e.markerGroup=e.plotGroup("markerGroup","markers",o,u,f),s&&e.animate(!0),e.getAttribs(),n.inverted=t.inverted,e.drawGraph&&(e.drawGraph(),e.clipNeg()),e.drawDataLabels(),e.drawPoints(),e.options.enableMouseTracking!==!1&&e.drawTracker(),t.inverted&&e.invertGroups(),r.clip!==!1&&!e.sharedClipKey&&!a&&n.clip(t.clipRect),s?e.animate():a||e.afterAnimate(),e.isDirty=e.isDirtyData=!1,e.hasRendered=!0},redraw:function(){var e=this,t=e.chart,n=e.isDirtyData,r=e.group,i=e.xAxis,s=e.yAxis;r&&(t.inverted&&r.attr({width:t.plotWidth,height:t.plotHeight}),r.animate({translateX:jt(i&&i.left,t.plotLeft),translateY:jt(s&&s.top,t.plotTop)})),e.translate(),e.setTooltipPoints(!0),e.render(),n&&gn(e,"updatedData")},setState:function(e){var t=this,n=t.options,r=t.graph,i=t.graphNeg,s=n.states,o=n.lineWidth,u;e=e||Q;if(t.state!==e){t.state=e;if(s[e]&&s[e].enabled===!1)return;e&&(o=s[e].lineWidth||o+1),r&&!r.dashstyle&&(u={"stroke-width":o},r.attr(u),i&&i.attr(u))}},setVisible:function(t,n){var r=this,i=r.chart,s=r.legendItem,o,u=i.options.chart.ignoreHiddenSeries,a=r.visible;r.visible=t=r.userOptions.visible=t===e?!a:t,o=t?"show":"hide",cn(["group","dataLabelsGroup","markerGroup","tracker"],function(e){r[e]&&r[e][o]()}),i.hoverSeries===r&&r.onMouseOut(),s&&i.legend.colorizeItem(r,t),r.isDirty=!0,r.options.stacking&&cn(i.series,function(e){e.options.stacking&&e.visible&&(e.isDirty=!0)}),cn(r.linkedSeries,function(e){e.setVisible(t,!1)}),u&&(i.isDirtyBox=!0),n!==!1&&i.redraw(),gn(r,o)},show:function(){this.setVisible(!0)},hide:function(){this.setVisible(!1)},select:function(t){var n=this;n.selected=t=t===e?!n.selected:t,n.checkbox&&(n.checkbox.checked=t),gn(n,t?"select":"unselect")},drawTracker:function(){var e=this,t=e.options,n=t.trackByArea,r=[].concat(n?e.areaPath:e.graphPath),i=r.length,s=e.chart,o=s.pointer,u=s.renderer,a=s.options.tooltip.snap,f=e.tracker,l=t.cursor,c=l&&{cursor:l},h=e.singlePoints,p,d,v=function(){s.hoverSeries!==e&&e.onMouseOver()};if(i&&!n){d=i+1;while(d--)r[d]===$&&r.splice(d+1,0,r[d+1]-a,r[d+2],J),(d&&r[d]===$||d===i)&&r.splice(d,0,J,r[d-2]+a,r[d-1])}for(d=0;d<h.length;d++)p=h[d],r.push($,p.plotX-a,p.plotY,J,p.plotX+a,p.plotY);f?f.attr({d:r}):(e.tracker=f=u.path(r).attr({"class":z+"tracker","stroke-linejoin":"round",visibility:e.visible?W:U,stroke:K,fill:n?K:V,"stroke-width":t.lineWidth+(n?0:2*a),zIndex:2}).addClass(z+"tracker").on("mouseover",v).on("mouseout",function(e){o.onTrackerMouseOut(e)}).css(c).add(e.markerGroup),C&&f.on("touchstart",v))}};var Xn=qt(Wn);St.line=Xn,Sn.area=Tt(xn,{threshold:0});var Vn=qt(Wn,{type:"area",getSegments:function(){var e=[],t=this.yAxis.stacks[this.stackKey],n={},r,i,s=this.points,o,u;if(this.options.stacking&&!this.cropped){for(o=0;o<s.length;o++)n[s[o].x]=s[o];for(u in t)n[u]?e.push(n[u]):(r=this.xAxis.translate(u),i=this.yAxis.toPixels(t[u].cum,!0),e.push({y:null,plotX:r,clientX:r,plotY:i,yBottom:i,onMouseOver:H}));e=[e]}else Wn.prototype.getSegments.call(this),e=this.segments;this.segments=e},getSegmentPath:function(e){var t=Wn.prototype.getSegmentPath.call(this,e),n=[].concat(t),r,i=this.options,s=t.length;s===3&&n.push(J,t[1],t[2]);if(i.stacking&&!this.closedStacks)for(r=e.length-1;r>=0;r--)r<e.length-1&&i.step&&n.push(e[r+1].plotX,e[r].yBottom),n.push(e[r].plotX,e[r].yBottom);else this.closeSegment(n,e);return this.areaPath=this.areaPath.concat(n),t},closeSegment:function(e,t){var n=this.yAxis.getThreshold(this.options.threshold);e.push(J,t[t.length-1].plotX,n,J,t[0].plotX,n)},drawGraph:function(){this.areaPath=[],Wn.prototype.drawGraph.apply(this);var e=this,t=this.areaPath,n=this.options,r=n.negativeColor,i=[["area",this.color,n.fillColor]];r&&i.push(["areaNeg",n.negativeColor,n.negativeFillColor]),cn(i,function(r){var i=r[0],s=e[i];s?s.animate({d:t}):e[i]=e.chart.renderer.path(t).attr({fill:jt(r[2],kn(r[1]).setOpacity(n.fillOpacity||.75).get()),zIndex:0}).add(e.group)})},drawLegendSymbol:function(e,t){t.legendSymbol=this.chart.renderer.rect(0,e.baseline-11,e.options.symbolWidth,12,2).attr({zIndex:3}).add(t.legendGroup)}});St.area=Vn,Sn.spline=Tt(xn);var $n=qt(Wn,{type:"spline",getPointSpline:function(e,t,n){var r=1.5,i=r+1,s=t.plotX,o=t.plotY,f=e[n-1],l=e[n+1],c,h,p,d,v;if(f&&l){var m=f.plotX,g=f.plotY,y=l.plotX,b=l.plotY,w;c=(r*s+m)/i,h=(r*o+g)/i,p=(r*s+y)/i,d=(r*o+b)/i,w=(d-h)*(p-s)/(p-c)+o-d,h+=w,d+=w,h>g&&h>o?(h=u(g,o),d=2*o-h):h<g&&h<o&&(h=a(g,o),d=2*o-h),d>b&&d>o?(d=u(b,o),h=2*o-d):d<b&&d<o&&(d=a(b,o),h=2*o-d),t.rightContX=p,t.rightContY=d}return n?(v=["C",f.rightContX||f.plotX,f.rightContY||f.plotY,c||s,h||o,s,o],f.rightContX=f.rightContY=null):v=[$,s,o],v}});St.spline=$n,Sn.areaspline=Tt(Sn.area);var Jn=Vn.prototype,Kn=qt($n,{type:"areaspline",closedStacks:!0,getSegmentPath:Jn.getSegmentPath,closeSegment:Jn.closeSegment,drawGraph:Jn.drawGraph});St.areaspline=Kn,Sn.column=Tt(xn,{borderColor:"#FFFFFF",borderWidth:1,borderRadius:0,groupPadding:.2,marker:null,pointPadding:.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{brightness:.1,shadow:!1},select:{color:"#C0C0C0",borderColor:"#000000",shadow:!1}},dataLabels:{align:null,verticalAlign:null,y:null},stickyTracking:!1,threshold:0});var Qn=qt(Wn,{type:"column",tooltipOutsidePlot:!0,requireSorting:!1
,pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color",r:"borderRadius"},trackerGroups:["group","dataLabelsGroup"],init:function(){Wn.prototype.init.apply(this,arguments);var e=this,t=e.chart;t.hasRendered&&cn(t.series,function(t){t.type===e.type&&(t.isDirty=!0)})},getColumnMetrics:function(){var t=this,n=t.chart,r=t.options,i=this.xAxis,s=i.reversed,o,u={},l,c=0;r.grouping===!1?c=1:cn(n.series,function(n){var r=n.options;n.type===t.type&&n.visible&&t.options.group===r.group&&(r.stacking?(o=n.stackKey,u[o]===e&&(u[o]=c++),l=u[o]):r.grouping!==!1&&(l=c++),n.columnIndex=l)});var h=a(f(i.transA)*(i.ordinalSlope||r.pointRange||i.closestPointRange||1),i.len),p=h*r.groupPadding,d=h-2*p,v=d/c,m=r.pointWidth,g=Pt(m)?(v-m)/2:v*r.pointPadding,y=jt(m,v-2*g),b=(s?c-(t.columnIndex||0):t.columnIndex)||0,w=g+(p+b*v-h/2)*(s?-1:1);return t.columnMetrics={width:y,offset:w}},translate:function(){var e=this,t=e.chart,n=e.options,r=n.stacking,i=n.borderWidth,s=e.yAxis,l=n.threshold,c=e.translatedThreshold=s.getThreshold(l),h=jt(n.minPointLength,5),p=e.getColumnMetrics(),d=p.width,v=o(u(d,1+2*i)),m=p.offset;Wn.prototype.translate.apply(e),cn(e.points,function(n){var l=a(u(-999,n.plotY),s.len+999),p=jt(n.yBottom,c),g=n.plotX+m,y=o(a(l,p)),b=o(u(l,p)-y),w=s.stacks[(n.y<0?"-":"")+e.stackKey],E;r&&e.visible&&w&&w[n.x]&&w[n.x].setOffset(m,v),f(b)<h&&h&&(b=h,y=f(y-c)>h?p-h:c-(s.translate(n.y,0,1,0,1)<=c?h:0)),n.barX=g,n.pointWidth=d,n.shapeType="rect",n.shapeArgs=E=t.renderer.Element.prototype.crisp.call(0,i,g,y,v,b),i%2&&(E.y-=1,E.height+=1)})},getSymbol:H,drawLegendSymbol:Vn.prototype.drawLegendSymbol,drawGraph:H,drawPoints:function(){var t=this,n=t.options,r=t.chart.renderer,i;cn(t.points,function(s){var o=s.plotY,u=s.graphic;o!==e&&!isNaN(o)&&s.y!==null?(i=s.shapeArgs,u?(wn(u),u.animate(Tt(i))):s.graphic=u=r[s.shapeType](i).attr(s.pointAttr[s.selected?Y:Q]).add(t.group).shadow(n.shadow,null,n.stacking&&!n.borderRadius)):u&&(s.graphic=u.destroy())})},drawTracker:function(){var t=this,n=t.chart.pointer,r=t.options.cursor,i=r&&{cursor:r},s=function(n){var r=n.target,i;t.onMouseOver();while(r&&!i)i=r.point,r=r.parentNode;i!==e&&i.onMouseOver(n)};cn(t.points,function(e){e.graphic&&(e.graphic.element.point=e),e.dataLabel&&(e.dataLabel.element.point=e)}),t._hasTracking?t._hasTracking=!0:cn(t.trackerGroups,function(e){t[e]&&(t[e].addClass(z+"tracker").on("mouseover",s).on("mouseout",function(e){n.onTrackerMouseOut(e)}).css(i),C&&t[e].on("touchstart",s))})},alignDataLabel:function(e,t,n,r,i){var s=this.chart,o=s.inverted,u=e.dlBox||e.shapeArgs,a=e.below||e.plotY>jt(this.translatedThreshold,s.plotSizeY),f=jt(n.inside,!!this.options.stacking);u&&(r=Tt(u),o&&(r={x:s.plotWidth-r.y-r.height,y:s.plotHeight-r.x-r.width,width:r.height,height:r.width}),f||(o?(r.x+=a?0:r.width,r.width=0):(r.y+=a?r.height:0,r.height=0))),n.align=jt(n.align,!o||f?"center":a?"right":"left"),n.verticalAlign=jt(n.verticalAlign,o||f?"middle":a?"top":"bottom"),Wn.prototype.alignDataLabel.call(this,e,t,n,r,i)},animate:function(e){var t=this,n=this.yAxis,r=t.options,i=this.chart.inverted,s={},o;S&&(e?(s.scaleY=.001,o=a(n.pos+n.len,u(n.pos,n.toPixels(r.threshold))),i?s.translateX=o-n.len:s.translateY=o,t.group.attr(s)):(s.scaleY=1,s[i?"translateX":"translateY"]=n.pos,t.group.animate(s,t.options.animation),t.animate=null))},remove:function(){var e=this,t=e.chart;t.hasRendered&&cn(t.series,function(t){t.type===e.type&&(t.isDirty=!0)}),Wn.prototype.remove.apply(e,arguments)}});St.column=Qn,Sn.bar=Tt(Sn.column);var Gn=qt(Qn,{type:"bar",inverted:!0});St.bar=Gn,Sn.scatter=Tt(xn,{lineWidth:0,tooltip:{headerFormat:'<span style="font-size: 10px; color:{series.color}">{series.name}</span><br/>',pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>",followPointer:!0},stickyTracking:!1});var Yn=qt(Wn,{type:"scatter",sorted:!1,requireSorting:!1,noSharedTooltip:!0,trackerGroups:["markerGroup"],drawTracker:Qn.prototype.drawTracker,setTooltipPoints:H});St.scatter=Yn,Sn.pie=Tt(xn,{borderColor:"#FFFFFF",borderWidth:1,center:[null,null],colorByPoint:!0,dataLabels:{distance:30,enabled:!0,formatter:function(){return this.point.name}},ignoreHiddenPoint:!0,legendType:"point",marker:null,size:null,showInLegend:!1,slicedOffset:10,states:{hover:{brightness:.1,shadow:!1}},stickyTracking:!1,tooltip:{followPointer:!0}});var Zn=qt(zn,{init:function(){zn.prototype.init.apply(this,arguments);var e=this,t;return e.y<0&&(e.y=null),xt(e,{visible:e.visible!==!1,name:jt(e.name,"Slice")}),t=function(){e.slice()},vn(e,"select",t),vn(e,"unselect",t),e},setVisible:function(t){var n=this,r=n.series,i=r.chart,s;n.visible=n.options.visible=t=t===e?!n.visible:t,r.options.data[ln(n,r.data)]=n.options,s=t?"show":"hide",cn(["graphic","dataLabel","connector","shadowGroup"],function(e){n[e]&&n[e][s]()}),n.legendItem&&i.legend.colorizeItem(n,t),!r.isDirty&&r.options.ignoreHiddenPoint&&(r.isDirty=!0,i.redraw())},slice:function(e,t,n){var r=this,i=r.series,s=i.chart,o;sn(n,s),t=jt(t,!0),r.sliced=r.options.sliced=e=Pt(e)?e:!r.sliced,i.options.data[ln(r,i.data)]=r.options,o=e?r.slicedTranslation:{translateX:0,translateY:0},r.graphic.animate(o),r.shadowGroup&&r.shadowGroup.animate(o)}}),er={type:"pie",isCartesian:!1,pointClass:Zn,requireSorting:!1,noSharedTooltip:!0,trackerGroups:["group","dataLabelsGroup"],pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color"},getColor:H,animate:function(e){var t=this,n=t.points,r=t.startAngleRad;e||(cn(n,function(e){var n=e.graphic,i=e.shapeArgs;n&&(n.attr({r:t.center[3]/2,start:r,end:r}),n.animate({r:i.r,start:i.start,end:i.end},t.options.animation))}),t.animate=null)},setData:function(e,t){Wn.prototype.setData.call(this,e,!1),this.processData(),this.generatePoints(),jt(t,!0)&&this.chart.redraw()},getCenter:function(){var e=this.options,t=this.chart,n=2*(e.dataLabels&&e.dataLabels.enabled?0:e.slicedOffset||0),r=t.plotWidth-2*n,i=t.plotHeight-2*n,s=e.center,o=[jt(s[0],"50%"),jt(s[1],"50%"),e.size||"100%",e.innerSize||0],u=a(r,i),f;return dn(o,function(e,t){return f=/%$/.test(e),(f?[r,i,u,u][t]*Ct(e)/100:e)+(t<3?n:0)})},translate:function(e){this.generatePoints();var t=0,n=this,s=0,o=1e3,u=n.options,a=u.slicedOffset,f=a+u.borderWidth,p,d,v,m=n.startAngleRad=h/180*((u.startAngle||0)%360-90),g=n.points,y=2*h,b,w,E,S=u.dataLabels.distance,x=u.ignoreHiddenPoint,T,N=g.length,C;e||(n.center=e=n.getCenter()),n.getX=function(t,n){return v=r.asin((t-e[1])/(e[2]/2+S)),e[0]+(n?-1:1)*l(v)*(e[2]/2+S)};for(T=0;T<N;T++)C=g[T],t+=x&&!C.visible?0:C.y;for(T=0;T<N;T++){C=g[T],b=t?C.y/t:0,p=i((m+s*y)*o)/o;if(!x||C.visible)s+=b;d=i((m+s*y)*o)/o,C.shapeType="arc",C.shapeArgs={x:e[0],y:e[1],r:e[2]/2,innerR:e[3]/2,start:p,end:d},v=(d+p)/2,v>.75*y&&(v-=2*h),C.slicedTranslation={translateX:i(l(v)*a),translateY:i(c(v)*a)},w=l(v)*e[2]/2,E=c(v)*e[2]/2,C.tooltipPos=[e[0]+w*.7,e[1]+E*.7],C.half=v<y/4?0:1,C.angle=v,C.labelPos=[e[0]+w+l(v)*S,e[1]+E+c(v)*S,e[0]+w+l(v)*f,e[1]+E+c(v)*f,e[0]+w,e[1]+E,S<0?"center":C.half?"right":"left",v],C.percentage=b*100,C.total=t}this.setTooltipPoints()},drawGraph:null,drawPoints:function(){var e=this,t=e.chart,n=t.renderer,r,i,s=e.options.shadow,o,u;s&&!e.shadowGroup&&(e.shadowGroup=n.g("shadow").add(e.group)),cn(e.points,function(t){i=t.graphic,u=t.shapeArgs,o=t.shadowGroup,s&&!o&&(o=t.shadowGroup=n.g("shadow").add(e.shadowGroup)),r=t.sliced?t.slicedTranslation:{translateX:0,translateY:0},o&&o.attr(r),i?i.animate(xt(u,r)):t.graphic=i=n.arc(u).setRadialReference(e.center).attr(t.pointAttr[t.selected?Y:Q]).attr({"stroke-linejoin":"round"}).attr(r).add(e.group).shadow(s,o),t.visible===!1&&t.setVisible(!1)})},drawDataLabels:function(){var e=this,t=e.data,n,r=e.chart,s=e.options.dataLabels,o=jt(s.connectorPadding,10),a=jt(s.connectorWidth,1),l=r.plotWidth,c=r.plotHeight,h,p,d=jt(s.softConnector,!0),v=s.distance,m=e.center,g=m[2]/2,y=m[1],b=v>0,w,E,S,x,T=[[],[]],N,C,k,L,A,O,M=[0,0,0,0],_=function(e,t){return t.y-e.y},D=function(e,t){e.sort(function(e,n){return e.angle!==undefined&&(n.angle-e.angle)*t})};if(!s.enabled&&!e._hasPointLabels)return;Wn.prototype.drawDataLabels.apply(e),cn(t,function(e){e.dataLabel&&T[e.half].push(e)}),A=0;while(!x&&t[A])x=t[A]&&t[A].dataLabel&&(t[A].dataLabel.getBBox().height||21),A++;A=2;while(A--){var P=[],H,B=[],j=T[A],F,I=j.length,q;D(j,A-.5);if(v>0){for(F=y-g-v;F<=y+g+v;F+=x)P.push(F);H=P.length;if(I>H){L=[].concat(j),L.sort(_),O=I;while(O--)L[O].rank=O;O=I;while(O--)j[O].rank>=H&&j.splice(O,1);I=j.length}for(O=0;O<I;O++){n=j[O],S=n.labelPos;var R=9999,z,X;for(X=0;X<H;X++)z=f(P[X]-S[1]),z<R&&(R=z,q=X);if(q<O&&P[O]!==null)q=O;else if(H<I-O+q&&P[O]!==null){q=H-I+O;while(P[q]===null)q++}else while(P[q]===null)q++;B.push({i:q,y:P[q]}),P[q]=null}B.sort(_)}for(O=0;O<I;O++){var V,K;n=j[O],S=n.labelPos,w=n.dataLabel,k=n.visible===!1?U:W,K=S[1];if(v>0){V=B.pop(),q=V.i,C=V.y;if(K>C&&P[q+1]!==null||K<C&&P[q-1]!==null)C=K}else C=K;N=s.justify?m[0]+(A?-1:1)*(g+v):e.getX(q===0||q===P.length-1?K:C,A),w._attr={visibility:k,align:S[6]},w._pos={x:N+s.x+({left:o,right:-o}[S[6]]||0),y:C+s.y-10},w.connX=N,w.connY=C,this.options.size===null&&(E=w.width,N-E<o?M[3]=u(i(E-N+o),M[3]):N+E>l-o&&(M[1]=u(i(N+E-l+o),M[1])),C-x/2<0?M[0]=u(i(-C+x/2),M[0]):C+x/2>c&&(M[2]=u(i(C+x/2-c),M[2])))}}if(Zt(M)===0||this.verifyDataLabelOverflow(M))this.placeDataLabels(),b&&a&&cn(this.points,function(t){h=t.connector,S=t.labelPos,w=t.dataLabel,w&&w._pos?(N=w.connX,C=w.connY,p=d?[$,N+(S[6]==="left"?5:-5),C,"C",N,C,2*S[2]-S[4],2*S[3]-S[5],S[2],S[3],J,S[4],S[5]]:[$,N+(S[6]==="left"?5:-5),C,J,S[2],S[3],J,S[4],S[5]],h?(h.animate({d:p}),h.attr("visibility",k)):t.connector=h=e.chart.renderer.path(p).attr({"stroke-width":a,stroke:s.connectorColor||t.color||"#606060",visibility:k}).add(e.group)):h&&(t.connector=h.destroy())})},verifyDataLabelOverflow:function(e){var t=this.center,n=this.options,r=n.center,i=n.minSize||80,s=i,o;return r[0]!==null?s=u(t[2]-u(e[1],e[3]),i):(s=u(t[2]-e[1]-e[3],i),t[0]+=(e[3]-e[1])/2),r[1]!==null?s=u(a(s,t[2]-u(e[0],e[2])),i):(s=u(a(s,t[2]-e[0]-e[2]),i),t[1]+=(e[0]-e[2])/2),s<t[2]?(t[2]=s,this.translate(t),cn(this.points,function(e){e.dataLabel&&(e.dataLabel._pos=null)}),this.drawDataLabels()):o=!0,o},placeDataLabels:function(){cn(this.points,function(e){var t=e.dataLabel,n;t&&(n=t._pos,n?(t.attr(t._attr),t[t.moved?"animate":"attr"](n),t.moved=!0):t&&t.attr({y:-999}))})},alignDataLabel:H,drawTracker:Qn.prototype.drawTracker,drawLegendSymbol:Vn.prototype.drawLegendSymbol,getSymbol:H};er=qt(Wn,er),St.pie=er,xt(Highcharts,{Axis:Fn,Chart:Un,Color:kn,Legend:Rn,Pointer:qn,Point:zn,Tick:Hn,Tooltip:In,Renderer:N,Series:Wn,SVGElement:Ln,SVGRenderer:An,arrayMin:Yt,arrayMax:Zt,charts:B,dateFormat:M,format:Vt,pathAnim:D,getOptions:Cn,hasBidiBug:x,isTouchDevice:w,numberFormat:Ut,seriesTypes:St,setOptions:Nn,addEvent:vn,removeEvent:mn,createElement:It,discardElement:tn,css:Ft,each:cn,extend:xt,map:dn,merge:Tt,pick:jt,splat:Bt,extendClass:qt,pInt:Ct,wrap:Wt,svg:S,canvas:T,vml:!S&&!T,product:j,version:F})}(),function(e,t){function n(e,t,n){this.init.call(this,e,t,n)}function r(e,t,n){e.call(this,t,n),this.chart.polar&&(this.closeSegment=function(e){var t=this.xAxis.center;e.push("L",t[0],t[1])},this.closedStacks=!0)}function i(e,t){var n=this.chart,r=this.options.animation,i=this.group,s=this.markerGroup,o=this.xAxis.center,u=n.plotLeft,a=n.plotTop;if(n.polar){if(n.renderer.isSVG)if(r===!0&&(r={}),t){if(n={translateX:o[0]+u,translateY:o[1]+a,scaleX:.001,scaleY:.001},i.attr(n),s)s.attrSetters=i.attrSetters,s.attr(n)}else n={translateX:u,translateY:a,scaleX:1,scaleY:1},i.animate(n,r),s&&s.animate(n,r),this.animate=null}else e.call(this,t)}var s=e.arrayMin,o=e.arrayMax,u=e.each,a=e.extend,f=e.merge,l=e.map,c=e.pick,h=e.pInt,p=e.getOptions().plotOptions,d=e.seriesTypes,v=e.extendClass,m=e.splat,g=e.wrap,y=e.Axis,b=e.Tick,w=e.Series,E=d.column.prototype,S=Math,x=S.round,T=S.floor,N=S.ceil,C=S.min,k=S.max,L=function(){};a(n.prototype,{init:function(e,t,n){var r=this,i=r.defaultOptions;r.chart=t,t.angular&&(i.background={}),r.options=e=f(i,e),(e=e.background)&&u([].concat(m(e)).reverse(),function(e){var t=e.backgroundColor,e=f(r.defaultBackgroundOptions,e);t&&(e.backgroundColor=t),e.color=e.backgroundColor,n.options.plotBands.unshift(e)})},defaultOptions:{center:["50%","50%"],size:"85%",startAngle:0},defaultBackgroundOptions:{shape:"circle",borderWidth:1,borderColor:"silver",backgroundColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,"#FFF"],[1,"#DDD"]]},from:Number.MIN_VALUE,innerRadius:0,to:Number.MAX_VALUE,outerRadius:"105%"}});var A=y.prototype,b=b.prototype,O={getOffset:L,redraw:function(){this.isDirty=!1},render:function(){this.isDirty=!1},setScale:L,setCategories:L,setTitle:L},M={isRadial:!0,defaultRadialGaugeOptions:{labels:{align:"center",x:0,y:null},minorGridLineWidth:0,minorTickInterval:"auto",minorTickLength:10,minorTickPosition:"inside",minorTickWidth:1,plotBands:[],tickLength:10,tickPosition:"inside",tickWidth:2,title:{rotation:0},zIndex:2},defaultRadialXOptions:{gridLineWidth:1,labels:{align:null,distance:15,x:0,y:null},maxPadding:0,minPadding:0,plotBands:[],showLastLabel:!1,tickLength:0},defaultRadialYOptions:{gridLineInterpolation:"circle",labels:{align:"right",x:-3,y:-2},plotBands:[],showLastLabel:!1,title:{x:4,text:null,rotation:90}},setOptions:function(e){this.options=f(this.defaultOptions,this.defaultRadialOptions,e)},getOffset:function(){A.getOffset.call(this),this.chart.axisOffset[this.side]=0,this.center=this.pane.center=d.pie.prototype.getCenter.call(this.pane)},getLinePath:function(e,t){var n=this.center,t=c(t,n[2]/2-this.offset);return this.chart.renderer.symbols.arc(this.left+n[0],this.top+n[1],t,t,{start:this.startAngleRad,end:this.endAngleRad,open:!0,innerR:0})},setAxisTranslation:function(){A.setAxisTranslation.call(this),this.center&&(this.transA=this.isCircular?(this.endAngleRad-this.startAngleRad)/(this.max-this.min||1):this.center[2]/2/(this.max-this.min||1),this.isXAxis)&&(this.minPixelPadding=this.transA*this.minPointOffset+(this.reversed?(this.endAngleRad-this.startAngleRad)/4:0))},beforeSetTickPositions:function(){this.autoConnect&&(this.max+=this.categories&&1||this.pointRange||this.closestPointRange)},setAxisSize:function(){A.setAxisSize.call(this),this.center&&(this.len=this.width=this.height=this.isCircular?this.center[2]*(this.endAngleRad-this.startAngleRad)/2:this.center[2]/2)},getPosition:function(e,t){return this.isCircular||(t=this.translate(e),e=this.min),this.postTranslate(this.translate(e),c(t,this.center[2]/2)-this.offset)},postTranslate:function(e,t){var n=this.chart,r=this.center,e=this.startAngleRad+e;return{x:n.plotLeft+r[0]+Math.cos(e)*t,y:n.plotTop+r[1]+Math.sin(e)*t}},getPlotBandPath:function(e,t,n){var r=this.center,i=this.startAngleRad,s=r[2]/2,o=[c(n.outerRadius,"100%"),n.innerRadius,c(n.thickness,10)],u=/%$/,a,f=this.isCircular;return this.options.gridLineInterpolation==="polygon"?r=this.getPlotLinePath(e).concat(this.getPlotLinePath(t,!0)):(f||(o[0]=this.translate(e),o[1]=this.translate(t)),o=l(o,function(e){return u.test(e)&&(e=h(e,10)*s/100),e}),n.shape==="circle"||!f?(e=-Math.PI/2,t=Math.PI*1.5,a=!0):(e=i+this.translate(e),t=i+this.translate(t)),r=this.chart.renderer.symbols.arc(this.left+r[0],this.top+r[1],o[0],o[0],{start:e,end:t,innerR:c(o[1],o[0]-o[2]),open:a})),r},getPlotLinePath:function(e,t){var n=this.center,r=this.chart,i=this.getPosition(e),s,o,a;return this.isCircular?a=["M",n[0]+r.plotLeft,n[1]+r.plotTop,"L",i.x,i.y]:this.options.gridLineInterpolation==="circle"?(e=this.translate(e))&&(a=this.getLinePath(0,e)):(s=r.xAxis[0],a=[],e=this.translate(e),n=s.tickPositions,s.autoConnect&&(n=n.concat([n[0]])),t&&(n=[].concat(n).reverse()),u(n,function(t,n){o=s.getPosition(t,e),a.push(n?"L":"M",o.x,o.y)})),a},getTitlePosition:function(){var e=this.center,t=this.chart,n=this.options.title;return{x:t.plotLeft+e[0]+(n.x||0),y:t.plotTop+e[1]-{high:.5,middle:.25,low:0}[n.align]*e[2]+(n.y||0)}}};g(A,"init",function(e,r,i){var s,o=r.angular,u=r.polar,l=i.isX,h=o&&l,p,d;d=r.options;var v=i.pane||0;if(o){if(a(this,h?O:M),p=!l)this.defaultRadialOptions=this.defaultRadialGaugeOptions}else u&&(a(this,M),this.defaultRadialOptions=(p=l)?this.defaultRadialXOptions:f(this.defaultYAxisOptions,this.defaultRadialYOptions));e.call(this,r,i),!h&&(o||u)&&(e=this.options,r.panes||(r.panes=[]),this.pane=(s=r.panes[v]=r.panes[v]||new n(m(d.pane)[v],r,this),v=s),v=v.options,r.inverted=!1,d.chart.zoomType=null,this.startAngleRad=r=(v.startAngle-90)*Math.PI/180,this.endAngleRad=d=(c(v.endAngle,v.startAngle+360)-90)*Math.PI/180,this.offset=e.offset||0,(this.isCircular=p)&&i.max===t&&d-r===2*Math.PI&&(this.autoConnect=!0))}),g(b,"getPosition",function(e,t,n,r,i){var s=this.axis;return s.getPosition?s.getPosition(n):e.call(this,t,n,r,i)}),g(b,"getLabelPosition",function(e,t,n,r,i,s,o,u,a){var f=this.axis,l=s.y,p=s.align,d=(f.translate(this.pos)+f.startAngleRad+Math.PI/2)/Math.PI*180;return f.isRadial?(e=f.getPosition(this.pos,f.center[2]/2+c(s.distance,-25)),s.rotation==="auto"?r.attr({rotation:d}):l===null&&(l=h(r.styles.lineHeight)*.9-r.getBBox().height/2),p===null&&(p=f.isCircular?d>20&&d<160?"left":d>200&&d<340?"right":"center":"center",r.attr({align:p})),e.x+=s.x,e.y+=l):e=e.call(this,t,n,r,i,s,o,u,a),e}),g(b,"getMarkPath",function(e,t,n,r,i,s,o){var u=this.axis;return u.isRadial?(e=u.getPosition(this.pos,u.center[2]/2+r),t=["M",t,n,"L",e.x,e.y]):t=e.call(this,t,n,r,i,s,o),t}),p.arearange=f(p.area,{lineWidth:1,marker:null,threshold:null,tooltip:{pointFormat:'<span style="color:{series.color}">{series.name}</span>: <b>{point.low}</b> - <b>{point.high}</b><br/>'},trackByArea:!0,dataLabels:{verticalAlign:null,xLow:0,xHigh:0,yLow:0,yHigh:0}}),d.arearange=e.extendClass(d.area,{type:"arearange",pointArrayMap:["low","high"],toYData:function(e){return[e.low,e.high]},pointValKey:"low",translate:function(){var e=this.yAxis;d.area.prototype.translate.apply(this),u(this.points,function(t){t.y!==null&&(t.plotLow=t.plotY,t.plotHigh=e.translate(t.high,0,1,0,1))})},getSegmentPath:function(e){var t=[],n=e.length,r=w.prototype.getSegmentPath,i,s;s=this.options;for(var o=s.step;n--;)i=e[n],t.push({plotX:i.plotX,plotY:i.plotHigh});return e=r.call(this,e),o&&(o===!0&&(o="left"),s.step={left:"right",center:"center",right:"left"}[o]),t=r.call(this,t),s.step=o,s=[].concat(e,t),t[0]="L",this.areaPath=this.areaPath.concat(e,t),s},drawDataLabels:function(){var e=this.data,t=e.length,n,r=[],i=w.prototype,s=this.options.dataLabels,o,u=this.chart.inverted;if(s.enabled||this._hasPointLabels){for(n=t;n--;)o=e[n],o.y=o.high,o.plotY=o.plotHigh,r[n]=o.dataLabel,o.dataLabel=o.dataLabelUpper,o.below=!1,u?(s.align="left",s.x=s.xHigh):s.y=s.yHigh;i.drawDataLabels.apply(this,arguments);for(n=t;n--;)o=e[n],o.dataLabelUpper=o.dataLabel,o.dataLabel=r[n],o.y=o.low,o.plotY=o.plotLow,o.below=!0,u?(s.align="right",s.x=s.xLow):s.y=s.yLow;i.drawDataLabels.apply(this,arguments)}},alignDataLabel:d.column.prototype.alignDataLabel,getSymbol:d.column.prototype.getSymbol,drawPoints:L}),p.areasplinerange=f(p.arearange),d.areasplinerange=v(d.arearange,{type:"areasplinerange",getPointSpline:d.spline.prototype.getPointSpline}),p.columnrange=f(p.column,p.arearange,{lineWidth:1,pointRange:null}),d.columnrange=v(d.arearange,{type:"columnrange",translate:function(){var e=this.yAxis,t;E.translate.apply(this),u(this.points,function(n){var r=n.shapeArgs;n.plotHigh=t=e.translate(n.high,0,1,0,1),n.plotLow=n.plotY,r.y=t,r.height=n.plotY-t})},trackerGroups:["group","dataLabels"],drawGraph:L,pointAttrToOptions:E.pointAttrToOptions,drawPoints:E.drawPoints,drawTracker:E.drawTracker,animate:E.animate,getColumnMetrics:E.getColumnMetrics}),p.gauge=f(p.line,{dataLabels:{enabled:!0,y:15,borderWidth:1,borderColor:"silver",borderRadius:3,style:{fontWeight:"bold"},verticalAlign:"top",zIndex:2},dial:{},pivot:{},tooltip:{headerFormat:""},showInLegend:!1}),b={type:"gauge",pointClass:e.extendClass(e.Point,{setState:function(e){this.state=e}}),angular:!0,drawGraph:L,trackerGroups:["group","dataLabels"],translate:function(){var e=this.yAxis,t=this.options,n=e.center;this.generatePoints(),u(this.points,function(r){var i=f(t.dial,r.dial),s=h(c(i.radius,80))*n[2]/200,o=h(c(i.baseLength,70))*s/100,u=h(c(i.rearLength,10))*s/100,a=i.baseWidth||3,l=i.topWidth||1,p=e.startAngleRad+e.translate(r.y,null,null,null,!0);t.wrap===!1&&(p=Math.max(e.startAngleRad,Math.min(e.endAngleRad,p))),p=p*180/Math.PI,r.shapeType="path",r.shapeArgs={d:i.path||["M",-u,-a/2,"L",o,-a/2,s,-l/2,s,l/2,o,a/2,-u,a/2,"z"],translateX:n[0],translateY:n[1],rotation:p},r.plotX=n[0],r.plotY=n[1]})},drawPoints:function(){var e=this,t=e.yAxis.center,n=e.pivot,r=e.options,i=r.pivot,s=e.chart.renderer;u(e.points,function(t){var n=t.graphic,i=t.shapeArgs,o=i.d,u=f(r.dial,t.dial);n?(n.animate(i),i.d=o):t.graphic=s[t.shapeType](i).attr({stroke:u.borderColor||"none","stroke-width":u.borderWidth||0,fill:u.backgroundColor||"black",rotation:i.rotation}).add(e.group)}),n?n.animate({translateX:t[0],translateY:t[1]}):e.pivot=s.circle(0,0,c(i.radius,5)).attr({"stroke-width":i.borderWidth||0,stroke:i.borderColor||"silver",fill:i.backgroundColor||"black"}).translate(t[0],t[1]).add(e.group)},animate:function(e){var t=this;e||(u(t.points,function(e){var n=e.graphic;n&&(n.attr({rotation:t.yAxis.startAngleRad*180/Math.PI}),n.animate({rotation:e.shapeArgs.rotation},t.options.animation))}),t.animate=null)},render:function(){this.group=this.plotGroup("group","series",this.visible?"visible":"hidden",this.options.zIndex,this.chart.seriesGroup),d.pie.prototype.render.call(this),this.group.clip(this.chart.clipRect)},setData:d.pie.prototype.setData,drawTracker:d.column.prototype.drawTracker},d.gauge=e.extendClass(d.line,b),p.boxplot=f(p.column,{fillColor:"#FFFFFF",lineWidth:1,medianWidth:2,states:{hover:{brightness:-0.3}},threshold:null,tooltip:{pointFormat:'<span style="color:{series.color};font-weight:bold">{series.name}</span><br/>Minimum: {point.low}<br/>Lower quartile: {point.q1}<br/>Median: {point.median}<br/>Higher quartile: {point.q3}<br/>Maximum: {point.high}<br/>'},whiskerLength:"50%",whiskerWidth:2}),d.boxplot=v(d.column,{type:"boxplot",pointArrayMap:["low","q1","median","q3","high"],toYData:function(e){return[e.low,e.q1,e.median,e.q3,e.high]},pointValKey:"high",pointAttrToOptions:{fill:"fillColor",stroke:"color","stroke-width":"lineWidth"},drawDataLabels:L,translate:function(){var e=this.yAxis,t=this.pointArrayMap;d.column.prototype.translate.apply(this),u(this.points,function(n){u(t,function(t){n[t]!==null&&(n[t+"Plot"]=e.translate(n[t],0,1,0,1))})})},drawPoints:function(){var e=this,n=e.points,r=e.options,i=e.chart.renderer,s,o,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,N,C,k,L,A,O=e.doQuartiles!==!1,M=parseInt(e.options.whiskerLength,10)/100;u(n,function(n){d=n.graphic,L=n.shapeArgs,m={},b={},E={},A=n.color||e.color,n.plotY!==t&&((s=n.pointAttr[n.selected?"selected":""],S=L.width,N=T(L.x),C=N+S,k=x(S/2),o=T(O?n.q1Plot:n.lowPlot),a=T(O?n.q3Plot:n.lowPlot),f=T(n.highPlot),l=T(n.lowPlot),m.stroke=n.stemColor||r.stemColor||A,m["stroke-width"]=n.stemWidth||r.stemWidth||r.lineWidth,m.dashstyle=n.stemDashStyle||r.stemDashStyle,b.stroke=n.whiskerColor||r.whiskerColor||A,b["stroke-width"]=n.whiskerWidth||r.whiskerWidth||r.lineWidth,E.stroke=n.medianColor||r.medianColor||A,E["stroke-width"]=n.medianWidth||r.medianWidth||r.lineWidth,h=m["stroke-width"]%2/2,p=N+k+h,v=["M",p,a,"L",p,f,"M",p,o,"L",p,l,"z"],O&&(h=s["stroke-width"]%2/2,p=T(p)+h,o=T(o)+h,a=T(a)+h,N+=h,C+=h,g=["M",N,a,"L",N,o,"L",C,o,"L",C,a,"L",N,a,"z"]),M&&(h=b["stroke-width"]%2/2,f+=h,l+=h,y=["M",p-k*M,f,"L",p+k*M,f,"M",p-k*M,l,"L",p+k*M,l]),h=E["stroke-width"]%2/2,c=x(n.medianPlot)+h,w=["M",N,c,C,c,"z"],d)?(n.stem.animate({d:v}),M&&n.whiskers.animate({d:y}),O&&n.box.animate({d:g}),n.medianShape.animate({d:w})):(n.graphic=d=i.g().add(e.group),n.stem=i.path(v).attr(m).add(d),M&&(n.whiskers=i.path(y).attr(b).add(d)),O&&(n.box=i.path(g).attr(s).add(d)),n.medianShape=i.path(w).attr(E).add(d)))})}}),p.errorbar=f(p.boxplot,{color:"#000000",grouping:!1,linkedTo:":previous",tooltip:{pointFormat:p.arearange.tooltip.pointFormat},whiskerWidth:null}),d.errorbar=v(d.boxplot,{type:"errorbar",pointArrayMap:["low","high"],toYData:function(e){return[e.low,e.high]},pointValKey:"high",doQuartiles:!1,getColumnMetrics:function(){return this.linkedParent&&this.linkedParent.columnMetrics||d.column.prototype.getColumnMetrics.call(this)}}),g(A,"getSeriesExtremes",function(e,t){e.call(this,t);if(!this.isXAxis){var n=this,r=[],i=!0;u(n.series,function(e){if(e.visible&&e.stackKey&&e.type==="waterfall"&&HighchartsAdapter.inArray(e.stackKey)===-1){i&&(n.dataMin=n.dataMax=null,i=!1);var t=e.processedYData,s=t.length,o=t[0],u=t[0],a=e.options.threshold,f=n.stacks,l=e.stackKey,h="-"+l,p,d,v,m;for(m=0;m<s;m++)v=t[m]<a?h:l,p=f[v][m].total,m>a&&(p+=d,f[v][m].setTotal(p),f[v][m]._cum=null),p<o&&(o=p),p>u&&(u=p),d=p;e.dataMin=o,e.dataMax=u,n.dataMin=C(c(n.dataMin,o),o,a),n.dataMax=k(c(n.dataMax,u),u,a),r.push(e.stackKey),typeof a=="number"&&(n.dataMin>=a?(n.dataMin=a,n.ignoreMinPadding=!0):n.dataMax<a&&(n.dataMax=a,n.ignoreMaxPadding=!0))}})}}),p.waterfall=f(p.column,{lineWidth:1,lineColor:"#333",dashStyle:"dot",borderColor:"#333"}),d.waterfall=v(d.column,{type:"waterfall",upColorProp:"fill",pointArrayMap:["y","low"],pointValKey:"y",init:function(e,t){t.stacking=!0,d.column.prototype.init.call(this,e,t)},translate:function(){var e=this.yAxis,t,n,r,i,s,o,u,a,f,l,c,h,p=this.options.borderWidth%2/2;d.column.prototype.translate.apply(this),r=this.points,f=u=r[0],o=a=r[0].y;for(n=1,t=r.length;n<t;n++)i=r[n],s=i.shapeArgs,l=this.getStack(n),c=this.getStack(n-1),h=this.getStackY(c),f===null&&(f=i,a=0),i.y&&!i.isSum&&!i.isIntermediateSum&&(o+=i.y,a+=i.y),i.isSum||i.isIntermediateSum?(i.isIntermediateSum?(l=this.getSumEdges(f,r[n-1]),i.y=a,f=null):(l=this.getSumEdges(u,r[n-1]),i.y=o),s.y=i.plotY=l[1],s.height=l[0]-l[1]):i.y<0?(c=l._cum===null?c.total:l._cum,l._cum=c+i.y,i=N(e.translate(c,0,1))-p,l=e.translate(l._cum,0,1),s.y=i,s.height=N(l-i)):s.height=T(h-s.y)},processData:function(e){w.prototype.processData.call(this,e);var e=this.yData,t=e.length,n,r;for(r=0;r<t;r++)n=e[r],n!==null&&typeof n!="number"&&(e[r]=n==="sum"?null:n==="intermediateSum"?null:n[0])},toYData:function(e){return e.isSum?"sum":e.isIntermediateSum?"intermediateSum":[e.y]},getAttribs:function(){d.column.prototype.getAttribs.apply(this,arguments);var t=this.options,n=t.states,r=t.upColor||this.color,t=e.Color(r).brighten(.1).get(),i=f(this.pointAttr),s=this.upColorProp;i[""][s]=r,i.hover[s]=n.hover.upColor||t,i.select[s]=n.select.upColor||r,u(this.points,function(e){e.y>0&&!e.color&&(e.pointAttr=i,e.color=r)})},getGraphPath:function(){var e=this.data,t=e.length,n=x(this.options.lineWidth+this.options.borderWidth)%2/2,r=[],i,s,o;for(o=1;o<t;o++)s=e[o].shapeArgs,i=e[o-1].shapeArgs,s=["M",i.x+i.width,i.y+n,"L",s.x,i.y+n],e[o-1].y<0&&(s[2]+=i.height,s[5]+=i.height),r=r.concat(s);return r},getStack:function(e){var t=this.yAxis.stacks,n=this.stackKey;return this.processedYData[e]<this.options.threshold&&(n="-"+n),t[n][e]},getStackY:function(e){return N(this.yAxis.translate(e.total,null,!0))},getSumEdges:function(e,t){var n,r,i;return r=this.options.threshold,n=e.y>=r?e.shapeArgs.y+e.shapeArgs.height:e.shapeArgs.y,r=t.y>=r?t.shapeArgs.y:t.shapeArgs.y+t.shapeArgs.height,r>n&&(i=n,n=r,r=i),[n,r]},drawGraph:w.prototype.drawGraph}),p.bubble=f(p.scatter,{dataLabels:{inside:!0,style:{color:"white",textShadow:"0px 0px 3px black"},verticalAlign:"middle"},marker:{lineColor:null,lineWidth:1},minSize:8,maxSize:"20%",tooltip:{pointFormat:"({point.x}, {point.y}), Size: {point.z}"},zThreshold:0}),d.bubble=v(d.scatter,{type:"bubble",pointArrayMap:["y","z"],trackerGroups:["group","dataLabelsGroup"],pointAttrToOptions:{stroke:"lineColor","stroke-width":"lineWidth",fill:"fillColor"},applyOpacity:function(t){var n=this.options.marker,r=c(n.fillOpacity,.5),t=t||n.fillColor||this.color;return r!==1&&(t=e.Color(t).setOpacity(r).get("rgba")),t},convertAttribs:function(){var e=w.prototype.convertAttribs.apply(this,arguments);return e.fill=this.applyOpacity(e.fill),e},getRadii:function(e,t,n,r){var i,s,o,u=this.zData,a=[];for(s=0,i=u.length;s<i;s++)o=t-e,o=o>0?(u[s]-e)/(t-e):.5,a.push(S.round(n+o*(r-n))/2);this.radii=a},animate:function(e){var t=this.options.animation;e||(u(this.points,function(e){var n=e.graphic,e=e.shapeArgs;n&&e&&(n.attr("r",1),n.animate({r:e.r},t))}),this.animate=null)},translate:function(){var e,t=this.data,n,r,i=this.radii;d.scatter.prototype.translate.call(this);for(e=t.length;e--;)n=t[e],r=i[e],n.negative=n.z<(this.options.zThreshold||0),r>=this.minPxSize/2?(n.shapeType="circle",n.shapeArgs={x:n.plotX,y:n.plotY,r:r},n.dlBox={x:n.plotX-r,y:n.plotY-r,width:2*r,height:2*r}):n.shapeArgs=n.plotY=n.dlBox=null},drawLegendSymbol:function(e,t){var n=h(e.itemStyle.fontSize)/2;t.legendSymbol=this.chart.renderer.circle(n,e.baseline-n,n).attr({zIndex:3}).add(t.legendGroup)},drawPoints:d.column.prototype.drawPoints,alignDataLabel:d.column.prototype.alignDataLabel}),y.prototype.beforePadding=function(){var e=this.len,n=this.chart,r=0,i=e,a=this.isXAxis,f=a?"xData":"yData",l=this.min,p={},d=S.min(n.plotWidth,n.plotHeight),v=Number.MAX_VALUE,m=-Number.MAX_VALUE,g=this.max-l,y=e/g,b=[];this.tickPositions&&(u(this.series,function(e){var t=e.options;e.type==="bubble"&&e.visible&&(b.push(e),a)&&(u(["minSize","maxSize"],function(e){var n=t[e],r=/%$/.test(n),n=h(n);p[e]=r?d*n/100:n}),e.minPxSize=p.minSize,e=e.zData,v=S.min(v,S.max(s(e),t.displayNegative===!1?t.zThreshold:-Number.MAX_VALUE)),m=S.max(m,o(e)))}),u(b,function(e){var t=e[f],n=t.length,s;a&&e.getRadii(v,m,p.minSize,p.maxSize);if(g>0)for(;n--;)s=e.radii[n],r=Math.min((t[n]-l)*y-s,r),i=Math.max((t[n]-l)*y+s,i)}),g>0&&c(this.options.min,this.userMin)===t&&(i-=e,y*=(e+r-i)/e,this.min+=r/y,this.max+=i/y))};var _=w.prototype,p=e.Pointer.prototype;_.toXY=function(e){var t,n=this.chart;t=e.plotX;var r=e.plotY;e.rectPlotX=t,e.rectPlotY=r,e.clientX=t/Math.PI*180,t=this.xAxis.postTranslate(e.plotX,this.yAxis.len-r),e.plotX=e.polarPlotX=t.x-n.plotLeft,e.plotY=e.polarPlotY=t.y-n.plotTop},g(d.area.prototype,"init",r),g(d.areaspline.prototype,"init",r),g(d.spline.prototype,"getPointSpline",function(e,t,n,r){var i,s,o,u,a,f,l;return this.chart.polar?(i=n.plotX,s=n.plotY,e=t[r-1],o=t[r+1],this.connectEnds&&(e||(e=t[t.length-2]),o||(o=t[1])),e&&o&&(u=e.plotX,a=e.plotY,t=o.plotX,f=o.plotY,u=(1.5*i+u)/2.5,a=(1.5*s+a)/2.5,o=(1.5*i+t)/2.5,l=(1.5*s+f)/2.5,t=Math.sqrt(Math.pow(u-i,2)+Math.pow(a-s,2)),f=Math.sqrt(Math.pow(o-i,2)+Math.pow(l-s,2)),u=Math.atan2(a-s,u-i),a=Math.atan2(l-s,o-i),l=Math.PI/2+(u+a)/2,Math.abs(u-l)>Math.PI/2&&(l-=Math.PI),u=i+Math.cos(l)*t,a=s+Math.sin(l)*t,o=i+Math.cos(Math.PI+l)*f,l=s+Math.sin(Math.PI+l)*f,n.rightContX=o,n.rightContY=l),r?(n=["C",e.rightContX||e.plotX,e.rightContY||e.plotY,u||i,a||s,i,s],e.rightContX=e.rightContY=null):n=["M",i,s]):n=e.call(this,t,n,r),n}),g(_,"translate",function(e){e.call(this);if(this.chart.polar&&!this.preventPostTranslate)for(var e=this.points,t=e.length;t--;)this.toXY(e[t])}),g(_,"getSegmentPath",function(e,t){var n=this.points;return this.chart.polar&&this.options.connectEnds!==!1&&t[t.length-1]===n[n.length-1]&&n[0].y!==null&&(this.connectEnds=!0,t=[].concat(t,[n[0]])),e.call(this,t)}),g(_,"animate",i),g(E,"animate",i),g(_,"setTooltipPoints",function(e,t){return this.chart.polar&&a(this.xAxis,{tooltipLen:360}),e.call(this,t)}),g(E,"translate",function(e){var t=this.xAxis,n=this.yAxis.len,r=t.center,i=t.startAngleRad,s=this.chart.renderer,o,u;this.preventPostTranslate=!0,e.call(this);if(t.isRadial){t=this.points;for(u=t.length;u--;)o=t[u],e=o.barX+i,o.shapeType="path",o.shapeArgs={d:s.symbols.arc(r[0],r[1],n-o.plotY,null,{start:e,end:e+o.pointWidth,innerR:n-c(o.yBottom,n)})},this.toXY(o)}}),g(E,"alignDataLabel",function(e,t,n,r,i,s){this.chart.polar?(e=t.rectPlotX/Math.PI*180,r.align===null&&(r.align=e>20&&e<160?"left":e>200&&e<340?"right":"center"),r.verticalAlign===null&&(r.verticalAlign=e<45||e>315?"bottom":e>135&&e<225?"top":"middle"),_.alignDataLabel.call(this,t,n,r,i,s)):e.call(this,t,n,r,i,s)}),g(p,"getIndex",function(e,t){var n,r=this.chart,i;return r.polar?(i=r.xAxis[0].center,n=t.chartX-i[0]-r.plotLeft,r=t.chartY-i[1]-r.plotTop,n=180-Math.round(Math.atan2(n,r)/Math.PI*180)):n=e.call(this,t),n}),g(p,"getCoordinates",function(e,t){var n=this.chart,r={xAxis:[],yAxis:[]};return n.polar?u(n.axes,function(e){var i=e.isXAxis,s=e.center,o=t.chartX-s[0]-n.plotLeft,s=t.chartY-s[1]-n.plotTop;r[i?"xAxis":"yAxis"].push({axis:e,value:e.translate(i?Math.PI-Math.atan2(o,s):Math.sqrt(Math.pow(o,2)+Math.pow(s,2)),!0)})}):r=e.call(this,t),r})}(Highcharts),function(e){var t=e.Chart,n=e.addEvent,r=e.removeEvent,i=e.createElement,s=e.discardElement
,o=e.css,u=e.merge,a=e.each,f=e.extend,l=Math,c=l.max,h=document,p=window,d=e.isTouchDevice,v="M",m="L",g="div",y="hidden",b="none",w="highcharts-",E="absolute",S="px",x,T=e.Renderer.prototype.symbols,N=e.getOptions(),C;f(N.lang,{downloadPNG:"Download PNG image",downloadJPEG:"Download JPEG image",downloadPDF:"Download PDF document",downloadSVG:"Download SVG vector image",contextButtonTitle:"Chart context menu"}),N.navigation={menuStyle:{border:"1px solid #A0A0A0",background:"#FFFFFF",padding:"5px 0"},menuItemStyle:{padding:"0 10px",background:b,color:"#303030",fontSize:d?"14px":"11px"},menuItemHoverStyle:{background:"#4572A5",color:"#FFFFFF"},buttonOptions:{symbolFill:"#E0E0E0",symbolSize:14,symbolStroke:"#666",symbolStrokeWidth:3,symbolX:12.5,symbolY:10.5,align:"right",buttonSpacing:3,height:22,theme:{fill:"white",stroke:"none"},verticalAlign:"top",width:24}},N.exporting={type:"image/png",url:"http://export.highcharts.com/",buttons:{contextButton:{symbol:"menu",_titleKey:"contextButtonTitle",menuItems:[{text:"Print chart",onclick:function(){this.print()}},{separator:!0},{textKey:"downloadPNG",onclick:function(){this.exportChart()}},{textKey:"downloadJPEG",onclick:function(){this.exportChart({type:"image/jpeg"})}},{textKey:"downloadPDF",onclick:function(){this.exportChart({type:"application/pdf"})}},{textKey:"downloadSVG",onclick:function(){this.exportChart({type:"image/svg+xml"})}}]}}},e.post=function(e,t){var n,r;r=i("form",{method:"post",action:e,enctype:"multipart/form-data"},{display:b},h.body);for(n in t)i("input",{type:y,name:n,value:t[n]},null,r);r.submit(),s(r)},f(t.prototype,{getSVG:function(t){var n=this,r,o,l,c,p,d,v,m,y=u(n.options,t);return h.createElementNS||(h.createElementNS=function(e,t){return h.createElement(t)}),o=i(g,null,{position:E,top:"-9999em",width:n.chartWidth+S,height:n.chartHeight+S},h.body),v=n.renderTo.style.width,m=n.renderTo.style.height,p=y.exporting.sourceWidth||y.chart.width||/px$/.test(v)&&parseInt(v,10)||600,d=y.exporting.sourceHeight||y.chart.height||/px$/.test(m)&&parseInt(m,10)||400,f(y.chart,{animation:!1,renderTo:o,forExport:!0,width:p,height:d}),y.exporting.enabled=!1,y.chart.plotBackgroundImage=null,y.series=[],a(n.series,function(e){c=u(e.options,{animation:!1,showCheckbox:!1,visible:e.visible}),c.isInternal||y.series.push(c)}),r=new e.Chart(y,n.callback),a(["xAxis","yAxis"],function(e){a(n[e],function(t,n){var i=r[e][n],s=t.getExtremes(),o=s.userMin,u=s.userMax;(o!==x||u!==x)&&i.setExtremes(o,u,!0,!1)})}),l=r.container.innerHTML,y=null,r.destroy(),s(o),l=l.replace(/zIndex="[^"]+"/g,"").replace(/isShadow="[^"]+"/g,"").replace(/symbolName="[^"]+"/g,"").replace(/jQuery[0-9]+="[^"]+"/g,"").replace(/url\([^#]+#/g,"url(#").replace(/<svg /,'<svg xmlns:xlink="http://www.w3.org/1999/xlink" ').replace(/ href=/g," xlink:href=").replace(/\n/," ").replace(/<\/svg>.*?$/,"</svg>").replace(/&nbsp;/g," ").replace(/&shy;/g,"­").replace(/<IMG /g,"<image ").replace(/height=([^" ]+)/g,'height="$1"').replace(/width=([^" ]+)/g,'width="$1"').replace(/hc-svg-href="([^"]+)">/g,'xlink:href="$1"/>').replace(/id=([^" >]+)/g,'id="$1"').replace(/class=([^" ]+)/g,'class="$1"').replace(/ transform /g," ").replace(/:(path|rect)/g,"$1").replace(/style="([^"]+)"/g,function(e){return e.toLowerCase()}),l=l.replace(/(url\(#highcharts-[0-9]+)&quot;/g,"$1").replace(/&quot;/g,"'"),l.match(/ xmlns="/g).length===2&&(l=l.replace(/xmlns="[^"]+"/,"")),l},exportChart:function(t,n){t=t||{};var r=this,i=r.getSVG(u({chart:{borderRadius:0}},r.options.exporting.chartOptions,n,{exporting:{sourceWidth:t.sourceWidth,sourceHeight:t.sourceHeight}}));t=u(r.options.exporting,t),e.post(t.url,{filename:t.filename||"chart",type:t.type,width:t.width||0,scale:t.scale||2,svg:i})},print:function(){var e=this,t=e.container,n=[],r=t.parentNode,i=h.body,s=i.childNodes;if(e.isPrinting)return;e.isPrinting=!0,a(s,function(e,t){e.nodeType===1&&(n[t]=e.style.display,e.style.display=b)}),i.appendChild(t),p.focus(),p.print(),setTimeout(function(){r.appendChild(t),a(s,function(e,t){e.nodeType===1&&(e.style.display=n[t])}),e.isPrinting=!1},1e3)},contextMenu:function(e,t,r,s,u,l,h){var p=this,d=p.options.navigation,v=d.menuItemStyle,m=p.chartWidth,y=p.chartHeight,x="cache-"+e,T=p[x],N=c(u,l),C="3px 3px 10px #888",k,L,A,O;T||(p[x]=T=i(g,{className:w+e},{position:E,zIndex:1e3,padding:N+S},p.container),k=i(g,null,f({MozBoxShadow:C,WebkitBoxShadow:C,boxShadow:C},d.menuStyle),T),L=function(){o(T,{display:b}),h&&h.setState(0)},n(T,"mouseleave",function(){A=setTimeout(L,500)}),n(T,"mouseenter",function(){clearTimeout(A)}),a(t,function(e){if(e){var t=e.separator?i("hr",null,null,k):i(g,{onmouseover:function(){o(this,d.menuItemHoverStyle)},onmouseout:function(){o(this,v)},onclick:function(){L(),e.onclick.apply(p,arguments)},innerHTML:e.text||p.options.lang[e.textKey]},f({cursor:"pointer"},v),k);p.exportDivElements.push(t)}}),p.exportDivElements.push(k,T),p.exportMenuWidth=T.offsetWidth,p.exportMenuHeight=T.offsetHeight),O={display:"block"},r+p.exportMenuWidth>m?O.right=m-r-u-N+S:O.left=r-N+S,s+l+p.exportMenuHeight>y?O.bottom=y-s-N+S:O.top=s+l-N+S,o(T,O)},addButton:function(t){var n=this,r=n.renderer,i=u(n.options.navigation.buttonOptions,t),s=i.onclick,o=i.menuItems,a,l,c={stroke:i.symbolStroke,fill:i.symbolFill},h=i.symbolSize||12,p;n.btnCount||(n.btnCount=0),p=n.btnCount++,n.exportDivElements||(n.exportDivElements=[],n.exportSVGElements=[]);if(i.enabled===!1)return;var d=i.theme,v=d.states,m=v&&v.hover,g=v&&v.select,y;delete d.states,s?y=function(){s.apply(n,arguments)}:o&&(y=function(){n.contextMenu("contextmenu",o,l.translateX,l.translateY,l.width,l.height,l),l.setState(2)}),i.text&&i.symbol?d.paddingLeft=e.pick(d.paddingLeft,25):i.text||f(d,{width:i.width,height:i.height,padding:0}),l=r.button(i.text,0,0,y,d,m,g).attr({title:n.options.lang[i._titleKey],"stroke-linecap":"round"}),i.symbol&&(a=r.symbol(i.symbol,i.symbolX-h/2,i.symbolY-h/2,h,h).attr(f(c,{"stroke-width":i.symbolStrokeWidth||1,zIndex:1})).add(l)),l.add().align(f(i,{width:l.width,x:C}),!0,"spacingBox"),C+=(l.width+i.buttonSpacing)*(i.align==="right"?-1:1),n.exportSVGElements.push(l,a)},destroyExport:function(e){var t=e.target,n,i;for(n=0;n<t.exportSVGElements.length;n++)i=t.exportSVGElements[n],i.onclick=i.ontouchstart=null,t.exportSVGElements[n]=i.destroy();for(n=0;n<t.exportDivElements.length;n++)i=t.exportDivElements[n],r(i,"mouseleave"),t.exportDivElements[n]=i.onmouseout=i.onmouseover=i.ontouchstart=i.onclick=null,s(i)}}),T.menu=function(e,t,n,r){var i=[v,e,t+2.5,m,e+n,t+2.5,v,e,t+r/2+.5,m,e+n,t+r/2+.5,v,e,t+r-1.5,m,e+n,t+r-1.5];return i},t.prototype.callbacks.push(function(e){var t,r=e.options.exporting,i=r.buttons;C=0;if(r.enabled!==!1){for(t in i)e.addButton(i[t]);n(e,"destroy",e.destroyExport)}})}(Highcharts),function(e){typeof define=="function"&&define.amd?define(["jquery"],e):e(window.jQuery||window.$)}(function(e){var t={className:"autosizejs",append:"",callback:!1,resizeDelay:10},n='<textarea tabindex="-1" style="position:absolute; top:-999px; left:0; right:auto; bottom:auto; border:0; -moz-box-sizing:content-box; -webkit-box-sizing:content-box; box-sizing:content-box; word-wrap:break-word; height:0 !important; min-height:0 !important; overflow:hidden; transition:none; -webkit-transition:none; -moz-transition:none;"/>',r=["fontFamily","fontSize","fontWeight","fontStyle","letterSpacing","textTransform","wordSpacing","textIndent"],i,s=e(n).data("autosize",!0)[0];s.style.lineHeight="99px",e(s).css("lineHeight")==="99px"&&r.push("lineHeight"),s.style.lineHeight="",e.fn.autosize=function(n){return n=e.extend({},t,n||{}),s.parentNode!==document.body&&e(document.body).append(s),this.each(function(){function d(){var n,r;"getComputedStyle"in window?(n=window.getComputedStyle(t),r=t.getBoundingClientRect().width,e.each(["paddingLeft","paddingRight","borderLeftWidth","borderRightWidth"],function(e,t){r-=parseInt(n[t],10)}),s.style.width=r+"px"):s.style.width=Math.max(o.width(),0)+"px"}function v(){var a={};i=t,s.className=n.className,u=parseInt(o.css("maxHeight"),10),e.each(r,function(e,t){a[t]=o.css(t)}),e(s).css(a),d();if("oninput"in t&&"setSelectionRange"in t){var f=s.offsetWidth,l=t.selectionStart;t.value+=" ",t.value=t.value.slice(0,-1),t.setSelectionRange(l,l)}}function m(){var e,r;i!==t?v():d(),s.value=t.value+n.append,s.style.overflowY=t.style.overflowY,r=parseInt(t.style.height,10),s.scrollTop=0,s.scrollTop=9e4,e=s.scrollTop,u&&e>u?(t.style.overflowY="scroll",e=u):(t.style.overflowY="hidden",e<a&&(e=a)),e+=f,r!==e&&(t.style.height=e+"px",l&&n.callback.call(t,t))}function g(){clearTimeout(h),h=setTimeout(function(){var e=o.width();e!==p&&(p=e,m())},parseInt(n.resizeDelay,10))}var t=this,o=e(t),u,a,f=0,l=e.isFunction(n.callback),c={height:t.style.height,overflow:t.style.overflow,overflowY:t.style.overflowY,wordWrap:t.style.wordWrap,resize:t.style.resize},h,p=o.width();if(o.data("autosize"))return;o.data("autosize",!0);if(o.css("box-sizing")==="border-box"||o.css("-moz-box-sizing")==="border-box"||o.css("-webkit-box-sizing")==="border-box")f=o.outerHeight()-o.height();a=Math.max(parseInt(o.css("minHeight"),10)-f||0,o.height()),o.css({overflow:"hidden",overflowY:"hidden",wordWrap:"break-word",resize:o.css("resize")==="none"||o.css("resize")==="vertical"?"none":"horizontal"}),"onpropertychange"in t?"oninput"in t?o.on("input.autosize keyup.autosize",m):o.on("propertychange.autosize",function(){event.propertyName==="value"&&m()}):o.on("input.autosize",m),n.resizeDelay!==!1&&e(window).on("resize.autosize",g),o.on("autosize.resize",m),o.on("autosize.resizeIncludeStyle",function(){i=null,m()}),o.on("autosize.destroy",function(){i=null,clearTimeout(h),e(window).off("resize",g),o.off("autosize").off(".autosize").css(c).removeData("autosize")}),m()})}}),function(e){var t,n,r=0,i={control:e('<div class="colorPicker-picker">&nbsp;</div>'),palette:e('<div id="colorPicker_palette" class="colorPicker-palette" />'),swatch:e('<div class="colorPicker-swatch">&nbsp;</div>'),hexLabel:e('<label for="colorPicker_hex">Hex</label>'),hexField:e('<input type="text" id="colorPicker_hex" />')},s="transparent",o;e.fn.colorPicker=function(t){return this.each(function(){var n=e(this),o=e.extend({},e.fn.colorPicker.defaults,t),u=e.fn.colorPicker.toHex(n.val().length>0?n.val():o.pickerDefault),a=i.control.clone(),f=i.palette.clone().attr("id","colorPicker_palette-"+r),l=i.hexLabel.clone(),c=i.hexField.clone(),h=f[0].id,p;e.each(o.colors,function(t){p=i.swatch.clone(),o.colors[t]===s?(p.addClass(s).text("X"),e.fn.colorPicker.bindPalette(c,p,s)):(p.css("background-color","#"+this),e.fn.colorPicker.bindPalette(c,p)),p.appendTo(f)}),l.attr("for","colorPicker_hex-"+r),c.attr({id:"colorPicker_hex-"+r,value:u}),c.bind("keydown",function(t){if(t.keyCode===13){var r=e.fn.colorPicker.toHex(e(this).val());e.fn.colorPicker.changeColor(r?r:n.val())}t.keyCode===27&&e.fn.colorPicker.hidePalette()}),c.bind("keyup",function(t){var r=e.fn.colorPicker.toHex(e(t.target).val());e.fn.colorPicker.previewColor(r?r:n.val())}),e('<div class="colorPicker_hexWrap" />').append(l).appendTo(f),f.find(".colorPicker_hexWrap").append(c),e("body").append(f),f.hide(),a.css("background-color",u),a.bind("click",function(){n.is(":not(:disabled)")&&e.fn.colorPicker.togglePalette(e("#"+h),e(this))}),t&&t.onColorChange?a.data("onColorChange",t.onColorChange):a.data("onColorChange",function(){}),n.after(a),n.bind("change",function(){n.next(".colorPicker-picker").css("background-color",e.fn.colorPicker.toHex(e(this).val()))}),n.val(u).hide(),r++})},e.extend(!0,e.fn.colorPicker,{toHex:function(e){if(e.match(/[0-9A-F]{6}|[0-9A-F]{3}$/i))return e.charAt(0)==="#"?e:"#"+e;if(!e.match(/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/))return!1;var t=[parseInt(RegExp.$1,10),parseInt(RegExp.$2,10),parseInt(RegExp.$3,10)],n=function(e){if(e.length<2)for(var t=0,n=2-e.length;t<n;t++)e="0"+e;return e};if(t.length===3){var r=n(t[0].toString(16)),i=n(t[1].toString(16)),s=n(t[2].toString(16));return"#"+r+i+s}},checkMouse:function(r,i){var s=n,o=e(r.target).parents("#"+s.attr("id")).length;if(r.target===e(s)[0]||r.target===t[0]||o>0)return;e.fn.colorPicker.hidePalette()},hidePalette:function(){e(document).unbind("mousedown",e.fn.colorPicker.checkMouse),e(".colorPicker-palette").hide()},showPalette:function(n){var r=t.prev("input").val();n.css({top:t.offset().top+t.outerHeight(),left:t.offset().left}),e("#color_value").val(r),n.show(),e(document).bind("mousedown",e.fn.colorPicker.checkMouse)},togglePalette:function(r,i){i&&(t=i),n=r,n.is(":visible")?e.fn.colorPicker.hidePalette():e.fn.colorPicker.showPalette(r)},changeColor:function(n){t.css("background-color",n),t.prev("input").val(n).change(),e.fn.colorPicker.hidePalette(),t.data("onColorChange").call(t,e(t).prev("input").attr("id"),n)},previewColor:function(e){t.css("background-color",e)},bindPalette:function(n,r,i){i=i?i:e.fn.colorPicker.toHex(r.css("background-color")),r.bind({click:function(t){o=i,e.fn.colorPicker.changeColor(i)},mouseover:function(t){o=n.val(),e(this).css("border-color","#598FEF"),n.val(i),e.fn.colorPicker.previewColor(i)},mouseout:function(r){e(this).css("border-color","#000"),n.val(t.css("background-color")),n.val(o),e.fn.colorPicker.previewColor(o)}})}}),e.fn.colorPicker.defaults={pickerDefault:"FFFFFF",colors:["000000","993300","333300","000080","333399","333333","800000","FF6600","808000","008000","008080","0000FF","666699","808080","FF0000","FF9900","99CC00","339966","33CCCC","3366FF","800080","999999","FF00FF","FFCC00","FFFF00","00FF00","00FFFF","00CCFF","993366","C0C0C0","FF99CC","FFCC99","FFFF99","CCFFFF","99CCFF","FFFFFF"],addColors:[]}}(jQuery),function(e){e.fn.zclip=function(t){if(typeof t=="object"&&!t.length){var n=e.extend({path:"ZeroClipboard.swf",copy:null,beforeCopy:null,afterCopy:null,clickAfter:!0,setHandCursor:!0,setCSSEffects:!0},t);return this.each(function(){var t=e(this);if(t.is(":visible")&&(typeof n.copy=="string"||e.isFunction(n.copy))){ZeroClipboard.setMoviePath(n.path);var r=new ZeroClipboard.Client;e.isFunction(n.copy)&&t.bind("zClip_copy",n.copy),e.isFunction(n.beforeCopy)&&t.bind("zClip_beforeCopy",n.beforeCopy),e.isFunction(n.afterCopy)&&t.bind("zClip_afterCopy",n.afterCopy),r.setHandCursor(n.setHandCursor),r.setCSSEffects(n.setCSSEffects),r.addEventListener("mouseOver",function(e){t.trigger("mouseenter")}),r.addEventListener("mouseOut",function(e){t.trigger("mouseleave")}),r.addEventListener("mouseDown",function(i){t.trigger("mousedown"),e.isFunction(n.copy)?r.setText(t.triggerHandler("zClip_copy")):r.setText(n.copy),e.isFunction(n.beforeCopy)&&t.trigger("zClip_beforeCopy")}),r.addEventListener("complete",function(r,i){e.isFunction(n.afterCopy)?t.trigger("zClip_afterCopy"):(i.length>500&&(i=i.substr(0,500)+"...\n\n("+(i.length-500)+" characters not shown)"),t.removeClass("hover"),alert("Copied text to clipboard:\n\n "+i)),n.clickAfter&&t.trigger("click")}),r.glue(t[0],t.parent()[0]),e(window).bind("load resize",function(){r.reposition()})}})}if(typeof t=="string")return this.each(function(){var n=e(this);t=t.toLowerCase();var r=n.data("zclipId"),i=e("#"+r+".zclip");t=="remove"?(i.remove(),n.removeClass("active hover")):t=="hide"?(i.hide(),n.removeClass("active hover")):t=="show"&&i.show()})}}(jQuery);var ZeroClipboard={version:"1.0.7",clients:{},moviePath:"ZeroClipboard.swf",nextId:1,$:function(e){return typeof e=="string"&&(e=document.getElementById(e)),e.addClass||(e.hide=function(){this.style.display="none"},e.show=function(){this.style.display=""},e.addClass=function(e){this.removeClass(e),this.className+=" "+e},e.removeClass=function(e){var t=this.className.split(/\s+/),n=-1;for(var r=0;r<t.length;r++)t[r]==e&&(n=r,r=t.length);return n>-1&&(t.splice(n,1),this.className=t.join(" ")),this},e.hasClass=function(e){return!!this.className.match(new RegExp("\\s*"+e+"\\s*"))}),e},setMoviePath:function(e){this.moviePath=e},dispatch:function(e,t,n){var r=this.clients[e];r&&r.receiveEvent(t,n)},register:function(e,t){this.clients[e]=t},getDOMObjectPosition:function(e,t){var n={left:0,top:0,width:e.width?e.width:e.offsetWidth,height:e.height?e.height:e.offsetHeight};return e&&e!=t&&(n.left+=e.offsetLeft,n.top+=e.offsetTop),n},Client:function(e){this.handlers={},this.id=ZeroClipboard.nextId++,this.movieId="ZeroClipboardMovie_"+this.id,ZeroClipboard.register(this.id,this),e&&this.glue(e)}};ZeroClipboard.Client.prototype={id:0,ready:!1,movie:null,clipText:"",handCursorEnabled:!0,cssEffects:!0,handlers:null,glue:function(e,t,n){this.domElement=ZeroClipboard.$(e);var r=99;this.domElement.style.zIndex&&(r=parseInt(this.domElement.style.zIndex,10)+1),typeof t=="string"?t=ZeroClipboard.$(t):typeof t=="undefined"&&(t=document.getElementsByTagName("body")[0]);var i=ZeroClipboard.getDOMObjectPosition(this.domElement,t);this.div=document.createElement("div"),this.div.className="zclip",this.div.id="zclip-"+this.movieId,$(this.domElement).data("zclipId","zclip-"+this.movieId);var s=this.div.style;s.position="absolute",s.left=""+i.left+"px",s.top=""+i.top+"px",s.width=""+i.width+"px",s.height=""+i.height+"px",s.zIndex=r;if(typeof n=="object")for(addedStyle in n)s[addedStyle]=n[addedStyle];t.appendChild(this.div),this.div.innerHTML=this.getHTML(i.width,i.height)},getHTML:function(e,t){var n="",r="id="+this.id+"&width="+e+"&height="+t;if(navigator.userAgent.match(/MSIE/)){var i=location.href.match(/^https/i)?"https://":"http://";n+='<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="'+i+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" width="'+e+'" height="'+t+'" id="'+this.movieId+'" align="middle"><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="false" /><param name="movie" value="'+ZeroClipboard.moviePath+'" /><param name="loop" value="false" /><param name="menu" value="false" /><param name="quality" value="best" /><param name="bgcolor" value="#ffffff" /><param name="flashvars" value="'+r+'"/><param name="wmode" value="transparent"/></object>'}else n+='<embed id="'+this.movieId+'" src="'+ZeroClipboard.moviePath+'" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="'+e+'" height="'+t+'" name="'+this.movieId+'" align="middle" allowScriptAccess="always" allowFullScreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="'+r+'" wmode="transparent" />';return n},hide:function(){this.div&&(this.div.style.left="-2000px")},show:function(){this.reposition()},destroy:function(){if(this.domElement&&this.div){this.hide(),this.div.innerHTML="";var e=document.getElementsByTagName("body")[0];try{e.removeChild(this.div)}catch(t){}this.domElement=null,this.div=null}},reposition:function(e){e&&(this.domElement=ZeroClipboard.$(e),this.domElement||this.hide());if(this.domElement&&this.div){var t=ZeroClipboard.getDOMObjectPosition(this.domElement),n=this.div.style;n.left=""+t.left+"px",n.top=""+t.top+"px"}},setText:function(e){this.clipText=e,this.ready&&this.movie.setText(e)},addEventListener:function(e,t){e=e.toString().toLowerCase().replace(/^on/,""),this.handlers[e]||(this.handlers[e]=[]),this.handlers[e].push(t)},setHandCursor:function(e){this.handCursorEnabled=e,this.ready&&this.movie.setHandCursor(e)},setCSSEffects:function(e){this.cssEffects=!!e},receiveEvent:function(e,t){e=e.toString().toLowerCase().replace(/^on/,"");switch(e){case"load":this.movie=document.getElementById(this.movieId);if(!this.movie){var n=this;setTimeout(function(){n.receiveEvent("load",null)},1);return}if(!this.ready&&navigator.userAgent.match(/Firefox/)&&navigator.userAgent.match(/Windows/)){var n=this;setTimeout(function(){n.receiveEvent("load",null)},100),this.ready=!0;return}this.ready=!0;try{this.movie.setText(this.clipText)}catch(r){}try{this.movie.setHandCursor(this.handCursorEnabled)}catch(r){}break;case"mouseover":this.domElement&&this.cssEffects&&(this.domElement.addClass("hover"),this.recoverActive&&this.domElement.addClass("active"));break;case"mouseout":this.domElement&&this.cssEffects&&(this.recoverActive=!1,this.domElement.hasClass("active")&&(this.domElement.removeClass("active"),this.recoverActive=!0),this.domElement.removeClass("hover"));break;case"mousedown":this.domElement&&this.cssEffects&&this.domElement.addClass("active");break;case"mouseup":this.domElement&&this.cssEffects&&(this.domElement.removeClass("active"),this.recoverActive=!1)}if(this.handlers[e])for(var i=0,s=this.handlers[e].length;i<s;i++){var o=this.handlers[e][i];typeof o=="function"?o(this,t):typeof o=="object"&&o.length==2?o[0][o[1]](this,t):typeof o=="string"&&window[o](this,t)}}},function(e,t,n){function i(e){return e}function s(e){return decodeURIComponent(e.replace(r," "))}var r=/\+/g,o=e.cookie=function(r,u,a){if(u!==n){a=e.extend({},o.defaults,a),u===null&&(a.expires=-1);if(typeof a.expires=="number"){var f=a.expires,l=a.expires=new Date;l.setDate(l.getDate()+f)}return u=o.json?JSON.stringify(u):String(u),t.cookie=[encodeURIComponent(r),"=",o.raw?u:encodeURIComponent(u),a.expires?"; expires="+a.expires.toUTCString():"",a.path?"; path="+a.path:"",a.domain?"; domain="+a.domain:"",a.secure?"; secure":""].join("")}var c=o.raw?i:s,h=t.cookie.split("; ");for(var p=0,d=h.length;p<d;p++){var v=h[p].split("=");if(c(v.shift())===r){var m=c(v.join("="));return o.json?JSON.parse(m):m}}return null};o.defaults={},e.removeCookie=function(t,n){return e.cookie(t)!==null?(e.cookie(t,null,n),!0):!1}}(jQuery,document),function(e,t,n){function o(t,n){var i=this.element=t,o=this.options=e.extend({maxChars:e(i).attr("maxlength")?e(i).attr("maxlength"):e(i).data(r.toLowerCase()+"-limit"),onCharsFull:function(){},onCharsEmpty:function(){},onCharsValid:function(){}},s,n);if(!o.maxChars)return;this._defaults=s,this._name=r,this.init(i,o)}var r="charLimiter",i=t.document,s={counterClass:"counter",generateCounter:!1,insert:"after",forceLimit:!0,textFormat:"{r}"};o.prototype.init=function(t,n){var r=n.maxChars;if(n.generateCounter===!0){var i=e("<span>",{"class":n.counterClass,text:r});e(t).data("sp",i)[n.insert](i)}else e(t).each(function(){e("."+n.counterClass+'[data-counter-rel="'+e(this).data("counter-rel")+'"]').html(r)});e(t).on("keypress keyup keydown change input",function(){var t,i=e(this).val().length,s=r-i;s<=0?n.onCharsFull(this):(i===0&&n.onCharsEmpty(this),n.onCharsValid(this));if(n.forceLimit&&i>r){var o=e(this).val();e(this).val(o.substr(0,r)),s=0}t=n.textFormat.replace(/{r}/g,s).replace(/{rs}/g,s===1||s===-1?"":"s").replace(/{c}/g,i).replace(/{cs}/g,i===1||s===-1?"":"s").replace(/{m}/g,r),n.generateCounter===!0?e(this).data("sp").html(t):e("."+n.counterClass+'[data-counter-rel="'+e(this).data("counter-rel")+'"]').html(t)}).change()},e.fn[r]=function(t){return this.each(function(){e.data(this,"plugin_"+r)||e.data(this,"plugin_"+r,new o(this,t))})}}(jQuery,window),function(e){e.Jcrop=function(t,n){function a(e){return Math.round(e)+"px"}function f(e){return r.baseClass+"-"+e}function l(){return e.fx.step.hasOwnProperty("backgroundColor")}function c(t){var n=e(t).offset();return[n.left,n.top]}function h(e){return[e.pageX-i[0],e.pageY-i[1]]}function p(t){typeof t!="object"&&(t={}),r=e.extend(r,t),e.each(["onChange","onSelect","onRelease","onDblClick"],function(e,t){typeof r[t]!="function"&&(r[t]=function(){})})}function d(e,t,n){i=c(A),nt.setCursor(e==="move"?e:e+"-resize");if(e==="move")return nt.activateHandlers(m(t),E,n);var r=Z.getFixed(),s=g(e),o=Z.getCorner(g(s));Z.setPressed(Z.getCorner(s)),Z.setCurrent(o),nt.activateHandlers(v(e,r),E,n)}function v(e,t){return function(n){if(!r.aspectRatio)switch(e){case"e":n[1]=t.y2;break;case"w":n[1]=t.y2;break;case"n":n[0]=t.x2;break;case"s":n[0]=t.x2}else switch(e){case"e":n[1]=t.y+1;break;case"w":n[1]=t.y+1;break;case"n":n[0]=t.x+1;break;case"s":n[0]=t.x+1}Z.setCurrent(n),tt.update()}}function m(e){var t=e;return rt.watchKeys(),function(e){Z.moveOffset([e[0]-t[0],e[1]-t[1]]),t=e,tt.update()}}function g(e){switch(e){case"n":return"sw";case"s":return"nw";case"e":return"nw";case"w":return"ne";case"ne":return"sw";case"nw":return"se";case"se":return"nw";case"sw":return"ne"}}function y(e){return function(t){return r.disabled?!1:e==="move"&&!r.allowMove?!1:(i=c(A),K=!0,d(e,h(t)),t.stopPropagation(),t.preventDefault(),!1)}}function b(e,t,n){var r=e.width(),i=e.height();r>t&&t>0&&(r=t,i=t/e.width()*e.height()),i>n&&n>0&&(i=n,r=n/e.height()*e.width()),X=e.width()/r,V=e.height()/i,e.width(r).height(i)}function w(e){return{x:e.x*X,y:e.y*V,x2:e.x2*X,y2:e.y2*V,w:e.w*X,h:e.h*V}}function E(e){var t=Z.getFixed();t.w>r.minSelect[0]&&t.h>r.minSelect[1]?(tt.enableHandles(),tt.done()):tt.release(),nt.setCursor(r.allowSelect?"crosshair":"default")}function S(e){if(r.disabled)return!1;if(!r.allowSelect)return!1;K=!0,i=c(A),tt.disableHandles(),nt.setCursor("crosshair");var t=h(e);return Z.setPressed(t),tt.update(),nt.activateHandlers(x,E,e.type.substring(0,5)==="touch"),rt.watchKeys(),e.stopPropagation(),e.preventDefault(),!1}function x(e){Z.setCurrent(e),tt.update()}function T(){var t=e("<div></div>").addClass(f("tracker"));return o&&t.css({opacity:0,backgroundColor:"white"}),t}function it(e){_.removeClass().addClass(f("holder")).addClass(e)}function st(e,t){function b(){window.setTimeout(w,c)}var n=e[0]/X,i=e[1]/V,s=e[2]/X,o=e[3]/V;if(Q)return;var u=Z.flipCoords(n,i,s,o),a=Z.getFixed(),f=[a.x,a.y,a.x2,a.y2],l=f,c=r.animationDelay,h=u[0]-f[0],p=u[1]-f[1],d=u[2]-f[2],v=u[3]-f[3],m=0,g=r.swingSpeed;n=l[0],i=l[1],s=l[2],o=l[3],tt.animMode(!0);var y,w=function(){return function(){m+=(100-m)/g,l[0]=Math.round(n+m/100*h),l[1]=Math.round(i+m/100*p),l[2]=Math.round(s+m/100*d),l[3]=Math.round(o+m/100*v),m>=99.8&&(m=100),m<100?(ut(l),b()):(tt.done(),tt.animMode(!1),typeof t=="function"&&t.call(yt))}}();b()}function ot(e){ut([e[0]/X,e[1]/V,e[2]/X,e[3]/V]),r.onSelect.call(yt,w(Z.getFixed())),tt.enableHandles()}function ut(e){Z.setPressed([e[0],e[1]]),Z.setCurrent([e[2],e[3]]),tt.update()}function at(){return w(Z.getFixed())}function ft(){return Z.getFixed()}function lt(e){p(e),gt()}function ct(){r.disabled=!0,tt.disableHandles(),tt.setCursor("default"),nt.setCursor("default")}function ht(){r.disabled=!1,gt()}function pt(){tt.done(),nt.activateHandlers(null,null)}function dt(){_.remove(),C.show(),C.css("visibility","visible"),e(t).removeData("Jcrop")}function vt(e,t){tt.release(),ct();var n=new Image;n.onload=function(){var i=n.width,s=n.height,o=r.boxWidth,u=r.boxHeight;A.width(i).height(s),A.attr("src",e),D.attr("src",e),b(A,o,u),O=A.width(),M=A.height(),D.width(O).height(M),F.width(O+j*2).height(M+j*2),_.width(O).height(M),et.resize(O,M),ht(),typeof t=="function"&&t.call(yt)},n.src=e}function mt(e,t,n){var i=t||r.bgColor;r.bgFade&&l()&&r.fadeTime&&!n?e.animate({backgroundColor:i},{queue:!1,duration:r.fadeTime}):e.css("backgroundColor",i)}function gt(e){r.allowResize?e?tt.enableOnly():tt.enableHandles():tt.disableHandles(),nt.setCursor(r.allowSelect?"crosshair":"default"),tt.setCursor(r.allowMove?"move":"default"),r.hasOwnProperty("trueSize")&&(X=r.trueSize[0]/O,V=r.trueSize[1]/M),r.hasOwnProperty("setSelect")&&(ot(r.setSelect),tt.done(),delete r.setSelect),et.refresh(),r.bgColor!=I&&(mt(r.shade?et.getShades():_,r.shade?r.shadeColor||r.bgColor:r.bgColor),I=r.bgColor),q!=r.bgOpacity&&(q=r.bgOpacity,r.shade?et.refresh():tt.setBgOpacity(q)),R=r.maxSize[0]||0,U=r.maxSize[1]||0,z=r.minSize[0]||0,W=r.minSize[1]||0,r.hasOwnProperty("outerImage")&&(A.attr("src",r.outerImage),delete r.outerImage),tt.refresh()}var r=e.extend({},e.Jcrop.defaults),i,s=navigator.userAgent.toLowerCase(),o=/msie/.test(s),u=/msie [1-6]\./.test(s);typeof t!="object"&&(t=e(t)[0]),typeof n!="object"&&(n={}),p(n);var N={border:"none",visibility:"visible",margin:0,padding:0,position:"absolute",top:0,left:0},C=e(t),k=!0;if(t.tagName=="IMG"){if(C[0].width!=0&&C[0].height!=0)C.width(C[0].width),C.height(C[0].height);else{var L=new Image;L.src=C[0].src,C.width(L.width),C.height(L.height)}var A=C.clone().removeAttr("id").css(N).show();A.width(C.width()),A.height(C.height()),C.after(A).hide()}else A=C.css(N).show(),k=!1,r.shade===null&&(r.shade=!0);b(A,r.boxWidth,r.boxHeight);var O=A.width(),M=A.height(),_=e("<div />").width(O).height(M).addClass(f("holder")).css({position:"relative",backgroundColor:r.bgColor}).insertAfter(C).append(A);r.addClass&&_.addClass(r.addClass);var D=e("<div />"),P=e("<div />").width("100%").height("100%").css({zIndex:310,position:"absolute",overflow:"hidden"}),H=e("<div />").width("100%").height("100%").css("zIndex",320),B=e("<div />").css({position:"absolute",zIndex:600}).dblclick(function(){var e=Z.getFixed();r.onDblClick.call(yt,e)}).insertBefore(A).append(P,H);k&&(D=e("<img />").attr("src",A.attr("src")).css(N).width(O).height(M),P.append(D)),u&&B.css({overflowY:"hidden"});var j=r.boundary,F=T().width(O+j*2).height(M+j*2).css({position:"absolute",top:a(-j),left:a(-j),zIndex:290}).mousedown(S),I=r.bgColor,q=r.bgOpacity,R,U,z,W,X,V,J=!0,K,Q,G;i=c(A);var Y=function(){function e(){var e={},t=["touchstart","touchmove","touchend"],n=document.createElement("div"),r;try{for(r=0;r<t.length;r++){var i=t[r];i="on"+i;var s=i in n;s||(n.setAttribute(i,"return;"),s=typeof n[i]=="function"),e[t[r]]=s}return e.touchstart&&e.touchend&&e.touchmove}catch(o){return!1}}function t(){return r.touchSupport===!0||r.touchSupport===!1?r.touchSupport:e()}return{createDragger:function(e){return function(t){return r.disabled?!1:e==="move"&&!r.allowMove?!1:(i=c(A),K=!0,d(e,h(Y.cfilter(t)),!0),t.stopPropagation(),t.preventDefault(),!1)}},newSelection:function(e){return S(Y.cfilter(e))},cfilter:function(e){return e.pageX=e.originalEvent.changedTouches[0].pageX,e.pageY=e.originalEvent.changedTouches[0].pageY,e},isSupported:e,support:t()}}(),Z=function(){function u(r){r=p(r),n=e=r[0],i=t=r[1]}function a(e){e=p(e),s=e[0]-n,o=e[1]-i,n=e[0],i=e[1]}function f(){return[s,o]}function l(r){var s=r[0],o=r[1];0>e+s&&(s-=s+e),0>t+o&&(o-=o+t),M<i+o&&(o+=M-(i+o)),O<n+s&&(s+=O-(n+s)),e+=s,n+=s,t+=o,i+=o}function c(e){var t=h();switch(e){case"ne":return[t.x2,t.y];case"nw":return[t.x,t.y];case"se":return[t.x2,t.y2];case"sw":return[t.x,t.y2]}}function h(){if(!r.aspectRatio)return v();var s=r.aspectRatio,o=r.minSize[0]/X,u=r.maxSize[0]/X,a=r.maxSize[1]/V,f=n-e,l=i-t,c=Math.abs(f),h=Math.abs(l),p=c/h,g,y,b,w;return u===0&&(u=O*10),a===0&&(a=M*10),p<s?(y=i,b=h*s,g=f<0?e-b:b+e,g<0?(g=0,w=Math.abs((g-e)/s),y=l<0?t-w:w+t):g>O&&(g=O,w=Math.abs((g-e)/s),y=l<0?t-w:w+t)):(g=n,w=c/s,y=l<0?t-w:t+w,y<0?(y=0,b=Math.abs((y-t)*s),g=f<0?e-b:b+e):y>M&&(y=M,b=Math.abs(y-t)*s,g=f<0?e-b:b+e)),g>e?(g-e<o?g=e+o:g-e>u&&(g=e+u),y>t?y=t+(g-e)/s:y=t-(g-e)/s):g<e&&(e-g<o?g=e-o:e-g>u&&(g=e-u),y>t?y=t+(e-g)/s:y=t-(e-g)/s),g<0?(e-=g,g=0):g>O&&(e-=g-O,g=O),y<0?(t-=y,y=0):y>M&&(t-=y-M,y=M),m(d(e,t,g,y))}function p(e){return e[0]<0&&(e[0]=0),e[1]<0&&(e[1]=0),e[0]>O&&(e[0]=O),e[1]>M&&(e[1]=M),[Math.round(e[0]),Math.round(e[1])]}function d(e,t,n,r){var i=e,s=n,o=t,u=r;return n<e&&(i=n,s=e),r<t&&(o=r,u=t),[i,o,s,u]}function v(){var r=n-e,s=i-t,o;return R&&Math.abs(r)>R&&(n=r>0?e+R:e-R),U&&Math.abs(s)>U&&(i=s>0?t+U:t-U),W/V&&Math.abs(s)<W/V&&(i=s>0?t+W/V:t-W/V),z/X&&Math.abs(r)<z/X&&(n=r>0?e+z/X:e-z/X),e<0&&(n-=e,e-=e),t<0&&(i-=t,t-=t),n<0&&(e-=n,n-=n),i<0&&(t-=i,i-=i),n>O&&(o=n-O,e-=o,n-=o),i>M&&(o=i-M,t-=o,i-=o),e>O&&(o=e-M,i-=o,t-=o),t>M&&(o=t-M,i-=o,t-=o),m(d(e,t,n,i))}function m(e){return{x:e[0],y:e[1],x2:e[2],y2:e[3],w:e[2]-e[0],h:e[3]-e[1]}}var e=0,t=0,n=0,i=0,s,o;return{flipCoords:d,setPressed:u,setCurrent:a,getOffset:f,moveOffset:l,getCorner:c,getFixed:h}}(),et=function(){function s(e,t){i.left.css({height:a(t)}),i.right.css({height:a(t)})}function o(){return u(Z.getFixed())}function u(e){i.top.css({left:a(e.x),width:a(e.w),height:a(e.y)}),i.bottom.css({top:a(e.y2),left:a(e.x),width:a(e.w),height:a(M-e.y2)}),i.right.css({left:a(e.x2),width:a(O-e.x2)}),i.left.css({width:a(e.x)})}function f(){return e("<div />").css({position:"absolute",backgroundColor:r.shadeColor||r.bgColor}).appendTo(n)}function l(){t||(t=!0,n.insertBefore(A),o(),tt.setBgOpacity(1,0,1),D.hide(),c(r.shadeColor||r.bgColor,1),tt.isAwake()?p(r.bgOpacity,1):p(1,1))}function c(e,t){mt(v(),e,t)}function h(){t&&(n.remove(),D.show(),t=!1,tt.isAwake()?tt.setBgOpacity(r.bgOpacity,1,1):(tt.setBgOpacity(1,1,1),tt.disableHandles()),mt(_,0,1))}function p(e,i){t&&(r.bgFade&&!i?n.animate({opacity:1-e},{queue:!1,duration:r.fadeTime}):n.css({opacity:1-e}))}function d(){r.shade?l():h(),tt.isAwake()&&p(r.bgOpacity)}function v(){return n.children()}var t=!1,n=e("<div />").css({position:"absolute",zIndex:240,opacity:0}),i={top:f(),left:f().height(M),right:f().height(M),bottom:f()};return{update:o,updateRaw:u,getShades:v,setBgColor:c,enable:l,disable:h,resize:s,refresh:d,opacity:p}}(),tt=function(){function l(t){var n=e("<div />")
.css({position:"absolute",opacity:r.borderOpacity}).addClass(f(t));return P.append(n),n}function c(t,n){var r=e("<div />").mousedown(y(t)).css({cursor:t+"-resize",position:"absolute",zIndex:n}).addClass("ord-"+t);return Y.support&&r.bind("touchstart.jcrop",Y.createDragger(t)),H.append(r),r}function h(e){var t=r.handleSize,i=c(e,n++).css({opacity:r.handleOpacity}).addClass(f("handle"));return t&&i.width(t).height(t),i}function p(e){return c(e,n++).addClass("jcrop-dragbar")}function d(e){var t;for(t=0;t<e.length;t++)o[e[t]]=p(e[t])}function v(e){var t,n;for(n=0;n<e.length;n++){switch(e[n]){case"n":t="hline";break;case"s":t="hline bottom";break;case"e":t="vline right";break;case"w":t="vline"}i[e[n]]=l(t)}}function m(e){var t;for(t=0;t<e.length;t++)s[e[t]]=h(e[t])}function g(e,t){r.shade||D.css({top:a(-t),left:a(-e)}),B.css({top:a(t),left:a(e)})}function b(e,t){B.width(Math.round(e)).height(Math.round(t))}function E(){var e=Z.getFixed();Z.setPressed([e.x,e.y]),Z.setCurrent([e.x2,e.y2]),S()}function S(e){if(t)return x(e)}function x(e){var n=Z.getFixed();b(n.w,n.h),g(n.x,n.y),r.shade&&et.updateRaw(n),t||C(),e?r.onSelect.call(yt,w(n)):r.onChange.call(yt,w(n))}function N(e,n,i){if(!t&&!n)return;r.bgFade&&!i?A.animate({opacity:e},{queue:!1,duration:r.fadeTime}):A.css("opacity",e)}function C(){B.show(),r.shade?et.opacity(q):N(q,!0),t=!0}function k(){M(),B.hide(),r.shade?et.opacity(1):N(1),t=!1,r.onRelease.call(yt)}function L(){u&&H.show()}function O(){u=!0;if(r.allowResize)return H.show(),!0}function M(){u=!1,H.hide()}function _(e){e?(Q=!0,M()):(Q=!1,O())}function j(){_(!1),E()}var t,n=370,i={},s={},o={},u=!1;r.dragEdges&&e.isArray(r.createDragbars)&&d(r.createDragbars),e.isArray(r.createHandles)&&m(r.createHandles),r.drawBorders&&e.isArray(r.createBorders)&&v(r.createBorders),e(document).bind("touchstart.jcrop-ios",function(t){e(t.currentTarget).hasClass("jcrop-tracker")&&t.stopPropagation()});var F=T().mousedown(y("move")).css({cursor:"move",position:"absolute",zIndex:360});return Y.support&&F.bind("touchstart.jcrop",Y.createDragger("move")),P.append(F),M(),{updateVisible:S,update:x,release:k,refresh:E,isAwake:function(){return t},setCursor:function(e){F.css("cursor",e)},enableHandles:O,enableOnly:function(){u=!0},showHandles:L,disableHandles:M,animMode:_,setBgOpacity:N,done:j}}(),nt=function(){function s(t){F.css({zIndex:450}),t?e(document).bind("touchmove.jcrop",l).bind("touchend.jcrop",c):i&&e(document).bind("mousemove.jcrop",u).bind("mouseup.jcrop",a)}function o(){F.css({zIndex:290}),e(document).unbind(".jcrop")}function u(e){return t(h(e)),!1}function a(e){return e.preventDefault(),e.stopPropagation(),K&&(K=!1,n(h(e)),tt.isAwake()&&r.onSelect.call(yt,w(Z.getFixed())),o(),t=function(){},n=function(){}),!1}function f(e,r,i){return K=!0,t=e,n=r,s(i),!1}function l(e){return t(h(Y.cfilter(e))),!1}function c(e){return a(Y.cfilter(e))}function p(e){F.css("cursor",e)}var t=function(){},n=function(){},i=r.trackDocument;return i||F.mousemove(u).mouseup(a).mouseout(a),A.before(F),{activateHandlers:f,setCursor:p}}(),rt=function(){function i(){r.keySupport&&(t.show(),t.focus())}function s(e){t.hide()}function o(e,t,n){r.allowMove&&(Z.moveOffset([t,n]),tt.updateVisible(!0)),e.preventDefault(),e.stopPropagation()}function a(e){if(e.ctrlKey||e.metaKey)return!0;G=e.shiftKey?!0:!1;var t=G?10:1;switch(e.keyCode){case 37:o(e,-t,0);break;case 39:o(e,t,0);break;case 38:o(e,0,-t);break;case 40:o(e,0,t);break;case 27:r.allowSelect&&tt.release();break;case 9:return!0}return!1}var t=e('<input type="radio" />').css({position:"fixed",left:"-120px",width:"12px"}).addClass("jcrop-keymgr"),n=e("<div />").css({position:"absolute",overflow:"hidden"}).append(t);return r.keySupport&&(t.keydown(a).blur(s),u||!r.fixedSupport?(t.css({position:"absolute",left:"-20px"}),n.append(t).insertBefore(A)):t.insertBefore(A)),{watchKeys:i}}();Y.support&&F.bind("touchstart.jcrop",Y.newSelection),H.hide(),gt(!0);var yt={setImage:vt,animateTo:st,setSelect:ot,setOptions:lt,tellSelect:at,tellScaled:ft,setClass:it,disable:ct,enable:ht,cancel:pt,release:tt.release,destroy:dt,focus:rt.watchKeys,getBounds:function(){return[O*X,M*V]},getWidgetSize:function(){return[O,M]},getScaleFactor:function(){return[X,V]},getOptions:function(){return r},ui:{holder:_,selection:B}};return o&&_.bind("selectstart",function(){return!1}),C.data("Jcrop",yt),yt},e.fn.Jcrop=function(t,n){var r;return this.each(function(){if(e(this).data("Jcrop")){if(t==="api")return e(this).data("Jcrop");e(this).data("Jcrop").setOptions(t)}else this.tagName=="IMG"?e.Jcrop.Loader(this,function(){e(this).css({display:"block",visibility:"hidden"}),r=e.Jcrop(this,t),e.isFunction(n)&&n.call(r)}):(e(this).css({display:"block",visibility:"hidden"}),r=e.Jcrop(this,t),e.isFunction(n)&&n.call(r))}),this},e.Jcrop.Loader=function(t,n,r){function o(){s.complete?(i.unbind(".jcloader"),e.isFunction(n)&&n.call(s)):window.setTimeout(o,50)}var i=e(t),s=i[0];i.bind("load.jcloader",o).bind("error.jcloader",function(t){i.unbind(".jcloader"),e.isFunction(r)&&r.call(s)}),s.complete&&e.isFunction(n)&&(i.unbind(".jcloader"),n.call(s))},e.Jcrop.defaults={allowSelect:!0,allowMove:!0,allowResize:!0,trackDocument:!0,baseClass:"jcrop",addClass:null,bgColor:"black",bgOpacity:.6,bgFade:!1,borderOpacity:.4,handleOpacity:.5,handleSize:null,aspectRatio:0,keySupport:!0,createHandles:["n","s","e","w","nw","ne","se","sw"],createDragbars:["n","s","e","w"],createBorders:["n","s","e","w"],drawBorders:!0,dragEdges:!0,fixedSupport:!0,touchSupport:null,shade:null,boxWidth:0,boxHeight:0,boundary:2,fadeTime:400,animationDelay:20,swingSpeed:3,minSelect:[0,0],maxSize:[0,0],minSize:[0,0],onChange:function(){},onSelect:function(){},onDblClick:function(){},onRelease:function(){}}}(jQuery),function(e){e.extend(e.fn,{livequery:function(t,n,r){var i=this,s;return e.isFunction(t)&&(r=n,n=t,t=undefined),e.each(e.livequery.queries,function(e,o){if(i.selector==o.selector&&i.context==o.context&&t==o.type&&(!n||n.$lqguid==o.fn.$lqguid)&&(!r||r.$lqguid==o.fn2.$lqguid))return(s=o)&&!1}),s=s||new e.livequery(this.selector,this.context,t,n,r),s.stopped=!1,s.run(),this},expire:function(t,n,r){var i=this;return e.isFunction(t)&&(r=n,n=t,t=undefined),e.each(e.livequery.queries,function(s,o){i.selector==o.selector&&i.context==o.context&&(!t||t==o.type)&&(!n||n.$lqguid==o.fn.$lqguid)&&(!r||r.$lqguid==o.fn2.$lqguid)&&!this.stopped&&e.livequery.stop(o.id)}),this}}),e.livequery=function(t,n,r,i,s){return this.selector=t,this.context=n,this.type=r,this.fn=i,this.fn2=s,this.elements=[],this.stopped=!1,this.id=e.livequery.queries.push(this)-1,i.$lqguid=i.$lqguid||e.livequery.guid++,s&&(s.$lqguid=s.$lqguid||e.livequery.guid++),this},e.livequery.prototype={stop:function(){var e=this;this.type?this.elements.unbind(this.type,this.fn):this.fn2&&this.elements.each(function(t,n){e.fn2.apply(n)}),this.elements=[],this.stopped=!0},run:function(){if(this.stopped)return;var t=this,n=this.elements,r=e(this.selector,this.context),i=r.not(n);this.elements=r,this.type?(i.bind(this.type,this.fn),n.length>0&&e.each(n,function(n,i){e.inArray(i,r)<0&&e.event.remove(i,t.type,t.fn)})):(i.each(function(){t.fn.apply(this)}),this.fn2&&n.length>0&&e.each(n,function(n,i){e.inArray(i,r)<0&&t.fn2.apply(i)}))}},e.extend(e.livequery,{guid:0,queries:[],queue:[],running:!1,timeout:null,checkQueue:function(){if(e.livequery.running&&e.livequery.queue.length){var t=e.livequery.queue.length;while(t--)e.livequery.queries[e.livequery.queue.shift()].run()}},pause:function(){e.livequery.running=!1},play:function(){e.livequery.running=!0,e.livequery.run()},registerPlugin:function(){e.each(arguments,function(t,n){if(!e.fn[n])return;var r=e.fn[n];e.fn[n]=function(){var t=r.apply(this,arguments);return e.livequery.run(),t}})},run:function(t){t!=undefined?e.inArray(t,e.livequery.queue)<0&&e.livequery.queue.push(t):e.each(e.livequery.queries,function(t){e.inArray(t,e.livequery.queue)<0&&e.livequery.queue.push(t)}),e.livequery.timeout&&clearTimeout(e.livequery.timeout),e.livequery.timeout=setTimeout(e.livequery.checkQueue,20)},stop:function(t){t!=undefined?e.livequery.queries[t].stop():e.each(e.livequery.queries,function(t){e.livequery.queries[t].stop()})}}),e.livequery.registerPlugin("append","prepend","after","before","wrap","attr","removeAttr","addClass","removeClass","toggleClass","empty","remove","html"),e(function(){e.livequery.play()})}(jQuery),function(e){e.extend({fileDownload:function(t,n){function y(){if(document.cookie.indexOf(i.cookieName+"="+i.cookieValue)!=-1){c.onSuccess(t);var n=new Date(1e3);document.cookie=i.cookieName+"=; expires="+n.toUTCString()+"; path="+i.cookiePath,w(!1);return}if(p||h)try{var r;p?r=p.document:r=b(h);if(r&&r.body!=null&&r.body.innerHTML.length>0){var s=!0;if(v&&v.length>0){var o=e(r.body).contents().first();o.length>0&&o[0]===v[0]&&(s=!1)}if(s){c.onFail(r.body.innerHTML,t),w(!0);return}}}catch(u){c.onFail("",t),w(!0);return}setTimeout(y,i.checkInterval)}function b(e){var t=e[0].contentWindow||e[0].contentDocument;return t.document&&(t=t.document),t}function w(e){setTimeout(function(){p&&(u&&p.close(),o&&(e?(p.focus(),p.close()):p.focus()))},0)}function E(e){return e.replace(/[<>&\r\n"']/gm,function(e){return"&"+{"<":"lt;",">":"gt;","&":"amp;","\r":"#13;","\n":"#10;",'"':"quot;","'":"apos;"}[e]})}var r=function(e,t){alert("A file download error has occurred, please try again.")},i=e.extend({preparingMessageHtml:null,failMessageHtml:null,androidPostUnsupportedMessageHtml:"Unfortunately your Android browser doesn't support this type of file download. Please try again with a different browser.",dialogOptions:{modal:!0},successCallback:function(e){},failCallback:r,httpMethod:"GET",data:null,checkInterval:100,cookieName:"fileDownload",cookieValue:"true",cookiePath:"/",popupWindowTitle:"Initiating file download...",encodeHTMLEntities:!0},n),s=(navigator.userAgent||navigator.vendor||window.opera).toLowerCase(),o=!1,u=!1,a=!1;/ip(ad|hone|od)/.test(s)?o=!0:s.indexOf("android")!=-1?u=!0:a=/avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|playbook|silk|iemobile|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(s)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-/i.test(s.substr(0,4));var f=i.httpMethod.toUpperCase();if(u&&f!="GET"){e().dialog?e("<div>").html(i.androidPostUnsupportedMessageHtml).dialog(i.dialogOptions):alert(i.androidPostUnsupportedMessageHtml);return}var l=null;i.preparingMessageHtml&&(l=e("<div>").html(i.preparingMessageHtml).dialog(i.dialogOptions));var c={onSuccess:function(e){l&&l.dialog("close"),i.successCallback(e)},onFail:function(t,n){l&&l.dialog("close"),i.failMessageHtml?(e("<div>").html(i.failMessageHtml).dialog(i.dialogOptions),i.failCallback!=r&&i.failCallback(t,n)):i.failCallback(t,n)}};i.data!==null&&typeof i.data!="string"&&(i.data=e.param(i.data));var h,p,d,v;if(f==="GET"){if(i.data!==null){var m=t.indexOf("?");m!=-1?t.substring(t.length-1)!=="&"&&(t+="&"):t+="?",t+=i.data}o||u?(p=window.open(t),p.document.title=i.popupWindowTitle,window.focus()):a?window.location(t):h=e("<iframe>").hide().attr("src",t).appendTo("body")}else{var g="";i.data!==null&&e.each(i.data.replace(/\+/g," ").split("&"),function(){var e=this.split("="),t=i.encodeHTMLEntities?E(decodeURIComponent(e[0])):decodeURIComponent(e[0]);if(!t)return;var n=e[1]||"";n=i.encodeHTMLEntities?E(decodeURIComponent(e[1])):decodeURIComponent(e[1]),g+='<input type="hidden" name="'+t+'" value="'+n+'" />'}),a?(v=e("<form>").appendTo("body"),v.hide().attr("method",i.httpMethod).attr("action",t).html(g)):(o?(p=window.open("about:blank"),p.document.title=i.popupWindowTitle,d=p.document,window.focus()):(h=e("<iframe style='display: none' src='about:blank'></iframe>").appendTo("body"),d=b(h)),d.write("<html><head></head><body><form method='"+i.httpMethod+"' action='"+t+"'>"+g+"</form>"+i.popupWindowTitle+"</body></html>"),v=e(d).find("form")),v.submit()}setTimeout(y,i.checkInterval)}})}(jQuery),function(e,t,n){function f(e){var t={},r=/^jQuery\d+$/;return n.each(e.attributes,function(e,n){n.specified&&!r.test(n.name)&&(t[n.name]=n.value)}),t}function l(e,r){var i=this,s=n(i);if(i.value==s.attr("placeholder")&&s.hasClass("placeholder"))if(s.data("placeholder-password")){s=s.hide().next().show().attr("id",s.removeAttr("id").data("placeholder-id"));if(e===!0)return s[0].value=r;s.focus()}else i.value="",s.removeClass("placeholder"),i==t.activeElement&&i.select()}function c(){var e,t=this,r=n(t),i=r,s=this.id;if(t.value==""){if(t.type=="password"){if(!r.data("placeholder-textinput")){try{e=r.clone().attr({type:"text"})}catch(o){e=n("<input>").attr(n.extend(f(this),{type:"text"}))}e.removeAttr("name").data({"placeholder-password":!0,"placeholder-id":s}).bind("focus.placeholder",l),r.data({"placeholder-textinput":e,"placeholder-id":s}).before(e)}r=r.removeAttr("id").hide().prev().attr("id",s).show()}r.addClass("placeholder"),r[0].value=r.attr("placeholder")}else r.removeClass("placeholder")}var r="placeholder"in t.createElement("input"),i="placeholder"in t.createElement("textarea"),s=n.fn,o=n.valHooks,u,a;r&&i?(a=s.placeholder=function(){return this},a.input=a.textarea=!0):(a=s.placeholder=function(){var e=this;return e.filter((r?"textarea":":input")+"[placeholder]").not(".placeholder").bind({"focus.placeholder":l,"blur.placeholder":c}).data("placeholder-enabled",!0).trigger("blur.placeholder"),e},a.input=r,a.textarea=i,u={get:function(e){var t=n(e);return t.data("placeholder-enabled")&&t.hasClass("placeholder")?"":e.value},set:function(e,r){var i=n(e);return i.data("placeholder-enabled")?(r==""?(e.value=r,e!=t.activeElement&&c.call(e)):i.hasClass("placeholder")?l.call(e,!0,r)||(e.value=r):e.value=r,i):e.value=r}},r||(o.input=u),i||(o.textarea=u),n(function(){n(t).delegate("form","submit.placeholder",function(){var e=n(".placeholder",this).each(l);setTimeout(function(){e.each(c)},10)})}),n(e).bind("beforeunload.placeholder",function(){n(".placeholder").each(function(){this.value=""})}))}(this,document,jQuery),window.url=function(){function e(e){return!isNaN(parseFloat(e))&&isFinite(e)}return function(t,n){var r=n||window.location.toString();if(!t)return r;t=t.toString(),"//"===r.substring(0,2)?r="http:"+r:1===r.split("://").length&&(r="http://"+r),n=r.split("/");var i={auth:""},s=n[2].split("@");1===s.length?s=s[0].split(":"):(i.auth=s[0],s=s[1].split(":")),i.protocol=n[0],i.hostname=s[0],i.port=s[1]||"80",i.pathname="/"+n.slice(3,n.length).join("/").split("?")[0].split("#")[0];var o=i.pathname;1===o.split(".").length&&"/"!==o[o.length-1]&&(o+="/");var u=i.hostname,f=u.split("."),l=o.split("/");if("hostname"===t)return u;if("domain"===t)return f.slice(-2).join(".");if("sub"===t)return f.slice(0,f.length-2).join(".");if("port"===t)return i.port||"80";if("protocol"===t)return i.protocol.split(":")[0];if("auth"===t)return i.auth;if("user"===t)return i.auth.split(":")[0];if("pass"===t)return i.auth.split(":")[1]||"";if("path"===t)return o;if("."===t.charAt(0)){if(t=t.substring(1),e(t))return t=parseInt(t,10),f[0>t?f.length+t:t-1]||""}else{if(e(t))return t=parseInt(t,10),l[0>t?l.length+t:t]||"";if("file"===t)return l.slice(-1)[0];if("filename"===t)return l.slice(-1)[0].split(".")[0];if("fileext"===t)return l.slice(-1)[0].split(".")[1]||"";if("?"===t.charAt(0)||"#"===t.charAt(0)){var c=r,h=null;if("?"===t.charAt(0)?c=(c.split("?")[1]||"").split("#")[0]:"#"===t.charAt(0)&&(c=c.split("#")[1]||""),!t.charAt(1))return c;t=t.substring(1),c=c.split("&");for(var p=0,d=c.length;d>p;p++)if(h=c[p].split("="),h[0]===t)return h[1];return null}}return""}}(),jQuery&&jQuery.extend({url:function(e,t){return window.url(e,t)}}),window.tinymce=window.tinymce||{base:"js",suffix:""},!function(e,t){"use strict";function n(e,t){for(var n,r=[],i=0;i<e.length;++i){if(n=u[e[i]]||s(e[i]),!n)throw"module definition dependecy not found: "+e[i];r.push(n)}t.apply(null,r)}function r(e,r,i){if("string"!=typeof e)throw"invalid module definition, module id must be defined and be a string";if(r===t)throw"invalid module definition, dependencies must be specified";if(i===t)throw"invalid module definition, definition function must be specified";n(r,function(){u[e]=i.apply(null,arguments)})}function i(e){return!!u[e]}function s(t){for(var n=e,r=t.split(/[.\/]/),i=0;i<r.length;++i){if(!n[r[i]])return;n=n[r[i]]}return n}function o(n){for(var r=0;r<n.length;r++){for(var i=e,s=n[r],o=s.split(/[.\/]/),a=0;a<o.length-1;++a)i[o[a]]===t&&(i[o[a]]={}),i=i[o[a]];i[o[o.length-1]]=u[s]}}var u={},a="tinymce/dom/EventUtils",f="tinymce/dom/Sizzle",l="tinymce/dom/DomQuery",c="tinymce/html/Styles",h="tinymce/dom/TreeWalker",p="tinymce/util/Tools",d="tinymce/dom/Range",v="tinymce/html/Entities",m="tinymce/Env",g="tinymce/dom/DOMUtils",y="tinymce/dom/ScriptLoader",b="tinymce/AddOnManager",w="tinymce/html/Node",E="tinymce/html/Schema",S="tinymce/html/SaxParser",x="tinymce/html/DomParser",T="tinymce/html/Writer",N="tinymce/html/Serializer",C="tinymce/dom/Serializer",k="tinymce/dom/TridentSelection",L="tinymce/util/VK",A="tinymce/dom/ControlSelection",O="tinymce/dom/Selection",M="tinymce/dom/RangeUtils",_="tinymce/Formatter",D="tinymce/UndoManager",P="tinymce/EnterKey",H="tinymce/ForceBlocks",B="tinymce/EditorCommands",j="tinymce/util/URI",F="tinymce/util/Class",I="tinymce/ui/Selector",q="tinymce/ui/Collection",R="tinymce/ui/DomUtils",U="tinymce/ui/Control",z="tinymce/ui/Factory",W="tinymce/ui/Container",X="tinymce/ui/DragHelper",V="tinymce/ui/Scrollable",$="tinymce/ui/Panel",J="tinymce/ui/Movable",K="tinymce/ui/Resizable",Q="tinymce/ui/FloatPanel",G="tinymce/ui/KeyboardNavigation",Y="tinymce/ui/Window",Z="tinymce/ui/MessageBox",et="tinymce/WindowManager",tt="tinymce/util/Quirks",nt="tinymce/util/Observable",rt="tinymce/Shortcuts",it="tinymce/Editor",st="tinymce/util/I18n",ot="tinymce/FocusManager",ut="tinymce/EditorManager",at="tinymce/LegacyInput",ft="tinymce/util/XHR",lt="tinymce/util/JSON",ct="tinymce/util/JSONRequest",ht="tinymce/util/JSONP",pt="tinymce/util/LocalStorage",dt="tinymce/Compat",vt="tinymce/ui/Layout",mt="tinymce/ui/AbsoluteLayout",gt="tinymce/ui/Tooltip",yt="tinymce/ui/Widget",bt="tinymce/ui/Button",wt="tinymce/ui/ButtonGroup",Et="tinymce/ui/Checkbox",St="tinymce/ui/PanelButton",xt="tinymce/ui/ColorButton",Tt="tinymce/ui/ComboBox",Nt="tinymce/ui/Path",Ct="tinymce/ui/ElementPath",kt="tinymce/ui/FormItem",Lt="tinymce/ui/Form",At="tinymce/ui/FieldSet",Ot="tinymce/ui/FilePicker",Mt="tinymce/ui/FitLayout",_t="tinymce/ui/FlexLayout",Dt="tinymce/ui/FlowLayout",Pt="tinymce/ui/FormatControls",Ht="tinymce/ui/GridLayout",Bt="tinymce/ui/Iframe",jt="tinymce/ui/Label",Ft="tinymce/ui/Toolbar",It="tinymce/ui/MenuBar",qt="tinymce/ui/MenuButton",Rt="tinymce/ui/ListBox",Ut="tinymce/ui/MenuItem",zt="tinymce/ui/Menu",Wt="tinymce/ui/Radio",Xt="tinymce/ui/ResizeHandle",Vt="tinymce/ui/Spacer",$t="tinymce/ui/SplitButton",Jt="tinymce/ui/StackLayout",Kt="tinymce/ui/TabPanel",Qt="tinymce/ui/TextBox",Gt="tinymce/ui/Throbber";r(a,[],function(){function e(e,t,n,r){e.addEventListener?e.addEventListener(t,n,r||!1):e.attachEvent&&e.attachEvent("on"+t,n)}function t(e,t,n,r){e.removeEventListener?e.removeEventListener(t,n,r||!1):e.detachEvent&&e.detachEvent("on"+t,n)}function n(e,t){function n(){return!1}function r(){return!0}var i,s=t||{},u;for(i in e)"layerX"!==i&&"layerY"!==i&&(s[i]=e[i]);if(s.target||(s.target=s.srcElement||document),e&&o.test(e.type)&&e.pageX===u&&e.clientX!==u){var a=s.target.ownerDocument||document,f=a.documentElement,l=a.body;s.pageX=e.clientX+(f&&f.scrollLeft||l&&l.scrollLeft||0)-(f&&f.clientLeft||l&&l.clientLeft||0),s.pageY=e.clientY+(f&&f.scrollTop||l&&l.scrollTop||0)-(f&&f.clientTop||l&&l.clientTop||0)}return s.preventDefault=function(){s.isDefaultPrevented=r,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},s.stopPropagation=function(){s.isPropagationStopped=r,e&&(e.stopPropagation?e.stopPropagation():e.cancelBubble=!0)},s.stopImmediatePropagation=function(){s.isImmediatePropagationStopped=r,s.stopPropagation()},s.isDefaultPrevented||(s.isDefaultPrevented=n,s.isPropagationStopped=n,s.isImmediatePropagationStopped=n),s}function r(n,r,i){function s(){i.domLoaded||(i.domLoaded=!0,r(f))}function o(){"complete"===a.readyState&&(t(a,"readystatechange",o),s())}function u(){try{a.documentElement.doScroll("left")}catch(e){return setTimeout(u,0),void 0}s()}var a=n.document,f={type:"ready"};return i.domLoaded?(r(f),void 0):(a.addEventListener?e(n,"DOMContentLoaded",s):(e(a,"readystatechange",o),a.documentElement.doScroll&&n===n.top&&u()),e(n,"load",s),void 0)}function i(){function i(e,t){var n,r,i,s;if(n=u[t][e.type])for(r=0,i=n.length;i>r;r++)if(s=n[r],s&&s.func.call(s.scope,e)===!1&&e.preventDefault(),e.isImmediatePropagationStopped())return}var o=this,u={},a,f,l,c,h;f=s+(+(new Date)).toString(32),c="onmouseenter"in document.documentElement,l="onfocusin"in document.documentElement,h={mouseenter:"mouseover",mouseleave:"mouseout"},a=1,o.domLoaded=!1,o.events=u,o.bind=function(t,s,p,d){function v(e){i(n(e||x.event),m)}var m,g,y,b,w,E,S,x=window;if(t&&3!==t.nodeType&&8!==t.nodeType){for(t[f]?m=t[f]:(m=a++,t[f]=m,u[m]={}),d=d||t,s=s.split(" "),y=s.length;y--;)b=s[y],E=v,w=S=!1,"DOMContentLoaded"===b&&(b="ready"),o.domLoaded&&"ready"===b&&"complete"==t.readyState?p.call(d,n({type:b})):(c||(w=h[b],w&&(E=function(e){var t,r;if(t=e.currentTarget,r=e.relatedTarget,r&&t.contains)r=t.contains(r);else for(;r&&r!==t;)r=r.parentNode;r||(e=n(e||x.event),e.type="mouseout"===e.type?"mouseleave":"mouseenter",e.target=t,i(e,m))})),l||"focusin"!==b&&"focusout"!==b||(S=!0,w="focusin"===b?"focus":"blur",E=function(e){e=n(e||x.event),e.type="focus"===e.type?"focusin":"focusout",i(e,m)}),g=u[m][b],g?"ready"===b&&o.domLoaded?p({type:b}):g.push({func:p,scope:d}):(u[m][b]=g=[{func:p,scope:d}],g.fakeName=w,g.capture=S,g.nativeHandler=E,"ready"===b?r(t,E,o):e(t,w||b,E,S)));return t=g=0,p}},o.unbind=function(e,n,r){var i,s,a,l,c,h;if(!e||3===e.nodeType||8===e.nodeType)return o;if(i=e[f]){if(h=u[i],n){for(n=n.split(" "),a=n.length;a--;)if(c=n[a],s=h[c]){if(r)for(l=s.length;l--;)s[l].func===r&&s.splice(l,1);r&&0!==s.length||(delete h[c],t(e,s.fakeName||c,s.nativeHandler,s.capture))}}else{for(c in h)s=h[c],t(e,s.fakeName||c,s.nativeHandler,s.capture);h={}}for(c in h)return o;delete u[i];try{delete e[f]}catch(p){e[f]=null}}return o},o.fire=function(e,t,r){var s;if(!e||3===e.nodeType||8===e.nodeType)return o;r=n(null,r),r.type=t,r.target=e;do s=e[f],s&&i(r,s),e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow;while(e&&!r.isPropagationStopped());return o},o.clean=function(e){var t,n,r=o.unbind;if(!e||3===e.nodeType||8===e.nodeType)return o;if(e[f]&&r(e),e.getElementsByTagName||(e=e.document),e&&e.getElementsByTagName)for(r(e),n=e.getElementsByTagName("*"),t=n.length;t--;)e=n[t],e[f]&&r(e);return o},o.destroy=function(){u={}},o.cancel=function(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}}var s="mce-data-",o=/^(?:mouse|contextmenu)|click/;return i.Event=new i,i.Event.bind(window,"ready",function(){}),i}),r(f,[],function(){function e(e){return mt.test(e+"")}function n(){var e,t=[];return e=function(n,r){return t.push(n+=" ")>T.cacheLength&&delete e[t.shift()],e[n]=r,r}}function i(e){return e[I]=!0,e}function s(e){var t=_.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t=null}}function o(e,t,n,r){var i,s,o,u,a,f,l,p,d,v;if((t?t.ownerDocument||t:q)!==_&&M(t),t=t||_,n=n||[],!e||"string"!=typeof e)return n;if(1!==(u=t.nodeType)&&9!==u)return[];if(P&&!r){if(i=gt.exec(e))if(o=i[1]){if(9===u){if(s=t.getElementById(o),!s||!s.parentNode)return n;if(s.id===o)return n.push(s),n}else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(o))&&F(t,s)&&s.id===o)return n.push(s),n}else{if(i[2])return et.apply(n,t.getElementsByTagName(e)),n;if((o=i[3])&&R.getElementsByClassName&&t.getElementsByClassName)return et.apply(n,t.getElementsByClassName(o)),n}if(R.qsa&&!H.test(e)){if(l=!0,p=I,d=t,v=9===u&&e,1===u&&"object"!==t.nodeName.toLowerCase()){for(f=c(e),(l=t.getAttribute("id"))?p=l.replace(wt,"\\$&"):t.setAttribute("id",p),p="[id='"+p+"'] ",a=f.length;a--;)f[a]=p+h(f[a]);d=vt.test(e)&&t.parentNode||t,v=f.join(",")}if(v)try{return et.apply(n,d.querySelectorAll(v)),n}catch(m){}finally{l||t.removeAttribute("id")}}}return w(e.replace(ft,"$1"),t,n,r)}function u(e,t){var n=t&&e,r=n&&(~t.sourceIndex||Q)-(~e.sourceIndex||Q);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function a(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function f(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function l(e){return i(function(t){return t=+t,i(function(n,r){for(var i,s=e([],n.length,t),o=s.length;o--;)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))})})}function c(e,t){var n,r,i,s,u,a,f,l=X[e+" "];if(l)return t?0:l.slice(0);for(u=e,a=[],f=T.preFilter;u;){(!n||(r=lt.exec(u)))&&(r&&(u=u.slice(r[0].length)||u),a.push(i=[])),n=!1,(r=ct.exec(u))&&(n=r.shift(),i.push({value:n,type:r[0].replace(ft," ")}),u=u.slice(n.length));for(s in T.filter)!(r=dt[s].exec(u))||f[s]&&!(r=f[s](r))||(n=r.shift(),i.push({value:n,type:s,matches:r}),u=u.slice(n.length));if(!n)break}return t?u.length:u?o.error(e):X(e,a).slice(0)}function h(e){for(var t=0,n=e.length,r="";n>t;t++)r+=e[t].value;return r}function p(e,t,n){var r=t.dir,i=n&&"parentNode"===r,s=z++;return t.first?function(t,n,s){for(;t=t[r];)if(1===t.nodeType||i)return e(t,n,s)}:function(t,n,o){var u,a,f,l=U+" "+s;if(o){for(;t=t[r];)if((1===t.nodeType||i)&&e(t,n,o))return!0}else for(;t=t[r];)if(1===t.nodeType||i)if(f=t[I]||(t[I]={}),(a=f[r])&&a[0]===l){if((u=a[1])===!0||u===x)return u===!0}else if(a=f[r]=[l],a[1]=e(t,n,o)||x,a[1]===!0)return!0}}function d(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function v(e,t,n,r,i){for(var s,o=[],u=0,a=e.length,f=null!=t;a>u;u++)(s=e[u])&&(!n||n(s,r,i))&&(o.push(s),f&&t.push(u));return o}function m(e,t,n,r,s,o){return r&&!r[I]&&(r=m(r)),s&&!s[I]&&(s=m(s,o)),i(function(i,o,u,a){var f,l,c,h=[],p=[],d=o.length,m=i||b(t||"*",u.nodeType?[u]:u,[]),g=!e||!i&&t?m:v(m,h,e,u,a),y=n?s||(i?e:d||r)?[]:o:g;if(n&&n(g,y,u,a),r)for(f=v(y,p),r(f,[],u,a),l=f.length;l--;)(c=f[l])&&(y[p[l]]=!(g[p[l]]=c));if(i){if(s||e){if(s){for(f=[],l=y.length;l--;)(c=y[l])&&f.push(g[l]=c);s(null,y=[],f,a)}for(l=y.length;l--;)(c=y[l])&&(f=s?nt.call(i,c):h[l])>-1&&(i[f]=!(o[f]=c))}}else y=v(y===o?y.splice(d,y.length):y),s?s(null,o,y,a):et.apply(o,y)})}function g(e){for(var t,n,r,i=e.length,s=T.relative[e[0].type],o=s||T.relative[" "],u=s?1:0,a=p(function(e){return e===t},o,!0),f=p(function(e){return nt.call(t,e)>-1},o,!0),l=[function(e,n,r){return!s&&(r||n!==L)||((t=n).nodeType?a(e,n,r):f(e,n,r))}];i>u;u++)if(n=T.relative[e[u].type])l=[p(d(l),n)];else{if(n=T.filter[e[u].type].apply(null,e[u].matches),n[I]){for(r=++u;i>r&&!T.relative[e[r].type];r++);return m(u>1&&d(l),u>1&&h(e.slice(0,u-1)).replace(ft,"$1"),n,r>u&&g(e.slice(u,r)),i>r&&g(e=e.slice(r)),i>r&&h(e))}l.push(n)}return d(l)}function y(e,t){var n=0,r=t.length>0,s=e.length>0,u=function(i,u,a,f,l){var c,h,p,d=[],m=0,g="0",y=i&&[],b=null!=l,w=L,E=i||s&&T.find.TAG("*",l&&u.parentNode||u),S=U+=null==w?1:Math.random()||.1;for(b&&(L=u!==_&&u,x=n);null!=(c=E[g]);g++){if(s&&c){for(h=0;p=e[h++];)if(p(c,u,a)){f.push(c);break}b&&(U=S,x=++n)}r&&((c=!p&&c)&&m--,i&&y.push(c))}if(m+=g,r&&g!==m){for(h=0;p=t[h++];)p(y,d,u,a);if(i){if(m>0)for(;g--;)y[g]||d[g]||(d[g]=Y.call(f));d=v(d)}et.apply(f,d),b&&!i&&d.length>0&&m+t.length>1&&o.uniqueSort(f)}return b&&(U=S,L=w),y};return r?i(u):u}function b(e,t,n){for(var r=0,i=t.length;i>r;r++)o(e,t[r],n);return n}function w(e,t,n,r){var i,s,o,u,a,f=c(e);if(!r&&1===f.length){if(s=f[0]=f[0].slice(0),s.length>2&&"ID"===(o=s[0]).type&&9===t.nodeType&&P&&T.relative[s[1].type]){if(t=(T.find.ID(o.matches[0].replace(St,xt),t)||[])[0],!t)return n;e=e.slice(s.shift().value.length)}for(i=dt.needsContext.test(e)?0:s.length;i--&&(o=s[i],!T.relative[u=o.type]);)if((a=T.find[u])&&(r=a(o.matches[0].replace(St,xt),vt.test(s[0].type)&&t.parentNode||t))){if(s.splice(i,1),e=r.length&&h(s),!e)return et.apply(n,r),n;break}}return k(e,f)(r,t,!P,n,vt.test(e)),n}function E(){}var S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I="sizzle"+ -(new Date),q=window.document,R={},U=0,z=0,W=n(),X=n(),V=n(),$=!1,J=function(){return 0},K=typeof t,Q=1<<31,G=[],Y=G.pop,Z=G.push,et=G.push,tt=G.slice,nt=G.indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},rt="[\\x20\\t\\r\\n\\f]",it="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",st=it.replace("w","w#"),ot="([*^$|!~]?=)",ut="\\["+rt+"*("+it+")"+rt+"*(?:"+ot+rt+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+st+")|)|)"+rt+"*\\]",at=":("+it+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+ut.replace(3,8)+")*)|.*)\\)|)",ft=new RegExp("^"+rt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+rt+"+$","g"),lt=new RegExp("^"+rt+"*,"+rt+"*"),ct=new RegExp("^"+rt+"*([\\x20\\t\\r\\n\\f>+~])"+rt+"*"),ht=new RegExp(at),pt=new RegExp("^"+st+"$"),dt={ID:new RegExp("^#("+it+")"),CLASS:new RegExp("^\\.("+it+")"),NAME:new RegExp("^\\[name=['\"]?("+it+")['\"]?\\]"),TAG:new RegExp("^("+it.replace("w","w*")+")"),ATTR:new RegExp("^"+ut),PSEUDO:new RegExp("^"+at),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+rt+"*(even|odd|(([+-]|)(\\d*)n|)"+rt+"*(?:([+-]|)"+rt+"*(\\d+)|))"+rt+"*\\)|)","i"),needsContext:new RegExp("^"+rt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+rt+"*((?:-\\d)?\\d*)"+rt+"*\\)|)(?=[^-]|$)","i")},vt=/[\x20\t\r\n\f]*[+~]/,mt=/^[^{]+\{\s*\[native code/,gt=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,yt=/^(?:input|select|textarea|button)$/i,bt=/^h\d$/i,wt=/'|\\/g,Et=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,St=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,xt=function(e,t){var n="0x"+t-65536;return n!==n?t:0>n?String.fromCharCode(n+65536):String.fromCharCode(55296|n>>10,56320|1023&n)};try{et.apply(G=tt.call(q.childNodes),q.childNodes),G[q.childNodes.length].nodeType}catch(Tt){et={apply:G.length?function(e,t){Z.apply(e,tt.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}C=o.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},M=o.setDocument=function(n){var r=n?n.ownerDocument||n:q;return r!==_&&9===r.nodeType&&r.documentElement?(_=r,D=r.documentElement,P=!C(r),R.getElementsByTagName=s(function(e){return e.appendChild(r.createComment("")),!e.getElementsByTagName("*").length}),R.attributes=s(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return"boolean"!==t&&"string"!==t}),R.getElementsByClassName=s(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",e.getElementsByClassName&&e.getElementsByClassName("e").length?(e.lastChild.className="e",2===e.getElementsByClassName("e").length):!1}),R.getByName=s(function(e){e.id=I+0,e.appendChild(_.createElement("a")).setAttribute("name",I),e.appendChild(_.createElement("i")).setAttribute("name",I),D.appendChild(e);var t=r.getElementsByName&&
r.getElementsByName(I).length===2+r.getElementsByName(I+0).length;return D.removeChild(e),t}),R.sortDetached=s(function(e){return e.compareDocumentPosition&&1&e.compareDocumentPosition(_.createElement("div"))}),T.attrHandle=s(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==K&&"#"===e.firstChild.getAttribute("href")})?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},R.getByName?(T.find.ID=function(e,t){if(typeof t.getElementById!==K&&P){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},T.filter.ID=function(e){var t=e.replace(St,xt);return function(e){return e.getAttribute("id")===t}}):(T.find.ID=function(e,n){if(typeof n.getElementById!==K&&P){var r=n.getElementById(e);return r?r.id===e||typeof r.getAttributeNode!==K&&r.getAttributeNode("id").value===e?[r]:t:[]}},T.filter.ID=function(e){var t=e.replace(St,xt);return function(e){var n=typeof e.getAttributeNode!==K&&e.getAttributeNode("id");return n&&n.value===t}}),T.find.TAG=R.getElementsByTagName?function(e,t){return typeof t.getElementsByTagName!==K?t.getElementsByTagName(e):void 0}:function(e,t){var n,r=[],i=0,s=t.getElementsByTagName(e);if("*"===e){for(;n=s[i++];)1===n.nodeType&&r.push(n);return r}return s},T.find.NAME=R.getByName&&function(e,t){return typeof t.getElementsByName!==K?t.getElementsByName(name):void 0},T.find.CLASS=R.getElementsByClassName&&function(e,t){return typeof t.getElementsByClassName!==K&&P?t.getElementsByClassName(e):void 0},B=[],H=[":focus"],(R.qsa=e(r.querySelectorAll))&&(s(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||H.push("\\["+rt+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||H.push(":checked")}),s(function(e){e.innerHTML="<input type='hidden' i=''/>",e.querySelectorAll("[i^='']").length&&H.push("[*^$]="+rt+"*(?:\"\"|'')"),e.querySelectorAll(":enabled").length||H.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),H.push(",.*:")})),(R.matchesSelector=e(j=D.matchesSelector||D.mozMatchesSelector||D.webkitMatchesSelector||D.oMatchesSelector||D.msMatchesSelector))&&s(function(e){R.disconnectedMatch=j.call(e,"div"),j.call(e,"[s!='']:x"),B.push("!=",at)}),H=new RegExp(H.join("|")),B=B.length&&new RegExp(B.join("|")),F=e(D.contains)||D.compareDocumentPosition?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!!r&&1===r.nodeType&&!!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},J=D.compareDocumentPosition?function(e,t){if(e===t)return $=!0,0;var n=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t);return n?1&n||A&&t.compareDocumentPosition(e)===n?e===r||F(q,e)?-1:t===r||F(q,t)?1:O?nt.call(O,e)-nt.call(O,t):0:4&n?-1:1:e.compareDocumentPosition?-1:1}:function(e,t){var n,i=0,s=e.parentNode,o=t.parentNode,a=[e],f=[t];if(e===t)return $=!0,0;if(!s||!o)return e===r?-1:t===r?1:s?-1:o?1:0;if(s===o)return u(e,t);for(n=e;n=n.parentNode;)a.unshift(n);for(n=t;n=n.parentNode;)f.unshift(n);for(;a[i]===f[i];)i++;return i?u(a[i],f[i]):a[i]===q?-1:f[i]===q?1:0},_):_},o.matches=function(e,t){return o(e,null,null,t)},o.matchesSelector=function(e,t){if((e.ownerDocument||e)!==_&&M(e),t=t.replace(Et,"='$1']"),R.matchesSelector&&P&&(!B||!B.test(t))&&!H.test(t))try{var n=j.call(e,t);if(n||R.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(r){}return o(t,_,null,[e]).length>0},o.contains=function(e,t){return(e.ownerDocument||e)!==_&&M(e),F(e,t)},o.attr=function(e,t){var n;return(e.ownerDocument||e)!==_&&M(e),P&&(t=t.toLowerCase()),(n=T.attrHandle[t])?n(e):!P||R.attributes?e.getAttribute(t):((n=e.getAttributeNode(t))||e.getAttribute(t))&&e[t]===!0?t:n&&n.specified?n.value:null},o.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},o.uniqueSort=function(e){var t,n=[],r=0,i=0;if($=!R.detectDuplicates,A=!R.sortDetached,O=!R.sortStable&&e.slice(0),e.sort(J),$){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return e},N=o.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=N(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r];r++)n+=N(t);return n},T=o.selectors={cacheLength:50,createPseudo:i,match:dt,find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(St,xt),e[3]=(e[4]||e[5]||"").replace(St,xt),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||o.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&o.error(e[0]),e},PSEUDO:function(e){var t,n=!e[5]&&e[2];return dt.CHILD.test(e[0])?null:(e[4]?e[2]=e[4]:n&&ht.test(n)&&(t=c(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){return"*"===e?function(){return!0}:(e=e.replace(St,xt).toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=W[e+" "];return t||(t=new RegExp("(^|"+rt+")"+e+"("+rt+"|$)"))&&W(e,function(e){return t.test(e.className||typeof e.getAttribute!==K&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=o.attr(r,e);return null==i?"!="===t:t?(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i+" ").indexOf(n)>-1:"|="===t?i===n||i.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r,i){var s="nth"!==e.slice(0,3),o="last"!==e.slice(-4),u="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,a){var f,l,c,h,p,d,v=s!==o?"nextSibling":"previousSibling",m=t.parentNode,g=u&&t.nodeName.toLowerCase(),y=!a&&!u;if(m){if(s){for(;v;){for(c=t;c=c[v];)if(u?c.nodeName.toLowerCase()===g:1===c.nodeType)return!1;d=v="only"===e&&!d&&"nextSibling"}return!0}if(d=[o?m.firstChild:m.lastChild],o&&y){for(l=m[I]||(m[I]={}),f=l[e]||[],p=f[0]===U&&f[1],h=f[0]===U&&f[2],c=p&&m.childNodes[p];c=++p&&c&&c[v]||(h=p=0)||d.pop();)if(1===c.nodeType&&++h&&c===t){l[e]=[U,p,h];break}}else if(y&&(f=(t[I]||(t[I]={}))[e])&&f[0]===U)h=f[1];else for(;(c=++p&&c&&c[v]||(h=p=0)||d.pop())&&((u?c.nodeName.toLowerCase()!==g:1!==c.nodeType)||!++h||(y&&((c[I]||(c[I]={}))[e]=[U,h]),c!==t)););return h-=i,h===r||0===h%r&&h/r>=0}}},PSEUDO:function(e,t){var n,r=T.pseudos[e]||T.setFilters[e.toLowerCase()]||o.error("unsupported pseudo: "+e);return r[I]?r(t):r.length>1?(n=[e,e,"",t],T.setFilters.hasOwnProperty(e.toLowerCase())?i(function(e,n){for(var i,s=r(e,t),o=s.length;o--;)i=nt.call(e,s[o]),e[i]=!(n[i]=s[o])}):function(e){return r(e,0,n)}):r}},pseudos:{not:i(function(e){var t=[],n=[],r=k(e.replace(ft,"$1"));return r[I]?i(function(e,t,n,i){for(var s,o=r(e,null,i,[]),u=e.length;u--;)(s=o[u])&&(e[u]=!(t[u]=s))}):function(e,i,s){return t[0]=e,r(t,null,s,n),!n.pop()}}),has:i(function(e){return function(t){return o(e,t).length>0}}),contains:i(function(e){return function(t){return(t.textContent||t.innerText||N(t)).indexOf(e)>-1}}),lang:i(function(e){return pt.test(e||"")||o.error("unsupported lang: "+e),e=e.replace(St,xt).toLowerCase(),function(t){var n;do if(n=P?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(e){var t=window.location&&window.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===D},focus:function(e){return e===_.activeElement&&(!_.hasFocus||_.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!T.pseudos.empty(e)},header:function(e){return bt.test(e.nodeName)},input:function(e){return yt.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},first:l(function(){return[0]}),last:l(function(e,t){return[t-1]}),eq:l(function(e,t,n){return[0>n?n+t:n]}),even:l(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:l(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:l(function(e,t,n){for(var r=0>n?n+t:n;--r>=0;)e.push(r);return e}),gt:l(function(e,t,n){for(var r=0>n?n+t:n;++r<t;)e.push(r);return e})}};for(S in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})T.pseudos[S]=a(S);for(S in{submit:!0,reset:!0})T.pseudos[S]=f(S);return k=o.compile=function(e,t){var n,r=[],i=[],s=V[e+" "];if(!s){for(t||(t=c(e)),n=t.length;n--;)s=g(t[n]),s[I]?r.push(s):i.push(s);s=V(e,y(i,r))}return s},T.pseudos.nth=T.pseudos.eq,E.prototype=T.filters=T.pseudos,T.setFilters=new E,R.sortStable=I.split("").sort(J).join("")===I,M(),[0,0].sort(J),R.detectDuplicates=$,"function"==typeof r&&r.amd?r(function(){return o}):window.Sizzle=o,o}),r(l,[a,f],function(e,n){function r(e){return"undefined"!=typeof e}function i(e){return"string"==typeof e}function s(e){var t,n,r;for(r=m.createElement("div"),t=m.createDocumentFragment(),r.innerHTML=e;n=r.firstChild;)t.appendChild(n);return t}function o(e,t,n){var r;if("string"==typeof t)t=s(t);else if(t.length){for(r=0;r<t.length;r++)o(e,t[r],n);return e}for(r=e.length;r--;)n.call(e[r],t.parentNode?t:t);return e}function u(e,t){return e&&t&&-1!==(" "+e.className+" ").indexOf(" "+t+" ")}function a(e,t){var n;for(e=e||[],"string"==typeof e&&(e=e.split(" ")),t=t||{},n=e.length;n--;)t[e[n]]={};return t}function f(e,t){return new f.fn.init(e,t)}function l(e){var t=arguments,n,r,i;for(r=1;r<t.length;r++){n=t[r];for(i in n)e[i]=n[i]}return e}function c(e){var t=[],n,r;for(n=0,r=e.length;r>n;n++)t[n]=e[n];return t}function h(e,t){var n;if(t.indexOf)return t.indexOf(e);for(n=t.length;n--;)if(t[n]===e)return n;return-1}function p(e,t){var n,r,i,s,o;if(e)if(n=e.length,n===s){for(r in e)if(e.hasOwnProperty(r)&&(o=e[r],t.call(o,o,r)===!1))break}else for(i=0;n>i&&(o=e[i],t.call(o,o,r)!==!1);i++);return e}function d(e,n,r){for(var i=[],s=e[n];s&&9!==s.nodeType&&(r===t||1!==s.nodeType||!f(s).is(r));)1===s.nodeType&&i.push(s),s=s[n];return i}function v(e,t,n,r){for(var i=[];e;e=e[n])r&&e.nodeType!==r||e===t||i.push(e);return i}var m=document,g=Array.prototype.push,y=Array.prototype.slice,b=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,w=e.Event,E=a("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"),S=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},x=/^\s*|\s*$/g,T=function(e){return null===e||e===t?"":(""+e).replace(x,"")};return f.fn=f.prototype={constructor:f,selector:"",length:0,init:function(e,t){var n=this,r,o;if(!e)return n;if(e.nodeType)return n.context=n[0]=e,n.length=1,n;if(i(e)){if(r="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:b.exec(e),!r)return f(t||document).find(e);if(r[1])for(o=s(e).firstChild;o;)this.add(o),o=o.nextSibling;else{if(o=m.getElementById(r[2]),o.id!==r[2])return n.find(e);n.length=1,n[0]=o}}else this.add(e);return n},toArray:function(){return c(this)},add:function(e){var t=this;return S(e)?g.apply(t,e):e instanceof f?t.add(e.toArray()):g.call(t,e),t},attr:function(e,n){var i=this;if("object"==typeof e)p(e,function(e,t){i.attr(t,e)});else{if(!r(n))return i[0]&&1===i[0].nodeType?i[0].getAttribute(e):t;this.each(function(){1===this.nodeType&&this.setAttribute(e,n)})}return i},css:function(e,n){var i=this;if("object"==typeof e)p(e,function(e,t){i.css(t,e)});else{if(e=e.replace(/-(\D)/g,function(e,t){return t.toUpperCase()}),!r(n))return i[0]?i[0].style[e]:t;"number"!=typeof n||E[e]||(n+="px"),i.each(function(){var t=this.style;"opacity"===e&&this.runtimeStyle&&"undefined"==typeof this.runtimeStyle.opacity&&(t.filter=""===n?"":"alpha(opacity="+100*n+")");try{t[e]=n}catch(r){}})}return i},remove:function(){for(var e=this,t,n=this.length;n--;)t=e[n],w.clean(t),t.parentNode&&t.parentNode.removeChild(t);return this},empty:function(){for(var e=this,t,n=this.length;n--;)for(t=e[n];t.firstChild;)t.removeChild(t.firstChild);return this},html:function(e){var t=this,n;if(r(e)){for(n=t.length;n--;)t[n].innerHTML=e;return t}return t[0]?t[0].innerHTML:""},text:function(e){var t=this,n;if(r(e)){for(n=t.length;n--;)t[n].innerText=t[0].textContent=e;return t}return t[0]?t[0].innerText||t[0].textContent:""},append:function(){return o(this,arguments,function(e){1===this.nodeType&&this.appendChild(e)})},prepend:function(){return o(this,arguments,function(e){1===this.nodeType&&this.insertBefore(e,this.firstChild)})},before:function(){var e=this;return e[0]&&e[0].parentNode?o(e,arguments,function(e){this.parentNode.insertBefore(e,this.nextSibling)}):e},after:function(){var e=this;return e[0]&&e[0].parentNode?o(e,arguments,function(e){this.parentNode.insertBefore(e,this)}):e},appendTo:function(e){return f(e).append(this),this},addClass:function(e){return this.toggleClass(e,!0)},removeClass:function(e){return this.toggleClass(e,!1)},toggleClass:function(e,t){var n=this;return-1!==e.indexOf(" ")?p(e.split(" "),function(){n.toggleClass(this,t)}):n.each(function(){var n=this,r;u(n,e)!==t&&(r=n.className,t?n.className+=r?" "+e:e:n.className=T((" "+r+" ").replace(" "+e+" "," ")))}),n},hasClass:function(e){return u(this[0],e)},each:function(e){return p(this,e)},on:function(e,t){return this.each(function(){w.bind(this,e,t)})},off:function(e,t){return this.each(function(){w.unbind(this,e,t)})},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},slice:function(){return new f(y.apply(this,arguments))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},replaceWith:function(e){var t=this;return t[0]&&t[0].parentNode.replaceChild(f(e)[0],t[0]),t},wrap:function(e){return e=f(e)[0],this.each(function(){var t=this,n=e.cloneNode(!1);t.parentNode.insertBefore(n,t),n.appendChild(t)})},unwrap:function(){return this.each(function(){for(var e=this,t=e.firstChild,n;t;)n=t,t=t.nextSibling,e.parentNode.insertBefore(n,e)})},clone:function(){var e=[];return this.each(function(){e.push(this.cloneNode(!0))}),f(e)},find:function(e){var t,n,r=[];for(t=0,n=this.length;n>t;t++)f.find(e,this[t],r);return f(r)},push:g,sort:[].sort,splice:[].splice},l(f,{extend:l,toArray:c,inArray:h,isArray:S,each:p,trim:T,makeMap:a,find:n,expr:n.selectors,unique:n.uniqueSort,text:n.getText,isXMLDoc:n.isXML,contains:n.contains,filter:function(e,t,n){return n&&(e=":not("+e+")"),1===t.length?f.find.matchesSelector(t[0],e)?[t[0]]:[]:f.find.matches(e,t)}}),p({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return d(e,"parentNode")},parentsUntil:function(e,t){return d(e,"parentNode",t)},next:function(e){return v(e,"nextSibling",1)},prev:function(e){return v(e,"previousSibling",1)},nextNodes:function(e){return v(e,"nextSibling")},prevNodes:function(e){return v(e,"previousSibling")},children:function(e){return v(e.firstChild,"nextSibling",1)},contents:function(e){return c(("iframe"===e.nodeName?e.contentDocument||e.contentWindow.document:e).childNodes)}},function(e,t){f.fn[e]=function(n){var r=this,i;if(r.length>1)throw new Error("DomQuery only supports traverse functions on a single node.");return r[0]&&(i=t(r[0],n)),i=f(i),n&&"parentsUntil"!==e?i.filter(n):i}}),f.fn.filter=function(e){return f.filter(e)},f.fn.is=function(e){return!!e&&this.filter(e).length>0},f.fn.init.prototype=f.fn,f}),r(c,[],function(){return function(e,t){function n(e,t,n,r){function i(e){return e=parseInt(e,10).toString(16),e.length>1?e:"0"+e}return"#"+i(t)+i(n)+i(r)}var r=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,i=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,s=/\s*([^:]+):\s*([^;]+);?/g,o=/\s+$/,u,a,f={},l,c="﻿";for(e=e||{},l=("\\\" \\' \\; \\: ; : "+c).split(" "),a=0;a<l.length;a++)f[l[a]]=c+a,f[c+a]=l[a];return{toHex:function(e){return e.replace(r,n)},parse:function(t){function u(e,t){var n,r,i,s;n=d[e+"-top"+t],n&&(r=d[e+"-right"+t],n==r&&(i=d[e+"-bottom"+t],r==i&&(s=d[e+"-left"+t],i==s&&(d[e+t]=s,delete d[e+"-top"+t],delete d[e+"-right"+t],delete d[e+"-bottom"+t],delete d[e+"-left"+t]))))}function a(e){var t=d[e],n;if(t&&!(t.indexOf(" ")<0)){for(t=t.split(" "),n=t.length;n--;)if(t[n]!==t[0])return!1;return d[e]=t[0],!0}}function l(e,t,n,r){a(t)&&a(n)&&a(r)&&(d[e]=d[t]+" "+d[n]+" "+d[r],delete d[t],delete d[n],delete d[r])}function c(e){return y=!0,f[e]}function h(e,t){return y&&(e=e.replace(/\uFEFF[0-9]/g,function(e){return f[e]})),t||(e=e.replace(/\\([\'\";:])/g,"$1")),e}function p(e,t,n,r,i,s){return(i=i||s)?(i=h(i),"'"+i.replace(/\'/g,"\\'")+"'"):(t=h(t||n||r),b&&(t=b.call(w,t,"style")),"url('"+t.replace(/\'/g,"\\'")+"')")}var d={},v,m,g,y,b=e.url_converter,w=e.url_converter_scope||this;if(t){for(t=t.replace(/\\[\"\';:\uFEFF]/g,c).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(e){return e.replace(/[;:]/g,c)});v=s.exec(t);)m=v[1].replace(o,"").toLowerCase(),g=v[2].replace(o,""),m&&g.length>0&&("font-weight"===m&&"700"===g?g="bold":("color"===m||"background-color"===m)&&(g=g.toLowerCase()),g=g.replace(r,n),g=g.replace(i,p),d[m]=y?h(g,!0):g),s.lastIndex=v.index+v[0].length;u("border",""),u("border","-width"),u("border","-color"),u("border","-style"),u("padding",""),u("margin",""),l("border","border-width","border-style","border-color"),"medium none"===d.border&&delete d.border}return d},serialize:function(e,n){function r(n){var r,s,o,a;if(r=t.styles[n])for(s=0,o=r.length;o>s;s++)n=r[s],a=e[n],a!==u&&a.length>0&&(i+=(i.length>0?" ":"")+n+": "+a+";")}var i="",s,o;if(n&&t&&t.styles)r("*"),r(n);else for(s in e)o=e[s],o!==u&&o.length>0&&(i+=(i.length>0?" ":"")+s+": "+o+";");return i}}}}),r(h,[],function(){return function(e,t){function n(e,n,r,i){var s,o;if(e){if(!i&&e[n])return e[n];if(e!=t){if(s=e[r])return s;for(o=e.parentNode;o&&o!=t;o=o.parentNode)if(s=o[r])return s}}}var r=e;this.current=function(){return r},this.next=function(e){return r=n(r,"firstChild","nextSibling",e)},this.prev=function(e){return r=n(r,"lastChild","previousSibling",e)}}}),r(p,[],function(){function e(e,n){return n?"array"==n&&m(e)?!0:typeof e==n:e!==t}function n(e){var t=[],n,r;for(n=0,r=e.length;r>n;n++)t[n]=e[n];return t}function r(e,t,n){var r;for(e=e||[],t=t||",","string"==typeof e&&(e=e.split(t)),n=n||{},r=e.length;r--;)n[e[r]]={};return n}function i(e,n,r){var i,s;if(!e)return 0;if(r=r||e,e.length!==t){for(i=0,s=e.length;s>i;i++)if(n.call(r,e[i],i,e)===!1)return 0}else for(i in e)if(e.hasOwnProperty(i)&&n.call(r,e[i],i,e)===!1)return 0;return 1}function s(e,t){var n=[];return i(e,function(e){n.push(t(e))}),n}function o(e,t){var n=[];return i(e,function(e){(!t||t(e))&&n.push(e)}),n}function u(e,t,n){var r=this,i,s,o,u,a,f=0;if(e=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(e),o=e[3].match(/(^|\.)(\w+)$/i)[2],s=r.createNS(e[3].replace(/\.\w+$/,""),n),!s[o]){if("static"==e[2])return s[o]=t,this.onCreate&&this.onCreate(e[2],e[3],s[o]),void 0;t[o]||(t[o]=function(){},f=1),s[o]=t[o],r.extend(s[o].prototype,t),e[5]&&(i=r.resolve(e[5]).prototype,u=e[5].match(/\.(\w+)$/i)[1],a=s[o],s[o]=f?function(){return i[u].apply(this,arguments)}:function(){return this.parent=i[u],a.apply(this,arguments)},s[o].prototype[o]=s[o],r.each(i,function(e,t){s[o].prototype[t]=i[t]}),r.each(t,function(e,t){i[t]?s[o].prototype[t]=function(){return this.parent=i[t],e.apply(this,arguments)}:t!=o&&(s[o].prototype[t]=e)})),r.each(t["static"],function(e,t){s[o][t]=e})}}function a(e,t){var n,r;if(e)for(n=0,r=e.length;r>n;n++)if(e[n]===t)return n;return-1}function f(e,n){var r,i,s,o=arguments,u;for(r=1,i=o.length;i>r;r++){n=o[r];for(s in n)n.hasOwnProperty(s)&&(u=n[s],u!==t&&(e[s]=u))}return e}function l(e,t,n,r){r=r||this,e&&(n&&(e=e[n]),i(e,function(e,i){return t.call(r,e,i,n)===!1?!1:(l(e,t,n,r),void 0)}))}function c(e,t){var n,r;for(t=t||window,e=e.split("."),n=0;n<e.length;n++)r=e[n],t[r]||(t[r]={}),t=t[r];return t}function h(e,t){var n,r;for(t=t||window,e=e.split("."),n=0,r=e.length;r>n&&(t=t[e[n]],t);n++);return t}function p(t,n){return!t||e(t,"array")?t:s(t.split(n||","),v)}var d=/^\s*|\s*$/g,v=function(e){return null===e||e===t?"":(""+e).replace(d,"")},m=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};return{trim:v,isArray:m,is:e,toArray:n,makeMap:r,each:i,map:s,grep:o,inArray:a,extend:f,create:u,walk:l,createNS:c,resolve:h,explode:p}}),r(d,[p],function(e){function t(n){function r(){return H.createDocumentFragment()}function i(e,t){x(I,e,t)}function s(e,t){x(q,e,t)}function o(e){i(e.parentNode,V(e))}function u(e){i(e.parentNode,V(e)+1)}function a(e){s(e.parentNode,V(e))}function f(e){s(e.parentNode,V(e)+1)}function l(e){e?(P[z]=P[U],P[W]=P[R]):(P[U]=P[z],P[R]=P[W]),P.collapsed=I}function c(e){o(e),f(e)}function h(e){i(e,0),s(e,1===e.nodeType?e.childNodes.length:e.nodeValue.length)}function p(e,t){var n=P[U],r=P[R],i=P[z],s=P[W],o=t.startContainer,u=t.startOffset,a=t.endContainer,f=t.endOffset;return 0===e?S(n,r,o,u):1===e?S(i,s,o,u):2===e?S(i,s,a,f):3===e?S(n,r,a,f):void 0}function d(){T(F)}function v(){return T(B)}function m(){return T(j)}function g(e){var t=this[U],r=this[R],i,s;3!==t.nodeType&&4!==t.nodeType||!t.nodeValue?(t.childNodes.length>0&&(s=t.childNodes[r]),s?t.insertBefore(e,s):t.appendChild(e)):r?r>=t.nodeValue.length?n.insertAfter(e,t):(i=t.splitText(r),t.parentNode.insertBefore(e,i)):t.parentNode.insertBefore(e,t)}function y(e){var t=P.extractContents();P.insertNode(e),e.appendChild(t),P.selectNode(e)}function b(){return X(new t(n),{startContainer:P[U],startOffset:P[R],endContainer:P[z],endOffset:P[W],collapsed:P.collapsed,commonAncestorContainer:P.commonAncestorContainer})}function w(e,t){var n;if(3==e.nodeType)return e;if(0>t)return e;for(n=e.firstChild;n&&t>0;)--t,n=n.nextSibling;return n?n:e}function E(){return P[U]==P[z]&&P[R]==P[W]}function S(e,t,r,i){var s,o,u,a,f,l;if(e==r)return t==i?0:i>t?-1:1;for(s=r;s&&s.parentNode!=e;)s=s.parentNode;if(s){for(o=0,u=e.firstChild;u!=s&&t>o;)o++,u=u.nextSibling;return o>=t?-1:1}for(s=e;s&&s.parentNode!=r;)s=s.parentNode;if(s){for(o=0,u=r.firstChild;u!=s&&i>o;)o++,u=u.nextSibling;return i>o?-1:1}for(a=n.findCommonAncestor(e,r),f=e;f&&f.parentNode!=a;)f=f.parentNode;for(f||(f=a),l=r;l&&l.parentNode!=a;)l=l.parentNode;if(l||(l=a),f==l)return 0;for(u=a.firstChild;u;){if(u==f)return-1;if(u==l)return 1;u=u.nextSibling}}function x(e,t,r){var i,s;for(e?(P[U]=t,P[R]=r):(P[z]=t,P[W]=r),i=P[z];i.parentNode;)i=i.parentNode;for(s=P[U];s.parentNode;)s=s.parentNode;s==i?S(P[U],P[R],P[z],P[W])>0&&P.collapse(e):P.collapse(e),P.collapsed=E(),P.commonAncestorContainer=n.findCommonAncestor(P[U],P[z])}function T(e){var t,n=0,r=0,i,s,o,u,a,f;if(P[U]==P[z])return N(e);for(t=P[z],i=t.parentNode;i;t=i,i=i.parentNode){if(i==P[U])return C(t,e);++n}for(t=P[U],i=t.parentNode;i;t=i,i=i.parentNode){if(i==P[z])return k(t,e);++r}for(s=r-n,o=P[U];s>0;)o=o.parentNode,s--;for(u=P[z];0>s;)u=u.parentNode,s++;for(a=o.parentNode,f=u.parentNode;a!=f;a=a.parentNode,f=f.parentNode)o=a,u=f;return L(o,u,e)}function N(e){var t,n,i,s,o,u,a,f,l;if(e!=F&&(t=r()),P[R]==P[W])return t;if(3==P[U].nodeType){if(n=P[U].nodeValue,i=n.substring(P[R],P[W]),e!=j&&(s=P[U],f=P[R],l=P[W]-P[R],0===f&&l>=s.nodeValue.length-1?s.parentNode.removeChild(s):s.deleteData(f,l),P.collapse(I)),e==F)return;return i.length>0&&t.appendChild(H.createTextNode(i)),t}for(s=w(P[U],P[R]),o=P[W]-P[R];s&&o>0;)u=s.nextSibling,a=_(s,e),t&&t.appendChild(a),--o,s=u;return e!=j&&P.collapse(I),t}function C(e,t){var n,i,s,o,u,a;if(t!=F&&(n=r()),i=A(e,t),n&&n.appendChild(i),s=V(e),o=s-P[R],0>=o)return t!=j&&(P.setEndBefore(e),P.collapse(q)),n;for(i=e.previousSibling;o>0;)u=i.previousSibling,a=_(i,t),n&&n.insertBefore(a,n.firstChild),--o,i=u;return t!=j&&(P.setEndBefore(e),P.collapse(q)),n}function k(e,t){var n,i,s,o,u,a;for(t!=F&&(n=r()),s=O(e,t),n&&n.appendChild(s),i=V(e),++i,o=P[W]-i,s=e.nextSibling;s&&o>0;)u=s.nextSibling,a=_(s,t),n&&n.appendChild(a),--o,s=u;return t!=j&&(P.setStartAfter(e),P.collapse(I)),n}function L(e,t,n){var i,s,o,u,a,f,l,c;for(n!=F&&(s=r()),i=O(e,n),s&&s.appendChild(i),o=e.parentNode,u=V(e),a=V(t),++u,f=a-u,l=e.nextSibling;f>0;)c=l.nextSibling,i=_(l,n),s&&s.appendChild(i),l=c,--f;return i=A(t,n),s&&s.appendChild(i),n!=j&&(P.setStartAfter(e),P.collapse(I)),s}function A(e,t){var n=w(P[z],P[W]-1),r,i,s,o,u,a=n!=P[z];if(n==e)return M(n,a,q,t);for(r=n.parentNode,i=M(r,q,q,t);r;){for(;n;)s=n.previousSibling,o=M(n,a,q,t),t!=F&&i.insertBefore(o,i.firstChild),a=I,n=s;if(r==e)return i;n=r.previousSibling,r=r.parentNode,u=M(r,q,q,t),t!=F&&u.appendChild(i),i=u}}function O(e,t){var n=w(P[U],P[R]),r=n!=P[U],i,s,o,u,a;if(n==e)return M(n,r,I,t);for(i=n.parentNode,s=M(i,q,I,t);i;){for(;n;)o=n.nextSibling,u=M(n,r,I,t),t!=F&&s.appendChild(u),r=I,n=o;if(i==e)return s;n=i.nextSibling,i=i.parentNode,a=M(i,q,I,t),t!=F&&a.appendChild(s),s=a}}function M(e,t,r,i){var s,o,u,a,f;if(t)return _(e,i);if(3==e.nodeType){if(s=e.nodeValue,r?(a=P[R],o=s.substring(a),u=s.substring(0,a)):(a=P[W],o=s.substring(0,a),u=s.substring(a)),i!=j&&(e.nodeValue=u),i==F)return;return f=n.clone(e,q),f.nodeValue=o,f}if(i!=F)return n.clone(e,q)}function _(e,t){return t!=F?t==j?n.clone(e,I):e:(e.parentNode.removeChild(e),void 0)}function D(){return n.create("body",null,m()).outerText}var P=this,H=n.doc,B=0,j=1,F=2,I=!0,q=!1,R="startOffset",U="startContainer",z="endContainer",W="endOffset",X=e.extend,V=n.nodeIndex;return X(P,{startContainer:H,startOffset:0,endContainer:H,endOffset:0,collapsed:I,commonAncestorContainer:H,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:i,setEnd:s,setStartBefore:o,setStartAfter:u,setEndBefore:a,setEndAfter:f,collapse:l,selectNode:c,selectNodeContents:h,compareBoundaryPoints:p,deleteContents:d,extractContents:v,cloneContents:m,insertNode:g,surroundContents:y,cloneRange:b,toStringIE:D}),P}return t.prototype.toString=function(){return this.toStringIE()},t}),r(v,[p],function(e){function t(e){var t;return t=document.createElement("div"),t.innerHTML=e,t.textContent||t.innerText||e}function n(e,t){var n,r,i,o={};if(e){for(e=e.split(","),t=t||10,n=0;n<e.length;n+=2)r=String.fromCharCode(parseInt(e[n],t)),s[r]||(i="&"+e[n+1]+";",o[r]=i,o[i]=r);return o}}var r=e.makeMap,i,s,o,u=/[&<>\"\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,a=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,f=/[<>&\"\']/g,l=/&(#x|#)?([\w]+);/g,c={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"};s={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;"},o={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},i=n("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32);var h={encodeRaw:function(e,t){return e.replace(t?u:a,function(e){return s[e]||e})},encodeAllRaw:function(e){return(""+e).replace(f,function(e){return s[e]||e})},encodeNumeric:function(e,t){return e.replace(t?u:a,function(e){return e.length>1?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":s[e]||"&#"+e.charCodeAt(0)+";"})},encodeNamed:function(e,t,n){return n=n||i,e.replace(t?u:a,function(e){return s[e]||n[e]||e})},getEncodeFunc:function(e,t){function o(e,n){return e.replace(n?u:a,function(e){return s[e]||t[e]||"&#"+e.charCodeAt(0)+";"||e})}function f(e,n){return h.encodeNamed(e,n,t)}return t=n(t)||i,e=r(e.replace(/\+/g,",")),e.named&&e.numeric?o:e.named?t?f:h.encodeNamed:e.numeric?h.encodeNumeric:h.encodeRaw},decode:function(e){return e.replace(l,function(e,n,r){return n?(r=parseInt(r,2===n.length?16:10),r>65535?(r-=65536,String.fromCharCode(55296+(r>>10),56320+(1023&r))):c[r]||String.fromCharCode(r)):o[e]||i[e]||t(e)})}};return h}),r(m,[],function(){var e=navigator,t=e.userAgent,n,r,i,s,o,u;n=window.opera&&window.opera.buildNumber,r=/WebKit/.test(t),i=!r&&!n&&/MSIE/gi.test(t)&&/Explorer/gi.test(e.appName),i=i&&/MSIE (\w+)\./.exec(t)[1],s=!r&&/Gecko/.test(t),o=-1!=t.indexOf("Mac"),u=/(iPad|iPhone)/.test(t);var a=!u||t.match(/AppleWebKit\/(\d*)/)[1]>=534;return{opera:n,webkit:r,ie:i,gecko:s,mac:o,iOS:u,contentEditable:a,transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:8!=i,range:window.getSelection&&"Range"in window,documentMode:i?document.documentMode||7:10}}),r(g,[f,c,a,h,d,v,m,p],function(e,n,r,i,s,o,u,a){function f(e,t){var i=this,s;i.doc=e,i.win=window,i.files={},i.counter=0,i.stdMode=!m||e.documentMode>=8,i.boxModel=!m||"CSS1Compat"==e.compatMode||i.stdMode,i.hasOuterHTML="outerHTML"in e.createElement("a"),i.settings=t=d({keep_values:!1,hex_colors:1},t),i.schema=t.schema,i.styles=new n({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope},t.schema),i.fixDoc(e),i.events=t.ownEvents?new r(t.proxy):r.Event,s=t.schema?t.schema.getBlockElements():{},i.isBlock=function(e){if(!e)return!1;var t=e.nodeType;return t?1===t&&!!s[e.nodeName]:!!s[e]}}var l=a.each,c=a.is,h=a.grep,p=a.trim,d=a.extend,v=u.webkit,m=u.ie,g=/^([a-z0-9],?)+$/i,y=/^[ \t\r\n]*$/,b=a.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," ");return f.prototype={root:null,props:{"for":"htmlFor","class":"className",className:"className",checked:"checked",disabled:"disabled",maxlength:"maxLength",readonly:"readOnly",selected:"selected",value:"value",id:"id",name:"name",type:"type"},fixDoc:function(e){var t=this.settings,n;if(m&&t.schema){"abbr article aside audio canvas details figcaption figure footer header hgroup mark menu meter nav output progress section summary time video".replace(/\w+/g,function(t){e.createElement(t)});for(n in t.schema.getCustomElements())e.createElement
(n)}},clone:function(e,t){var n=this,r,i;return!m||1!==e.nodeType||t?e.cloneNode(t):(i=n.doc,t?r.firstChild:(r=i.createElement(e.nodeName),l(n.getAttribs(e),function(t){n.setAttrib(r,t.nodeName,n.getAttrib(e,t.nodeName))}),r))},getRoot:function(){var e=this;return e.get(e.settings.root_element)||e.doc.body},getViewPort:function(e){var t,n;return e=e?e:this.win,t=e.document,n=this.boxModel?t.documentElement:t.body,{x:e.pageXOffset||n.scrollLeft,y:e.pageYOffset||n.scrollTop,w:e.innerWidth||n.clientWidth,h:e.innerHeight||n.clientHeight}},getRect:function(e){var t=this,n,r;return e=t.get(e),n=t.getPos(e),r=t.getSize(e),{x:n.x,y:n.y,w:r.w,h:r.h}},getSize:function(e){var t=this,n,r;return e=t.get(e),n=t.getStyle(e,"width"),r=t.getStyle(e,"height"),-1===n.indexOf("px")&&(n=0),-1===r.indexOf("px")&&(r=0),{w:parseInt(n,10)||e.offsetWidth||e.clientWidth,h:parseInt(r,10)||e.offsetHeight||e.clientHeight}},getParent:function(e,t,n){return this.getParents(e,t,n,!1)},getParents:function(e,n,r,i){var s=this,o,u=[];for(e=s.get(e),i=i===t,r=r||("BODY"!=s.getRoot().nodeName?s.getRoot().parentNode:null),c(n,"string")&&(o=n,n="*"===n?function(e){return 1==e.nodeType}:function(e){return s.is(e,o)});e&&e!=r&&e.nodeType&&9!==e.nodeType;){if(!n||n(e)){if(!i)return e;u.push(e)}e=e.parentNode}return i?u:null},get:function(e){var t;return e&&this.doc&&"string"==typeof e&&(t=e,e=this.doc.getElementById(e),e&&e.id!==t)?this.doc.getElementsByName(t)[1]:e},getNext:function(e,t){return this._findSib(e,t,"nextSibling")},getPrev:function(e,t){return this._findSib(e,t,"previousSibling")},select:function(t,n){var r=this;return e(t,r.get(n)||r.get(r.settings.root_element)||r.doc,[])},is:function(n,r){var i;if(n.length===t){if("*"===r)return 1==n.nodeType;if(g.test(r)){for(r=r.toLowerCase().split(/,/),n=n.nodeName.toLowerCase(),i=r.length-1;i>=0;i--)if(r[i]==n)return!0;return!1}}return n.nodeType&&1!=n.nodeType?!1:e.matches(r,n.nodeType?[n]:n).length>0},add:function(e,t,n,r,i){var s=this;return this.run(e,function(e){var o;return o=c(t,"string")?s.doc.createElement(t):t,s.setAttribs(o,n),r&&(r.nodeType?o.appendChild(r):s.setHTML(o,r)),i?o:e.appendChild(o)})},create:function(e,t,n){return this.add(this.doc.createElement(e),e,t,n,1)},createHTML:function(e,t,n){var r="",i;r+="<"+e;for(i in t)t.hasOwnProperty(i)&&null!==t[i]&&(r+=" "+i+'="'+this.encode(t[i])+'"');return"undefined"!=typeof n?r+">"+n+"</"+e+">":r+" />"},createFragment:function(e){var t,n,r=this.doc,i;for(i=r.createElement("div"),t=r.createDocumentFragment(),e&&(i.innerHTML=e);n=i.firstChild;)t.appendChild(n);return t},remove:function(e,t){return this.run(e,function(e){var n,r=e.parentNode;if(!r)return null;if(t)for(;n=e.firstChild;)!m||3!==n.nodeType||n.nodeValue?r.insertBefore(n,e):e.removeChild(n);return r.removeChild(e)})},setStyle:function(e,t,n){return this.run(e,function(e){var r=this,i,s;if(t)if("string"==typeof t){i=e.style,t=t.replace(/-(\D)/g,function(e,t){return t.toUpperCase()}),"number"!=typeof n||b[t]||(n+="px"),"opacity"===t&&e.runtimeStyle&&"undefined"==typeof e.runtimeStyle.opacity&&(i.filter=""===n?"":"alpha(opacity="+100*n+")"),"float"==t&&(t="cssFloat"in e.style?"cssFloat":"styleFloat");try{i[t]=n}catch(o){}r.settings.update_styles&&e.removeAttribute("data-mce-style")}else for(s in t)r.setStyle(e,s,t[s])})},getStyle:function(e,n,r){if(e=this.get(e)){if(this.doc.defaultView&&r){n=n.replace(/[A-Z]/g,function(e){return"-"+e});try{return this.doc.defaultView.getComputedStyle(e,null).getPropertyValue(n)}catch(i){return null}}return n=n.replace(/-(\D)/g,function(e,t){return t.toUpperCase()}),"float"==n&&(n=m?"styleFloat":"cssFloat"),n.currentStyle&&r?e.currentStyle[n]:e.style?e.style[n]:t}},setStyles:function(e,t){this.setStyle(e,t)},css:function(e,t,n){this.setStyle(e,t,n)},removeAllAttribs:function(e){return this.run(e,function(e){var t,n=e.attributes;for(t=n.length-1;t>=0;t--)e.removeAttributeNode(n.item(t))})},setAttrib:function(e,t,n){var r=this;if(e&&t)return this.run(e,function(e){var i=r.settings,s=e.getAttribute(t);if(null!==n)switch(t){case"style":if(!c(n,"string"))return l(n,function(t,n){r.setStyle(e,n,t)}),void 0;i.keep_values&&(n?e.setAttribute("data-mce-style",n,2):e.removeAttribute("data-mce-style",2)),e.style.cssText=n;break;case"class":e.className=n||"";break;case"src":case"href":i.keep_values&&(i.url_converter&&(n=i.url_converter.call(i.url_converter_scope||r,n,t,e)),r.setAttrib(e,"data-mce-"+t,n,2));break;case"shape":e.setAttribute("data-mce-style",n)}c(n)&&null!==n&&0!==n.length?e.setAttribute(t,""+n,2):e.removeAttribute(t,2),s!=n&&i.onSetAttrib&&i.onSetAttrib({attrElm:e,attrName:t,attrValue:n})})},setAttribs:function(e,t){var n=this;return this.run(e,function(e){l(t,function(t,r){n.setAttrib(e,r,t)})})},getAttrib:function(e,t,n){var r,i=this,s;if(e=i.get(e),!e||1!==e.nodeType)return n===s?!1:n;if(c(n)||(n=""),/^(src|href|style|coords|shape)$/.test(t)&&(r=e.getAttribute("data-mce-"+t)))return r;if(m&&i.props[t]&&(r=e[i.props[t]],r=r&&r.nodeValue?r.nodeValue:r),r||(r=e.getAttribute(t,2)),/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noshade|nowrap|readonly|selected)$/.test(t))return e[i.props[t]]===!0&&""===r?t:r?t:"";if("FORM"===e.nodeName&&e.getAttributeNode(t))return e.getAttributeNode(t).nodeValue;if("style"===t&&(r=r||e.style.cssText,r&&(r=i.serializeStyle(i.parseStyle(r),e.nodeName),i.settings.keep_values&&e.setAttribute("data-mce-style",r))),v&&"class"===t&&r&&(r=r.replace(/(apple|webkit)\-[a-z\-]+/gi,"")),m)switch(t){case"rowspan":case"colspan":1===r&&(r="");break;case"size":("+0"===r||20===r||0===r)&&(r="");break;case"width":case"height":case"vspace":case"checked":case"disabled":case"readonly":0===r&&(r="");break;case"hspace":-1===r&&(r="");break;case"maxlength":case"tabindex":(32768===r||2147483647===r||"32768"===r)&&(r="");break;case"multiple":case"compact":case"noshade":case"nowrap":return 65535===r?t:n;case"shape":r=r.toLowerCase();break;default:0===t.indexOf("on")&&r&&(r=(""+r).replace(/^function\s+\w+\(\)\s+\{\s+(.*)\s+\}$/,"$1"))}return r!==s&&null!==r&&""!==r?""+r:n},getPos:function(e,t){var n=this,r=0,i=0,s,o=n.doc,u;if(e=n.get(e),t=t||o.body,e){if(t===o.body&&e.getBoundingClientRect)return u=e.getBoundingClientRect(),t=n.boxModel?o.documentElement:o.body,r=u.left+(o.documentElement.scrollLeft||o.body.scrollLeft)-t.clientTop,i=u.top+(o.documentElement.scrollTop||o.body.scrollTop)-t.clientLeft,{x:r,y:i};for(s=e;s&&s!=t&&s.nodeType;)r+=s.offsetLeft||0,i+=s.offsetTop||0,s=s.offsetParent;for(s=e.parentNode;s&&s!=t&&s.nodeType;)r-=s.scrollLeft||0,i-=s.scrollTop||0,s=s.parentNode}return{x:r,y:i}},parseStyle:function(e){return this.styles.parse(e)},serializeStyle:function(e,t){return this.styles.serialize(e,t)},addStyle:function(e){var t=this,n=t.doc,r,i;if(t!==f.DOM&&n===document){var s=f.DOM.addedStyles;if(s=s||[],s[e])return;s[e]=!0,f.DOM.addedStyles=s}i=n.getElementById("mceDefaultStyles"),i||(i=n.createElement("style"),i.id="mceDefaultStyles",i.type="text/css",r=n.getElementsByTagName("head")[0],r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i)),i.styleSheet?i.styleSheet.cssText+=e:i.appendChild(n.createTextNode(e))},loadCSS:function(e){var t=this,n=t.doc,r;return t!==f.DOM&&n===document?(f.DOM.loadCSS(e),void 0):(e||(e=""),r=n.getElementsByTagName("head")[0],l(e.split(","),function(e){var i;t.files[e]||(t.files[e]=!0,i=t.create("link",{rel:"stylesheet",href:e}),m&&n.documentMode&&n.recalc&&(i.onload=function(){n.recalc&&n.recalc(),i.onload=null}),r.appendChild(i))}),void 0)},addClass:function(e,t){return this.run(e,function(e){var n;return t?this.hasClass(e,t)?e.className:(n=this.removeClass(e,t),e.className=n=(""!==n?n+" ":"")+t,n):0})},removeClass:function(e,t){var n=this,r;return n.run(e,function(e){var i;return n.hasClass(e,t)?(r||(r=new RegExp("(^|\\s+)"+t+"(\\s+|$)","g")),i=e.className.replace(r," "),i=p(" "!=i?i:""),e.className=i,i||(e.removeAttribute("class"),e.removeAttribute("className")),i):e.className})},hasClass:function(e,t){return e=this.get(e),e&&t?-1!==(" "+e.className+" ").indexOf(" "+t+" "):!1},toggleClass:function(e,n,r){r=r===t?!this.hasClass(e,n):r,this.hasClass(e,n)!==r&&(r?this.addClass(e,n):this.removeClass(e,n))},show:function(e){return this.setStyle(e,"display","block")},hide:function(e){return this.setStyle(e,"display","none")},isHidden:function(e){return e=this.get(e),!e||"none"==e.style.display||"none"==this.getStyle(e,"display")},uniqueId:function(e){return(e?e:"mce_")+this.counter++},setHTML:function(e,t){var n=this;return n.run(e,function(e){if(m){for(;e.firstChild;)e.removeChild(e.firstChild);try{e.innerHTML="<br />"+t,e.removeChild(e.firstChild)}catch(r){var i=n.create("div");i.innerHTML="<br />"+t,l(h(i.childNodes),function(t,n){n&&e.canHaveHTML&&e.appendChild(t)})}}else e.innerHTML=t;return t})},getOuterHTML:function(e){var t,n=this;return(e=n.get(e))?1===e.nodeType&&n.hasOuterHTML?e.outerHTML:(t=(e.ownerDocument||n.doc).createElement("body"),t.appendChild(e.cloneNode(!0)),t.innerHTML):null},setOuterHTML:function(e,t,n){var r=this;return r.run(e,function(e){function i(){var i,s;for(s=n.createElement("body"),s.innerHTML=t,i=s.lastChild;i;)r.insertAfter(i.cloneNode(!0),e),i=i.previousSibling;r.remove(e)}if(1==e.nodeType)if(n=n||e.ownerDocument||r.doc,m)try{1==e.nodeType&&r.hasOuterHTML?e.outerHTML=t:i()}catch(s){i()}else i()})},decode:o.decode,encode:o.encodeAllRaw,insertAfter:function(e,t){return t=this.get(t),this.run(e,function(e){var n,r;return n=t.parentNode,r=t.nextSibling,r?n.insertBefore(e,r):n.appendChild(e),e})},replace:function(e,t,n){var r=this;return r.run(t,function(t){return c(t,"array")&&(e=e.cloneNode(!0)),n&&l(h(t.childNodes),function(t){e.appendChild(t)}),t.parentNode.replaceChild(e,t)})},rename:function(e,t){var n=this,r;return e.nodeName!=t.toUpperCase()&&(r=n.create(t),l(n.getAttribs(e),function(t){n.setAttrib(r,t.nodeName,n.getAttrib(e,t.nodeName))}),n.replace(r,e,1)),r||e},findCommonAncestor:function(e,t){for(var n=e,r;n;){for(r=t;r&&n!=r;)r=r.parentNode;if(n==r)break;n=n.parentNode}return!n&&e.ownerDocument?e.ownerDocument.documentElement:n},toHex:function(e){return this.styles.toHex(a.trim(e))},getClasses:function(){function e(t){l(t.imports,function(t){e(t)}),l(t.cssRules||t.rules,function(t){switch(t.type||1){case 1:t.selectorText&&l(t.selectorText.split(","),function(e){e=e.replace(/^\s*|\s*$|^\s\./g,""),!/\.mce/.test(e)&&/\.[\w\-]+$/.test(e)&&(s=e,e=e.replace(/.*\.([a-z0-9_\-]+).*/i,"$1"),(!i||(e=i(e,s)))&&(r[e]||(n.push({"class":e}),r[e]=1)))});break;case 3:e(t.styleSheet)}})}var t=this,n=[],r={},i=t.settings.class_filter,s;if(t.classes)return t.classes;try{l(t.doc.styleSheets,e)}catch(o){}return n.length>0&&(t.classes=n),n},run:function(e,t,n){var r=this,i;return"string"==typeof e&&(e=r.get(e)),e?(n=n||this,e.nodeType||!e.length&&0!==e.length?t.call(n,e):(i=[],l(e,function(e,s){e&&("string"==typeof e&&(e=r.get(e)),i.push(t.call(n,e,s)))}),i)):!1},getAttribs:function(e){var t;if(e=this.get(e),!e)return[];if(m){if(t=[],"OBJECT"==e.nodeName)return e.attributes;"OPTION"===e.nodeName&&this.getAttrib(e,"selected")&&t.push({specified:1,nodeName:"selected"});var n=/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi;return e.cloneNode(!1).outerHTML.replace(n,"").replace(/[\w:\-]+/gi,function(e){t.push({specified:1,nodeName:e})}),t}return e.attributes},isEmpty:function(e,t){var n=this,r,s,o,u,a,f=0;if(e=e.firstChild){u=new i(e,e.parentNode),t=t||n.schema?n.schema.getNonEmptyElements():null;do{if(o=e.nodeType,1===o){if(e.getAttribute("data-mce-bogus"))continue;if(a=e.nodeName.toLowerCase(),t&&t[a]){if("br"===a){f++;continue}return!1}for(s=n.getAttribs(e),r=e.attributes.length;r--;)if(a=e.attributes[r].nodeName,"name"===a||"data-mce-bookmark"===a)return!1}if(8==o)return!1;if(3===o&&!y.test(e.nodeValue))return!1}while(e=u.next())}return 1>=f},createRng:function(){var e=this.doc;return e.createRange?e.createRange():new s(this)},nodeIndex:function(e,t){var n=0,r,i,s;if(e)for(r=e.nodeType,e=e.previousSibling,i=e;e;e=e.previousSibling)s=e.nodeType,(!t||3!=s||s!=r&&e.nodeValue.length)&&(n++,r=s);return n},split:function(e,t,n){function r(e){function t(e){var t=e.previousSibling&&"SPAN"==e.previousSibling.nodeName,n=e.nextSibling&&"SPAN"==e.nextSibling.nodeName;return t&&n}var n,s=e.childNodes,o=e.nodeType;if(1!=o||"bookmark"!=e.getAttribute("data-mce-type")){for(n=s.length-1;n>=0;n--)r(s[n]);if(9!=o){if(3==o&&e.nodeValue.length>0){var u=p(e.nodeValue).length;if(!i.isBlock(e.parentNode)||u>0||0===u&&t(e))return}else if(1==o&&(s=e.childNodes,1==s.length&&s[0]&&1==s[0].nodeType&&"bookmark"==s[0].getAttribute("data-mce-type")&&e.parentNode.insertBefore(s[0],e),s.length||/^(br|hr|input|img)$/i.test(e.nodeName)))return;i.remove(e)}return e}}var i=this,s=i.createRng(),o,u,a;return e&&t?(s.setStart(e.parentNode,i.nodeIndex(e)),s.setEnd(t.parentNode,i.nodeIndex(t)),o=s.extractContents(),s=i.createRng(),s.setStart(t.parentNode,i.nodeIndex(t)+1),s.setEnd(e.parentNode,i.nodeIndex(e)+1),u=s.extractContents(),a=e.parentNode,a.insertBefore(r(o),e),n?a.replaceChild(n,t):a.insertBefore(t,e),a.insertBefore(r(u),e),i.remove(e),n||t):void 0},bind:function(e,t,n,r){return this.events.bind(e,t,n,r||this)},unbind:function(e,t,n){return this.events.unbind(e,t,n)},fire:function(e,t,n){return this.events.fire(e,t,n)},getContentEditable:function(e){var t;return 1!=e.nodeType?null:(t=e.getAttribute("data-mce-contenteditable"),t&&"inherit"!==t?t:"inherit"!==e.contentEditable?e.contentEditable:null)},destroy:function(){var e=this;e.win=e.doc=e.root=e.events=e.frag=null},dumpRng:function(e){return"startContainer: "+e.startContainer.nodeName+", startOffset: "+e.startOffset+", endContainer: "+e.endContainer.nodeName+", endOffset: "+e.endOffset},_findSib:function(e,t,n){var r=this,i=t;if(e)for("string"==typeof i&&(i=function(e){return r.is(e,t)}),e=e[n];e;e=e[n])if(i(e))return e;return null}},f.DOM=new f(document),f}),r(y,[g,p],function(e,t){function n(){function e(e,t){function n(){s.remove(u),o&&(o.onreadystatechange=o.onload=o=null),t()}function i(){"undefined"!=typeof console&&console.log&&console.log("Failed to load: "+e)}var s=r,o,u;u=s.uniqueId(),o=document.createElement("script"),o.id=u,o.type="text/javascript",o.src=e,"onreadystatechange"in o?o.onreadystatechange=function(){/loaded|complete/.test(o.readyState)&&n()}:o.onload=n,o.onerror=i,(document.getElementsByTagName("head")[0]||document.body).appendChild(o)}var t=0,n=1,o=2,u={},a=[],f={},l=[],c=0,h;this.isDone=function(e){return u[e]==o},this.markDone=function(e){u[e]=o},this.add=this.load=function(e,n,r){var i=u[e];i==h&&(a.push(e),u[e]=t),n&&(f[e]||(f[e]=[]),f[e].push({func:n,scope:r||this}))},this.loadQueue=function(e,t){this.loadScripts(a,e,t)},this.loadScripts=function(t,r,a){function p(e){i(f[e],function(e){e.func.call(e.scope)}),f[e]=h}var d;l.push({func:r,scope:a||this}),d=function(){var r=s(t);t.length=0,i(r,function(t){return u[t]==o?(p(t),void 0):(u[t]!=n&&(u[t]=n,c++,e(t,function(){u[t]=o,c--,p(t),d()})),void 0)}),c||(i(l,function(e){e.func.call(e.scope)}),l.length=0)},d()}}var r=e.DOM,i=t.each,s=t.grep;return n.ScriptLoader=new n,n}),r(b,[y,p],function(e,n){function r(){var e=this;e.items=[],e.urls={},e.lookup={}}var i=n.each;return r.prototype={get:function(e){return this.lookup[e]?this.lookup[e].instance:t},dependencies:function(e){var t;return this.lookup[e]&&(t=this.lookup[e].dependencies),t||[]},requireLangPack:function(t){var n=r.settings;n&&n.language&&n.language_load!==!1&&e.ScriptLoader.add(this.urls[t]+"/langs/"+n.language+".js")},add:function(e,t,n){return this.items.push(t),this.lookup[e]={instance:t,dependencies:n},t},createUrl:function(e,t){return"object"==typeof t?t:{prefix:e.prefix,resource:t,suffix:e.suffix}},addComponents:function(t,n){var r=this.urls[t];i(n,function(t){e.ScriptLoader.add(r+"/"+t)})},load:function(n,s,o,u){function a(){var r=f.dependencies(n);i(r,function(e){var n=f.createUrl(s,e);f.load(n.resource,n,t,t)}),o&&(u?o.call(u):o.call(e))}var f=this,l=s;f.urls[n]||("object"==typeof s&&(l=s.prefix+s.resource+s.suffix),0!==l.indexOf("/")&&-1==l.indexOf("://")&&(l=r.baseURL+"/"+l),f.urls[n]=l.substring(0,l.lastIndexOf("/")),f.lookup[n]?a():e.ScriptLoader.add(l,a,u))}},r.PluginManager=new r,r.ThemeManager=new r,r}),r(w,[],function(){function e(e,t,n){var r,i,s=n?"lastChild":"firstChild",o=n?"prev":"next";if(e[s])return e[s];if(e!==t){if(r=e[o])return r;for(i=e.parent;i&&i!==t;i=i.parent)if(r=i[o])return r}}function t(e,t){this.name=e,this.type=t,1===t&&(this.attributes=[],this.attributes.map={})}var n=/^[ \t\r\n]*$/,r={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11};return t.prototype={replace:function(e){var t=this;return e.parent&&e.remove(),t.insert(e,t),t.remove(),t},attr:function(e,t){var n=this,r,i,s;if("string"!=typeof e){for(i in e)n.attr(i,e[i]);return n}if(r=n.attributes){if(t!==s){if(null===t){if(e in r.map)for(delete r.map[e],i=r.length;i--;)if(r[i].name===e)return r=r.splice(i,1),n;return n}if(e in r.map){for(i=r.length;i--;)if(r[i].name===e){r[i].value=t;break}}else r.push({name:e,value:t});return r.map[e]=t,n}return r.map[e]}},clone:function(){var e=this,n=new t(e.name,e.type),r,i,s,o,u;if(s=e.attributes){for(u=[],u.map={},r=0,i=s.length;i>r;r++)o=s[r],"id"!==o.name&&(u[u.length]={name:o.name,value:o.value},u.map[o.name]=o.value);n.attributes=u}return n.value=e.value,n.shortEnded=e.shortEnded,n},wrap:function(e){var t=this;return t.parent.insert(e,t),e.append(t),t},unwrap:function(){var e=this,t,n;for(t=e.firstChild;t;)n=t.next,e.insert(t,e,!0),t=n;e.remove()},remove:function(){var e=this,t=e.parent,n=e.next,r=e.prev;return t&&(t.firstChild===e?(t.firstChild=n,n&&(n.prev=null)):r.next=n,t.lastChild===e?(t.lastChild=r,r&&(r.next=null)):n.prev=r,e.parent=e.next=e.prev=null),e},append:function(e){var t=this,n;return e.parent&&e.remove(),n=t.lastChild,n?(n.next=e,e.prev=n,t.lastChild=e):t.lastChild=t.firstChild=e,e.parent=t,e},insert:function(e,t,n){var r;return e.parent&&e.remove(),r=t.parent||this,n?(t===r.firstChild?r.firstChild=e:t.prev.next=e,e.prev=t.prev,e.next=t,t.prev=e):(t===r.lastChild?r.lastChild=e:t.next.prev=e,e.next=t.next,e.prev=t,t.next=e),e.parent=r,e},getAll:function(t){var n=this,r,i=[];for(r=n.firstChild;r;r=e(r,n))r.name===t&&i.push(r);return i},empty:function(){var t=this,n,r,i;if(t.firstChild){for(n=[],i=t.firstChild;i;i=e(i,t))n.push(i);for(r=n.length;r--;)i=n[r],i.parent=i.firstChild=i.lastChild=i.next=i.prev=null}return t.firstChild=t.lastChild=null,t},isEmpty:function(t){var r=this,i=r.firstChild,s,o;if(i)do{if(1===i.type){if(i.attributes.map["data-mce-bogus"])continue;if(t[i.name])return!1;for(s=i.attributes.length;s--;)if(o=i.attributes[s].name,"name"===o||0===o.indexOf("data-mce-"))return!1}if(8===i.type)return!1;if(3===i.type&&!n.test(i.value))return!1}while(i=e(i,r));return!0},walk:function(t){return e(this,null,t)}},t.create=function(e,n){var i,s;if(i=new t(e,r[e]||1),n)for(s in n)i.attr(s,n[s]);return i},t}),r(E,[p],function(e){function t(e,t){return e?e.split(t||" "):[]}function n(e){function n(e,n,r){function i(e){var t={},n,r;for(n=0,r=e.length;r>n;n++)t[e[n]]={};return t}var s,a,f,l=arguments;for(r=r||[],n=n||"","string"==typeof r&&(r=t(r)),a=3;a<l.length;a++)"string"==typeof l[a]&&(l[a]=t(l[a])),r.push.apply(r,l[a]);for(e=t(e),s=e.length;s--;)f=[].concat(u,t(n)),o[e[s]]={attributes:i(f),attributesOrder:f,children:i(r)}}function i(e,n){var r,i,s,u;for(e=t(e),r=e.length,n=t(n);r--;)for(i=o[e[r]],s=0,u=n.length;u>s;s++)i.attributes[n[s]]={},i.attributesOrder.push(n[s])}var o={},u,a,f,l,c,h,p;return r[e]?r[e]:(u=t("id accesskey class dir lang style tabindex title"),a=t("onabort onblur oncancel oncanplay oncanplaythrough onchange onclick onclose oncontextmenu oncuechange ondblclick ondrag ondragend ondragenter ondragleave ondragover ondragstart ondrop ondurationchange onemptied onended onerror onfocus oninput oninvalid onkeydown onkeypress onkeyup onload onloadeddata onloadedmetadata onloadstart onmousedown onmousemove onmouseout onmouseover onmouseup onmousewheel onpause onplay onplaying onprogress onratechange onreset onscroll onseeked onseeking onseeking onselect onshow onstalled onsubmit onsuspend ontimeupdate onvolumechange onwaiting"),f=t("address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul"),l=t("a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment"),"html4"!=e&&(u.push.apply(u,t("contenteditable contextmenu draggable dropzone hidden spellcheck translate")),f.push.apply(f,t("article aside details dialog figure header footer hgroup section nav")),l.push.apply(l,t("audio canvas command datalist mark meter output progress time wbr video ruby bdi keygen"))),"html5-strict"!=e&&(u.push("xml:lang"),p=t("acronym applet basefont big font strike tt"),l.push.apply(l,p),s(p,function(e){n(e,"",l)}),h=t("center dir isindex noframes"),f.push.apply(f,h),c=[].concat(f,l),s(h,function(e){n(e,"",c)})),c=c||[].concat(f,l),n("html","manifest","head body"),n("head","","base command link meta noscript script style title"),n("title hr noscript br"),n("base","href target"),n("link","href rel media hreflang type sizes hreflang"),n("meta","name http-equiv content charset"),n("style","media type scoped"),n("script","src async defer type charset"),n("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",c),n("address dt dd div caption","",c),n("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",l),n("blockquote","cite",c),n("ol","reversed start type","li"),n("ul","","li"),n("li","value",c),n("dl","","dt dd"),n("a","href target rel media hreflang type",l),n("q","cite",l),n("ins del","cite datetime",c),n("img","src alt usemap ismap width height"),n("iframe","src name width height",c),n("embed","src type width height"),n("object","data type typemustmatch name usemap form width height",c,"param"),n("param","name value"),n("map","name",c,"area"),n("area","alt coords shape href target rel media hreflang type"),n("table","border","caption colgroup thead tfoot tbody tr"+("html4"==e?" col":"")),n("colgroup","span","col"),n("col","span"),n("tbody thead tfoot","","tr"),n("tr","","td th"),n("td","colspan rowspan headers",c),n("th","colspan rowspan headers scope abbr",c),n("form","accept-charset action autocomplete enctype method name novalidate target",c),n("fieldset","disabled form name",c,"legend"),n("label","form for",l),n("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),n("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"==e?c:l),n("select","disabled form multiple name required size","option optgroup"),n("optgroup","disabled label","option"),n("option","disabled label selected value"),n("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),n("menu","type label",c,"li"),n("noscript","",c),"html4"!=e&&(n("wbr"),n("ruby","",l,"rt rp"),n("figcaption","",c),n("mark rt rp summary bdi","",l),n("canvas","width height",c),n("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height",c,"track source"),n("audio","src crossorigin preload autoplay mediagroup loop muted controls",c,"track source"),n("source","src type media"),n("track","kind src srclang label default"),n("datalist","",l,"option"),n("article section nav aside header footer","",c),n("hgroup","","h1 h2 h3 h4 h5 h6"),n("figure","",c,"figcaption"),n("time","datetime",l),n("dialog","open",c),n("command","type label icon disabled checked radiogroup command"),n("output","for form name",l),n("progress","value max",l),n("meter","value min max low high optimum",l),n("details","open",c,"summary"),n("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!=e&&(i("script","language xml:space"),i("style","xml:space"),i("object","declare classid codebase codetype archive standby align border hspace vspace"),i("param","valuetype type"),i("a","charset name rev shape coords"),i("br","clear"),i("applet","codebase archive code object alt name width height align hspace vspace"),i("img","name longdesc align border hspace vspace"),i("iframe","longdesc frameborder marginwidth marginheight scrolling align"),i("font basefont","size color face"),i("input","usemap align"),i("select","onchange"),i("textarea"),i("h1 h2 h3 h4 h5 h6 div p legend caption","align"),i("ul","type compact"),i("li","type"),i("ol dl menu dir","compact"),i("pre","width xml:space"),i("hr","align noshade size width"),i("isindex","prompt"),i("table","summary width frame rules cellspacing cellpadding align bgcolor"),i("col","width align char charoff valign"),i("colgroup","width align char charoff valign"),i("thead","align char charoff valign"),i("tr","align char charoff valign bgcolor"),i("th","axis align char charoff valign nowrap bgcolor width height"),i("form","accept"),i("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),i("tfoot","align char charoff valign"),i("tbody","align char charoff valign"),i("area","nohref"),i("body","background bgcolor text link vlink alink")),"html4"!=e&&(i("input button select textarea","autofocus"),i("input textarea","placeholder"),i("a","download"),i("link script img","crossorigin"),i("iframe","srcdoc sandbox seamless allowfullscreen")),s(t("a form meter progress dfn"),function(e){o[e]&&delete o[e].children[e]}),delete o.caption.children.table,r[e]=o,o)}var r={},i=e.makeMap,s=e.each,o=e.extend,u=e.explode,a=e.inArray;return function(e){function f(t,n,s){var u=e[t];return u?u=i(u,",",i(u.toUpperCase()," ")):(u=r[t],u||(u=i(n," ",i(n.toUpperCase()," ")),u=o(u,s),r[t]=u)),u}function l(e){return new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$")}function c(e){var n,r,s,o,u,f,c,h,p,d,v,m,y,w,E,S,x,T,N,C=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)\])?$/,k=/^([!\-])?(\w+::\w+|[^=:<]+)?(?:([=:<])(.*))?$/,L=/[*?+]/;if(e)for(e=t(e,","),g["@"]&&(S=g["@"].attributes,x=g["@"].attributesOrder),n=0,r=e.length;r>n;n++)if(u=C.exec(e[n])){if(w=u[1],p=u[2],E=u[3],h=u[5],m={},y=[],f={attributes:m,attributesOrder:y},"#"===w&&(f.paddEmpty=!0),"-"===w&&(f.removeEmpty=!0),"!"===u[4]&&(f.removeEmptyAttrs=!0),S){for(T in S)m[T]=S[T];y.push.apply(y,x)}if(h)for(h=t(h,"|"),s=0,o=h.length;o>s;s++)if(u=k.exec(h[s])){if(c={},v=u[1],d=u[2].replace(/::/g,":"),w=u[3],N=u[4],"!"===v&&(f.attributesRequired=f.attributesRequired||[],f.attributesRequired.push(d),c.required=!0),"-"===v){delete m[d],y.splice(a(y,d),1);continue}w&&("="===w&&(f.attributesDefault=f.attributesDefault||[],f.attributesDefault.push({name:d,value:N}),c.defaultValue=N),":"===w&&(f.attributesForced=f.attributesForced||[],f.attributesForced.push({name:d,value:N}),c.forcedValue=N),"<"===w&&(c.validValues=i(N,"?"))),L.test(d)?(f.attributePatterns=f.attributePatterns||[],c.pattern=l(d),f.attributePatterns.push(c)):(m[d]||y.push(d),m[d]=c)}S||"@"!=p||(S=m,x=y),E&&(f.outputName=p,g[E]=f),L.test(p)?(f.pattern=l(p),b.push(f)):g[p]=f}}function h(e){g={},b=[],c(e),s(E,function(e,t){y[t]=e.children})}function p(e){var n=/^(~)?(.+)$/;e&&s(t(e,","),function(e){var t=n.exec(e),r="~"===t[1],i=r?"span":"div",o=t[2];y[o]=y[i],A[o]=i,r||(C[o.toUpperCase()]={},C[o]={}),g[o]||(g[o]=g[i]),s(y,function(e){e[i]&&(e[o]=e[i])})})}function d(e){var n=/^([+\-]?)(\w+)\[([^\]]+)\]$/;e&&s(t(e,","),function(e){var r=n.exec(e),i,o;r&&(o=r[1],i=o?y[r[2]]:y[r[2]]={"#comment":{}},i=y[r[2]],s(t(r[3],"|"),function(e){"-"===o?delete i[e]:i[e]={}}))})}function v(e){var t=g[e],n;if(t)return t;for(n=b.length;n--;)if(t=b[n],t.pattern.test(e))return t}var m=this,g={},y={},b=[],w,E,S,x,T,N,C,k,L,A={},O={};e=e||{},E=n(e.schema),e.verify_html===!1&&(e.valid_elements="*[*]"),e.valid_styles&&(w={},s(e.valid_styles,function(e,t){w[t]=u(e)})),S=f("whitespace_elements","pre script noscript style textarea video audio iframe object"),x=f("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),T=f("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),N=f("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls"),k=f("non_empty_elements","td th iframe video audio object",T),L=f("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside nav figure"),C=f("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex samp option datalist select optgroup",L),s((e.special||"script noscript style textarea").split(" "),function(e){O[e]=new RegExp("</"+e+"[^>]*>","gi")}),e.valid_elements?h(e.valid_elements):(s(E,function(e,t){g[t]={attributes:e.attributes,attributesOrder:e.attributesOrder},y[t]=e.children}),"html5"!=e.schema&&s(t("strong/b em/i"),function(e){e=t(e,"/"),g[e[1]].outputName=e[0]}),g.img.attributesDefault=[{name:"alt",value:""}],s(t("ol ul sub sup blockquote span font a table tbody tr strong em b i"),function(e){g[e]&&(g[e].removeEmpty=!0)}),s(t("p h1 h2 h3 h4 h5 h6 th td pre div address caption"),function(e){g[e].paddEmpty=!0}),s(t("span"),function(e){g[e].removeEmptyAttrs=!0})),p(e.custom_elements),d(e.valid_children),c(e.extended_valid_elements),d("+ol[ul|ol],+ul[ul|ol]"),e.invalid_elements&&s(u(e.invalid_elements),function(e){g[e]&&delete g[e]}),v("span")||c("span[!data-mce-type|*]"),m.children=y,m.styles=w,m.getBoolAttrs=function(){return N},m.getBlockElements=function(){return C},m.getTextBlockElements=function(){return L},m.getShortEndedElements=function(){return T},m.getSelfClosingElements=function(){return x},m.getNonEmptyElements=function(){return k},m.getWhiteSpaceElements=function(){return S},m.getSpecialElements=function(){return O},m.isValidChild=function(e,t){var n=y[e];return!!n&&!!n[t]},m.isValid=function(e,t){var n,r,i=v(e);if(i){if(!t)return!0;if(i.attributes[t])return!0;if(n=i.attributePatterns)for(r=n.length;r--;)if(n[r].pattern.test(e))return!0}return!1},m.getElementRule=v,m.getCustomElements=function(){return A},m.addValidElements=c,m.setValidElements=h,m.addCustomElements=p,m.addValidChildren=d,m.elements=g}}),r(S,[E,v,p],function(e,t,n){var r=n.each;return function(n,i){var s=this,o=function(){};n=n||{},s.schema=i=i||new e,n.fix_self_closing!==!1&&(n.fix_self_closing=!0),r("comment cdata text start end pi doctype".split(" "),function(e){e&&(s[e]=n[e]||o)}),s.parse=function(e){function r(e){var t,n;for(t=c.length;t--&&c[t].name!==e;);if(t>=0){for(n=c.length-1;n>=t;n--)e=c[n],e.valid&&o.end(e.name);c.length=t}}function s(e,t,n,r,i){var s,o;if(t=t.toLowerCase(),n=t in b?t:F(n||r||i||""),E&&!m&&0!==t.indexOf("data-")){if(s=C[t],!s&&k){for(o=k.length;o--&&(s=k[o],!s.pattern.test(t)););-1===o&&(s=null)}if(!s)return;if(s.validValues&&!(n in s.validValues))return}h.map[t]=n,h.push({name:t,value:n})}var o=this,u,a=0,f,l,c=[],h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j=0,F=t.decode,I;for(D=new RegExp("<(?:(?:!--([\\w\\W]*?)-->)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([^>]+)>)|(?:([A-Za-z0-9\\-\\:\\.]+)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>))","g"),P=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,y=i.getShortEndedElements(),_=n.self_closing_elements||i.getSelfClosingElements(),b=i.getBoolAttrs(),E=n.validate,g=n.remove_internals,I=n.fix_self_closing,H=i.getSpecialElements();u=D.exec(e);){if(a<u.index&&o.text(F(e.substr(a,u.index-a))),f=u[6])f=f.toLowerCase(),":"===f.charAt(0)&&(f=f.substr(1)),r(f);else if(f=u[7]){if(f=f.toLowerCase(),":"===f.charAt(0)&&(f=f.substr(1)),w=f in y,I&&_[f]&&c.length>0&&c[c.length-1].name===f&&r(f),!E||(S=i.getElementRule(f))){if(x=!0,E&&(C=S.attributes,k=S.attributePatterns),(N=u[8])?(m=-1!==N.indexOf("data-mce-type"),m&&g&&(x=!1),h=[],h.map={},N.replace(P,s)):(h=[],h.map={}),E&&!m){if(L=S.attributesRequired,A=S.attributesDefault,O=S.attributesForced,M=S.removeEmptyAttrs,M&&!h.length&&(x=!1),O)for(p=O.length;p--;)T=O[p],v=T.name,B=T.value,"{$uid}"===B&&(B="mce_"+j++),h.map[v]=B,h.push({name:v,value:B});if(A)for(p=A.length;p--;)T=A[p],v=T.name,v in h.map||(B=T.value,"{$uid}"===B&&(B="mce_"+j++),h.map[v]=B,h.push({name:v,value:B}));if(L){for(p=L.length;p--&&!(L[p]in h.map););-1===p&&(x=!1)}h.map["data-mce-bogus"
]&&(x=!1)}x&&o.start(f,h,w)}else x=!1;if(l=H[f]){l.lastIndex=a=u.index+u[0].length,(u=l.exec(e))?(x&&(d=e.substr(a,u.index-a)),a=u.index+u[0].length):(d=e.substr(a),a=e.length),x&&(d.length>0&&o.text(d,!0),o.end(f)),D.lastIndex=a;continue}w||(N&&N.indexOf("/")==N.length-1?x&&o.end(f):c.push({name:f,valid:x}))}else(f=u[1])?o.comment(f):(f=u[2])?o.cdata(f):(f=u[3])?o.doctype(f):(f=u[4])&&o.pi(f,u[5]);a=u.index+u[0].length}for(a<e.length&&o.text(F(e.substr(a))),p=c.length-1;p>=0;p--)f=c[p],f.valid&&o.end(f.name)}}}),r(x,[w,E,S,p],function(e,t,n,r){var i=r.makeMap,s=r.each,o=r.explode,u=r.extend;return function(r,a){function f(t){var n,r,s,o,u,f,c,h,p,d,v,m,g,y;for(v=i("tr,td,th,tbody,thead,tfoot,table"),d=a.getNonEmptyElements(),m=a.getTextBlockElements(),n=0;n<t.length;n++)if(r=t[n],r.parent&&!r.fixed)if(m[r.name]&&"li"==r.parent.name){for(g=r.next;g&&m[g.name];)g.name="li",g.fixed=!0,r.parent.insert(g,r.parent),g=g.next;r.unwrap(r)}else{for(o=[r],s=r.parent;s&&!a.isValidChild(s.name,r.name)&&!v[s.name];s=s.parent)o.push(s);if(s&&o.length>1){for(o.reverse(),u=f=l.filterNode(o[0].clone()),p=0;p<o.length-1;p++){for(a.isValidChild(f.name,o[p].name)?(c=l.filterNode(o[p].clone()),f.append(c)):c=f,h=o[p].firstChild;h&&h!=o[p+1];)y=h.next,c.append(h),h=y;f=c}u.isEmpty(d)?s.insert(r,o[0],!0):(s.insert(u,o[0],!0),s.insert(r,u)),s=o[0],(s.isEmpty(d)||s.firstChild===s.lastChild&&"br"===s.firstChild.name)&&s.empty().remove()}else if(r.parent){if("li"===r.name){if(g=r.prev,!g||"ul"!==g.name&&"ul"!==g.name){if(g=r.next,!g||"ul"!==g.name&&"ul"!==g.name){r.wrap(l.filterNode(new e("ul",1)));continue}g.insert(r,g.firstChild,!0);continue}g.append(r);continue}a.isValidChild(r.parent.name,"div")&&a.isValidChild("div",r.name)?r.wrap(l.filterNode(new e("div",1))):"style"===r.name||"script"===r.name?r.empty().remove():r.unwrap()}}}var l=this,c={},h=[],p={},d={};r=r||{},r.validate="validate"in r?r.validate:!0,r.root_name=r.root_name||"body",l.schema=a=a||new t,l.filterNode=function(e){var t,n,r;n in c&&(r=p[n],r?r.push(e):p[n]=[e]),t=h.length;for(;t--;)n=h[t].name,n in e.attributes.map&&(r=d[n],r?r.push(e):d[n]=[e]);return e},l.addNodeFilter=function(e,t){s(o(e),function(e){var n=c[e];n||(c[e]=n=[]),n.push(t)})},l.addAttributeFilter=function(e,t){s(o(e),function(e){var n;for(n=0;n<h.length;n++)if(h[n].name===e)return h[n].callbacks.push(t),void 0;h.push({name:e,callbacks:[t]})})},l.parse=function(t,s){function o(){function e(e){e&&(t=e.firstChild,t&&3==t.type&&(t.value=t.value.replace(A,"")),t=e.lastChild,t&&3==t.type&&(t.value=t.value.replace(_,"")))}var t=y.firstChild,n,r;if(a.isValidChild(y.name,F.toLowerCase())){for(;t;)n=t.next,3==t.type||1==t.type&&"p"!==t.name&&!L[t.name]&&!t.attr("data-mce-type")?r?r.append(t):(r=l(F,1),y.insert(r,t),r.append(t)):(e(r),r=null),t=n;e(r)}}function l(t,n){var r=new e(t,n),i;return t in c&&(i=p[t],i?i.push(r):p[t]=[r]),r}function v(e){var t,n,r;for(t=e.prev;t&&3===t.type;)n=t.value.replace(_,""),n.length>0?(t.value=n,t=t.prev):(r=t.prev,t.remove(),t=r)}function m(e){var t,n={};for(t in e)"li"!==t&&"p"!=t&&(n[t]=e[t]);return n}var g,y,b,w,E,S,x,T,N,C,k,L,A,O=[],M,_,D,P,H,B,j,F;if(s=s||{},p={},d={},L=u(i("script,style,head,html,body,title,meta,param"),a.getBlockElements()),j=a.getNonEmptyElements(),B=a.children,k=r.validate,F="forced_root_block"in s?s.forced_root_block:r.forced_root_block,H=a.getWhiteSpaceElements(),A=/^[ \t\r\n]+/,_=/[ \t\r\n]+$/,D=/[ \t\r\n]+/g,P=/^[ \t\r\n]+$/,g=new n({validate:k,self_closing_elements:m(a.getSelfClosingElements()),cdata:function(e){b.append(l("#cdata",4)).value=e},text:function(e,t){var n;M||(e=e.replace(D," "),b.lastChild&&L[b.lastChild.name]&&(e=e.replace(A,""))),0!==e.length&&(n=l("#text",3),n.raw=!!t,b.append(n).value=e)},comment:function(e){b.append(l("#comment",8)).value=e},pi:function(e,t){b.append(l(e,7)).value=t,v(b)},doctype:function(e){var t;t=b.append(l("#doctype",10)),t.value=e,v(b)},start:function(e,t,n){var r,i,s,o,u;if(s=k?a.getElementRule(e):{}){for(r=l(s.outputName||e,1),r.attributes=t,r.shortEnded=n,b.append(r),u=B[b.name],u&&B[r.name]&&!u[r.name]&&O.push(r),i=h.length;i--;)o=h[i].name,o in t.map&&(N=d[o],N?N.push(r):d[o]=[r]);L[e]&&v(r),n||(b=r),!M&&H[e]&&(M=!0)}},end:function(t){var n,r,i,s,o;if(r=k?a.getElementRule(t):{}){if(L[t]&&!M){if(n=b.firstChild,n&&3===n.type)if(i=n.value.replace(A,""),i.length>0)n.value=i,n=n.next;else for(s=n.next,n.remove(),n=s;n&&3===n.type;)i=n.value,s=n.next,(0===i.length||P.test(i))&&(n.remove(),n=s),n=s;if(n=b.lastChild,n&&3===n.type)if(i=n.value.replace(_,""),i.length>0)n.value=i,n=n.prev;else for(s=n.prev,n.remove(),n=s;n&&3===n.type;)i=n.value,s=n.prev,(0===i.length||P.test(i))&&(n.remove(),n=s),n=s}if(M&&H[t]&&(M=!1),(r.removeEmpty||r.paddEmpty)&&b.isEmpty(j))if(r.paddEmpty)b.empty().append(new e("#text","3")).value=" ";else if(!b.attributes.map.name&&!b.attributes.map.id)return o=b.parent,b.empty().remove(),b=o,void 0;b=b.parent}}},a),y=b=new e(s.context||r.root_name,11),g.parse(t),k&&O.length&&(s.context?s.invalid=!0:f(O)),F&&("body"==y.name||s.isRootContent)&&o(),!s.invalid){for(C in p){for(N=c[C],w=p[C],x=w.length;x--;)w[x].parent||w.splice(x,1);for(E=0,S=N.length;S>E;E++)N[E](w,C,s)}for(E=0,S=h.length;S>E;E++)if(N=h[E],N.name in d){for(w=d[N.name],x=w.length;x--;)w[x].parent||w.splice(x,1);for(x=0,T=N.callbacks.length;T>x;x++)N.callbacks[x](w,N.name,s)}}return y},r.remove_trailing_brs&&l.addNodeFilter("br",function(t){var n,r=t.length,i,s=u({},a.getBlockElements()),o=a.getNonEmptyElements(),f,l,c,h,p,d;for(s.body=1,n=0;r>n;n++)if(i=t[n],f=i.parent,s[i.parent.name]&&i===f.lastChild){for(c=i.prev;c;){if(h=c.name,"span"!==h||"bookmark"!==c.attr("data-mce-type")){if("br"!==h)break;if("br"===h){i=null;break}}c=c.prev}i&&(i.remove(),f.isEmpty(o)&&(p=a.getElementRule(f.name),p&&(p.removeEmpty?f.remove():p.paddEmpty&&(f.empty().append(new e("#text",3)).value=" "))))}else{for(l=i;f&&f.firstChild===l&&f.lastChild===l&&(l=f,!s[f.name]);)f=f.parent;l===f&&(d=new e("#text",3),d.value=" ",i.replace(d))}}),r.allow_html_in_named_anchor||l.addAttributeFilter("id,name",function(e){for(var t=e.length,n,r,i,s;t--;)if(s=e[t],"a"===s.name&&s.firstChild&&!s.attr("href")){i=s.parent,n=s.lastChild;do r=n.prev,i.insert(n,s),n=r;while(n)}})}}),r(T,[v,p],function(e,t){var n=t.makeMap;return function(t){var r=[],i,s,o,u,a;return t=t||{},i=t.indent,s=n(t.indent_before||""),o=n(t.indent_after||""),u=e.getEncodeFunc(t.entity_encoding||"raw",t.entities),a="html"==t.element_format,{start:function(e,t,n){var f,l,c,h;if(i&&s[e]&&r.length>0&&(h=r[r.length-1],h.length>0&&"\n"!==h&&r.push("\n")),r.push("<",e),t)for(f=0,l=t.length;l>f;f++)c=t[f],r.push(" ",c.name,'="',u(c.value,!0),'"');r[r.length]=!n||a?">":" />",n&&i&&o[e]&&r.length>0&&(h=r[r.length-1],h.length>0&&"\n"!==h&&r.push("\n"))},end:function(e){var t;r.push("</",e,">"),i&&o[e]&&r.length>0&&(t=r[r.length-1],t.length>0&&"\n"!==t&&r.push("\n"))},text:function(e,t){e.length>0&&(r[r.length]=t?e:u(e))},cdata:function(e){r.push("<![CDATA[",e,"]]>")},comment:function(e){r.push("<!--",e,"-->")},pi:function(e,t){t?r.push("<?",e," ",t,"?>"):r.push("<?",e,"?>"),i&&r.push("\n")},doctype:function(e){r.push("<!DOCTYPE",e,">",i?"\n":"")},reset:function(){r.length=0},getContent:function(){return r.join("").replace(/\n$/,"")}}}}),r(N,[T,E],function(e,t){return function(n,r){var i=this,s=new e(n);n=n||{},n.validate="validate"in n?n.validate:!0,i.schema=r=r||new t,i.writer=s,i.serialize=function(e){function t(e){var n=i[e.type],u,a,f,l,c,h,p,d,v;if(n)n(e);else{if(u=e.name,a=e.shortEnded,f=e.attributes,o&&f&&f.length>1){for(h=[],h.map={},v=r.getElementRule(e.name),p=0,d=v.attributesOrder.length;d>p;p++)l=v.attributesOrder[p],l in f.map&&(c=f.map[l],h.map[l]=c,h.push({name:l,value:c}));for(p=0,d=f.length;d>p;p++)l=f[p].name,l in h.map||(c=f.map[l],h.map[l]=c,h.push({name:l,value:c}));f=h}if(s.start(e.name,f,a),!a){if(e=e.firstChild)do t(e);while(e=e.next);s.end(u)}}}var i,o;return o=n.validate,i={3:function(e){s.text(e.value,e.raw)},8:function(e){s.comment(e.value)},7:function(e){s.pi(e.name,e.value)},10:function(e){s.doctype(e.value)},4:function(e){s.cdata(e.value)},11:function(e){if(e=e.firstChild)do t(e);while(e=e.next)}},s.reset(),1!=e.type||n.inner?i[11](e):t(e),s.getContent()}}}),r(C,[g,x,v,N,w,E,m,p],function(e,t,n,r,i,s,o,u){var a=u.each,f=u.trim,l=e.DOM;return function(e,i){var u,c,h;return i&&(u=i.dom,c=i.schema),u=u||l,c=c||new s(e),e.entity_encoding=e.entity_encoding||"named",e.remove_trailing_brs="remove_trailing_brs"in e?e.remove_trailing_brs:!0,h=new t(e,c),h.addAttributeFilter("src,href,style",function(t,n){for(var r=t.length,i,s,o="data-mce-"+n,a=e.url_converter,f=e.url_converter_scope,l;r--;)i=t[r],s=i.attributes.map[o],s!==l?(i.attr(n,s.length>0?s:null),i.attr(o,null)):(s=i.attributes.map[n],"style"===n?s=u.serializeStyle(u.parseStyle(s),i.name):a&&(s=a.call(f,s,n,i.name)),i.attr(n,s.length>0?s:null))}),h.addAttributeFilter("class",function(e){for(var t=e.length,n,r;t--;)n=e[t],r=n.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),n.attr("class",r.length>0?r:null)}),h.addAttributeFilter("data-mce-type",function(e,t,n){for(var r=e.length,i;r--;)i=e[r],"bookmark"!==i.attributes.map["data-mce-type"]||n.cleanup||i.remove()}),h.addAttributeFilter("data-mce-expando",function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)}),h.addNodeFilter("noscript",function(e){for(var t=e.length,r;t--;)r=e[t].firstChild,r&&(r.value=n.decode(r.value))}),h.addNodeFilter("script,style",function(e,t){function n(e){return e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")}for(var r=e.length,i,s;r--;)i=e[r],s=i.firstChild?i.firstChild.value:"","script"===t?(i.attr("type",(i.attr("type")||"text/javascript").replace(/^mce\-/,"")),s.length>0&&(i.firstChild.value="// <![CDATA[\n"+n(s)+"\n// ]]>")):s.length>0&&(i.firstChild.value="<!--\n"+n(s)+"\n-->")}),h.addNodeFilter("#comment",function(e){for(var t=e.length,n;t--;)n=e[t],0===n.value.indexOf("[CDATA[")?(n.name="#cdata",n.type=4,n.value=n.value.replace(/^\[CDATA\[|\]\]$/g,"")):0===n.value.indexOf("mce:protected ")&&(n.name="#text",n.type=3,n.raw=!0,n.value=unescape(n.value).substr(14))}),h.addNodeFilter("xml:namespace,input",function(e,t){for(var n=e.length,r;n--;)r=e[n],7===r.type?r.remove():1===r.type&&("input"!==t||"type"in r.attributes.map||r.attr("type","text"))}),e.fix_list_elements&&h.addNodeFilter("ul,ol",function(e){for(var t=e.length,n,r;t--;)n=e[t],r=n.parent,("ul"===r.name||"ol"===r.name)&&n.prev&&"li"===n.prev.name&&n.prev.append(n)}),h.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected",function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)}),{schema:c,addNodeFilter:h.addNodeFilter,addAttributeFilter:h.addAttributeFilter,serialize:function(t,n){var i=this,s,l,p,d,v;return o.ie&&u.select("script,style,select,map").length>0?(v=t.innerHTML,t=t.cloneNode(!1),u.setHTML(t,v)):t=t.cloneNode(!0),s=t.ownerDocument.implementation,s.createHTMLDocument&&(l=s.createHTMLDocument(""),a("BODY"==t.nodeName?t.childNodes:[t],function(e){l.body.appendChild(l.importNode(e,!0))}),t="BODY"!=t.nodeName?l.body.firstChild:l.body,p=u.doc,u.doc=l),n=n||{},n.format=n.format||"html",n.selection&&(n.forced_root_block=""),n.no_events||(n.node=t,i.onPreProcess(n)),d=new r(e,c),n.content=d.serialize(h.parse(f(n.getInner?t.innerHTML:u.getOuterHTML(t)),n)),n.cleanup||(n.content=n.content.replace(/\uFEFF/g,"")),n.no_events||i.onPostProcess(n),p&&(u.doc=p),n.node=null,n.content},addRules:function(e){c.addValidElements(e)},setRules:function(e){c.setValidElements(e)},onPreProcess:function(e){i&&i.fire("PreProcess",e)},onPostProcess:function(e){i&&i.fire("PostProcess",e)}}}}),r(k,[],function(){function e(e){function t(t,n){var r,i=0,s,o,u,a,f,l,c=-1,h;if(r=t.duplicate(),r.collapse(n),h=r.parentElement(),h.ownerDocument===e.dom.doc){for(;"false"===h.contentEditable;)h=h.parentNode;if(!h.hasChildNodes())return{node:h,inside:1};for(u=h.children,s=u.length-1;s>=i;)if(l=Math.floor((i+s)/2),a=u[l],r.moveToElementText(a),c=r.compareEndPoints(n?"StartToStart":"EndToEnd",t),c>0)s=l-1;else{if(!(0>c))return{node:a};i=l+1}if(0>c)for(a?r.collapse(!1):(r.moveToElementText(h),r.collapse(!0),a=h,o=!0),f=0;0!==r.compareEndPoints(n?"StartToStart":"StartToEnd",t)&&0!==r.move("character",1)&&h==r.parentElement();)f++;else for(r.collapse(!0),f=0;0!==r.compareEndPoints(n?"StartToStart":"StartToEnd",t)&&0!==r.move("character",-1)&&h==r.parentElement();)f++;return{node:a,position:c,offset:f,inside:o}}}function n(){function n(e){var n=t(s,e),r,i,u=0,a,f,l;if(r=n.node,i=n.offset,n.inside&&!r.hasChildNodes())return o[e?"setStart":"setEnd"](r,0),void 0;if(i===f)return o[e?"setStartBefore":"setEndAfter"](r),void 0;if(n.position<0){if(a=n.inside?r.firstChild:r.nextSibling,!a)return o[e?"setStartAfter":"setEndAfter"](r),void 0;if(!i)return 3==a.nodeType?o[e?"setStart":"setEnd"](a,0):o[e?"setStartBefore":"setEndBefore"](a),void 0;for(;a;){if(l=a.nodeValue,u+=l.length,u>=i){r=a,u-=i,u=l.length-u;break}a=a.nextSibling}}else{if(a=r.previousSibling,!a)return o[e?"setStartBefore":"setEndBefore"](r);if(!i)return 3==r.nodeType?o[e?"setStart":"setEnd"](a,r.nodeValue.length):o[e?"setStartAfter":"setEndAfter"](a),void 0;for(;a;){if(u+=a.nodeValue.length,u>=i){r=a,u-=i;break}a=a.previousSibling}}o[e?"setStart":"setEnd"](r,u)}var s=e.getRng(),o=i.createRng(),u,a,f,l,c;if(u=s.item?s.item(0):s.parentElement(),u.ownerDocument!=i.doc)return o;if(a=e.isCollapsed(),s.item)return o.setStart(u.parentNode,i.nodeIndex(u)),o.setEnd(o.startContainer,o.startOffset+1),o;try{n(!0),a||n()}catch(h){if(-2147024809!=h.number)throw h;c=r.getBookmark(2),f=s.duplicate(),f.collapse(!0),u=f.parentElement(),a||(f=s.duplicate(),f.collapse(!1),l=f.parentElement(),l.innerHTML=l.innerHTML),u.innerHTML=u.innerHTML,r.moveToBookmark(c),s=e.getRng(),n(!0),a||n()}return o}var r=this,i=e.dom,s=!1;this.getBookmark=function(n){function r(e){var t,n,r,s,o=[];for(t=e.parentNode,n=i.getRoot().parentNode;t!=n&&9!==t.nodeType;){for(r=t.children,s=r.length;s--;)if(e===r[s]){o.push(s);break}e=t,t=t.parentNode}return o}function s(e){var n;return n=t(o,e),n?{position:n.position,offset:n.offset,indexes:r(n.node),inside:n.inside}:void 0}var o=e.getRng(),u={};return 2===n&&(o.item?u.start={ctrl:!0,indexes:r(o.item(0))}:(u.start=s(!0),e.isCollapsed()||(u.end=s()))),u},this.moveToBookmark=function(e){function t(e){var t,n,r,s;for(t=i.getRoot(),n=e.length-1;n>=0;n--)s=t.children,r=e[n],r<=s.length-1&&(t=s[r]);return t}function n(n){var i=e[n?"start":"end"],o,u,a,f;i&&(o=i.position>0,u=s.createTextRange(),u.moveToElementText(t(i.indexes)),f=i.offset,f!==a?(u.collapse(i.inside||o),u.moveStart("character",o?-f:f)):u.collapse(n),r.setEndPoint(n?"StartToStart":"EndToStart",u),n&&r.collapse(!0))}var r,s=i.doc.body;e.start&&(e.start.ctrl?(r=s.createControlRange(),r.addElement(t(e.start.indexes)),r.select()):(r=s.createTextRange(),n(!0),n(),r.select()))},this.addRange=function(t){function n(e){var t,n,o,c,d;o=i.create("a"),t=e?u:f,n=e?a:l,c=r.duplicate(),(t==h||t==h.documentElement)&&(t=p,n=0),3==t.nodeType?(t.parentNode.insertBefore(o,t),c.moveToElementText(o),c.moveStart("character",n),i.remove(o),r.setEndPoint(e?"StartToStart":"EndToEnd",c)):(d=t.childNodes,d.length?(n>=d.length?i.insertAfter(o,d[d.length-1]):t.insertBefore(o,d[n]),c.moveToElementText(o)):t.canHaveHTML&&(t.innerHTML="<span>&#xFEFF;</span>",o=t.firstChild,c.moveToElementText(o),c.collapse(s)),r.setEndPoint(e?"StartToStart":"EndToEnd",c),i.remove(o))}var r,o,u,a,f,l,c,h=e.dom.doc,p=h.body,d,v;if(u=t.startContainer,a=t.startOffset,f=t.endContainer,l=t.endOffset,r=p.createTextRange(),u==f&&1==u.nodeType){if(a==l&&!u.hasChildNodes()){if(u.canHaveHTML)return c=u.previousSibling,c&&!c.hasChildNodes()&&i.isBlock(c)?c.innerHTML="&#xFEFF;":c=null,u.innerHTML="<span>&#xFEFF;</span><span>&#xFEFF;</span>",r.moveToElementText(u.lastChild),r.select(),i.doc.selection.clear(),u.innerHTML="",c&&(c.innerHTML=""),void 0;a=i.nodeIndex(u),u=u.parentNode}if(a==l-1)try{if(v=u.childNodes[a],o=p.createControlRange(),o.addElement(v),o.select(),d=e.getRng(),d.item&&v===d.item(0))return}catch(m){}}n(!0),n(),r.select()},this.getRangeAt=n}return e}),r(L,[m],function(e){return{BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,modifierPressed:function(e){return e.shiftKey||e.ctrlKey||e.altKey},metaKeyPressed:function(t){return(e.mac?t.ctrlKey||t.metaKey:t.ctrlKey)&&!t.altKey}}}),r(A,[L,p,m],function(e,t,n){return function(r,i){function s(e){return i.settings.object_resizing===!1?!1:/TABLE|IMG|DIV/.test(e.nodeName)?"false"===e.getAttribute("data-mce-resize")?!1:!0:!1}function o(t){var n,r;n=t.screenX-N,r=t.screenY-C,D=n*T[2]+A,P=r*T[3]+O,D=5>D?5:D,P=5>P?5:P,(e.modifierPressed(t)||"IMG"==E.nodeName&&0!==T[2]*T[3])&&(D=Math.round(P/M),P=Math.round(D*M)),b.setStyles(S,{width:D,height:P}),T[2]<0&&S.clientWidth<=D&&b.setStyle(S,"left",k+(A-D)),T[3]<0&&S.clientHeight<=P&&b.setStyle(S,"top",L+(O-P)),_||(i.fire("ObjectResizeStart",{target:E,width:A,height:O}),_=!0)}function u(){function e(e,t){t&&(E.style[e]||!i.schema.isValid(E.nodeName.toLowerCase(),e)?b.setStyle(E,e,t):b.setAttrib(E,e,t))}_=!1,e("width",D),e("height",P),b.unbind(H,"mousemove",o),b.unbind(H,"mouseup",u),B!=H&&(b.unbind(B,"mousemove",o),b.unbind(B,"mouseup",u)),b.remove(S),j&&"TABLE"!=E.nodeName||a(E),i.fire("ObjectResized",{target:E,width:D,height:P}),i.nodeChanged()}function a(e,t,n){var r,a,l,c,h;r=b.getPos(e,i.getBody()),k=r.x,L=r.y,h=e.getBoundingClientRect(),a=h.width||h.right-h.left,l=h.height||h.bottom-h.top,E!=e&&(v(),E=e,D=P=0),c=i.fire("ObjectSelected",{target:e}),s(e)&&!c.isDefaultPrevented()?w(x,function(e,r){function s(t){_=!0,N=t.screenX,C=t.screenY,A=E.clientWidth,O=E.clientHeight,M=O/A,T=e,S=E.cloneNode(!0),b.addClass(S,"mce-clonedresizable"),S.contentEditable=!1,S.unSelectabe=!0,b.setStyles(S,{left:k,top:L,margin:0}),S.removeAttribute("data-mce-selected"),i.getBody().appendChild(S),b.bind(H,"mousemove",o),b.bind(H,"mouseup",u),B!=H&&(b.bind(B,"mousemove",o),b.bind(B,"mouseup",u))}var f,c;return t?(r==t&&s(n),void 0):(f=b.get("mceResizeHandle"+r),f?b.show(f):(c=i.getBody(),f=b.add(c,"div",{id:"mceResizeHandle"+r,"data-mce-bogus":!0,"class":"mce-resizehandle",contentEditable:!1,unSelectabe:!0,style:"cursor:"+r+"-resize; margin:0; padding:0"}),b.bind(f,"mousedown",function(e){e.preventDefault(),s(e)})),b.setStyles(f,{left:a*e[0]+k-f.offsetWidth/2,top:l*e[1]+L-f.offsetHeight/2}),void 0)}):f(),E.setAttribute("data-mce-selected","1")}function f(){var e,t;E&&E.removeAttribute("data-mce-selected");for(e in x)t=b.get("mceResizeHandle"+e),t&&(b.unbind(t),b.remove(t))}function l(e){function t(e,t){do if(e===t)return!0;while(e=e.parentNode)}var n;return w(b.select("img[data-mce-selected],hr[data-mce-selected]"),function(e){e.removeAttribute("data-mce-selected")}),n="mousedown"==e.type?e.target:r.getNode(),n=b.getParent(n,j?"table":"table,img,hr"),n&&(m(),t(r.getStart(),n)&&t(r.getEnd(),n)&&(!j||n!=r.getStart()&&"IMG"!==r.getStart().nodeName))?(a(n),void 0):(f(),void 0)}function c(e,t,n){e&&e.attachEvent&&e.attachEvent("on"+t,n)}function h(e,t,n){e&&e.detachEvent&&e.detachEvent("on"+t,n)}function p(e){var t=e.srcElement,n,r,s,o,u,f,l;n=t.getBoundingClientRect(),f=e.clientX-n.left,l=e.clientY-n.top;for(r in x)if(s=x[r],o=t.offsetWidth*s[0],u=t.offsetHeight*s[1],Math.abs(o-f)<8&&Math.abs(u-l)<8){T=s;break}_=!0,i.getDoc().selection.empty(),a(t,r,e)}function d(e){var t=e.srcElement;if(t!=E){if(v(),0===t.id.indexOf("mceResizeHandle"))return e.returnValue=!1,void 0;("IMG"==t.nodeName||"TABLE"==t.nodeName)&&(f(),E=t,c(t,"resizestart",p))}}function v(){h(E,"resizestart",p)}function m(){try{i.getDoc().execCommand("enableObjectResizing",!1,!1)}catch(e){}}function g(e){var t;if(j){t=H.body.createControlRange();try{return t.addElement(e),t.select(),!0}catch(n){}}}function y(){E=S=null,j&&(v(),h(i.getBody(),"controlselect",d))}var b=i.dom,w=t.each,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H=i.getDoc(),B=document,j=n.ie;x={n:[.5,0,0,-1],e:[1,.5,1,0],s:[.5,1,0,1],w:[0,.5,-1,0],nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]};var F=".mce-content-body";return i.contentStyles.push(F+" div.mce-resizehandle {"+"position: absolute;"+"border: 1px solid black;"+"background: #FFF;"+"width: 5px;"+"height: 5px;"+"z-index: 10000"+"}"+F+" .mce-resizehandle:hover {"+"background: #000"+"}"+F+" img[data-mce-selected], hr[data-mce-selected] {"+"outline: 1px solid black;"+"resize: none"+"}"+F+" .mce-clonedresizable {"+"position: absolute;"+(n.gecko?"":"outline: 1px dashed black;")+"opacity: .5;"+"filter: alpha(opacity=50);"+"z-index: 10000"+"}"),i.on("init",function(){j?(i.on("ObjectResized",function(e){"TABLE"!=e.target.nodeName&&(f(),g(e.target))}),c(i.getBody(),"controlselect",d)):m(),i.on("nodechange mousedown ResizeEditor",l),i.on("keydown keyup",function(e){E&&"TABLE"==E.nodeName&&l(e)})}),{controlSelect:g,destroy:y}}}),r(O,[h,k,A,m,p],function(e,n,r,i,s){function o(e,t,i,s){var o=this;o.dom=e,o.win=t,o.serializer=i,o.editor=s,o.controlSelection=new r(o,s),o.win.getSelection||(o.tridentSel=new n(o))}var u=s.each,a=s.grep,f=s.trim,l=i.ie,c=i.opera;return o.prototype={setCursorLocation:function(e,t){var n=this,r=n.dom.createRng();r.setStart(e,t),r.setEnd(e,t),n.setRng(r),n.collapse(!1)},getContent:function(e){var n=this,r=n.getRng(),i=n.dom.create("body"),s=n.getSel(),o,u,a;return e=e||{},o=u="",e.get=!0,e.format=e.format||"html",e.selection=!0,n.editor.fire("BeforeGetContent",e),"text"==e.format?n.isCollapsed()?"":r.text||(s.toString?s.toString():""):(r.cloneContents?(a=r.cloneContents(),a&&i.appendChild(a)):r.item!==t||r.htmlText!==t?(i.innerHTML="<br>"+(r.item?r.item(0).outerHTML:r.htmlText),i.removeChild(i.firstChild)):i.innerHTML=r.toString(),/^\s/.test(i.innerHTML)&&(o=" "),/\s+$/.test(i.innerHTML)&&(u=" "),e.getInner=!0,e.content=n.isCollapsed()?"":o+n.serializer.serialize(i,e)+u,n.editor.fire("GetContent",e),e.content)},setContent:function(e,t){var n=this,r=n.getRng(),i,s=n.win.document,o,u;if(t=t||{format:"html"},t.set=!0,t.selection=!0,e=t.content=e,t.no_events||n.editor.fire("BeforeSetContent",t),e=t.content,r.insertNode){e+='<span id="__caret">_</span>',r.startContainer==s&&r.endContainer==s?s.body.innerHTML=e:(r.deleteContents(),0===s.body.childNodes.length?s.body.innerHTML=e:r.createContextualFragment?r.insertNode(r.createContextualFragment(e)):(o=s.createDocumentFragment(),u=s.createElement("div"),o.appendChild(u),u.outerHTML=e,r.insertNode(o))),i=n.dom.get("__caret"),r=s.createRange(),r.setStartBefore(i),r.setEndBefore(i),n.setRng(r),n.dom.remove("__caret");try{n.setRng(r)}catch(a){}}else r.item&&(s.execCommand("Delete",!1,null),r=n.getRng()),/^\s+/.test(e)?(r.pasteHTML('<span id="__mce_tmp">_</span>'+e),n.dom.remove("__mce_tmp")):r.pasteHTML(e);t.no_events||n.editor.fire("SetContent",t)},getStart:function(){var e=this,t=e.getRng(),n,r,i,s;if(t.duplicate||t.item){if(t.item)return t.item(0);for(i=t.duplicate(),i.collapse(1),n=i.parentElement(),n.ownerDocument!==e.dom.doc&&(n=e.dom.getRoot()),r=s=t.parentElement();s=s.parentNode;)if(s==n){n=r;break}return n}return n=t.startContainer,1==n.nodeType&&n.hasChildNodes()&&(n=n.childNodes[Math.min(n.childNodes.length-1,t.startOffset)]),n&&3==n.nodeType?n.parentNode:n},getEnd:function(){var e=this,t=e.getRng(),n,r;return t.duplicate||t.item?t.item?t.item(0):(t=t.duplicate(),t.collapse(0),n=t.parentElement(),n.ownerDocument!==e.dom.doc&&(n=e.dom.getRoot()),n&&"BODY"==n.nodeName?n.lastChild||n:n):(n=t.endContainer,r=t.endOffset,1==n.nodeType&&n.hasChildNodes()&&(n=n.childNodes[r>0?r-1:r]),n&&3==n.nodeType?n.parentNode:n)},getBookmark:function(e,t){function n(e,t){var n=0;return u(o.select(e),function(e,r){e==t&&(n=r)}),n}function r(e){function t(t){var n,r,i,s=t?"start":"end";n=e[s+"Container"],r=e[s+"Offset"],1==n.nodeType&&"TR"==n.nodeName&&(i=n.childNodes,n=i[Math.min(t?r:r-1,i.length-1)],n&&(r=t?0:n.childNodes.length,e["set"+(t?"Start":"End")](n,r)))}return t(!0),t(),e}function i(){function e(e,n){var i=e[n?"startContainer":"endContainer"],o=e[n?"startOffset":"endOffset"],u=[],a,f,l=0;if(3==i.nodeType){if(t)for(a=i.previousSibling;a&&3==a.nodeType;a=a.previousSibling)o+=a.nodeValue.length;u.push(o)}else f=i.childNodes,o>=f.length&&f.length&&(l=1,o=Math.max(0,f.length-1)),u.push(s.dom.nodeIndex(f[o],t)+l);for(;i&&i!=r;i=i.parentNode)u.push(s.dom.nodeIndex(i,t));return u}var n=s.getRng(!0),r=o.getRoot(),i={};return i.start=e(n,!0),s.isCollapsed()||(i.end=e(n)),i}var s=this,o=s.dom,a,f,l,c,h,p,d="&#xFEFF;",v;if(2==e)return p=s.getNode(),h=p.nodeName,"IMG"==h?{name:h,index:n(h,p)}:s.tridentSel?s.tridentSel.getBookmark(e):i();if(e)return{rng:s.getRng()};if(a=s.getRng(),l=o.uniqueId(),c=s.isCollapsed(),v="overflow:hidden;line-height:0px",a.duplicate||a.item){if(a.item)return p=a.item(0),h=p.nodeName,{name:h,index:n(h,p)};f=a.duplicate();try{a.collapse(),a.pasteHTML('<span data-mce-type="bookmark" id="'+l+'_start" style="'+v+'">'+d+"</span>"),c||(f.collapse(!1),a.moveToElementText(f.parentElement()),0===a.compareEndPoints("StartToEnd",f)&&f.move("character",-1),f.pasteHTML('<span data-mce-type="bookmark" id="'+l+'_end" style="'+v+'">'+d+"</span>"))}catch(m){return null}}else{if(p=s.getNode(),h=p.nodeName,"IMG"==h)return{name:h,index:n(h,p)};f=r(a.cloneRange()),c||(f.collapse(!1),f.insertNode(o.create("span",{"data-mce-type":"bookmark",id:l+"_end",style:v},d))),a=r(a),a.collapse(!0),a.insertNode(o.create("span",{"data-mce-type":"bookmark",id:l+"_start",style:v},d))}return s.moveToBookmark({id:l,keep:1}),{id:l}},moveToBookmark:function(e){function t(t){var n=e[t?"start":"end"],r,i,s,u;if(n){for(s=n[0],i=f,r=n.length-1;r>=1;r--){if(u=i.childNodes,n[r]>u.length-1)return;i=u[n[r]]}3===i.nodeType&&(s=Math.min(n[0],i.nodeValue.length)),1===i.nodeType&&(s=Math.min(n[0],i.childNodes.length)),t?o.setStart(i,s):o.setEnd(i,s)}return!0}function n(t){var n=s.get(e.id+"_"+t),r,i,o,f,l=e.keep;if(n&&(r=n.parentNode,"start"==t?(l?(r=n.firstChild,i=1):i=s.nodeIndex(n),h=p=r,d=v=i):(l?(r=n.firstChild,i=1):i=s.nodeIndex(n),p=r,v=i),!l)){for(f=n.previousSibling,o=n.nextSibling,u(a(n.childNodes),function(e){3==e.nodeType&&(e.nodeValue=e.nodeValue.replace(/\uFEFF/g,""))});n=s.get(e.id+"_"+t);)s.remove(n,1);f&&o&&f.nodeType==o.nodeType&&3==f.nodeType&&!c&&(i=f.nodeValue.length,f.appendData(o.nodeValue),s.remove(o),"start"==t?(h=p=f,d=v=i):(p=f,v=i))}}function r(e){return!s.isBlock(e)||e.innerHTML||l||(e.innerHTML='<br data-mce-bogus="1" />'),e}var i=this,s=i.dom,o,f,h,p,d,v;if(e)if(e.start){if(o=s.createRng(),f=s.getRoot(),i.tridentSel)return i.tridentSel.moveToBookmark(e);t(!0)&&t()&&i.setRng(o)}else e.id?(n("start"),n("end"),h&&(o=s.createRng(),o.setStart(r(h),d),o.setEnd(r(p),v),i.setRng(o))):e.name?i.select(s.select(e.name)[e.index]):e.rng&&i.setRng(e.rng)},select:function(t,n){function r(t,n){var r=new e(t,t);do{if(3==t.nodeType&&0!==f(t.nodeValue).length)return n?o.setStart(t,0):o.setEnd(t,t.nodeValue.length),void 0;if("BR"==t.nodeName)return n?o.setStartBefore(t):o.setEndBefore(t),void 0}while(t=n?r.next():r.prev())}var i=this,s=i.dom,o=s.createRng(),u;if(t){if(!n&&i.controlSelection.controlSelect(t))return;u=s.nodeIndex(t),o.setStart(t.parentNode,u),o.setEnd(t.parentNode,u+1),n&&(r(t,1),r(t)),i.setRng(o)}return t},isCollapsed:function(){var e=this,t=e.getRng(),n=e.getSel();return!t||t.item?!1:t.compareEndPoints?0===t.compareEndPoints("StartToEnd",t):!n||t.collapsed},collapse:function(e){var t=this,n=t.getRng(),r;n.item&&(r=n.item(0),n=t.win.document.body.createTextRange(),n.moveToElementText(r)),n.collapse(!!e),t.setRng(n)},getSel:function(){var e=this.win;return e.getSelection?e.getSelection():e.document.selection},getRng:function(e){var t=this,n,r,i,s=t.win.document,o;if(!e&&t.restoreRng)return t.restoreRng;if(e&&t.tridentSel)return t.tridentSel.getRangeAt(0);try{(n=t.getSel())&&(r=n.rangeCount>0?n.getRangeAt(0):n.createRange?n.createRange():s.createRange())}catch(u){}if(l&&r&&r.setStart){try{o=s.selection.createRange()}catch(u){}o&&o.item&&(i=o.item(0),r=s.createRange(),r.setStartBefore(i),r.setEndAfter(i))}return r||(r=s.createRange?s.createRange():s.body.createTextRange()),r.setStart&&9===r.startContainer.nodeType&&r.collapsed&&(i=t.dom.getRoot(),r.setStart(i,0),r.setEnd(i,0)),t.selectedRange&&t.explicitRange&&(0===r.compareBoundaryPoints(r.START_TO_START,t.selectedRange)&&0===r.compareBoundaryPoints(r.END_TO_END,t.selectedRange)?r=t.explicitRange:(t.selectedRange=null,t.explicitRange=null)),r},setRng:function(e,t){var n=this,r;if(e.select)try{e.select()}catch(i){}else if(n.tridentSel){if(e.cloneRange)try{return n.tridentSel.addRange(e),void 0}catch(i){}}else if(r=n.getSel()){n.explicitRange=e;try{r.removeAllRanges()}catch(i){}r.addRange(e),t===!1&&r.extend&&(r.collapse(e.endContainer,e.endOffset),r.extend(e.startContainer,e.startOffset)),n.selectedRange=r.rangeCount>0?r.getRangeAt(0):null}},setNode:function(e){var t=this;return t.setContent(t.dom.getOuterHTML(e)),e},getNode:function(){function e(e,t){for(var n=e;e&&3===e.nodeType&&0===e.length;)e=t?e.nextSibling:e.previousSibling;return e||n}var t=this,n=t.getRng(),r,i=n.startContainer,s=n.endContainer,o=n.startOffset,u=n.endOffset;return n?n.setStart?(r=n.commonAncestorContainer,!n.collapsed&&(i==s&&2>u-o&&i.hasChildNodes()&&(r=i.childNodes[o]),3===i.nodeType&&3===s.nodeType&&(i=i.length===o?e(i.nextSibling,!0):i.parentNode,s=0===u?e(s.previousSibling,!1):s.parentNode,i&&i===s))?i:r&&3==r.nodeType?r.parentNode:r):n.item?n.item(0):n.parentElement():t.dom.getRoot()},getSelectedBlocks:function(t,n){var r=this,i=r.dom,s,o,u=[];if(o=i.getRoot(),t=i.getParent(t||r.getStart(),i.isBlock),n=i.getParent(n||r.getEnd(),i.isBlock),t&&t!=o&&u.push(t),t&&n&&t!=n){s=t;for(var a=new e(t,o);(s=a.next())&&s!=n;)i.isBlock(s)&&u.push(s)}return n&&t!=n&&n!=o&&u.push(n),u},isForward:function(){var e=this.dom,t=this.getSel(),n,r;return t&&t.anchorNode&&t.focusNode?(n=e.createRng(),n.setStart(t.anchorNode,t.anchorOffset),n.collapse(!0),r=e.createRng(),r.setStart(t.focusNode,t.focusOffset),r.collapse(!0),n.compareBoundaryPoints(n.START_TO_START,r)<=0):!0},normalize:function(){function t(t){function o(t,n){for(var r=new e(t,h.getParent(t.parentNode,h.isBlock)||p);t=r[n?"prev":"next"]();)if("BR"===t.nodeName)return!0}function u(e,t){return e.previousSibling&&e.previousSibling.nodeName==t}function a(t,n){var r,o;for(n=n||f,r=new e(n,h.getParent(n.parentNode,h.isBlock)||p);d=r[t?"prev":"next"]();){if(3===d.nodeType&&d.nodeValue.length>0)return f=d,l=t?d.nodeValue.length:0,i=!0,void 0;if(h.isBlock(d)||v[d.nodeName.toLowerCase()])return;o=d}s&&o&&(f=o,i=!0,l=0)}var f,l,c,h=n.dom,p=h.getRoot(),d,v,m;if(f=r[(t?"start":"end")+"Container"],l=r[(t?"start":"end")+"Offset"],v=h.schema.getNonEmptyElements(),9===f.nodeType&&(f=h.getRoot(),l=0),f===p){if(t&&(d=f.childNodes[l>0?l-1:0],d&&(m=d.nodeName.toLowerCase(),v[d.nodeName]||"TABLE"==d.nodeName)))return;if(f.hasChildNodes()&&(l=Math.min(!t&&l>0?l-1:l,f.childNodes.length-1),f=f.childNodes[l],l=0,f.hasChildNodes()&&!/TABLE/.test(f.nodeName))){d=f,c=new e(f,p);do{if(3===d.nodeType&&d.nodeValue.length>0){l=t?0:d.nodeValue.length,f=d,i=!0;break}if(v[d.nodeName.toLowerCase()]){l=h.nodeIndex(d),f=d.parentNode,"IMG"!=d.nodeName||t||l++,i=!0;break}}while(d=t?c.next():c.prev())}}s&&(3===f.nodeType&&0===l&&a(!0),1===f.nodeType&&(d=f.childNodes[l],!d||"BR"!==d.nodeName||u(d,"A")||o(d)||o(d,!0)||a(!0,f.childNodes[l]))),t&&!s&&3===f.nodeType&&l===f.nodeValue.length&&a(!1),i&&r["set"+(t?"Start":"End")](f,l)}var n=this,r,i,s;l||(r=n.getRng(),s=r.collapsed,t(!0),s||t(),i&&(s&&r.collapse(!0),n.setRng(r,n.isForward())))},selectorChanged:function(e,t){var n=this,r;return n.selectorChangedData||(n.selectorChangedData={},r={},n.editor.on("NodeChange",function(e){var t=e.element,i=n.dom,s=i.getParents(t,null,i.getRoot()),o={};u(n.selectorChangedData,function(e,t){u(s,function(n){return i.is(n,t)?(r[t]||(u(e,function(e){e(!0,{node:n,selector:t,parents:s})}),r[t]=e),o[t]=e,!1):void 0})}),u(r,function(e,n){o[n]||(delete r[n],u(e,function(e){e(!1,{node:t,selector:n,parents:s})}))})})),n.selectorChangedData[e]||(n.selectorChangedData[e]=[]),n.selectorChangedData[e].push(t),n},scrollIntoView:function(e){var t,n,r=this,i=r.dom;n=i.getViewPort(r.editor.getWin()),t=i.getPos(e).y,(t<n.y||t+25>n.y+n.h)&&r.editor.getWin().scrollTo(0,t<n.y?t:t-n.h+25)},destroy:function(){this.win=null,this.controlSelection.destroy()}},o}),r(M,[p],function(e){function t(e){this.walk=function(t,r){function i(e){var t;return t=e[0],3===t.nodeType&&t===a&&f>=t.
nodeValue.length&&e.splice(0,1),t=e[e.length-1],0===c&&e.length>0&&t===l&&3===t.nodeType&&e.splice(e.length-1,1),e}function s(e,t,n){for(var r=[];e&&e!=n;e=e[t])r.push(e);return r}function o(e,t){do{if(e.parentNode==t)return e;e=e.parentNode}while(e)}function u(e,t,n){var o=n?"nextSibling":"previousSibling";for(v=e,m=v.parentNode;v&&v!=t;v=m)m=v.parentNode,g=s(v==e?v:v[o],o),g.length&&(n||g.reverse(),r(i(g)))}var a=t.startContainer,f=t.startOffset,l=t.endContainer,c=t.endOffset,h,p,d,v,m,g,y;if(y=e.select("td.mce-item-selected,th.mce-item-selected"),y.length>0)return n(y,function(e){r([e])}),void 0;if(1==a.nodeType&&a.hasChildNodes()&&(a=a.childNodes[f]),1==l.nodeType&&l.hasChildNodes()&&(l=l.childNodes[Math.min(c-1,l.childNodes.length-1)]),a==l)return r(i([a]));for(h=e.findCommonAncestor(a,l),v=a;v;v=v.parentNode){if(v===l)return u(a,h,!0);if(v===h)break}for(v=l;v;v=v.parentNode){if(v===a)return u(l,h);if(v===h)break}p=o(a,h)||a,d=o(l,h)||l,u(a,p,!0),g=s(p==a?p:p.nextSibling,"nextSibling",d==l?d.nextSibling:d),g.length&&r(i(g)),u(l,d)},this.split=function(e){function t(e,t){return e.splitText(t)}var n=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset;return n==i&&3==n.nodeType?r>0&&r<n.nodeValue.length&&(i=t(n,r),n=i.previousSibling,s>r?(s-=r,n=i=t(i,s).previousSibling,s=i.nodeValue.length,r=0):s=0):(3==n.nodeType&&r>0&&r<n.nodeValue.length&&(n=t(n,r),r=0),3==i.nodeType&&s>0&&s<i.nodeValue.length&&(i=t(i,s).previousSibling,s=i.nodeValue.length)),{startContainer:n,startOffset:r,endContainer:i,endOffset:s}}}var n=e.each;return t.compareRanges=function(e,t){if(e&&t){if(!e.item&&!e.duplicate)return e.startContainer==t.startContainer&&e.startOffset==t.startOffset;if(e.item&&t.item&&e.item(0)===t.item(0))return!0;if(e.isEqual&&t.isEqual&&t.isEqual(e))return!0}return!1},t}),r(_,[h,M,p],function(e,t,n){return function(r){function i(e){return e.nodeType&&(e=e.nodeName),!!r.schema.getTextBlockElements()[e.toLowerCase()]}function s(e,t){return F.getParents(e,t,F.getRoot())}function o(e){return 1===e.nodeType&&"_mce_caret"===e.id}function u(){l({alignleft:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{"float":"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},defaultBlock:"div"},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"}},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"}}],alignright:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{"float":"right"}}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},defaultBlock:"div"}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},wrap_links:!1},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},wrap_links:!1},fontname:{inline:"span",styles:{fontFamily:"%value"}},fontsize:{inline:"span",styles:{fontSize:"%value"}},fontsize_class:{inline:"span",attributes:{"class":"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(){return!0},onformat:function(e,t,n){et(n,function(t,n){F.setAttrib(e,n,t)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]}),et("p h1 h2 h3 h4 h5 h6 div address pre div dt dd samp".split(/\s/),function(e){l(e,{block:e,remove:"all"})}),l(r.settings.formats)}function a(){r.addShortcut("ctrl+b","bold_desc","Bold"),r.addShortcut("ctrl+i","italic_desc","Italic"),r.addShortcut("ctrl+u","underline_desc","Underline");for(var e=1;6>=e;e++)r.addShortcut("ctrl+"+e,"",["FormatBlock",!1,"h"+e]);r.addShortcut("ctrl+7","",["FormatBlock",!1,"p"]),r.addShortcut("ctrl+8","",["FormatBlock",!1,"div"]),r.addShortcut("ctrl+9","",["FormatBlock",!1,"address"])}function f(e){return e?j[e]:j}function l(e,t){e&&("string"!=typeof e?et(e,function(e,t){l(t,e)}):(t=t.length?t:[t],et(t,function(e){e.deep===Q&&(e.deep=!e.selector),e.split===Q&&(e.split=!e.selector||e.inline),e.remove===Q&&e.selector&&!e.inline&&(e.remove="none"),e.selector&&e.inline&&(e.mixed=!0,e.block_expand=!0),"string"==typeof e.classes&&(e.classes=e.classes.split(/\s+/))}),j[e]=t))}function c(e){var t;return r.dom.getParent(e,function(e){return t=r.dom.getStyle(e,"text-decoration"),t&&"none"!==t}),t}function h(e){var t;1===e.nodeType&&e.parentNode&&1===e.parentNode.nodeType&&(t=c(e.parentNode),r.dom.getStyle(e,"color")&&t?r.dom.setStyle(e,"text-decoration",t):r.dom.getStyle(e,"textdecoration")===t&&r.dom.setStyle(e,"text-decoration",null))}function p(t,n,s){function u(e,t){t=t||v,e&&(t.onformat&&t.onformat(e,t,n,s),et(t.styles,function(t,r){F.setStyle(e,r,N(t,n))}),et(t.attributes,function(t,r){F.setAttrib(e,r,N(t,n))}),et(t.classes,function(t){t=N(t,n),F.hasClass(e,t)||F.addClass(e,t)}))}function a(){function t(t,n){var r=new e(n);for(s=r.current();s;s=r.prev())if(s.childNodes.length>1||s==t||"BR"==s.tagName)return s}var n=r.selection.getRng(),i=n.startContainer,o=n.endContainer;if(i!=o&&0===n.endOffset){var u=t(i,o),a=3==u.nodeType?u.length:u.childNodes.length;n.setEnd(u,a)}return n}function l(e,t,n,r,i){var s=[],o=-1,u,a=-1,f=-1,l;return et(e.childNodes,function(e,t){return"UL"===e.nodeName||"OL"===e.nodeName?(o=t,u=e,!1):void 0}),et(e.childNodes,function(e,n){"SPAN"===e.nodeName&&"bookmark"==F.getAttrib(e,"data-mce-type")&&(e.id==t.id+"_start"?a=n:e.id==t.id+"_end"&&(f=n))}),0>=o||o>a&&f>o?(et(tt(e.childNodes),i),0):(l=F.clone(n,$),et(tt(e.childNodes),function(e,t){(o>a&&o>t||a>o&&t>o)&&(s.push(e),e.parentNode.removeChild(e))}),o>a?e.insertBefore(l,u):a>o&&e.insertBefore(l,u.nextSibling),r.push(l),et(s,function(e){l.appendChild(e)}),l)}function c(e,r,s){var a=[],f,c,h=!0;f=v.inline||v.block,c=F.create(f),u(c),q.walk(e,function(e){function p(e){var y,w,E,x,T;return T=h,y=e.nodeName.toLowerCase(),w=e.parentNode.nodeName.toLowerCase(),1===e.nodeType&&G(e)&&(T=h,h="true"===G(e),x=!0),S(y,"br")?(g=0,v.block&&F.remove(e),void 0):v.wrapper&&m(e,t,n)?(g=0,void 0):h&&!x&&v.block&&!v.wrapper&&i(y)&&R(w,f)?(e=F.rename(e,f),u(e),a.push(e),g=0,void 0):v.selector&&(et(d,function(t){"collapsed"in t&&t.collapsed!==b||F.is(e,t.selector)&&!o(e)&&(u(e,t),E=!0)}),!v.inline||E)?(g=0,void 0):(!h||x||!R(f,y)||!R(w,f)||!s&&3===e.nodeType&&1===e.nodeValue.length&&65279===e.nodeValue.charCodeAt(0)||o(e)||v.inline&&U(e)?"li"==y&&r?g=l(e,r,c,a,p):(g=0,et(tt(e.childNodes),p),x&&(h=T),g=0):(g||(g=F.clone(c,$),e.parentNode.insertBefore(g,e),a.push(g)),g.appendChild(e)),void 0)}var g;et(e,p)}),v.wrap_links===!1&&et(a,function(e){function t(e){var n,r,i;if("A"===e.nodeName){for(r=F.clone(c,$),a.push(r),i=tt(e.childNodes),n=0;n<i.length;n++)r.appendChild(i[n]);e.appendChild(r)}et(tt(e.childNodes),t)}t(e)}),et(a,function(e){function r(e){var t=0;return et(e.childNodes,function(e){C(e)||_(e)||t++}),t}function i(e){var t,n;return et(e.childNodes,function(e){return 1!=e.nodeType||_(e)||o(e)?void 0:(t=e,$)}),t&&E(t,v)&&(n=F.clone(t,$),u(n),F.replace(n,e,J),F.remove(t,1)),n||e}var s;if(s=r(e),(a.length>1||!U(e))&&0===s)return F.remove(e,1),void 0;if(v.inline||v.wrapper){if(v.exact||1!==s||(e=i(e)),et(d,function(t){et(F.select(t.inline,e),function(e){var r;if(t.wrap_links===!1){r=e.parentNode;do if("A"===r.nodeName)return;while(r=r.parentNode)}A(t,n,e,t.exact?e:null)})}),m(e.parentNode,t,n))return F.remove(e,1),e=0,J;v.merge_with_parents&&F.getParent(e.parentNode,function(r){return m(r,t,n)?(F.remove(e,1),e=0,J):void 0}),e&&v.merge_siblings!==!1&&(e=D(M(e),e),e=D(e,M(e,J)))}})}var d=f(t),v=d[0],g,y,b=!s&&I.isCollapsed();if(v)if(s)s.nodeType?(y=F.createRng(),y.setStartBefore(s),y.setEndAfter(s),c(L(y,d),null,!0)):c(s,null,!0);else if(b&&v.inline&&!F.select("td.mce-item-selected,th.mce-item-selected").length)H("apply",t,n);else{var w=r.selection.getNode();z||!d[0].defaultBlock||F.getParent(w,F.isBlock)||p(d[0].defaultBlock),r.selection.setRng(a()),g=I.getBookmark(),c(L(I.getRng(J),d),g),v.styles&&(v.styles.color||v.styles.textDecoration)&&(nt(w,h,"childNodes"),h(w)),I.moveToBookmark(g),B(I.getRng(J)),r.nodeChanged()}}function d(e,t,n){function i(e){var n,r,s,o,u;if(1===e.nodeType&&G(e)&&(o=b,b="true"===G(e),u=!0),n=tt(e.childNodes),b&&!u)for(r=0,s=p.length;s>r&&!A(p[r],t,e,e);r++);if(d.deep&&n.length){for(r=0,s=n.length;s>r;r++)i(n[r]);u&&(b=o)}}function o(n){var r;return et(s(n.parentNode).reverse(),function(n){var i;r||"_start"==n.id||"_end"==n.id||(i=m(n,e,t),i&&i.split!==!1&&(r=n))}),r}function u(e,n,r,i){var s,o,u,a,f,l;if(e){for(l=e.parentNode,s=n.parentNode;s&&s!=l;s=s.parentNode){for(o=F.clone(s,$),f=0;f<p.length;f++)if(A(p[f],t,o,o)){o=0;break}o&&(u&&o.appendChild(u),a||(a=o),u=o)}!i||d.mixed&&U(e)||(n=F.split(e,n)),u&&(r.parentNode.insertBefore(u,r),a.appendChild(r))}return n}function a(e){return u(o(e),e,e,!0)}function l(e){var t=F.get(e?"_start":"_end"),n=t[e?"firstChild":"lastChild"];return _(n)&&(n=n[e?"firstChild":"lastChild"]),F.remove(t,!0),n}function h(e){var t,n;e=L(e,p,J),d.split&&(t=P(e,J),n=P(e),t!=n?(/^(TR|TD)$/.test(t.nodeName)&&t.firstChild&&(t="TD"==t.nodeName?t.firstChild||t:t.firstChild.firstChild||t),t=k(t,"span",{id:"_start","data-mce-type":"bookmark"}),n=k(n,"span",{id:"_end","data-mce-type":"bookmark"}),a(t),a(n),t=l(J),n=l()):t=n=a(t),e.startContainer=t.parentNode,e.startOffset=W(t),e.endContainer=n.parentNode,e.endOffset=W(n)+1),q.walk(e,function(e){et(e,function(e){i(e),1===e.nodeType&&"underline"===r.dom.getStyle(e,"text-decoration")&&e.parentNode&&"underline"===c(e.parentNode)&&A({deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,e)})})}var p=f(e),d=p[0],v,y,b=!0;return n?(n.nodeType?(y=F.createRng(),y.setStartBefore(n),y.setEndAfter(n),h(y)):h(n),void 0):(I.isCollapsed()&&d.inline&&!F.select("td.mce-item-selected,th.mce-item-selected").length?H("remove",e,t):(v=I.getBookmark(),h(I.getRng(J)),I.moveToBookmark(v),d.inline&&g(e,t,I.getStart())&&B(I.getRng(!0)),r.nodeChanged()),void 0)}function v(e,t,n){var r=f(e);!g(e,t,n)||"toggle"in r[0]&&!r[0].toggle?p(e,t,n):d(e,t,n)}function m(e,t,n,r){function i(e,t,i){var s,o,u=t[i],a;if(t.onmatch)return t.onmatch(e,t,i);if(u)if(u.length===Q){for(s in u)if(u.hasOwnProperty(s)){if(o="attributes"===i?F.getAttrib(e,s):x(e,s),r&&!o&&!t.exact)return;if((!r||t.exact)&&!S(o,T(N(u[s],n),s)))return}}else for(a=0;a<u.length;a++)if("attributes"===i?F.getAttrib(e,u[a]):x(e,u[a]))return t;return t}var s=f(t),o,u,a;if(s&&e)for(u=0;u<s.length;u++)if(o=s[u],E(e,o)&&i(e,o,"attributes")&&i(e,o,"styles")){if(a=o.classes)for(u=0;u<a.length;u++)if(!F.hasClass(e,a[u]))return;return o}}function g(e,t,n){function r(n){return n=F.getParent(n,function(n){return!!m(n,e,t,!0)}),m(n,e,t)}var i;return n?r(n):(n=I.getNode(),r(n)?J:(i=I.getStart(),i!=n&&r(i)?J:$))}function y(e,t){var n,r=[],i={};return n=I.getStart(),F.getParent(n,function(n){var s,o;for(s=0;s<e.length;s++)o=e[s],!i[o]&&m(n,o,t)&&(i[o]=!0,r.push(o))},F.getRoot()),r}function b(e){var t=f(e),n,r,i,o,u;if(t)for(n=I.getStart(),r=s(n),o=t.length-1;o>=0;o--){if(u=t[o].selector,!u)return J;for(i=r.length-1;i>=0;i--)if(F.is(r[i],u))return J}return $}function w(e,t,n){var i;return K||(K={},i={},r.on("NodeChange",function(e){var t=s(e.element),n={};et(K,function(e,r){et(t,function(s){return m(s,r,{},e.similar)?(i[r]||(et(e,function(e){e(!0,{node:s,format:r,parents:t})}),i[r]=e),n[r]=e,!1):void 0})}),et(i,function(r,s){n[s]||(delete i[s],et(r,function(n){n(!1,{node:e.element,format:s,parents:t})}))})})),et(e.split(","),function(e){K[e]||(K[e]=[],K[e].similar=n),K[e].push(t)}),this}function E(e,t){return S(e,t.inline)?J:S(e,t.block)?J:t.selector?1==e.nodeType&&F.is(e,t.selector):void 0}function S(e,t){return e=e||"",t=t||"",e=""+(e.nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()==t.toLowerCase()}function x(e,t){return T(F.getStyle(e,t),t)}function T(e,t){return("color"==t||"backgroundColor"==t)&&(e=F.toHex(e)),"fontWeight"==t&&700==e&&(e="bold"),"fontFamily"==t&&(e=e.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),""+e}function N(e,t){return"string"!=typeof e?e=e(t):t&&(e=e.replace(/%(\w+)/g,function(e,n){return t[n]||e})),e}function C(e){return e&&3===e.nodeType&&/^([\t \r\n]+|)$/.test(e.nodeValue)}function k(e,t,n){var r=F.create(t,n);return e.parentNode.insertBefore(r,e),r.appendChild(e),r}function L(t,n,o){function u(e){function t(e){return"BR"==e.nodeName&&e.getAttribute("data-mce-bogus")&&!e.nextSibling}var r,i,s,o,u;if(r=i=e?m:y,o=e?"previousSibling":"nextSibling",u=F.getRoot(),3==r.nodeType&&!C(r)&&(e?g>0:b<r.nodeValue.length))return r;for(;;){if(!n[0].block_expand&&U(i))return i;for(s=i[o];s;s=s[o])if(!_(s)&&!C(s)&&!t(s))return i;if(i.parentNode==u){r=i;break}i=i.parentNode}return r}function a(e,t){for(t===Q&&(t=3===e.nodeType?e.length:e.childNodes.length);e&&e.hasChildNodes();)e=e.childNodes[t],e&&(t=3===e.nodeType?e.length:e.childNodes.length);return{node:e,offset:t}}function f(e){for(var t=e;t;){if(1===t.nodeType&&G(t))return"false"===G(t)?t:e;t=t.parentNode}return e}function l(t,n,i){function s(e,t){var n,r,s=e.nodeValue;return"undefined"==typeof t&&(t=i?s.length:0),i?(n=s.lastIndexOf(" ",t),r=s.lastIndexOf(" ",t),n=n>r?n:r,-1===n||o||n++):(n=s.indexOf(" ",t),r=s.indexOf(" ",t),n=-1!==n&&(-1===r||r>n)?n:r),n}var u,a,f,l;if(3===t.nodeType){if(f=s(t,n),-1!==f)return{container:t,offset:f};l=t}for(u=new e(t,F.getParent(t,U)||r.getBody());a=u[i?"prev":"next"]();)if(3===a.nodeType){if(l=a,f=s(a),-1!==f)return{container:a,offset:f}}else if(U(a))break;return l?(n=i?0:l.length,{container:l,offset:n}):void 0}function c(e,r){var i,o,u,a;for(3==e.nodeType&&0===e.nodeValue.length&&e[r]&&(e=e[r]),i=s(e),o=0;o<i.length;o++)for(u=0;u<n.length;u++)if(a=n[u],!("collapsed"in a&&a.collapsed!==t.collapsed)&&F.is(i[o],a.selector))return i[o];return e}function h(e,t){var r;if(n[0].wrapper||(r=F.getParent(e,n[0].block)),r||(r=F.getParent(3==e.nodeType?e.parentNode:e,i)),r&&n[0].wrapper&&(r=s(r,"ul,ol").reverse()[0]||r),!r)for(r=e;r[t]&&!U(r[t])&&(r=r[t],!S(r,"br")););return r||e}var p,d,v,m=t.startContainer,g=t.startOffset,y=t.endContainer,b=t.endOffset;if(1==m.nodeType&&m.hasChildNodes()&&(p=m.childNodes.length-1,m=m.childNodes[g>p?p:g],3==m.nodeType&&(g=0)),1==y.nodeType&&y.hasChildNodes()&&(p=y.childNodes.length-1,y=y.childNodes[b>p?p:b-1],3==y.nodeType&&(b=y.nodeValue.length)),m=f(m),y=f(y),(_(m.parentNode)||_(m))&&(m=_(m)?m:m.parentNode,m=m.nextSibling||m,3==m.nodeType&&(g=0)),(_(y.parentNode)||_(y))&&(y=_(y)?y:y.parentNode,y=y.previousSibling||y,3==y.nodeType&&(b=y.length)),n[0].inline&&(t.collapsed&&(v=l(m,g,!0),v&&(m=v.container,g=v.offset),v=l(y,b),v&&(y=v.container,b=v.offset)),d=a(y,b),d.node)){for(;d.node&&0===d.offset&&d.node.previousSibling;)d=a(d.node.previousSibling);d.node&&d.offset>0&&3===d.node.nodeType&&" "===d.node.nodeValue.charAt(d.offset-1)&&d.offset>1&&(y=d.node,y.splitText(d.offset-1))}return(n[0].inline||n[0].block_expand)&&(n[0].inline&&3==m.nodeType&&0!==g||(m=u(!0)),n[0].inline&&3==y.nodeType&&b!==y.nodeValue.length||(y=u())),n[0].selector&&n[0].expand!==$&&!n[0].inline&&(m=c(m,"previousSibling"),y=c(y,"nextSibling")),(n[0].block||n[0].selector)&&(m=h(m,"previousSibling"),y=h(y,"nextSibling"),n[0].block&&(U(m)||(m=u(!0)),U(y)||(y=u()))),1==m.nodeType&&(g=W(m),m=m.parentNode),1==y.nodeType&&(b=W(y)+1,y=y.parentNode),{startContainer:m,startOffset:g,endContainer:y,endOffset:b}}function A(e,t,n,r){var i,s,o;if(!E(n,e))return $;if("all"!=e.remove)for(et(e.styles,function(e,i){e=T(N(e,t),i),"number"==typeof i&&(i=e,r=0),(!r||S(x(r,i),e))&&F.setStyle(n,i,""),o=1}),o&&""===F.getAttrib(n,"style")&&(n.removeAttribute("style"),n.removeAttribute("data-mce-style")),et(e.attributes,function(e,i){var s;if(e=N(e,t),"number"==typeof i&&(i=e,r=0),!r||S(F.getAttrib(r,i),e)){if("class"==i&&(e=F.getAttrib(n,i),e&&(s="",et(e.split(/\s+/),function(e){/mce\w+/.test(e)&&(s+=(s?" ":"")+e)}),s)))return F.setAttrib(n,i,s),void 0;"class"==i&&n.removeAttribute("className"),V.test(i)&&n.removeAttribute("data-mce-"+i),n.removeAttribute(i)}}),et(e.classes,function(e){e=N(e,t),(!r||F.hasClass(r,e))&&F.removeClass(n,e)}),s=F.getAttribs(n),i=0;i<s.length;i++)if(0!==s[i].nodeName.indexOf("_"))return $;return"none"!=e.remove?(O(n,e),J):void 0}function O(e,t){function n(e,t,n){return e=M(e,t,n),!e||"BR"==e.nodeName||U(e)}var r=e.parentNode,i;t.block&&(z?r==F.getRoot()&&(t.list_block&&S(e,t.list_block)||et(tt(e.childNodes),function(e){R(z,e.nodeName.toLowerCase())?i?i.appendChild(e):i=k(e,z):i=0})):U(e)&&!U(r)&&(n(e,$)||n(e.firstChild,J,1)||e.insertBefore(F.create("br"),e.firstChild),n(e,J)||n(e.lastChild,$,1)||e.appendChild(F.create("br")))),t.selector&&t.inline&&!S(t.inline,e)||F.remove(e,1)}function M(e,t,n){if(e)for(t=t?"nextSibling":"previousSibling",e=n?e:e[t];e;e=e[t])if(1==e.nodeType||!C(e))return e}function _(e){return e&&1==e.nodeType&&"bookmark"==e.getAttribute("data-mce-type")}function D(e,t){function n(e,t){function n(e){var t={};return et(F.getAttribs(e),function(n){var r=n.nodeName.toLowerCase();0!==r.indexOf("_")&&"style"!==r&&(t[r]=F.getAttrib(e,r))}),t}function r(e,t){var n,r;for(r in e)if(e.hasOwnProperty(r)){if(n=t[r],n===Q)return $;if(e[r]!=n)return $;delete t[r]}for(r in t)if(t.hasOwnProperty(r))return $;return J}return e.nodeName!=t.nodeName?$:r(n(e),n(t))?r(F.parseStyle(F.getAttrib(e,"style")),F.parseStyle(F.getAttrib(t,"style")))?J:$:$}function r(e,t){for(i=e;i;i=i[t]){if(3==i.nodeType&&0!==i.nodeValue.length)return e;if(1==i.nodeType&&!_(i))return i}return e}var i,s;if(e&&t&&(e=r(e,"previousSibling"),t=r(t,"nextSibling"),n(e,t))){for(i=e.nextSibling;i&&i!=t;)s=i,i=i.nextSibling,e.appendChild(s);return F.remove(t),et(tt(t.childNodes),function(t){e.appendChild(t)}),e}return t}function P(t,n){var i,s,o;return i=t[n?"startContainer":"endContainer"],s=t[n?"startOffset":"endOffset"],1==i.nodeType&&(o=i.childNodes.length-1,!n&&s&&s--,i=i.childNodes[s>o?o:s]),3===i.nodeType&&n&&s>=i.nodeValue.length&&(i=(new e(i,r.getBody())).next()||i),3!==i.nodeType||n||0!==s||(i=(new e(i,r.getBody())).prev()||i),i}function H(t,n,s){function o(e){var t=F.create("span",{id:y,"data-mce-bogus":!0,style:b?"color:red":""});return e&&t.appendChild(r.getDoc().createTextNode(X)),t}function u(e,t){for(;e;){if(3===e.nodeType&&e.nodeValue!==X||e.childNodes.length>1)return!1;t&&1===e.nodeType&&t.push(e),e=e.firstChild}return!0}function a(e){for(;e;){if(e.id===y)return e;e=e.parentNode}}function l(t){var n;if(t)for(n=new e(t,t),t=n.current();t;t=n.next())if(3===t.nodeType)return t}function c(e,t){var n,r;if(e)r=I.getRng(!0),u(e)?(t!==!1&&(r.setStartBefore(e),r.setEndBefore(e)),F.remove(e)):(n=l(e),n.nodeValue.charAt(0)===X&&(n=n.deleteData(0,1)),F.remove(e,1)),I.setRng(r);else if(e=a(I.getStart()),!e)for(;e=F.get(y);)c(e,!1)}function h(){var e,t,r,i,u,c,h;e=I.getRng(!0),i=e.startOffset,c=e.startContainer,h=c.nodeValue,t=a(I.getStart()),t&&(r=l(t)),h&&i>0&&i<h.length&&/\w/.test(h.charAt(i))&&/\w/.test(h.charAt(i-1))?(u=I.getBookmark(),e.collapse(!0),e=L(e,f(n)),e=q.split(e),p(n,s,e),I.moveToBookmark(u)):(t&&r.nodeValue===X?p(n,s,t):(t=o(!0),r=t.firstChild,e.insertNode(t),i=1,p(n,s,t)),I.setCursorLocation(r,i))}function v(){var e=I.getRng(!0),t,r,u,a,l,c,h=[],p,v;for(t=e.startContainer,r=e.startOffset,l=t,3==t.nodeType&&((r!=t.nodeValue.length||t.nodeValue===X)&&(a=!0),l=l.parentNode);l;){if(m(l,n,s)){c=l;break}l.nextSibling&&(a=!0),h.push(l),l=l.parentNode}if(c)if(a)u=I.getBookmark(),e.collapse(!0),e=L(e,f(n),!0),e=q.split(e),d(n,s,e),I.moveToBookmark(u);else{for(v=o(),l=v,p=h.length-1;p>=0;p--)l.appendChild(F.clone(h[p],!1)),l=l.firstChild;l.appendChild(F.doc.createTextNode(X)),l=l.firstChild;var g=F.getParent(c,i);g&&F.isEmpty(g)?c.parentNode.replaceChild(v,c):F.insertAfter(v,c),I.setCursorLocation(l,1)}}function g(){var e;e=a(I.getStart()),e&&!F.isEmpty(e)&&nt(e,function(e){1!=e.nodeType||e.id===y||F.isEmpty(e)||F.setAttrib(e,"data-mce-bogus",null)},"childNodes")}var y="_mce_caret",b=r.settings.caret_debug;r._hasCaretEvents||(Z=function(){var e=[],t;if(u(a(I.getStart()),e))for(t=e.length;t--;)F.setAttrib(e[t],"data-mce-bogus","1")},Y=function(e){var t=e.keyCode;c(),(8==t||37==t||39==t)&&c(a(I.getStart())),g()},r.on("SetContent",function(e){e.selection&&g()}),r._hasCaretEvents=!0),"apply"==t?h():v()}function B(t){var n=t.startContainer,r=t.startOffset,i,s,o,u,a;if(3==n.nodeType&&r>=n.nodeValue.length&&(r=W(n),n=n.parentNode,i=!0),1==n.nodeType)for(u=n.childNodes,n=u[Math.min(r,u.length-1)],s=new e(n,F.getParent(n,F.isBlock)),(r>u.length-1||i)&&s.next(),o=s.current();o;o=s.next())if(3==o.nodeType&&!C(o))return a=F.create("a",null,X),o.parentNode.insertBefore(a,o),t.setStart(o,0),I.setRng(t),F.remove(a),void 0}var j={},F=r.dom,I=r.selection,q=new t(F),R=r.schema.isValidChild,U=F.isBlock,z=r.settings.forced_root_block,W=F.nodeIndex,X="﻿",V=/^(src|href|style)$/,$=!1,J=!0,K,Q,G=F.getContentEditable,Y,Z,et=n.each,tt=n.grep,nt=n.walk,rt=n.extend;rt(this,{get:f,register:l,apply:p,remove:d,toggle:v,match:g,matchAll:y,matchNode:m,canApply:b,formatChanged:w}),u(),a(),r.on("BeforeGetContent",function(){Z&&Z()}),r.on("mouseup keydown",function(e){Y&&Y(e)})}}),r(D,[m,p],function(e,t){var n=t.trim,r;return r=new RegExp(["<span[^>]+data-mce-bogus[^>]+>[​﻿]+<\\/span>","<div[^>]+data-mce-bogus[^>]+><\\/div>",'\\s?data-mce-selected="[^"]+"'].join("|"),"gi"),function(t){function i(){return n(t.getContent({format:"raw",no_events:1}).replace(r,""))}function s(){o.typing=!1,o.add()}var o,u=0,a=[],f,l;return t.on("init",function(){o.add()}),t.on("BeforeExecCommand",function(e){var t=e.command;"Undo"!=t&&"Redo"!=t&&"mceRepaint"!=t&&o.beforeChange()}),t.on("ExecCommand",function(e){var t=e.command;"Undo"!=t&&"Redo"!=t&&"mceRepaint"!=t&&o.add()}),t.on("ObjectResizeStart",function(){o.beforeChange()}),t.on("SaveContent ObjectResized",s),t.dom.bind(t.dom.getRoot(),"dragend",s),t.dom.bind(t.getBody(),"focusout",function(){!t.removed&&o.typing&&s()}),t.on("KeyUp",function(n){var r=n.keyCode;(r>=33&&36>=r||r>=37&&40>=r||45==r||13==r||n.ctrlKey)&&(s(),t.nodeChanged()),(46==r||8==r||e.mac&&(91==r||93==r))&&t.nodeChanged(),l&&o.typing&&(t.isDirty()||(t.isNotDirty=!a[0]||i()==a[0].content),t.fire("TypingUndo"),l=!1,t.nodeChanged())}),t.on("KeyDown",function(e){var t=e.keyCode;return t>=33&&36>=t||t>=37&&40>=t||45==t?(o.typing&&s(),void 0):((16>t||t>20)&&224!=t&&91!=t&&!o.typing&&(o.beforeChange(),o.typing=!0,o.add(),l=!0),void 0)}),t.on("MouseDown",function(){o.typing&&s()}),t.addShortcut("ctrl+z","","Undo"),t.addShortcut("ctrl+y,ctrl+shift+z","","Redo"),t.on("AddUndo Undo Redo ClearUndos MouseUp",function(e){e.isDefaultPrevented()||t.nodeChanged()}),o={data:a,typing:!1,beforeChange:function(){f=t.selection.getBookmark(2,!0)},add:function(e){var n,r=t.settings,s;if(e=e||{},e.content=i(),t.fire("BeforeAddUndo",{level:e}).isDefaultPrevented())return null;if(s=a[u],s&&s.content==e.content)return null;if(a[u]&&(a[u].beforeBookmark=f),r.custom_undo_redo_levels&&a.length>r.custom_undo_redo_levels){for(n=0;n<a.length-1;n++)a[n]=a[n+1];a.length--,u=a.length}e.bookmark=t.selection.getBookmark(2,!0),u<a.length-1&&(a.length=u+1),a.push(e),u=a.length-1;var o={level:e,lastLevel:s};return t.fire("AddUndo",o),u>0&&(t.fire("change",o),t.isNotDirty=!1),e},undo:function(){var e;return o.typing&&(o.add(),o.typing=!1),u>0&&(e=a[--u],t.setContent(e.content,{format:"raw"}),t.selection.moveToBookmark(e.beforeBookmark),t.fire("undo",{level:e})),e},redo:function(){var e;return u<a.length-1&&(e=a[++u],t.setContent(e.content,{format:"raw"}),t.selection.moveToBookmark(e.bookmark),t.fire("redo",{level:e})),e},clear:function(){a=[],u=0,o.typing=!1,t.fire("ClearUndos")},hasUndo:function(){return u>0||o.typing&&a[0]&&i()!=a[0].content},hasRedo:function(){return u<a.length-1&&!this.typing},transact:function(e){o.beforeChange(),e(),o.add()}}}}),r(P,[h,m],function(e,t){var n=t.ie;return function(t){function r(r){function l(e){return e&&i.isBlock(e)&&!/^(TD|TH|CAPTION|FORM)$/.test(e.nodeName)&&!/^(fixed|absolute)/i.test(e.style.position)&&"true"!==i.getContentEditable(e)}function c(e){var t;i.isBlock(e)&&(t=s.getRng(),e.appendChild(i.create("span",null," ")),s.select(e),e.lastChild.outerHTML="",s.setRng(t))}function h(e){for(var t=e,n=[],r;t=t.firstChild;){if(i.isBlock(t))return;1!=t.nodeType||f[t.nodeName.toLowerCase()]||n.push(t)}for(r=n.length;r--;)t=n[r],!t.hasChildNodes()||t.firstChild==t.lastChild&&""===t.firstChild.nodeValue?i.remove(t):"A"==t.nodeName&&" "===(t.innerText||t.textContent)&&i.remove(t)}function p(t){var n,r,o,u=t,a;if(o=i.createRng(),t.hasChildNodes()){for(n=new e(t,t);r=n.current();){if(3==r.nodeType){o.setStart(r,0),o.setEnd(r,0);break}if(f[r.nodeName.toLowerCase()]){o.setStartBefore(r),o.setEndBefore(r);break}u=r,r=n.next()}r||(o.setStart(u,0),o.setEnd(u,0))}else"BR"==t.nodeName?t.nextSibling&&i.isBlock(t.nextSibling)?((!A||9>A)&&(a=i.create("br"),t.parentNode.insertBefore(a,t)),o.setStartBefore(t),o.setEndBefore(t)):(o.setStartAfter(t),o.setEndAfter(t)):(o.setStart(t,0),o.setEnd(t,0));s.setRng(o),i.remove(a),s.scrollIntoView(t)}function d(e){var t=C,r,s,u;if(r=e||"TABLE"==P?i.create(e||B):L.cloneNode(!1),u=r,o.keep_styles!==!1)do if(/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(t.nodeName)){if("_mce_caret"==t.id)continue;s=t.cloneNode(!1),i.setAttrib(s,"id",""),r.hasChildNodes()?(s.appendChild(r.firstChild),r.appendChild(s)):(u=s,r.appendChild(s))}while(t=t.parentNode);return n||(u.innerHTML='<br data-mce-bogus="1">'),r}function v(t){var n,r,i;if(3==C.nodeType&&(t?k>0:k<C.nodeValue.length))return!1;if(C.parentNode==L&&j&&!t)return!0;if(t&&1==C.nodeType&&C==L.firstChild)return!0;if("TABLE"===C.nodeName||C.previousSibling&&"TABLE"==C.previousSibling.nodeName)return j&&!t||!j&&t;for(n=new e(C,L),3==C.nodeType&&(t&&0===k?n.prev():t||k!=C.nodeValue.length||n.next());r=n.current();){if(1===r.nodeType){if(!r.getAttribute("data-mce-bogus")&&(i=r.nodeName.toLowerCase(),f[i]&&"br"!==i))return!1}else if(3===r.nodeType&&!/^[ \t\r\n]*$/.test(r.nodeValue))return!1;t?n.prev():n.next()}return!0}function m(e,n){var r,s,o,u,f,c,h=B||"P";if(s=i.getParent(e,i.isBlock),c=t.getBody().nodeName.toLowerCase(),!s||!l(s)){if(s=s||N,!s.hasChildNodes())return r=i.create(h),s.appendChild(r),x.setStart(r,0),x.setEnd(r,0),r;for(u=e;u.parentNode!=s;)u=u.parentNode;for(;u&&!i.isBlock(u);)o=u,u=u.previousSibling;if(o&&a.isValidChild(c,h.toLowerCase())){for(r=i.create(h),o.parentNode.insertBefore(r,o),u=o;u&&!i.isBlock(u);)f=u.nextSibling,r.appendChild(u),u=f;x.setStart(e,n),x.setEnd(e,n)}}return e}function g(){function e(e){for(var t=D[e?"firstChild":"lastChild"];t&&1!=t.nodeType;)t=t[e?"nextSibling":"previousSibling"];return t===L}function t(){var e=D.parentNode;return"LI"==e.nodeName?e:D}var n=D.parentNode.nodeName;/^(OL|UL|LI)$/.test(n)&&(B="LI"),M=B?d(B):i.create("BR"),e(!0)&&e()?"LI"==n?i.insertAfter(M,t()):i.replace(M,D):e(!0)?"LI"==n?(i.insertAfter(M,t()),M.appendChild(i.doc.createTextNode(" ")),M.appendChild(D)):D.parentNode.insertBefore(M,D):e()?(i.insertAfter(M,t()),c(M)):(D=t(),T=x.cloneRange(),T.setStartAfter(L),T.setEndAfter(D),_=T.extractContents(),i.insertAfter(_,D),i.insertAfter(M,D)),i.remove(L),p(M),u.add()}function y(){for(var t=new e(C,L),n;n=t.next();)if(f[n.nodeName.toLowerCase()]||n.length>0)return!0}function b(){var e,t,r;C&&3==C.nodeType&&k>=C.nodeValue.length&&(n||y()||(e=i.create("br"),x.insertNode(e),x.setStartAfter(e),x.setEndAfter(e),t=!0)),e=i.create("br"),x.insertNode(e),n&&"PRE"==P&&(!A||8>A)&&e.parentNode.insertBefore(i.doc.createTextNode("\r"),e),r=i.create("span",{},"&nbsp;"),e.parentNode.insertBefore(r,e),s.scrollIntoView(r),i.remove(r),t?(x.setStartBefore(e),x.setEndBefore(e)):(x.setStartAfter(e),x.setEndAfter(e)),s.setRng(x),u.add()}function w(e){do 3===e.nodeType&&(e.nodeValue=e.nodeValue.replace(/^[\r\n]+/,"")),e=e.firstChild;while(e)}function E(e){var t=i.getRoot(),n,r;for(n=e;n!==t&&"false"!==i.getContentEditable(n);)"true"===i.getContentEditable(n)&&(r=n),n=n.parentNode;return n!==t?r:t}function S(e){var t;n||(e.normalize(),t=e.lastChild,(!t||/^(left|right)$/gi.test(i.getStyle(t,"float",!0)))&&i.add(e,"br"))}var x=s.getRng(!0),T,N,C,k,L,A,O,M,_,D,P,H,B,j;if(!x.collapsed)return t.execCommand("Delete"),void 0;if(!r.isDefaultPrevented()&&(C=x.startContainer,k=x.startOffset,B=(o.force_p_newlines?"p":"")||o.forced_root_block,B=B?B.toUpperCase():"",A=i.doc.documentMode,O=r.shiftKey,1==C.nodeType&&C.hasChildNodes()&&(j=k>C.childNodes.length-1,C=C.childNodes[Math.min(k,C.childNodes.length-1)]||C,k=j&&3==C.nodeType?C.nodeValue.length:0),N=E(C))){if(u.beforeChange(),!i.isBlock(N)&&N!=i.getRoot())return(!B||O)&&b(),void 0;if((B&&!O||!B&&O)&&(C=m(C,k)),L=i.getParent(C,i.isBlock),D=L?i.getParent(L.parentNode,i.isBlock):null,P=L?L.nodeName.toUpperCase():"",H=D?D.nodeName.toUpperCase():"","LI"!=H||r.ctrlKey||(L=D,P=H),"LI"==P){if(!B&&O)return b(),void 0;if(i.isEmpty(L))return g(),void 0}if("PRE"==P&&o.br_in_pre!==!1){if(!O)return b(),void 0}else if(!B&&!O&&"LI"!=P||B&&O)return b(),void 0;B&&L===t.getBody()||(B=B||"P",v()?(M=/^(H[1-6]|PRE|FIGURE)$/.test(P)&&"HGROUP"!=H?d(B):d(),o.end_container_on_empty_block&&l(D)&&i.isEmpty(L)?M=i.split(D,L):i.insertAfter(M,L),p(M)):v(!0)?(M=L.parentNode.insertBefore(d(),L),c(M)):(T=x.cloneRange(),T.setEndAfter(L),_=T.extractContents(),w(_),M=_.firstChild,i.insertAfter(_,L),h(M),S(L),p(M)),i.setAttrib(M,"id",""),u.add())}}var i=t.dom,s=t.selection,o=t.settings,u=t.undoManager,a=t.schema,f=a.getNonEmptyElements();t.on("keydown",function(e){13==e.keyCode&&r(e)!==!1&&e.preventDefault()})}}),r(H,[],function(){return function(e){function t(){var t=i.getStart(),u=e.getBody(),a,f,l,c,h,p,d,v=-16777215,m,g,y,b,w;if(w=n.forced_root_block,t&&1===t.nodeType&&w){for(;t&&t!=u;){if(o[t.nodeName])return;t=t.parentNode}if(a=i.getRng(),a.setStart){f=a.startContainer,l=a.startOffset,c=a.endContainer,h=a.endOffset;try{g=e.getDoc().activeElement===u}catch(E){}}else a.item&&(t=a.item(0),a=e.getDoc().body.createTextRange(),a.moveToElementText(t)),g=a.parentElement().ownerDocument===e.getDoc(),y=a.duplicate(),y.collapse(!0),l=-1*y.move("character",v),y.collapsed||(y=a.duplicate(),y.collapse(!1),h=-1*y.move("character",v)-l);for(t=u.firstChild,b=u.nodeName.toLowerCase();t;)if((3===t.nodeType||1==t.nodeType&&!o[t.nodeName])&&s.isValidChild(b,w.toLowerCase())){if(3===t.nodeType&&0===t.nodeValue.length){d=t,t=t.nextSibling,r.remove(d);continue}p||(p=r.create(w),t.parentNode.insertBefore(p,t),m=!0),d=t,t=t.nextSibling,p.appendChild(d)}else p=null,t=t.nextSibling;if(m&&g){if(a.setStart)a.setStart(f,l),a.setEnd(c,h),i.setRng(a);else try{a=e.getDoc().body.createTextRange(),a.moveToElementText(u),a.collapse(!0),a.moveStart("character",l),h>0&&a.moveEnd("character",h),a.select()}catch(E){}e.nodeChanged()}}}var n=e.settings,r=e.dom,i=e.selection,s=e.schema,o=s.getBlockElements();n.forced_root_block&&e.on("KeyUp NodeChange",t)}}),r(B,[N,m,p],function(e,n,r){var i=r.each,s=r.extend,o=r.map,u=r.inArray,a=r.explode,f=n.gecko,l=n.ie,c=!0,h=!1;return function(n){function r(e,t,n){var r;return e=e.toLowerCase(),(r=x.exec[e])?(r(e,t,n),c):h}function p(e){var t;return e=e.toLowerCase(),(t=x.state[e])?t(e):-1}function d(e){var t;return e=e.toLowerCase(),(t=x.value[e])?t(e):h}function v(e,t){t=t||"exec",i(e,function(e,n){i(n.toLowerCase().split(","),function(n){x[t][n]=e})})}function m(e,r,i){return r===t&&(r=h),i===t&&(i=null),n.getDoc().execCommand(e,r,i)}function g(e){return N.match(e)}function y(e,r){N.toggle(e,r?{value:r}:t),n.nodeChanged()}function b(e){C=S.getBookmark(e)}function w(){S.moveToBookmark(C)}var E=n.dom,S=n.selection,x={state:{},exec:{},value:{}},T=n.settings,N=n.formatter,C;s(this,{execCommand:r,queryCommandState:p,queryCommandValue:d,addCommands:v}),v({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){n.undoManager.add()},"Cut,Copy,Paste":function(e){var t=n.getDoc(),r;try{m(e)}catch(i){r=c}(r||!t.queryCommandSupported(e))&&n.windowManager.alert("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead."
)},unlink:function(e){S.isCollapsed()&&S.select(S.getNode()),m(e),S.collapse(h)},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(e){var t=e.substring(7);"full"==t&&(t="justify"),i("left,center,right,justify".split(","),function(e){t!=e&&N.remove("align"+e)}),y("align"+t),r("mceRepaint")},"InsertUnorderedList,InsertOrderedList":function(e){var t,n;m(e),t=E.getParent(S.getNode(),"ol,ul"),t&&(n=t.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(n.nodeName)&&(b(),E.split(n,t),w()))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){y(e)},"ForeColor,HiliteColor,FontName":function(e,t,n){y(e,n)},FontSize:function(e,t,n){var r,i;n>=1&&7>=n&&(i=a(T.font_size_style_values),r=a(T.font_size_classes),n=r?r[n-1]||n:i[n-1]||n),y(e,n)},RemoveFormat:function(e){N.remove(e)},mceBlockQuote:function(){y("blockquote")},FormatBlock:function(e,t,n){return y(n||"p")},mceCleanup:function(){var e=S.getBookmark();n.setContent(n.getContent({cleanup:c}),{cleanup:c}),S.moveToBookmark(e)},mceRemoveNode:function(e,t,r){var i=r||S.getNode();i!=n.getBody()&&(b(),n.dom.remove(i,c),w())},mceSelectNodeDepth:function(e,t,r){var i=0;E.getParent(S.getNode(),function(e){return 1==e.nodeType&&i++==r?(S.select(e),h):void 0},n.getBody())},mceSelectNode:function(e,t,n){S.select(n)},mceInsertContent:function(t,r,i){function s(e){function t(e){return r[e]&&3==r[e].nodeType}var n,r,i;return n=S.getRng(!0),r=n.startContainer,i=n.startOffset,3==r.nodeType&&(i>0?e=e.replace(/^&nbsp;/," "):t("previousSibling")||(e=e.replace(/^ /,"&nbsp;")),i<r.length?e=e.replace(/&nbsp;(<br>|)$/," "):t("nextSibling")||(e=e.replace(/(&nbsp;| )(<br>|)$/,"&nbsp;"))),e}var o,u,a,f,c,h,p,d,v,m,g,y,b,w;if(/^ | $/.test(i)&&(i=s(i)),o=n.parser,u=new e({},n.schema),b='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>',h={content:i,format:"html",selection:!0},n.fire("BeforeSetContent",h),i=h.content,-1==i.indexOf("{$caret}")&&(i+="{$caret}"),i=i.replace(/\{\$caret\}/,b),S.isCollapsed()||n.getDoc().execCommand("Delete",!1,null),a=S.getNode(),h={context:a.nodeName.toLowerCase()},c=o.parse(i,h),g=c.lastChild,"mce_marker"==g.attr("id"))for(p=g,g=g.prev;g;g=g.walk(!0))if(3==g.type||!E.isBlock(g.name)){g.parent.insert(p,g,"br"===g.name);break}if(h.invalid){for(S.setContent(b),a=S.getNode(),f=n.getBody(),9==a.nodeType?a=g=f:g=a;g!==f;)a=g,g=g.parentNode;i=a==f?f.innerHTML:E.getOuterHTML(a),i=u.serialize(o.parse(i.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return u.serialize(c)}))),a==f?E.setHTML(f,i):E.setOuterHTML(a,i)}else i=u.serialize(c),g=a.firstChild,y=a.lastChild,!g||g===y&&"BR"===g.nodeName?E.setHTML(a,i):S.setContent(i);p=E.get("mce_marker"),d=E.getRect(p),v=E.getViewPort(n.getWin()),(d.y+d.h>v.y+v.h||d.y<v.y||d.x>v.x+v.w||d.x<v.x)&&(w=l?n.getDoc().documentElement:n.getBody(),w.scrollLeft=d.x,w.scrollTop=d.y-v.h+25),m=E.createRng(),g=p.previousSibling,g&&3==g.nodeType?(m.setStart(g,g.nodeValue.length),l||(y=p.nextSibling,y&&3==y.nodeType&&(g.appendData(y.data),y.parentNode.removeChild(y)))):(m.setStartBefore(p),m.setEndBefore(p)),E.remove(p),S.setRng(m),n.fire("SetContent",h),n.addVisual()},mceInsertRawHTML:function(e,t,r){S.setContent("tiny_mce_marker"),n.setContent(n.getContent().replace(/tiny_mce_marker/g,function(){return r}))},mceToggleFormat:function(e,t,n){y(n)},mceSetContent:function(e,t,r){n.setContent(r)},"Indent,Outdent":function(e){var t,n,r;t=T.indentation,n=/[a-z%]+$/i.exec(t),t=parseInt(t,10),p("InsertUnorderedList")||p("InsertOrderedList")?m(e):(T.forced_root_block||E.getParent(S.getNode(),E.isBlock)||N.apply("div"),i(S.getSelectedBlocks(),function(i){var s;"LI"!=i.nodeName&&(s="rtl"==E.getStyle(i,"direction",!0)?"paddingRight":"paddingLeft","outdent"==e?(r=Math.max(0,parseInt(i.style[s]||0,10)-t),E.setStyle(i,s,r?r+n:"")):(r=parseInt(i.style[s]||0,10)+t+n,E.setStyle(i,s,r)))}))},mceRepaint:function(){if(f)try{b(c),S.getSel()&&S.getSel().selectAllChildren(n.getBody()),S.collapse(c),w()}catch(e){}},InsertHorizontalRule:function(){n.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){n.hasVisual=!n.hasVisual,n.addVisual()},mceReplaceContent:function(e,t,r){n.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,S.getContent({format:"text"})))},mceInsertLink:function(e,t,n){var r;"string"==typeof n&&(n={href:n}),r=E.getParent(S.getNode(),"a"),n.href=n.href.replace(" ","%20"),r&&n.href||N.remove("link"),n.href&&N.apply("link",n,r)},selectAll:function(){var e=E.getRoot(),t=E.createRng();S.getRng().setStart?(t.setStart(e,0),t.setEnd(e,e.childNodes.length),S.setRng(t)):m("SelectAll")},mceNewDocument:function(){n.setContent("")}}),v({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(e){var t="align"+e.substring(7),n=S.isCollapsed()?[E.getParent(S.getNode(),E.isBlock)]:S.getSelectedBlocks(),r=o(n,function(e){return!!N.matchNode(e,t)});return-1!==u(r,c)},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){return g(e)},mceBlockQuote:function(){return g("blockquote")},Outdent:function(){var e;if(T.inline_styles){if((e=E.getParent(S.getStart(),E.isBlock))&&parseInt(e.style.paddingLeft,10)>0)return c;if((e=E.getParent(S.getEnd(),E.isBlock))&&parseInt(e.style.paddingLeft,10)>0)return c}return p("InsertUnorderedList")||p("InsertOrderedList")||!T.inline_styles&&!!E.getParent(S.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(e){var t=E.getParent(S.getNode(),"ul,ol");return t&&("insertunorderedlist"===e&&"UL"===t.tagName||"insertorderedlist"===e&&"OL"===t.tagName)}},"state"),v({"FontSize,FontName":function(e){var t=0,n;return(n=E.getParent(S.getNode(),"span"))&&(t="fontsize"==e?n.style.fontSize:n.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase()),t}},"value"),v({Undo:function(){n.undoManager.undo()},Redo:function(){n.undoManager.redo()}})}}),r(j,[p],function(e){function t(e,i){var s=this,o,u;return e=r(e),i=s.settings=i||{},/^([\w\-]+):([^\/]{2})/i.test(e)||/^\s*#/.test(e)?(s.source=e,void 0):(0===e.indexOf("/")&&0!==e.indexOf("//")&&(e=(i.base_uri?i.base_uri.protocol||"http":"http")+"://mce_host"+e),/^[\w\-]*:?\/\//.test(e)||(u=i.base_uri?i.base_uri.path:(new t(location.href)).directory,e=(i.base_uri&&i.base_uri.protocol||"http")+"://mce_host"+s.toAbsPath(u,e)),e=e.replace(/@@/g,"(mce_at)"),e=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e),n(["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],function(t,n){var r=e[n];r&&(r=r.replace(/\(mce_at\)/g,"@@")),s[t]=r}),o=i.base_uri,o&&(s.protocol||(s.protocol=o.protocol),s.userInfo||(s.userInfo=o.userInfo),s.port||"mce_host"!==s.host||(s.port=o.port),s.host&&"mce_host"!==s.host||(s.host=o.host),s.source=""),void 0)}var n=e.each,r=e.trim;return t.prototype={setPath:function(e){var t=this;e=/^(.*?)\/?(\w+)?$/.exec(e),t.path=e[0],t.directory=e[1],t.file=e[2],t.source="",t.getURI()},toRelative:function(e){var n=this,r;if("./"===e)return e;if(e=new t(e,{base_uri:n}),"mce_host"!=e.host&&n.host!=e.host&&e.host||n.port!=e.port||n.protocol!=e.protocol)return e.getURI();var i=n.getURI(),s=e.getURI();return i==s||"/"==i.charAt(i.length-1)&&i.substr(0,i.length-1)==s?i:(r=n.toRelPath(n.path,e.path),e.query&&(r+="?"+e.query),e.anchor&&(r+="#"+e.anchor),r)},toAbsolute:function(e,n){return e=new t(e,{base_uri:this}),e.getURI(this.host==e.host&&this.protocol==e.protocol?n:0)},toRelPath:function(e,t){var n,r=0,i="",s,o;if(e=e.substring(0,e.lastIndexOf("/")),e=e.split("/"),n=t.split("/"),e.length>=n.length)for(s=0,o=e.length;o>s;s++)if(s>=n.length||e[s]!=n[s]){r=s+1;break}if(e.length<n.length)for(s=0,o=n.length;o>s;s++)if(s>=e.length||e[s]!=n[s]){r=s+1;break}if(1===r)return t;for(s=0,o=e.length-(r-1);o>s;s++)i+="../";for(s=r-1,o=n.length;o>s;s++)i+=s!=r-1?"/"+n[s]:n[s];return i},toAbsPath:function(e,t){var r,i=0,s=[],o,u;for(o=/\/$/.test(t)?"/":"",e=e.split("/"),t=t.split("/"),n(e,function(e){e&&s.push(e)}),e=s,r=t.length-1,s=[];r>=0;r--)0!==t[r].length&&"."!==t[r]&&(".."!==t[r]?i>0?i--:s.push(t[r]):i++);return r=e.length-i,u=0>=r?s.reverse().join("/"):e.slice(0,r).join("/")+"/"+s.reverse().join("/"),0!==u.indexOf("/")&&(u="/"+u),o&&u.lastIndexOf("/")!==u.length-1&&(u+=o),u},getURI:function(e){var t,n=this;return(!n.source||e)&&(t="",e||(n.protocol&&(t+=n.protocol+"://"),n.userInfo&&(t+=n.userInfo+"@"),n.host&&(t+=n.host),n.port&&(t+=":"+n.port)),n.path&&(t+=n.path),n.query&&(t+="?"+n.query),n.anchor&&(t+="#"+n.anchor),n.source=t),n.source}},t}),r(F,[p],function(e){function t(){}var n=e.each,r=e.extend,i,s;return t.extend=i=function(e){function t(){var e,t,n,r;if(!s&&(r=this,r.init&&r.init.apply(r,arguments),t=r.Mixins))for(e=t.length;e--;)n=t[e],n.init&&n.init.apply(r,arguments)}function o(){return this}function u(e,t){return function(){var n=this,r=n._super,i;return n._super=f[e],i=t.apply(n,arguments),n._super=r,i}}var a=this,f=a.prototype,l,c,h;s=!0,l=new a,s=!1,e.Mixins&&(n(e.Mixins,function(t){t=t;for(var n in t)"init"!==n&&(e[n]=t[n])}),f.Mixins&&(e.Mixins=f.Mixins.concat(e.Mixins))),e.Methods&&n(e.Methods.split(","),function(t){e[t]=o}),e.Properties&&n(e.Properties.split(","),function(t){var n="_"+t;e[t]=function(e){var t=this,r;return e!==r?(t[n]=e,t):t[n]}}),e.Statics&&n(e.Statics,function(e,n){t[n]=e}),e.Defaults&&f.Defaults&&(e.Defaults=r({},f.Defaults,e.Defaults));for(c in e)h=e[c],l[c]="function"==typeof h&&f[c]?u(c,h):h;return t.prototype=l,t.constructor=t,t.extend=i,t},t}),r(I,[F,p],function(e,t){function n(e){for(var t=[],n=e.length,r;n--;)r=e[n],r.__checked||(t.push(r),r.__checked=1);for(n=t.length;n--;)delete t[n].__checked;return t}var r=/^([\w\\*]+)?(?:#([\w\\]+))?(?:\.([\w\\\.]+))?(?:\[\@?([\w\\]+)([\^\$\*!~]?=)([\w\\]+)\])?(?:\:(.+))?/i,i=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,s=/^\s*|\s*$/g,o,u=e.extend({init:function(e){function t(e){return e?(e=e.toLowerCase(),function(t){return"*"===e||t.type===e}):void 0}function n(e){return e?function(t){return t._name===e}:void 0}function o(e){return e?(e=e.split("."),function(t){for(var n=e.length;n--;)if(!t.hasClass(e[n]))return!1;return!0}):void 0}function u(e,t,n){return e?function(r){var i=r[e]?r[e]():"";return t?"="===t?i===n:"*="===t?i.indexOf(n)>=0:"~="===t?(" "+i+" ").indexOf(" "+n+" ")>=0:"!="===t?i!=n:"^="===t?0===i.indexOf(n):"$="===t?i.substr(i.length-n.length)===n:!1:!!n}:void 0}function a(e){var t;return e?(e=/(?:not\((.+)\))|(.+)/i.exec(e),e[1]?(t=l(e[1],[]),function(e){return!c(e,t)}):(e=e[2],function(t,n,r){return"first"===e?0===n:"last"===e?n===r-1:"even"===e?0===n%2:"odd"===e?1===n%2:t[e]?t[e]():!1})):void 0}function f(e,i,f){function l(e){e&&i.push(e)}var c;return c=r.exec(e.replace(s,"")),l(t(c[1])),l(n(c[2])),l(o(c[3])),l(u(c[4],c[5],c[6])),l(a(c[7])),i.psuedo=!!c[7],i.direct=f,i}function l(e,t){var n=[],r,s,o;do if(i.exec(""),s=i.exec(e),s&&(e=s[3],n.push(s[1]),s[2])){r=s[3];break}while(s);for(r&&l(r,t),e=[],o=0;o<n.length;o++)">"!=n[o]&&e.push(f(n[o],[],">"===n[o-1]));return t.push(e),t}var c=this.match;this._selectors=l(e,[])},match:function(e,n){var r,i,s,o,u,a,f,l,c,h,p,d,v;for(n=n||this._selectors,r=0,i=n.length;i>r;r++){for(u=n[r],o=u.length,v=e,d=0,s=o-1;s>=0;s--)for(l=u[s];v;){for(l.psuedo&&(p=v.parent().items(),c=t.inArray(v,p),h=p.length),a=0,f=l.length;f>a;a++)if(!l[a](v,c,h)){a=f+1;break}if(a===f){d++;break}if(s===o-1)break;v=v.parent()}if(d===o)return!0}return!1},find:function(e){function t(e,n,i){var s,o,u,a,f,l=n[i];for(s=0,o=e.length;o>s;s++){for(f=e[s],u=0,a=l.length;a>u;u++)if(!l[u](f,s,o)){u=a+1;break}if(u===a)i==n.length-1?r.push(f):f.items&&t(f.items(),n,i+1);else if(l.direct)return;f.items&&t(f.items(),n,i)}}var r=[],i,s,a=this._selectors;if(e.items){for(i=0,s=a.length;s>i;i++)t(e.items(),a[i],0);s>1&&(r=n(r))}return o||(o=u.Collection),new o(r)}});return u}),r(q,[p,I,F],function(e,t,n){var r,i,s=Array.prototype.push,o=Array.prototype.slice;return i={length:0,init:function(e){e&&this.add(e)},add:function(t){var n=this;return e.isArray(t)?s.apply(n,t):t instanceof r?n.add(t.toArray()):s.call(n,t),n},set:function(e){var t=this,n=t.length,r;for(t.length=0,t.add(e),r=t.length;n>r;r++)delete t[r];return t},filter:function(e){var n=this,i,s,o=[],u,a;for("string"==typeof e?(e=new t(e),a=function(t){return e.match(t)}):a=e,i=0,s=n.length;s>i;i++)u=n[i],a(u)&&o.push(u);return new r(o)},slice:function(){return new r(o.apply(this,arguments))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},each:function(t){return e.each(this,t),this},toArray:function(){return e.toArray(this)},indexOf:function(e){for(var t=this,n=t.length;n--&&t[n]!==e;);return n},reverse:function(){return new r(e.toArray(this).reverse())},hasClass:function(e){return this[0]?this[0].hasClass(e):!1},prop:function(e,t){var n=this,r,i;return t!==r?(n.each(function(n){n[e]&&n[e](t)}),n):(i=n[0],i&&i[e]?i[e]():void 0)},exec:function(t){var n=this,r=e.toArray(arguments).slice(1);return n.each(function(e){e[t]&&e[t].apply(e,r)}),n}},e.each("fire on off show hide addClass removeClass append prepend before after reflow".split(" "),function(t){i[t]=function(){var n=e.toArray(arguments);return this.each(function(e){t in e&&e[t].apply(e,n)}),this}}),e.each("text name disabled active selected checked visible parent value data".split(" "),function(e){i[e]=function(t){return this.prop(e,t)}}),r=n.extend(i),t.Collection=r,r}),r(R,[p,g],function(e,t){return{id:function(){return t.DOM.uniqueId()},createFragment:function(e){return t.DOM.createFragment(e)},getWindowSize:function(){return t.DOM.getViewPort()},getSize:function(e){return t.DOM.getSize(e)},getPos:function(e,n){return t.DOM.getPos(e,n)},getViewPort:function(e){return t.DOM.getViewPort(e)},get:function(e){return document.getElementById(e)},addClass:function(e,n){return t.DOM.addClass(e,n)},removeClass:function(e,n){return t.DOM.removeClass(e,n)},hasClass:function(e,n){return t.DOM.hasClass(e,n)},toggleClass:function(e,n,r){return t.DOM.toggleClass(e,n,r)},css:function(e,n,r){return t.DOM.setStyle(e,n,r)},on:function(e,n,r,i){return t.DOM.bind(e,n,r,i)},off:function(e,n,r){return t.DOM.unbind(e,n,r)},fire:function(e,n,r){return t.DOM.fire(e,n,r)}}}),r(U,[F,p,q,R],function(e,t,n,r){var i=t.makeMap("focusin focusout scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave wheel keydown keypress keyup contextmenu"," "),s={},o="onmousewheel"in document,u=!1,a=e.extend({Statics:{controlIdLookup:{}},classPrefix:"mce-",init:function(e){var n=this,i,s;if(n.settings=e=t.extend({},n.Defaults,e),n._id=r.id(),n._text=n._name="",n._width=n._height=0,n._aria={role:e.role},i=e.classes)for(i=i.split(" "),i.map={},s=i.length;s--;)i.map[i[s]]=!0;n._classes=i||[],n.visible(!0),t.each("title text width height name classes visible disabled active value".split(" "),function(t){var r=e[t],i;r!==i?n[t](r):n["_"+t]===i&&(n["_"+t]=!1)}),n.on("click",function(){return n.disabled()?!1:void 0}),e.classes&&t.each(e.classes.split(" "),function(e){n.addClass(e)}),n.settings=e,n._borderBox=n.parseBox(e.border),n._paddingBox=n.parseBox(e.padding),n._marginBox=n.parseBox(e.margin),e.hidden&&n.hide()},Properties:"parent,title,text,width,height,disabled,active,name,value",Methods:"renderHtml",getContainerElm:function(){return document.body},getParentCtrl:function(e){for(var t;e&&!(t=a.controlIdLookup[e.id]);)e=e.parentNode;return t},parseBox:function(e){var t,n=10;if(e)return"number"==typeof e?(e=e||0,{top:e,left:e,bottom:e,right:e}):(e=e.split(" "),t=e.length,1===t?e[1]=e[2]=e[3]=e[0]:2===t?(e[2]=e[0],e[3]=e[1]):3===t&&(e[3]=e[1]),{top:parseInt(e[0],n)||0,right:parseInt(e[1],n)||0,bottom:parseInt(e[2],n)||0,left:parseInt(e[3],n)||0})},borderBox:function(){return this._borderBox},paddingBox:function(){return this._paddingBox},marginBox:function(){return this._marginBox},measureBox:function(e,t){function n(t){var n=document.defaultView;return n?(t=t.replace(/[A-Z]/g,function(e){return"-"+e}),n.getComputedStyle(e,null).getPropertyValue(t)):e.currentStyle[t]}function r(e){var t=parseInt(n(e),10);return isNaN(t)?0:t}return{top:r(t+"TopWidth"),right:r(t+"RightWidth"),bottom:r(t+"BottomWidth"),left:r(t+"LeftWidth")}},initLayoutRect:function(){var e=this,t=e.settings,n,r,i=e.getEl(),s,o,u,a,f,l,c;n=e._borderBox=e._borderBox||e.measureBox(i,"border"),e._paddingBox=e._paddingBox||e.measureBox(i,"padding"),e._marginBox=e._marginBox||e.measureBox(i,"margin"),l=t.minWidth,c=t.minHeight,u=l||i.offsetWidth,a=c||i.offsetHeight,s=t.width,o=t.height,f=t.autoResize,f="undefined"!=typeof f?f:!s&&!o,s=s||u,o=o||a;var h=n.left+n.right,p=n.top+n.bottom,d=t.maxWidth||65535,v=t.maxHeight||65535;return e._layoutRect=r={x:t.x||0,y:t.y||0,w:s,h:o,deltaW:h,deltaH:p,contentW:s-h,contentH:o-p,innerW:s-h,innerH:o-p,startMinWidth:l||0,startMinHeight:c||0,minW:Math.min(u,d),minH:Math.min(a,v),maxW:d,maxH:v,autoResize:f,scrollW:0},e._lastLayoutRect={},r},layoutRect:function(e){var t=this,n=t._layoutRect,r,i,s,o,u,f;return n||(n=t.initLayoutRect()),e?(s=n.deltaW,o=n.deltaH,e.x!==u&&(n.x=e.x),e.y!==u&&(n.y=e.y),e.minW!==u&&(n.minW=e.minW),e.minH!==u&&(n.minH=e.minH),i=e.w,i!==u&&(i=i<n.minW?n.minW:i,i=i>n.maxW?n.maxW:i,n.w=i,n.innerW=i-s),i=e.h,i!==u&&(i=i<n.minH?n.minH:i,i=i>n.maxH?n.maxH:i,n.h=i,n.innerH=i-o),i=e.innerW,i!==u&&(i=i<n.minW-s?n.minW-s:i,i=i>n.maxW-s?n.maxW-s:i,n.innerW=i,n.w=i+s),i=e.innerH,i!==u&&(i=i<n.minH-o?n.minH-o:i,i=i>n.maxH-o?n.maxH-o:i,n.innerH=i,n.h=i+o),e.contentW!==u&&(n.contentW=e.contentW),e.contentH!==u&&(n.contentH=e.contentH),r=t._lastLayoutRect,(r.x!==n.x||r.y!==n.y||r.w!==n.w||r.h!==n.h)&&(f=a.repaintControls,f&&f.map&&!f.map[t._id]&&(f.push(t),f.map[t._id]=!0),r.x=n.x,r.y=n.y,r.w=n.w,r.h=n.h),t):n},repaint:function(){var e=this,t,n,r,i,s=0,o=0,u;t=e.getEl().style,r=e._layoutRect,u=e._lastRepaintRect||{},i=e._borderBox,s=i.left+i.right,o=i.top+i.bottom,r.x!==u.x&&(t.left=r.x+"px",u.x=r.x),r.y!==u.y&&(t.top=r.y+"px",u.y=r.y),r.w!==u.w&&(t.width=r.w-s+"px",u.w=r.w),r.h!==u.h&&(t.height=r.h-o+"px",u.h=r.h),e._hasBody&&r.innerW!==u.innerW&&(n=e.getEl("body").style,n.width=r.innerW+"px",u.innerW=r.innerW),e._hasBody&&r.innerH!==u.innerH&&(n=n||e.getEl("body").style,n.height=r.innerH+"px",u.innerH=r.innerH),e._lastRepaintRect=u,e.fire("repaint",{},!1)},on:function(e,t){function n(e){var t,n;return function(i){return t||r.parents().each(function(r){var i=r.settings.callbacks;return i&&(t=i[e])?(n=r,!1):void 0}),t.call(n,i)}}var r=this,s,o,u,a;if(t)for("string"==typeof t&&(t=n(t)),u=e.toLowerCase().split(" "),a=u.length;a--;)e=u[a],s=r._bindings,s||(s=r._bindings={}),o=s[e],o||(o=s[e]=[]),o.push(t),i[e]&&(r._nativeEvents?r._nativeEvents[e]=!0:r._nativeEvents={name:!0},r._rendered&&r.bindPendingEvents());return r},off:function(e,t){var n=this,r,i=n._bindings,s,o,u,a;if(i)if(e)for(u=e.toLowerCase().split(" "),r=u.length;r--;){if(e=u[r],s=i[e],!e){for(o in i)i[o].length=0;return n}if(s)if(t)for(a=s.length;a--;)s[a]===t&&s.splice(a,1);else s.length=0}else n._bindings=[];return n},fire:function(e,t,n){function r(){return!1}function i(){return!0}var s=this,o,u,a,f;if(e=e.toLowerCase(),t=t||{},t.type||(t.type=e),t.control||(t.control=s),t.preventDefault||(t.preventDefault=function(){t.isDefaultPrevented=i},t.stopPropagation=function(){t.isPropagationStopped=i},t.stopImmediatePropagation=function(){t.isImmediatePropagationStopped=i},t.isDefaultPrevented=r,t.isPropagationStopped=r,t.isImmediatePropagationStopped=r),s._bindings&&(a=s._bindings[e]))for(o=0,u=a.length;u>o&&(t.isImmediatePropagationStopped()||a[o].call(s,t)!==!1);o++);if(n!==!1)for(f=s.parent();f&&!t.isPropagationStopped();)f.fire(e,t,!1),f=f.parent();return t},parents:function(e){var t=this,r=new n;for(t=t.parent();t;t=t.parent())r.add(t);return e&&(r=r.filter(e)),r},next:function(){var e=this.parent().items();return e[e.indexOf(this)+1]},prev:function(){var e=this.parent().items();return e[e.indexOf(this)-1]},findCommonAncestor:function(e,t){for(var n;e;){for(n=t;n&&e!=n;)n=n.parent();if(e==n)break;e=e.parent()}return e},hasClass:function(e,t){var n=this._classes[t||"control"];return e=this.classPrefix+e,n&&!!n.map[e]},addClass:function(e,t){var n=this,r,i;return e=this.classPrefix+e,r=n._classes[t||"control"],r||(r=[],r.map={},n._classes[t||"control"]=r),r.map[e]||(r.map[e]=e,r.push(e),n._rendered&&(i=n.getEl(t),i&&(i.className=r.join(" ")))),n},removeClass:function(e,t){var n=this,r,i,s;if(e=this.classPrefix+e,r=n._classes[t||"control"],r&&r.map[e])for(delete r.map[e],i=r.length;i--;)r[i]===e&&r.splice(i,1);return n._rendered&&(s=n.getEl(t),s&&(s.className=r.join(" "))),n},toggleClass:function(e,t,n){var r=this;return t?r.addClass(e,n):r.removeClass(e,n),r},classes:function(e){var t=this._classes[e||"control"];return t?t.join(" "):""},getEl:function(e,t){var n,i=e?this._id+"-"+e:this._id;return n=s[i]=(t===!0?null:s[i])||r.get(i)},visible:function(e){var t=this,n;return"undefined"!=typeof e?(t._visible!==e&&(t._rendered&&(t.getEl().style.display=e?"":"none"),t._visible=e,n=t.parent(),n&&(n._lastRect=null),t.fire(e?"show":"hide")),t):t._visible},show:function(){return this.visible(!0)},hide:function(){return this.visible(!1)},focus:function(){try{this.getEl().focus()}catch(e){}return this},blur:function(){return this.getEl().blur(),this},aria:function(e,t){var n=this,r=n.getEl();return"undefined"==typeof t?n._aria[e]:(n._aria[e]=t,n._rendered&&("label"==e&&r.setAttribute("aria-labeledby",n._id),r.setAttribute("role"==e?e:"aria-"+e,t)),n)},encode:function(e,t){return t!==!1&&a.translate&&(e=a.translate(e)),(e||"").replace(/[&<>"]/g,function(e){return"&#"+e.charCodeAt(0)+";"})},before:function(e){var t=this,n=t.parent();return n&&n.insert(e,n.items().indexOf(t),!0),t},after:function(e){var t=this,n=t.parent();return n&&n.insert(e,n.items().indexOf(t)),t},remove:function(){var e=this,t=e.getEl(),n=e.parent(),i;if(e.items)for(var s=e.items().toArray(),o=s.length;o--;)s[o].remove();return n&&n.items&&(i=[],n.items().each(function(t){t!==e&&i.push(t)}),n.items().set(i),n._lastRect=null),e._eventsRoot&&e._eventsRoot==e&&r.off(t),delete a.controlIdLookup[e._id],t.parentNode&&t.parentNode.removeChild(t),e},renderBefore:function(e){var t=this;return e.parentNode.insertBefore(r.createFragment(t.renderHtml()),e),t.postRender(),t},renderTo:function(e){var t=this;return e=e||t.getContainerElm(),e.appendChild(r.createFragment(t.renderHtml())),t.postRender(),t},postRender:function(){var e=this,t=e.settings,n,i,s,o,u;for(o in t)0===o.indexOf("on")&&e.on(o.substr(2),t[o]);if(e._eventsRoot){for(s=e.parent();!u&&s;s=s.parent())u=s._eventsRoot;if(u)for(o in u._nativeEvents)e._nativeEvents[o]=!0}e.bindPendingEvents(),t.style&&(n=e.getEl(),n&&(n.setAttribute("style",t.style),n.style.cssText=t.style)),e._visible||r.css(e.getEl(),"display","none"),e.settings.border&&(i=e.borderBox(),r.css(e.getEl(),{"border-top-width":i.top,"border-right-width":i.right,"border-bottom-width":i.bottom,"border-left-width":i.left})),a.controlIdLookup[e._id]=e;for(var f in e._aria)e.aria(f,e._aria[f]);e.fire("postrender",{},!1)},scrollIntoView:function(e){function t(e,t){var n,r,i=e;for(n=r=0;i&&i!=t&&i.nodeType;)n+=i.offsetLeft||0,r+=i.offsetTop||0,i=i.offsetParent;return{x:n,y:r}}var n=this.getEl(),r=n.parentNode,i,s,o,u,a,f,l=t(n,r);return i=l.x,s=l.y,o=n.offsetWidth,u=n.offsetHeight,a=r.clientWidth,f=r.clientHeight,"end"==e?(i-=a-o,s-=f-u):"center"==e&&(i-=a/2-o/2,s-=f/2-u/2),r.scrollLeft=i,r.scrollTop=s,this},bindPendingEvents:function(){function e(e){var t=s.getParentCtrl(e.target);t&&t.fire(e.type,e)}function t(){var e=c._lastHoverCtrl;e&&(e.fire("mouseleave",{target:e.getEl()}),e.parents().each(function(e){e.fire("mouseleave",{target:e.getEl()})}),c._lastHoverCtrl=null)}function n(e){var t=s.getParentCtrl(e.target),n=c._lastHoverCtrl,r=0,i,o,u;if(t!==n){if(c._lastHoverCtrl=t,o=t.parents().toArray().reverse(),o.push(t),n){for(u=n.parents().toArray().reverse(),u.push(n),r=0;r<u.length&&o[r]===u[r];r++);for(i=u.length-1;i>=r;i--)n=u[i],n.fire("mouseleave",{target:n.getEl()})}for(i=r;i<o.length;i++)t=o[i],t.fire("mouseenter",{target:t.getEl()})}}function i(e){e.preventDefault(),"mousewheel"==e.type?(e.deltaY=-1/40*e.wheelDelta,e.wheelDeltaX&&(e.deltaX=-1/40*e.wheelDeltaX)):(e.deltaX=0,e.deltaY=e.detail),e=s.fire("wheel",e)}var s=this,a,f,l,c,h,p;if(s._rendered=!0,h=s._nativeEvents){for(l=s.parents().toArray(),l.unshift(s),a=0,f=l.length;!c&&f>a;a++)c=l[a]._eventsRoot;for(c||(c=l[l.length-1]||s),s._eventsRoot=c,f=a,a=0;f>a;a++)l[a]._eventsRoot=c;for(p in h){if(!h)return!1;"wheel"!==p||u?("mouseenter"===p||"mouseleave"===p?c._hasMouseEnter||(r.on(c.getEl(),"mouseleave",t),r.on(c.getEl(),"mouseover",n),c._hasMouseEnter=1):c[p]||(r.on(c.getEl(),p,e),c[p]=!0),h[p]=!1):o?r.on(s.getEl(),"mousewheel",i):r.on(s.getEl(),"DOMMouseScroll",i)}}},reflow:function(){return this.repaint(),this}});return a}),r(z,[],function(){var e={},t;return{add:function(t,n){e[t.toLowerCase()]=n},has:function(t){return!!e[t.toLowerCase()]},create:function(n,r){var i,s,o;if(!t){o=tinymce.ui;for(s in o)e[s.toLowerCase()]=o[s];t=!0}if("string"==typeof n?(r=r||{},r.type=n):(r=n,n=r.type),n=n.toLowerCase(),i=e[n],!i)throw new Error("Could not find control by type: "+n);return i=new i(r),i.type=n,i}}}),r(W,[U,q,I,z,p,R],function(e,t,n,r,i,s){var o={};return e.extend({layout:"",innerClass:"container-inner",init:function(e){var n=this;n._super(e),e=n.settings,n._fixed=e.fixed,n._items=new t,n.addClass("container"),n.addClass("container-body","body"),e.containerCls&&n.addClass(e.containerCls),n._layout=r.create((e.layout||n.layout)+"layout"),n.settings.items&&n.add(n.settings.items),n._hasBody=!0},items:function(){return this._items},find:function(e){return e=o[e]=o[e]||new n(e),e.find(this)},add:function(e){var t=this;return t.items().add(t.create(e)).parent(t),t},focus:function(){var e=this;return e.keyNav?e.keyNav.focusFirst():e._super(),e},replace:function(e,t){for(var n,r=this.items(),i=r.length;i--;)if(r[i]===e){r[i]=t;break}i>=0&&(n=t.getEl(),n&&n.parentNode.removeChild(n),n=e.getEl(),n&&n.parentNode.removeChild(n)),t.parent(this)},create:function(t){var n=this,s,o=[];return i.isArray(t)||(t=[t]),i.each(t,function(t){t&&(t instanceof e||("string"==typeof t&&(t={type:t}),s=i.extend({},n.settings.defaults,t),t.type=s.type=s.type||t.type||n.settings.defaultType||(s.defaults?s.defaults.type:null),t=r.create(s)),o.push(t))}),o},renderNew:function(){var e=this;return e.items().each(function(t,n){var r,i;t.parent(e),t._rendered||(r=e.getEl("body"),i=s.createFragment(t.renderHtml()),r.hasChildNodes()&&n<=r.childNodes.length-1?r.insertBefore(i,r.childNodes[n]):r.appendChild(i),t.postRender())}),e._layout.applyClasses(e),e._lastRect=null,e},append:function(e){return this.add(e).renderNew()},prepend:function(e){var t=this;return t.items().set(t.create(e).concat(t.items().toArray())),t.renderNew()},insert:function(e,t,n){var r=this,i,s,o;return e=r.create(e),i=r.items(),!n&&t<i.length-1&&(t+=1),t>=0&&t<i.length&&(s=i.slice(0,t).toArray(),o=i.slice(t).toArray(),i.set(s.concat(e,o))),r.renderNew()},fromJSON:function(e){var t=this;for(var n in e)t.find("#"+n).value(e[n]);return t},toJSON:function(){var e=this,t={};return e.find("*").each(function(e){var n=e.name(),r=e.value();n&&"undefined"!=typeof r&&(t[n]=r)}),t},preRender:function(){},renderHtml:function(){var e=this,t=e._layout;return e.preRender(),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes()+'" role="'+this.settings.role+'">'+'<div id="'+e._id+'-body" class="'+e.classes("body")+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div>"+"</div>"},postRender:function(){var e=this,t;return e.items().exec("postRender"),e._super(),e._layout.postRender(e),e._rendered=!0,e.settings.style&&s.css(e.getEl(),e.settings.style),e.settings.border&&(t=e.borderBox(),s.css(e.getEl(),{"border-top-width":t.top,"border-right-width":t.right,"border-bottom-width":t.bottom,"border-left-width":t.left})),e},initLayoutRect:function(){var e=this,t=e._super();return e._layout.recalc(e),t},recalc:function(){var e=this,t=e._layoutRect,n=e._lastRect;return n&&n.w==t.w&&n.h==t.h?void 0:(e._layout.recalc(e),t=e.layoutRect(),e._lastRect={x:t.x,y:t.y,w:t.w,h:t.h},!0)},reflow:function(){var t,n;if(this.visible()){for(e.repaintControls=[],e.repaintControls.map={},n=this.recalc(),t=e.repaintControls.length;t--;)e.repaintControls[t].repaint();"flow"!==this.settings.layout&&"stack"!==this.settings.layout&&this.repaint(),e.repaintControls=[]}return this}})}),r(X,[R],function(e){function t(){var e=document,t,n,r,i,s,o,u,a,f=Math.max;return t=e.documentElement,n=e.body,r=f(t.scrollWidth,n.scrollWidth),i=f(t.clientWidth,n.clientWidth),s=f(t.offsetWidth,n.offsetWidth),o=f(t.scrollHeight,n.scrollHeight),u=f(t.clientHeight,n.clientHeight),a=f(t.offsetHeight,n.offsetHeight),{width:s>r?i:r,height:a>o?u:o}}return function(n,r){function i(){return o.getElementById(r.handle||n)}var s,o=document,u,a,f,l,c,h;r=r||{},a=function(n){var a=t(),p,d;n.preventDefault(),u=n.button,p=i(),c=n.screenX,h=n.screenY,d=window.getComputedStyle?window.getComputedStyle(p,null).getPropertyValue("cursor"):p.runtimeStyle.cursor,s=o.createElement("div"),e.css(s,{position:"absolute",top:0,left:0,width:a.width,height:a.height,zIndex:2147483647,opacity:1e-4,background:"red",cursor:d}),o.body.appendChild(s),e.on(o,"mousemove",l),e.on(o,"mouseup",f),r.start(n)},l=function(e){return e.button!==u?f(e):(e.deltaX=e.screenX-c,e.deltaY=e.screenY-h,e.preventDefault(),r.drag(e),void 0)},f=function(t){e.off(o,"mousemove",l),e.off(o,"mouseup",f),s.parentNode.removeChild(s),r.stop&&r.stop(t)},this.destroy=function(){e.off(i())},e.on(i(),"mousedown",a)}}),r(V,[R,X],function(e,t){return{init:function(){var e=this;e.on("repaint",e.renderScroll)},renderScroll:function(){function n(){function t(t,o,u,a,f,l){var c,h,p,d,v,m,g,y,b;if(h=i.getEl("scroll"+t)){if(y=o.toLowerCase(),b=u.toLowerCase(),i.getEl("absend")&&e.css(i.getEl("absend"),y,i.layoutRect()[a]-1),!f)return e.css(h,"display","none"),void 0;e.css(h,"display","block"),c=i.getEl("body"),p=i.getEl("scroll"+t+"t"),d=c["client"+u]-2*s,d-=n&&r?h["client"+l]:0,v=c["scroll"+u],m=d/v,g={},g[y]=c["offset"+o]+s,g[b]=d,e.css(h,g),g={},g[y]=c["scroll"+o]*m,g[b]=d*m,e.css(p,g)}}var n,r,o;o=i.getEl("body"),n=o.scrollWidth>o.clientWidth,r=o.scrollHeight>o.clientHeight,t("h","Left","Width","contentW",n,"Height"),t("v","Top","Height","contentH",r,"Width")}function r(){function n(n,r,o,u,a){var f,l=i._id+"-scroll"+n,c=i.classPrefix;i.getEl().appendChild(e.createFragment('<div id="'+l+'" class="'+c+"scrollbar "+c+"scrollbar-"+n+'">'+'<div id="'+l+'t" class="'+c+'scrollbar-thumb"></div>'+"</div>")),i.draghelper=new t(l+"t",{start:function(){f=i.getEl("body")["scroll"+r],e.addClass(e.get(l),c+"active")},drag:function(e){var t,l,c,h,p=i.layoutRect();l=p.contentW>p.innerW,c=p.contentH>p.innerH,h=i.getEl("body")["client"+o]-2*s,h-=l&&c?i.getEl("scroll"+n)["client"+a]:0,t=h/i.getEl("body")["scroll"+o],i.getEl("body")["scroll"+r]=f+e["delta"+u]/t},stop:function(){e.removeClass(e.get(l),c+"active")}})}i.addClass("scroll"),n("v","Top","Height","Y","Width"),n("h","Left","Width","X","Height")}var i=this,s=2;i.settings.autoScroll&&(i._hasScroll||(i._hasScroll=!0,r(),i.on("wheel",function(e){var t=i.getEl("body");t.scrollLeft+=10*(e.deltaX||0),t.scrollTop+=10*e.deltaY,n()}),e.on(i.getEl("body"),"scroll",n)),n())}}}),r($,[W,V],function(e,t){return e.extend({Defaults:{layout:"fit",containerCls:"panel"},Mixins:[t],renderHtml:function(){var e=this,t=e._layout,n=e.settings.html;return e.preRender(),t.preRender(e),"undefined"==typeof n?n='<div id="'+e._id+'-body" class="'+e.classes("body")+'">'+t.renderHtml(e)+"</div>":("function"==typeof n&&(n=n.call(e)),e._hasBody=!1),'<div id="'+e._id+'" class="'+e.classes()+'" hideFocus="1" tabIndex="-1">'+(e._preBodyHtml||"")+n+"</div>"}})}),r(J,[R],function(e){function t(t,n,r){var i,s,o,u,a,f,l,c,h;return h=e.getViewPort(),s=e.getPos(n),o=s.x,u=s.y,t._fixed&&(o-=h.x,u-=h.y),i=t.getEl(),a=i.offsetWidth,f=i.offsetHeight,l=n.offsetWidth,c=n.offsetHeight,r=(r||"").split(""),"b"===r[0]&&(u+=c),"r"===r[1]&&(o+=l),"c"===r[0]&&(u+=Math.round(c/2)),"c"===r[1]&&(o+=Math.round(l/2)),"b"===r[3]&&(u-=f),"r"===r[4]&&(o-=a),"c"===r[3]&&(u-=Math.round(f/2)),"c"===r[4]&&(o-=Math.round(a/2)),{x:o,y:u,w:a,h:f}}return{testMoveRel:function(n,r){for(var i=e.getViewPort(),s=0;s<r.length;s++){var o=t(this,n,r[s]);if(this._fixed){if(o.x>0&&o.x+o.w<i.w&&o.y>0&&o.y+o.h<i.h)return r[s]}else if(o.x>i.x&&o.x+o.w<i.w+i.x&&o.y>i.y&&o.y+o.h<i.h+i.y)return r[s]}return r[0]},moveRel:function(e,n){"string"!=typeof n&&
(n=this.testMoveRel(e,n));var r=t(this,e,n);return this.moveTo(r.x,r.y)},moveBy:function(e,t){var n=this,r=n.layoutRect();return n.moveTo(r.x+e,r.y+t),n},moveTo:function(t,n){function r(e,t,n){return 0>e?0:e+n>t?(e=t-n,0>e?0:e):e}var i=this;if(i.settings.constrainToViewport){var s=e.getViewPort(window),o=i.layoutRect();t=r(t,s.w+s.x,o.w),n=r(n,s.h+s.y,o.h)}return i._rendered?i.layoutRect({x:t,y:n}).repaint():(i.settings.x=t,i.settings.y=n),i.fire("move",{x:t,y:n}),i}}}),r(K,[R],function(e){return{resizeToContent:function(){this._layoutRect.autoResize=!0,this._lastRect=null,this.reflow()},resizeTo:function(t,n){if(1>=t||1>=n){var r=e.getWindowSize();t=1>=t?t*r.w:t,n=1>=n?n*r.h:n}return this._layoutRect.autoResize=!1,this.layoutRect({minW:t,minH:n,w:t,h:n}).reflow()},resizeBy:function(e,t){var n=this,r=n.layoutRect();return n.resizeTo(r.w+e,r.h+t)}}}),r(Q,[$,J,K,R],function(e,t,n,r){function i(e){var t;for(t=u.length;t--;)u[t]===e&&u.splice(t,1)}var s,o,u=[],a=[],f,l=e.extend({Mixins:[t,n],init:function(e){function t(){var e,t=l.zIndex||65535,n;if(a.length)for(e=0;e<a.length;e++)a[e].modal&&(t++,n=a[e]),a[e].getEl().style.zIndex=t,a[e].zIndex=t,t++;var i=document.getElementById(c.classPrefix+"modal-block");n?r.css(i,"z-index",n.zIndex-1):i&&(i.parentNode.removeChild(i),f=!1),l.currentZIndex=t}function n(e,t){for(;e;){if(e==t)return!0;e=e.parent()}}function i(e){function t(t,n){for(var r,i=0;i<u.length;i++)if(u[i]!=e)for(r=u[i].parent();r&&(r=r.parent());)r==e&&u[i].fixed(t).moveBy(0,n).repaint()}var n=r.getViewPort().y;e.settings.autofix&&(e._fixed?e._autoFixY>n&&(e.fixed(!1).layoutRect({y:e._autoFixY}).repaint(),t(!1,e._autoFixY-n)):(e._autoFixY=e.layoutRect().y,e._autoFixY<n&&(e.fixed(!0).layoutRect({y:0}).repaint(),t(!0,n-e._autoFixY))))}var c=this;c._super(e),c._eventsRoot=c,c.addClass("floatpanel"),e.autohide&&(s||(s=function(e){var t,r=c.getParentCtrl(e.target);for(t=u.length;t--;){var i=u[t];if(i.settings.autohide){if(r&&(n(r,i)||i.parent()===r))continue;e=i.fire("autohide",{target:e.target}),e.isDefaultPrevented()||i.hide()}}},r.on(document,"click",s)),u.push(c)),e.autofix&&(o||(o=function(){var e;for(e=u.length;e--;)i(u[e])},r.on(window,"scroll",o)),c.on("move",function(){i(this)})),c.on("postrender show",function(e){if(e.control==c){var n,i=c.classPrefix;c.modal&&!f&&(n=r.createFragment('<div id="'+i+'modal-block" class="'+i+"reset "+i+'fade"></div>'),n=n.firstChild,c.getContainerElm().appendChild(n),setTimeout(function(){r.addClass(n,i+"in"),r.addClass(c.getEl(),i+"in")},0),f=!0),a.push(c),t()}}),c.on("close hide",function(e){if(e.control==c){for(var n=a.length;n--;)a[n]===c&&a.splice(n,1);t()}}),c.on("show",function(){c.parents().each(function(e){return e._fixed?(c.fixed(!0),!1):void 0})}),e.popover&&(c._preBodyHtml='<div class="'+c.classPrefix+'arrow"></div>',c.addClass("popover").addClass("bottom").addClass("start"))},fixed:function(e){var t=this;if(t._fixed!=e){if(t._rendered){var n=r.getViewPort();e?t.layoutRect().y-=n.y:t.layoutRect().y+=n.y}t.toggleClass("fixed",e),t._fixed=e}return t},show:function(){var e=this,t,n=e._super();for(t=u.length;t--&&u[t]!==e;);return-1===t&&u.push(e),n},hide:function(){return i(this),this._super()},hideAll:function(){l.hideAll()},close:function(){var e=this;return e.fire("close"),e.remove()},remove:function(){i(this),this._super()}});return l.hideAll=function(){for(var e=u.length;e--;){var t=u[e];t.settings.autohide&&(t.fire("cancel",{},!1),t.hide(),u.splice(e,1))}},l}),r(G,[R],function(e){return function(t){function n(){if(!d)if(d=[],c.find)c.find("*").each(function(e){e.canFocus&&d.push(e.getEl())});else for(var e=c.getEl().getElementsByTagName("*"),t=0;t<e.length;t++)e[t].id&&e[t]&&d.push(e[t])}function r(){return document.getElementById(v)}function i(e){return e=e||r(),e&&e.getAttribute("role")}function s(e){for(var t,n=e||r();n=n.parentNode;)if(t=i(n))return t}function o(e){var t=document.getElementById(v);return t?t.getAttribute("aria-"+e):void 0}function u(){var n=r();if(!n||"TEXTAREA"!=n.nodeName&&"text"!=n.type)return t.onAction?t.onAction(v):e.fire(r(),"click",{keyboard:!0}),!0}function a(){var e;t.onCancel?((e=r())&&e.blur(),t.onCancel()):t.root.fire("cancel")}function f(e){function r(e){for(var t=c?c.getEl():document.body;e&&e!=t;){if("none"==e.style.display)return!1;e=e.parentNode}return!0}var i=-1,s,o,a=[];for(n(),o=a.length,o=0;o<d.length;o++)r(d[o])&&a.push(d[o]);for(o=a.length;o--;)if(a[o].id===v){i=o;break}i+=e,0>i?i=a.length-1:i>=a.length&&(i=0),s=a[i],s.focus(),v=s.id,t.actOnFocus&&u()}function l(){var e,r;for(r=i(t.root.getEl()),n(),e=d.length;e--;)if("toolbar"==r&&d[e].id===v)return d[e].focus(),void 0;d[0].focus()}var c=t.root,h=t.enableUpDown!==!1,p=t.enableLeftRight!==!1,d=t.items,v;return c.on("keydown",function(e){var n=37,r=39,l=38,c=40,d=27,v=14,m=13,g=32,y=9,b;switch(e.keyCode){case n:p&&(t.leftAction?t.leftAction():f(-1),b=!0);break;case r:p&&("menuitem"==i()&&"menu"==s()?o("haspopup")&&u():f(1),b=!0);break;case l:h&&(f(-1),b=!0);break;case c:h&&("menuitem"==i()&&"menubar"==s()?u():"button"==i()&&o("haspopup")?u():f(1),b=!0);break;case y:b=!0,e.shiftKey?f(-1):f(1);break;case d:b=!0,a();break;case v:case m:case g:b=u()}b&&(e.stopPropagation(),e.preventDefault())}),c.on("focusin",function(e){n(),v=e.target.id}),{moveFocus:f,focusFirst:l,cancel:a}}}),r(Y,[Q,$,R,G,X],function(e,t,n,r,i){var s=e.extend({modal:!0,Defaults:{border:1,layout:"flex",containerCls:"panel",role:"dialog",callbacks:{submit:function(){this.fire("submit",{data:this.toJSON()})},close:function(){this.close()}}},init:function(e){var n=this;n._super(e),n.addClass("window"),n._fixed=!0,e.buttons&&(n.statusbar=new t({layout:"flex",border:"1 0 0 0",spacing:3,padding:10,align:"center",pack:"end",defaults:{type:"button"},items:e.buttons}),n.statusbar.addClass("foot"),n.statusbar.parent(n)),n.on("click",function(e){-1!=e.target.className.indexOf(n.classPrefix+"close")&&n.close()}),n.aria("label",e.title),n._fullscreen=!1},recalc:function(){var e=this,t=e.statusbar,r,i,s;e._fullscreen&&(e.layoutRect(n.getWindowSize()),e.layoutRect().contentH=e.layoutRect().innerH),e._super(),r=e.layoutRect(),e.settings.title&&!e._fullscreen&&(i=r.headerW,i>r.w&&(e.layoutRect({w:i}),s=!0)),t&&(t.layoutRect({w:e.layoutRect().innerW}).recalc(),i=t.layoutRect().minW+r.deltaW,i>r.w&&(e.layoutRect({w:i}),s=!0)),s&&e.recalc()},initLayoutRect:function(){var e=this,t=e._super(),r=0,i;e.settings.title&&!e._fullscreen&&(i=e.getEl("head"),t.headerW=i.offsetWidth,t.headerH=i.offsetHeight,r+=t.headerH),e.statusbar&&(r+=e.statusbar.layoutRect().h),t.deltaH+=r,t.minH+=r,t.h+=r;var s=n.getWindowSize();return t.x=Math.max(0,s.w/2-t.w/2),t.y=Math.max(0,s.h/2-t.h/2),t},renderHtml:function(){var e=this,t=e._layout,n=e._id,r=e.classPrefix,i=e.settings,s="",o="",u=i.html;return e.preRender(),t.preRender(e),i.title&&(s='<div id="'+n+'-head" class="'+r+'window-head">'+'<div class="'+r+'title">'+e.encode(i.title)+"</div>"+'<button type="button" class="'+r+'close" aria-hidden="true">&times;</button>'+'<div id="'+n+'-dragh" class="'+r+'dragh"></div>'+"</div>"),i.url&&(u='<iframe src="'+i.url+'" tabindex="-1"></iframe>'),"undefined"==typeof u&&(u=t.renderHtml(e)),e.statusbar&&(o=e.statusbar.renderHtml()),'<div id="'+n+'" class="'+e.classes()+'" hideFocus="1" tabIndex="-1">'+s+'<div id="'+n+'-body" class="'+e.classes("body")+'">'+u+"</div>"+o+"</div>"},fullscreen:function(e){var t=this,r=document.documentElement,i,s=t.classPrefix,o;if(e!=t._fullscreen)if(n.on(window,"resize",function(){var e;if(t._fullscreen)if(i)t._timer||(t._timer=setTimeout(function(){var e=n.getWindowSize();t.moveTo(0,0).resizeTo(e.w,e.h),t._timer=0},50));else{e=(new Date).getTime();var r=n.getWindowSize();t.moveTo(0,0).resizeTo(r.w,r.h),(new Date).getTime()-e>50&&(i=!0)}}),o=t.layoutRect(),t._fullscreen=e,e){t._initial={x:o.x,y:o.y,w:o.w,h:o.h},t._borderBox=t.parseBox("0"),t.getEl("head").style.display="none",o.deltaH-=o.headerH+2,n.addClass(r,s+"fullscreen"),n.addClass(document.body,s+"fullscreen"),t.addClass("fullscreen");var u=n.getWindowSize();t.moveTo(0,0).resizeTo(u.w,u.h)}else t._borderBox=t.parseBox(t.settings.border),t.getEl("head").style.display="",o.deltaH+=o.headerH,n.removeClass(r,s+"fullscreen"),n.removeClass(document.body,s+"fullscreen"),t.removeClass("fullscreen"),t.moveTo(t._initial.x,t._initial.y).resizeTo(t._initial.w,t._initial.h);return t.reflow()},postRender:function(){var e=this,t=[],n,s,o;setTimeout(function(){e.addClass("in")},0),e.keyboardNavigation=new r({root:e,enableLeftRight:!1,enableUpDown:!1,items:t,onCancel:function(){e.close()}}),e.find("*").each(function(e){e.canFocus&&(s=s||e.settings.autofocus,n=n||e,"filepicker"==e.type?(t.push(e.getEl("inp")),e.getEl("open")&&t.push(e.getEl("open").firstChild)):t.push(e.getEl()))}),e.statusbar&&e.statusbar.find("*").each(function(e){e.canFocus&&(s=s||e.settings.autofocus,n=n||e,t.push(e.getEl()))}),e._super(),e.statusbar&&e.statusbar.postRender(),!s&&n&&n.focus(),this.dragHelper=new i(e._id+"-dragh",{start:function(){o={x:e.layoutRect().x,y:e.layoutRect().y}},drag:function(t){e.moveTo(o.x+t.deltaX,o.y+t.deltaY)}}),e.on("submit",function(t){t.isDefaultPrevented()||e.close()})},submit:function(){var e=this.getParentCtrl(document.activeElement);return e&&e.blur(),this.fire("submit",{data:this.toJSON()})},remove:function(){var e=this;e._super(),e.dragHelper.destroy(),e.statusbar&&this.statusbar.remove()}});return s}),r(Z,[Y],function(e){var t=e.extend({init:function(e){e={border:1,padding:20,layout:"flex",pack:"center",align:"center",containerCls:"panel",autoScroll:!0,buttons:{type:"button",text:"Ok",action:"ok"},items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200}},this._super(e)},Statics:{OK:1,OK_CANCEL:2,YES_NO:3,YES_NO_CANCEL:4,msgBox:function(n){var r,i=n.callback||function(){};switch(n.buttons){case t.OK_CANCEL:r=[{type:"button",text:"Ok",subtype:"primary",onClick:function(e){e.control.parents()[1].close(),i(!0)}},{type:"button",text:"Cancel",onClick:function(e){e.control.parents()[1].close(),i(!1)}}];break;case t.YES_NO:r=[{type:"button",text:"Ok",subtype:"primary",onClick:function(e){e.control.parents()[1].close(),i(!0)}}];break;case t.YES_NO_CANCEL:r=[{type:"button",text:"Ok",subtype:"primary",onClick:function(e){e.control.parents()[1].close()}}];break;default:r=[{type:"button",text:"Ok",subtype:"primary",onClick:function(e){e.control.parents()[1].close()}}]}return(new e({padding:20,x:n.x,y:n.y,minWidth:300,minHeight:100,layout:"flex",pack:"center",align:"center",buttons:r,title:n.title,items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200,text:n.text},onClose:n.onClose})).renderTo(document.body).reflow()},alert:function(e,n){return"string"==typeof e&&(e={text:e}),e.callback=n,t.msgBox(e)},confirm:function(e,n){return"string"==typeof e&&(e={text:e}),e.callback=n,e.buttons=t.OK_CANCEL,t.msgBox(e)}}});return t}),r(et,[Y,Z],function(e,t){return function(n){var r=this,i=[];r.windows=i,r.open=function(t,r){var s;return t.url=t.url||t.file,t.url&&(t.width=parseInt(t.width||320,10),t.height=parseInt(t.height||240,10)),t.body&&(t.items={defaults:t.defaults,type:t.bodyType||"form",items:t.body}),t.url||t.buttons||(t.buttons=[{text:"Ok",subtype:"primary",onclick:function(){s.find("form")[0].submit(),s.close()}},{text:"Cancel",onclick:function(){s.close()}}]),s=new e(t),i.push(s),s.on("close",function(){for(var e=i.length;e--;)i[e]===s&&i.splice(e,1);n.focus()}),t.data&&s.on("postRender",function(){this.find("*").each(function(e){var n=e.name();n in t.data&&e.value(t.data[n])})}),s.params=r||{},n.nodeChanged(),s.renderTo(document.body).reflow()},r.alert=function(e,n,r){t.alert(e,function(){n.call(r||this)})},r.confirm=function(e,n,r){t.confirm(e,function(e){n.call(r||this,e)})},r.close=function(){i.length&&i[i.length-1].close()},r.getParams=function(){return i.length?i[i.length-1].params:null},r.setParams=function(e){i.length&&(i[i.length-1].params=e)}}}),r(tt,[L,M,w,v,m,p],function(e,t,n,r,i,s){return function(o){function u(e,t){try{o.getDoc().execCommand(e,!1,t)}catch(n){}}function a(){var e=o.getDoc().documentMode;return e?e:6}function f(e){return e.isDefaultPrevented()}function l(){function t(e){function t(){if(3==a.nodeType){if(e&&f==a.length)return!0;if(!e&&0===f)return!0}}var n,r,i,u,a,f,l;n=I.getRng();var c=[n.startContainer,n.startOffset,n.endContainer,n.endOffset];if(n.collapsed||(e=!0),a=n[(e?"start":"end")+"Container"],f=n[(e?"start":"end")+"Offset"],3==a.nodeType&&(r=F.getParent(n.startContainer,F.isBlock),e&&(r=F.getNext(r,F.isBlock)),!r||!t()&&n.collapsed||(i=F.create("em",{id:"__mceDel"}),H(s.grep(r.childNodes),function(e){i.appendChild(e)}),r.appendChild(i))),n=F.createRng(),n.setStart(c[0],c[1]),n.setEnd(c[2],c[3]),I.setRng(n),o.getDoc().execCommand(e?"ForwardDelete":"Delete",!1,null),i){for(u=I.getBookmark();l=F.get("__mceDel");)F.remove(l,!0);I.moveToBookmark(u)}}o.on("keydown",function(n){var r;r=n.keyCode==j,f(n)||!r&&n.keyCode!=B||e.modifierPressed(n)||(n.preventDefault(),t(r))}),o.addCommand("Delete",function(){t()})}function c(){function e(e){var t=F.create("body"),n=e.cloneContents();return t.appendChild(n),I.serializer.serialize(t,{format:"html"})}function t(t){var n=e(t),r=F.createRng();r.selectNode(o.getBody());var i=e(r);return n===i}o.on("keydown",function(e){var n=e.keyCode,r;if(!f(e)&&(n==j||n==B)){if(r=o.selection.isCollapsed(),r&&!F.isEmpty(o.getBody()))return;if(W&&!r)return;if(!r&&!t(o.selection.getRng()))return;e.preventDefault(),o.setContent(""),o.selection.setCursorLocation(o.getBody(),0),o.nodeChanged()}})}function h(){o.on("keydown",function(t){!f(t)&&65==t.keyCode&&e.metaKeyPressed(t)&&(t.preventDefault(),o.execCommand("SelectAll"))})}function p(){o.settings.content_editable||(F.bind(o.getDoc(),"focusin",function(){I.setRng(I.getRng())}),F.bind(o.getDoc(),"mousedown",function(e){e.target==o.getDoc().documentElement&&(o.getWin().focus(),I.setRng(I.getRng()))}))}function d(){o.on("keydown",function(e){if(!f(e)&&e.keyCode===B&&I.isCollapsed()&&0===I.getRng(!0).startOffset){var t=I.getNode(),n=t.previousSibling;n&&n.nodeName&&"hr"===n.nodeName.toLowerCase()&&(F.remove(n),e.preventDefault())}})}function v(){window.Range.prototype.getClientRects||o.on("mousedown",function(e){if(!f(e)&&"HTML"===e.target.nodeName){var t=o.getBody();t.blur(),setTimeout(function(){t.focus()},0)}})}function m(){o.on("click",function(e){e=e.target,/^(IMG|HR)$/.test(e.nodeName)&&I.getSel().setBaseAndExtent(e,0,e,1),"A"==e.nodeName&&F.hasClass(e,"mceItemAnchor")&&I.select(e),o.nodeChanged()})}function g(){function e(){var e=F.getAttribs(I.getStart().cloneNode(!1));return function(){var t=I.getStart();t!==o.getBody()&&(F.setAttrib(t,"style",null),H(e,function(e){t.setAttributeNode(e.cloneNode(!0))}))}}function t(){return!I.isCollapsed()&&F.getParent(I.getStart(),F.isBlock)!=F.getParent(I.getEnd(),F.isBlock)}o.on("keypress",function(n){var r;return f(n)||8!=n.keyCode&&46!=n.keyCode||!t()?void 0:(r=e(),o.getDoc().execCommand("delete",!1,null),r(),n.preventDefault(),!1)}),F.bind(o.getDoc(),"cut",function(n){var r;!f(n)&&t()&&(r=e(),setTimeout(function(){r()},0))})}function y(){var e,n;o.on("selectionchange",function(){n&&(clearTimeout(n),n=0),n=window.setTimeout(function(){var n=I.getRng();e&&t.compareRanges(n,e)||(o.nodeChanged(),e=n)},50)})}function b(){document.body.setAttribute("role","application")}function w(){o.on("keydown",function(e){if(!f(e)&&e.keyCode===B&&I.isCollapsed()&&0===I.getRng(!0).startOffset){var t=I.getNode().previousSibling;if(t&&t.nodeName&&"table"===t.nodeName.toLowerCase())return e.preventDefault(),!1}})}function E(){a()>7||(u("RespectVisibilityInDesign",!0),o.contentStyles.push(".mceHideBrInPre pre br {display: none}"),F.addClass(o.getBody(),"mceHideBrInPre"),R.addNodeFilter("pre",function(e){for(var t=e.length,r,i,s,o;t--;)for(r=e[t].getAll("br"),i=r.length;i--;)s=r[i],o=s.prev,o&&3===o.type&&"\n"!=o.value.charAt(o.value-1)?o.value+="\n":s.parent.insert(new n("#text",3),s,!0).value="\n"}),U.addNodeFilter("pre",function(e){for(var t=e.length,n,r,i,s;t--;)for(n=e[t].getAll("br"),r=n.length;r--;)i=n[r],s=i.prev,s&&3==s.type&&(s.value=s.value.replace(/\r?\n$/,""))}))}function S(){F.bind(o.getBody(),"mouseup",function(){var e,t=I.getNode();"IMG"==t.nodeName&&((e=F.getStyle(t,"width"))&&(F.setAttrib(t,"width",e.replace(/[^0-9%]+/g,"")),F.setStyle(t,"width","")),(e=F.getStyle(t,"height"))&&(F.setAttrib(t,"height",e.replace(/[^0-9%]+/g,"")),F.setStyle(t,"height","")))})}function x(){o.on("keydown",function(t){var n,r,i,s,u,a,l,c;if(n=t.keyCode==j,!f(t)&&(n||t.keyCode==B)&&!e.modifierPressed(t)&&(r=I.getRng(),i=r.startContainer,s=r.startOffset,l=r.collapsed,3==i.nodeType&&i.nodeValue.length>0&&(0===s&&!l||l&&s===(n?0:1)))){if(a=i.previousSibling,a&&"IMG"==a.nodeName)return;c=o.schema.getNonEmptyElements(),t.preventDefault(),u=F.create("br",{id:"__tmp"}),i.parentNode.insertBefore(u,i),o.getDoc().execCommand(n?"ForwardDelete":"Delete",!1,null),i=I.getRng().startContainer,a=i.previousSibling,a&&1==a.nodeType&&!F.isBlock(a)&&F.isEmpty(a)&&!c[a.nodeName.toLowerCase()]&&F.remove(a),F.remove("__tmp")}})}function T(){o.on("keydown",function(t){var n,r,i,s,u;if(!f(t)&&t.keyCode==e.BACKSPACE&&(n=I.getRng(),r=n.startContainer,i=n.startOffset,s=F.getRoot(),u=r,n.collapsed&&0===i)){for(;u&&u.parentNode&&u.parentNode.firstChild==u&&u.parentNode!=s;)u=u.parentNode;"BLOCKQUOTE"===u.tagName&&(o.formatter.toggle("blockquote",null,u),n=F.createRng(),n.setStart(r,0),n.setEnd(r,0),I.setRng(n))}})}function N(){function e(){o._refreshContentEditable(),u("StyleWithCSS",!1),u("enableInlineTableEditing",!1),q.object_resizing||u("enableObjectResizing",!1)}q.readonly||o.on("BeforeExecCommand MouseDown",e)}function C(){function e(){H(F.select("a"),function(e){var t=e.parentNode,n=F.getRoot();if(t.lastChild===e){for(;t&&!F.isBlock(t);){if(t.parentNode.lastChild!==t||t===n)return;t=t.parentNode}F.add(t,"br",{"data-mce-bogus":1})}})}o.on("SetContent ExecCommand",function(t){("setcontent"==t.type||"mceInsertLink"===t.command)&&e()})}function k(){q.forced_root_block&&o.on("init",function(){u("DefaultParagraphSeparator",q.forced_root_block)})}function L(){o.on("Undo Redo SetContent",function(e){e.initial||o.execCommand("mceRepaint")})}function A(){o.on("keydown",function(e){var t;f(e)||e.keyCode!=B||(t=o.getDoc().selection.createRange(),t&&t.item&&(e.preventDefault(),o.undoManager.beforeChange(),F.remove(t.item(0)),o.undoManager.add()))})}function O(){var e;a()>=10&&(e="",H("p div h1 h2 h3 h4 h5 h6".split(" "),function(t,n){e+=(n>0?",":"")+t+":empty"}),o.contentStyles.push(e+"{padding-right: 1px !important}"))}function M(){a()<9&&(R.addNodeFilter("noscript",function(e){for(var t=e.length,n,r;t--;)n=e[t],r=n.firstChild,r&&n.attr("data-mce-innertext",r.value)}),U.addNodeFilter("noscript",function(e){for(var t=e.length,i,s,o;t--;)i=e[t],s=e[t].firstChild,s?s.value=r.decode(s.value):(o=i.attributes.map["data-mce-innertext"],o&&(i.attr("data-mce-innertext",null),s=new n("#text",3),s.value=o,s.raw=!0,i.append(s)))}))}function _(){function e(e,t){var n=i.createTextRange();try{n.moveToPoint(e,t)}catch(r){n=null}return n}function t(t){var r;t.button?(r=e(t.x,t.y),r&&(r.compareEndPoints("StartToStart",o)>0?r.setEndPoint("StartToStart",o):r.setEndPoint("EndToEnd",o),r.select())):n()}function n(){var e=r.selection.createRange();o&&!e.item&&0===e.compareEndPoints("StartToEnd",e)&&o.select(),F.unbind(r,"mouseup",n),F.unbind(r,"mousemove",t),o=s=0}var r=F.doc,i=r.body,s,o,u;r.documentElement.unselectable=!0,F.bind(r,"mousedown contextmenu",function(i){if("HTML"===i.target.nodeName){if(s&&n(),u=r.documentElement,u.scrollHeight>u.clientHeight)return;s=1,o=e(i.x,i.y),o&&(F.bind(r,"mouseup",n),F.bind(r,"mousemove",t),F.win.focus(),o.select())}})}function D(){o.on("keyup focusin",function(t){65==t.keyCode&&e.metaKeyPressed(t)||I.normalize()})}function P(){o.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")}var H=s.each,B=e.BACKSPACE,j=e.DELETE,F=o.dom,I=o.selection,q=o.settings,R=o.parser,U=o.serializer,z=i.gecko,W=i.ie,X=i.webkit;w(),T(),c(),D(),X&&(x(),l(),p(),m(),k(),i.iOS?y():h()),W&&(d(),b(),E(),S(),A(),O(),M(),_()),z&&(d(),v(),g(),N(),C(),L(),P())}}),r(nt,[p],function(e){function t(){return!1}function n(){return!0}var r="__bindings",i=e.makeMap("focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave keydown keypress keyup contextmenu dragend dragover draggesture dragdrop drop drag"," ");return{fire:function(e,i,s){var o=this,u,a,f,l,c;if(e=e.toLowerCase(),i=i||{},i.type=e,i.target||(i.target=o),i.preventDefault||(i.preventDefault=function(){i.isDefaultPrevented=n},i.stopPropagation=function(){i.isPropagationStopped=n},i.stopImmediatePropagation=function(){i.isImmediatePropagationStopped=n},i.isDefaultPrevented=t,i.isPropagationStopped=t,i.isImmediatePropagationStopped=t),o[r]&&(u=o[r][e]))for(a=0,f=u.length;f>a&&(u[a]=l=u[a],!i.isImmediatePropagationStopped());a++)if(l.call(o,i)===!1)return i.preventDefault(),i;if(s!==!1&&o.parent)for(c=o.parent();c&&!i.isPropagationStopped();)c.fire(e,i,!1),c=c.parent();return i},on:function(e,t){var n=this,s,o,u,a;if(t===!1&&(t=function(){return!1}),t)for(u=e.toLowerCase().split(" "),a=u.length;a--;)e=u[a],s=n[r],s||(s=n[r]={}),o=s[e],o||(o=s[e]=[],n.bindNative&&i[e]&&n.bindNative(e)),o.push(t);return n},off:function(e,t){var n=this,s,o=n[r],u,a,f,l;if(o)if(e)for(f=e.toLowerCase().split(" "),s=f.length;s--;){if(e=f[s],u=o[e],!e){for(a in o)o[e].length=0;return n}if(u){if(t)for(l=u.length;l--;)u[l]===t&&u.splice(l,1);else u.length=0;!u.length&&n.unbindNative&&i[e]&&(n.unbindNative(e),delete o[e])}}else{if(n.unbindNative)for(e in o)n.unbindNative(e);n[r]=[]}return n}}}),r(rt,[p,m],function(e,t){var n=e.each,r=e.explode,i={f9:120,f10:121,f11:122};return function(s){var o=this,u={};s.on("keyup keypress keydown",function(e){(e.altKey||e.ctrlKey||e.metaKey)&&n(u,function(n){var r=t.mac?e.ctrlKey||e.metaKey:e.ctrlKey;if(n.ctrl==r&&n.alt==e.altKey&&n.shift==e.shiftKey)return e.keyCode==n.keyCode||e.charCode&&e.charCode==n.charCode?(e.preventDefault(),"keydown"==e.type&&n.func.call(n.scope),!0):void 0})}),o.add=function(t,o,a,f){var l;return l=a,"string"==typeof a?a=function(){s.execCommand(l,!1,null)}:e.isArray(l)&&(a=function(){s.execCommand(l[0],l[1],l[2])}),n(r(t.toLowerCase()),function(e){var t={func:a,scope:f||s,desc:s.translate(o),alt:!1,ctrl:!1,shift:!1};n(r(e,"+"),function(e){switch(e){case"alt":case"ctrl":case"shift":t[e]=!0;break;default:t.charCode=e.charCodeAt(0),t.keyCode=i[e]||e.toUpperCase().charCodeAt(0)}}),u[(t.ctrl?"ctrl":"")+","+(t.alt?"alt":"")+","+(t.shift?"shift":"")+","+t.keyCode]=t}),!0}}}),r(it,[g,b,w,C,N,O,_,D,P,H,B,j,y,a,et,E,x,tt,m,p,nt,rt],function(e,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S){function x(e,t){return"selectionchange"==t||"drop"==t?e.getDoc():!e.inline&&/^mouse|click|contextmenu/.test(t)?e.getDoc():e.getBody()}function T(e,t,r){var i=this,s,o;s=i.documentBaseUrl=r.documentBaseURL,o=r.baseURI,i.settings=t=L({id:e,theme:"modern",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:s,add_form_submit_trigger:!0,submit_patch:!0,add_unload_trigger:!0,convert_urls:!0,relative_urls:!0,remove_script_host:!0,object_resizing:!0,doctype:"<!DOCTYPE html>",visual:!0,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",forced_root_block:"p",hidden_input:!0,padd_empty_editor:!0,render_ui:!0,indentation:"30px",inline_styles:!0,convert_fonts_to_spans:!0,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,option,optgroup,datalist",validate:!0,entity_encoding:"named",url_converter:i.convertURL,url_converter_scope:i,ie7_compat:!0},t),n.settings=t,n.baseURL=r.baseURL,i.id=t.id=e,i.isNotDirty=!0,i.plugins={},i.documentBaseURI=new h(t.document_base_url||s,{base_uri:o}),i.baseURI=o,i.contentCSS=[],i.contentStyles=[],i.shortcuts=new S(i),i.execCommands={},i.queryStateCommands={},i.queryValueCommands={},i.loadedCSS={},i.suffix=r.suffix,i.editorManager=r,i.inline=t.inline,i.execCallback("setup",i)}var N=e.DOM,C=n.ThemeManager,k=n.PluginManager,L=w.extend,A=w.each,O=w.explode,M=w.inArray,_=w.trim,D=w.resolve,P=d.Event,H=b.gecko,B=b.ie,j=b.opera;return T.prototype={render:function(){function e(){var e=p.ScriptLoader;n.language&&"en"!=n.language&&(n.language_url=t.editorManager.baseURL+"/langs/"+n.language+".js"),n.language_url&&e.add(n.language_url),n.theme&&"function"!=typeof n.theme&&"-"!=n.theme.charAt(0)&&!C.urls[n.theme]&&C.load(n.theme,"themes/"+n.theme+"/theme"+i+".js"),w.isArray(n.plugins)&&(n.plugins=n.plugins.join(" ")),A(n.external_plugins,function(e,t){k.load(t,e),n.plugins+=" "+t}),A(n.plugins.split(/[ ,]/),function(e){if(e=_(e),e&&!k.urls[e])if("-"==e.charAt(0)){e=e.substr(1,e.length);var t=k.dependencies(e);A(t,function(e){var t={prefix:"plugins/",resource:e,suffix:"/plugin"+i+".js"};e=k.createUrl(t,e),k.load(e.resource,e)})}else k.load(e,{prefix:"plugins/",resource:e,suffix:"/plugin"+i+".js"})}),e.loadQueue(function(){t.removed||t.init()})}var t=this,n=t.settings,r=t.id,i=t.suffix;if(!P.domLoaded)return N.bind(window,"ready",function(){t.render()}),void 0;if(t.editorManager.settings=n,t.getElement()&&b.contentEditable){n.inline?t.inline=!0:(t.orgVisibility=t.getElement().style.visibility,t.getElement().style.visibility="hidden");var s=t.getElement().form||N.getParent(r,"form");s&&(t.formElement=s,n.hidden_input&&!/TEXTAREA|INPUT/i.test(t.getElement().nodeName)&&N.insertAfter(N.create("input",{type:"hidden",name:r}),r),t.formEventDelegate=function(e){t.fire(e.type,e)},N.bind(s,"submit reset",t.formEventDelegate),t.on("reset",function(){t.setContent(t.startContent,{format:"raw"})}),!n.submit_patch||s.submit.nodeType||s.submit.length||s._mceOldSubmit||(s._mceOldSubmit=s.submit,s.submit=function(){return t.editorManager.triggerSave(),t.isNotDirty=!0,s._mceOldSubmit(s)})),t.windowManager=new v(t),"xml"==n.encoding&&t.on("GetContent",function(e){e.save&&(e.content=N.encode(e.content))}),n.add_form_submit_trigger&&t.on("submit",function(){t.initialized&&(t.save(),t.isNotDirty=!0)}),n.add_unload_trigger&&(t._beforeUnload=function(){!t.initialized||t.destroyed||t.isHidden()||t.save({format:"raw",no_events:!0})},t.editorManager.on("BeforeUnload",t._beforeUnload)),e()}},init:function(){function e(n){var r=k.get(n),i,s;i=k.urls[n]||t.documentBaseUrl.replace(/\/$/,""),n=_(n),r&&-1===M(d,n)&&(A(k.dependencies(n),function(t){e(t)}),s=new r(t,i),t.plugins[n]=s,s.init&&(s.init(t,i),d.push(n)))}var t=this,n=t.settings,r=t.getElement(),i,s,o,u,a,f,l,c,h,p,d=[];if(t.editorManager.add(t),n.aria_label=n.aria_label||N.getAttrib(r,"aria-label",t.getLang("aria.rich_text_area")),n.theme&&("function"!=typeof n.theme?(n.theme=n.theme.replace(/-/,""),a=C.get(n.theme),t.theme=new a(t,C.urls[n.theme]),t.theme.init&&t.theme.init(t,C.urls[n.theme]||t.documentBaseUrl.replace(/\/$/,""))):t.theme=n.theme),A(n.plugins.replace(/\-/g,"").split(/[ ,]/),e),t.fire("BeforeRenderUI"),n.render_ui&&t.theme&&(t.orgDisplay=r.style.display,"function"!=typeof n.theme?(i=n.width||r.style.width||r.offsetWidth,s=n.height||r.style.height||r.offsetHeight,o=n.min_height||100,h=/^[0-9\.]+(|px)$/i,h.test(""+i)&&(i=Math.max(parseInt(i,10)+(a.deltaWidth||0),100)),h.test(""+s)&&(s=Math.max(parseInt(s,10)+(a.deltaHeight||0),o)),a=t.theme.renderUI({targetNode:r,width:i,height:s,deltaWidth:n.delta_width,deltaHeight:n.delta_height}),n.content_editable||(N.setStyles(a.sizeContainer||a.editorContainer,{wi2dth:i,h2eight:s}),s=(a.iframeHeight||s)+("number"==typeof s?a.deltaHeight||0:""),o>s&&(s=o))):(a=n.theme(t,r),a.editorContainer.nodeType&&(a.editorContainer=a.editorContainer.id=a.editorContainer.id||t.id+"_parent"),a.iframeContainer.nodeType&&(a.iframeContainer=a.iframeContainer.id=a.iframeContainer.id||t.id+"_iframecontainer"),s=a.iframeHeight||r.offsetHeight),t.editorContainer=a.editorContainer),n.content_css&&A(O(n.content_css),function(e){t.contentCSS.push(t.documentBaseURI.toAbsolute(e))}),n.content_style&&t.contentStyles.push(n.content_style),n.content_editable)return r=u=a=null,t.initContentBody();for(document.domain&&location.hostname!=document.domain&&(t.editorManager.relaxedDomain=document.domain),t.iframeHTML=n.doctype+"<html><head>",n.document_base_url!=t.documentBaseUrl&&(t.iframeHTML+='<base href="'+t.documentBaseURI.getURI()+'" />'),!b.caretAfter&&n.ie7_compat&&(t.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=7" />'),t.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />',p=0;p<t.contentCSS.length;p++){var v=t.contentCSS[p];t.iframeHTML+='<link type="text/css" rel="stylesheet" href="'+v+'" />',t.loadedCSS[v]=!0}l=n.body_id||"tinymce",-1!=l.indexOf("=")&&(l=t.getParam("body_id","","hash"),l=l[t.id]||l),c=n.body_class||"",-1!=c.indexOf("=")&&(c=t.getParam("body_class","","hash"),c=c[t.id]||""),t.iframeHTML+='</head><body id="'+l+'" class="mce-content-body '+c+'" '+"onload=\"window.parent.tinymce.get('"+t.id+"').fire('load');\"><br></body></html>",t.editorManager.relaxedDomain&&(B||j&&parseFloat(window.opera.version())<11)&&(f='javascript:(function(){document.open();document.domain="'+document.domain+'";'+'var ed = window.parent.tinymce.get("'+t.id+'");document.write(ed.iframeHTML);'+"document.close();ed.initContentBody();})()"),u=N.add(a.iframeContainer,"iframe",{id:t.id+"_ifr",src:f||'javascript:""',frameBorder:"0",allowTransparency:"true",title:t.editorManager.translate("Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help"),style:{width:"100%",height:s,display:"block"}}),t.contentAreaContainer=a.iframeContainer,a.editorContainer&&(N.get(a.editorContainer).style.display=t.orgDisplay),N.get(t.id).style.display="none",N.setAttrib(t.id,"aria-hidden",!0),t.editorManager.relaxedDomain&&f||t.initContentBody(),r=u=a=null},initContentBody:function(){var t=this,n=t.settings,s=N.get(t.id),h=t.getDoc(),p,d;n.inline||(t.getElement().style.visibility=t.orgVisibility),B&&t.editorManager.relaxedDomain||n.content_editable||(h.open(),h.write(t.iframeHTML),h.close(),t.editorManager.relaxedDomain&&(h.domain=t.editorManager.relaxedDomain)),n.content_editable&&(t.on("remove",function(){var e=this.getBody();N.removeClass(e,"mce-content-body"),N.removeClass(e,"mce-edit-focus"),N.setAttrib(e,"tabIndex",null),N.setAttrib(e,"contentEditable",null)}),N.addClass(s,"mce-content-body"),s.tabIndex=-1,t.contentDocument=h=n.content_document||document,t.contentWindow=n.content_window||window,t.bodyElement=s,n.content_document=n.content_window=null,n.root_name=s.nodeName.toLowerCase()),p=t.getBody(),p.disabled=!0,n.readonly||(p.contentEditable=t.getParam("content_editable_state",!0)),p.disabled=!1,t.schema=new m(n),t.dom=new e(h,{keep_values:!0,url_converter:t.convertURL,url_converter_scope:t,hex_colors:n.force_hex_style_colors,class_filter:n.class_filter,update_styles:!0,root_element:n.content_editable?t.id:null,schema:t.schema,onSetAttrib:function(e){t.fire("SetAttrib",e)}}),t.parser=new g(n,t.schema),t.parser.addAttributeFilter("src,href,style",function(e,n){for(var r=e.length,i,s=t.dom,o,u;r--;)i=e[r],o=i.attr(n),u="data-mce-"+n,i.attributes.map[u]||("style"===n?i.attr(u,s.serializeStyle(s.parseStyle(o),i.name)):i.attr(u,t.convertURL(o,n,i.name)))}),t.parser.addNodeFilter("script",function(e){for(var t=e.length,n;t--;)n=e[t],n.attr("type","mce-"+(n.attr("type")||"text/javascript"))}),t.parser.addNodeFilter("#cdata",function(e){for(var t=e.length,n;t--;)n=e[t],n.type=8,n.name="#comment",n.value="[CDATA["+n.value+"]]"}),t.parser.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(e){for(var n=e.length,i,s=t.schema.getNonEmptyElements();n--;)i=e[n],i.isEmpty(s)&&(i.empty().append(new r("br",1)).shortEnded=!0)}),t.serializer=new i(n,t),t.selection=new o(t.dom,t.getWin(),t.serializer,t),t.formatter=new u(t),t.undoManager=new a(t),t.forceBlocks=new l(t),t.enterKey=new f(t),t.editorCommands=new c(t),t.fire("PreInit"),n.browser_spellcheck||n.gecko_spellcheck||(h.body.spellcheck=!1,N.setAttrib(p,"spellcheck","false")),t.fire("PostRender"),t.quirks=y(t),n.directionality&&(p.dir=n.directionality),n.nowrap&&(p.style.whiteSpace="nowrap"),n.protect&&t.on("BeforeSetContent",function(e){A(n.protect,function(t){e.content=e.content.replace(t,function(e){return"<!--mce:protected "+escape(e)+"-->"})})}),t.on("SetContent",function(){t.addVisual(t.getBody
())}),n.padd_empty_editor&&t.on("PostProcess",function(e){e.content=e.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")}),t.load({initial:!0,format:"html"}),t.startContent=t.getContent({format:"raw"}),t.initialized=!0,A(t._pendingNativeEvents,function(e){t.dom.bind(x(t,e),e,function(e){t.fire(e.type,e)})}),t.fire("init"),t.focus(!0),t.nodeChanged({initial:!0}),t.execCallback("init_instance_callback",t),t.contentStyles.length>0&&(d="",A(t.contentStyles,function(e){d+=e+"\r\n"}),t.dom.addStyle(d)),A(t.contentCSS,function(e){t.loadedCSS[e]||(t.dom.loadCSS(e),t.loadedCSS[e]=!0)}),n.auto_focus&&setTimeout(function(){var e=t.editorManager.get(n.auto_focus);e.selection.select(e.getBody(),1),e.selection.collapse(1),e.getBody().focus(),e.getWin().focus()},100),s=h=p=null},focus:function(e){var t,n=this,r=n.selection,i=n.settings.content_editable,s,o,u=n.getDoc(),a;e||(s=r.getRng(),s.item&&(o=s.item(0)),n._refreshContentEditable(),i||(n.getBody().focus(),n.getWin().focus()),(H||i)&&(a=n.getBody(),a.setActive?a.setActive():a.focus(),i&&r.normalize()),o&&o.ownerDocument==u&&(s=u.body.createControlRange(),s.addElement(o),s.select())),n.editorManager.activeEditor!=n&&((t=n.editorManager.activeEditor)&&t.fire("deactivate",{relatedTarget:n}),n.fire("activate",{relatedTarget:t})),n.editorManager.activeEditor=n},execCallback:function(e){var t=this,n=t.settings[e],r;if(n)return t.callbackLookup&&(r=t.callbackLookup[e])&&(n=r.func,r=r.scope),"string"==typeof n&&(r=n.replace(/\.\w+$/,""),r=r?D(r):0,n=D(n),t.callbackLookup=t.callbackLookup||{},t.callbackLookup[e]={func:n,scope:r}),n.apply(r||t,Array.prototype.slice.call(arguments,1))},translate:function(e){var t=this.settings.language||"en",n=this.editorManager.i18n;return e?n[t+"."+e]||e.replace(/\{\#([^\}]+)\}/g,function(e,r){return n[t+"."+r]||"{#"+r+"}"}):""},getLang:function(e,n){return this.editorManager.i18n[(this.settings.language||"en")+"."+e]||(n!==t?n:"{#"+e+"}")},getParam:function(e,t,n){var r=e in this.settings?this.settings[e]:t,i;return"hash"===n?(i={},"string"==typeof r?A(r.indexOf("=")>0?r.split(/[;,](?![^=;,]*(?:[;,]|$))/):r.split(","),function(e){e=e.split("="),i[_(e[0])]=e.length>1?_(e[1]):_(e)}):i=r,i):r},nodeChanged:function(){var e=this,t=e.selection,n,r,i;e.initialized&&!e.settings.disable_nodechange&&(i=e.getBody(),n=t.getStart()||i,n=B&&n.ownerDocument!=e.getDoc()?e.getBody():n,"IMG"==n.nodeName&&t.isCollapsed()&&(n=n.parentNode),r=[],e.dom.getParent(n,function(e){return e===i?!0:(r.push(e),void 0)}),e.fire("NodeChange",{element:n,parents:r}))},addButton:function(e,t){var n=this;t.cmd&&(t.onclick=function(){n.execCommand(t.cmd)}),t.text||t.icon||(t.icon=e),n.buttons=n.buttons||{},t.tooltip=t.tooltip||t.title,n.buttons[e]=t},addMenuItem:function(e,t){var n=this;t.cmd&&(t.onclick=function(){n.execCommand(t.cmd)}),n.menuItems=n.menuItems||{},n.menuItems[e]=t},addCommand:function(e,t,n){this.execCommands[e]={func:t,scope:n||this}},addQueryStateHandler:function(e,t,n){this.queryStateCommands[e]={func:t,scope:n||this}},addQueryValueHandler:function(e,t,n){this.queryValueCommands[e]={func:t,scope:n||this}},addShortcut:function(e,t,n,r){this.shortcuts.add(e,t,n,r)},execCommand:function(e,t,n,r){var i=this,s=0,o;return/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(e)||r&&r.skip_focus||i.focus(),r=L({},r),r=i.fire("BeforeExecCommand",{command:e,ui:t,value:n}),r.isDefaultPrevented()?!1:(o=i.execCommands[e])&&o.func.call(o.scope,t,n)!==!0?(i.fire("ExecCommand",{command:e,ui:t,value:n}),!0):(A(i.plugins,function(r){return r.execCommand&&r.execCommand(e,t,n)?(i.fire("ExecCommand",{command:e,ui:t,value:n}),s=!0,!1):void 0}),s?s:i.theme&&i.theme.execCommand&&i.theme.execCommand(e,t,n)?(i.fire("ExecCommand",{command:e,ui:t,value:n}),!0):i.editorCommands.execCommand(e,t,n)?(i.fire("ExecCommand",{command:e,ui:t,value:n}),!0):(i.getDoc().execCommand(e,t,n),i.fire("ExecCommand",{command:e,ui:t,value:n}),void 0))},queryCommandState:function(e){var t=this,n,r;if(!t._isHidden()){if((n=t.queryStateCommands[e])&&(r=n.func.call(n.scope),r!==!0))return r;if(r=t.editorCommands.queryCommandState(e),-1!==r)return r;try{return t.getDoc().queryCommandState(e)}catch(i){}}},queryCommandValue:function(e){var n=this,r,i;if(!n._isHidden()){if((r=n.queryValueCommands[e])&&(i=r.func.call(r.scope),i!==!0))return i;if(i=n.editorCommands.queryCommandValue(e),i!==t)return i;try{return n.getDoc().queryCommandValue(e)}catch(s){}}},show:function(){var e=this;N.show(e.getContainer()),N.hide(e.id),e.load(),e.fire("show")},hide:function(){var e=this,t=e.getDoc();B&&t&&t.execCommand("SelectAll"),e.save(),N.hide(e.getContainer()),N.setStyle(e.id,"display",e.orgDisplay),e.fire("hide")},isHidden:function(){return!N.isHidden(this.id)},setProgressState:function(e,t){this.fire("ProgressState",{state:e,time:t})},load:function(e){var n=this,r=n.getElement(),i;return r?(e=e||{},e.load=!0,i=n.setContent(r.value!==t?r.value:r.innerHTML,e),e.element=r,e.no_events||n.fire("LoadContent",e),e.element=r=null,i):void 0},save:function(e){var t=this,n=t.getElement(),r,i;if(n&&t.initialized)return e=e||{},e.save=!0,e.element=n,r=e.content=t.getContent(e),e.no_events||t.fire("SaveContent",e),r=e.content,/TEXTAREA|INPUT/i.test(n.nodeName)?n.value=r:(n.innerHTML=r,(i=N.getParent(t.id,"form"))&&A(i.elements,function(e){return e.name==t.id?(e.value=r,!1):void 0})),e.element=n=null,t.isNotDirty=!0,r},setContent:function(e,t){var n=this,r=n.getBody(),i;return t=t||{},t.format=t.format||"html",t.set=!0,t.content=e,t.no_events||n.fire("BeforeSetContent",t),e=t.content,B||0!==e.length&&!/^\s+$/.test(e)?("raw"!==t.format&&(e=(new s({},n.schema)).serialize(n.parser.parse(e,{isRootContent:!0}))),t.content=_(e),n.dom.setHTML(r,t.content),t.no_events||n.fire("SetContent",t),n.settings.content_editable&&document.activeElement!==n.getBody()||n.selection.normalize(),t.content):(i=n.settings.forced_root_block,e=i&&n.schema.isValidChild(r.nodeName.toLowerCase(),i.toLowerCase())?"<"+i+'><br data-mce-bogus="1"></'+i+">":'<br data-mce-bogus="1">',r.innerHTML=e,n.selection.select(r,!0),n.selection.collapse(!0),n.fire("SetContent",t),void 0)},getContent:function(e){var t=this,n,r=t.getBody();return e=e||{},e.format=e.format||"html",e.get=!0,e.getInner=!0,e.no_events||t.fire("BeforeGetContent",e),n="raw"==e.format?r.innerHTML:"text"==e.format?r.innerText||r.textContent:t.serializer.serialize(r,e),e.content="text"!=e.format?_(n):n,e.no_events||t.fire("GetContent",e),e.content},insertContent:function(e){this.execCommand("mceInsertContent",!1,e)},isDirty:function(){return!this.isNotDirty},getContainer:function(){var e=this;return e.container||(e.container=N.get(e.editorContainer||e.id+"_parent")),e.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return N.get(this.settings.content_element||this.id)},getWin:function(){var e=this,t;return e.contentWindow||(t=N.get(e.id+"_ifr"),t&&(e.contentWindow=t.contentWindow)),e.contentWindow},getDoc:function(){var e=this,t;return e.contentDocument||(t=e.getWin(),t&&(e.contentDocument=t.document)),e.contentDocument},getBody:function(){return this.bodyElement||this.getDoc().body},convertURL:function(e,t,n){var r=this,i=r.settings;return i.urlconverter_callback?r.execCallback("urlconverter_callback",e,n,!0,t):!i.convert_urls||n&&"LINK"==n.nodeName||0===e.indexOf("file:")||0===e.length?e:i.relative_urls?r.documentBaseURI.toRelative(e):e=r.documentBaseURI.toAbsolute(e,i.remove_script_host)},addVisual:function(e){var n=this,r=n.settings,i=n.dom,s;e=e||n.getBody(),n.hasVisual===t&&(n.hasVisual=r.visual),A(i.select("table,a",e),function(e){var t;switch(e.nodeName){case"TABLE":return s=r.visual_table_class||"mce-item-table",t=i.getAttrib(e,"border"),t&&"0"!=t||(n.hasVisual?i.addClass(e,s):i.removeClass(e,s)),void 0;case"A":return i.getAttrib(e,"href",!1)||(t=i.getAttrib(e,"name")||e.id,s="mce-item-anchor",t&&(n.hasVisual?i.addClass(e,s):i.removeClass(e,s))),void 0}}),n.fire("VisualAid",{element:e,hasVisual:n.hasVisual})},remove:function(){var e=this,t=e.getContainer(),n=e.getDoc();e.removed||(e.removed=1,B&&n&&n.execCommand("SelectAll"),e.save(),N.setStyle(e.id,"display",e.orgDisplay),e.settings.content_editable||(P.unbind(e.getWin()),P.unbind(e.getDoc())),P.unbind(e.getBody()),P.unbind(t),e.fire("remove"),e.editorManager.remove(e),N.remove(t))},bindNative:function(e){var t=this;t.initialized?t.dom.bind(x(t,e),e,function(n){t.fire(e,n)}):t._pendingNativeEvents?t._pendingNativeEvents.push(e):t._pendingNativeEvents=[e]},unbindNative:function(e){var t=this;t.initialized&&t.dom.unbind(e)},destroy:function(e){var t=this,n;t.destroyed||(H&&(P.unbind(t.getDoc()),P.unbind(t.getWin()),P.unbind(t.getBody())),e||(t.editorManager.off("beforeunload",t._beforeUnload),t.theme&&t.theme.destroy&&t.theme.destroy(),t.selection.destroy(),t.dom.destroy()),n=t.formElement,n&&(n.submit=n._mceOldSubmit,n._mceOldSubmit=null,N.unbind(n,"submit reset",t.formEventDelegate)),t.contentAreaContainer=t.formElement=t.container=null,t.settings.content_element=t.bodyElement=t.contentDocument=t.contentWindow=null,t.selection&&(t.selection=t.selection.win=t.selection.dom=t.selection.dom.doc=null),t.destroyed=1)},_refreshContentEditable:function(){var e=this,t,n;e._isHidden()&&(t=e.getBody(),n=t.parentNode,n.removeChild(t),n.appendChild(t),t.focus())},_isHidden:function(){var e;return H?(e=this.selection.getSel(),!e||!e.rangeCount||0===e.rangeCount):0}},L(T.prototype,E),T}),r(st,[],function(){var e={};return{add:function(t,n){for(var r in n)e[r]=n[r]},translate:function(t){if("undefined"==typeof t)return t;if("string"!=typeof t&&t.raw)return t.raw;if(t.push){var n=t.slice(1);t=(e[t[0]]||t[0]).replace(/\{([^\}]+)\}/g,function(e,t){return n[t]})}return e[t]||t},data:e}}),r(ot,[g,m],function(e,t){function n(r){function i(){try{return document.activeElement}catch(e){return document.body}}function s(s){function o(t){return!!e.DOM.getParent(t,n.isEditorUIElement)}var u=s.editor,a,f;u.on("init",function(){"onbeforedeactivate"in document?u.dom.bind(u.getBody(),"beforedeactivate",function(){var e=u.getDoc().selection;a=e&&e.createRange?e.createRange():u.selection.getRng()}):u.inline&&(u.on("nodechange",function(){for(var e,t=document.activeElement;t;){if(t==u.getBody()){e=!0;break}t=t.parentNode}e&&(a=u.selection.getRng())}),t.webkit&&(f=function(){var e=u.selection.getRng();e.collapsed||(a=e)},e.DOM.bind(document,"selectionchange",f),u.on("remove",function(){e.DOM.unbind(document,"selectionchange",f)})))}),u.on("focusin",function(){var e=r.focusedEditor;u.selection.restoreRng&&(u.selection.setRng(u.selection.restoreRng),u.selection.restoreRng=null),e!=u&&(e&&e.fire("blur",{focusedEditor:u}),u.fire("focus",{blurredEditor:e}),u.focus(!1),r.focusedEditor=u)}),u.on("focusout",function(){u.selection.restoreRng=a,window.setTimeout(function(){var e=r.focusedEditor;e!=u&&(u.selection.restoreRng=null),o(i())||e!=u||(u.fire("blur",{focusedEditor:null}),r.focusedEditor=null,u.selection.restoreRng=null)},0)})}r.on("AddEditor",s)}return n.isEditorUIElement=function(e){return-1!==e.className.indexOf("mce-")},n}),r(ut,[it,g,j,m,p,nt,st,ot],function(e,n,r,i,s,o,u,a){var f=n.DOM,l=s.explode,c=s.each,h=s.extend,p=0,d,v={majorVersion:"4",minorVersion:"0",releaseDate:"2013-06-26",editors:[],i18n:u,activeEditor:null,setup:function(){var e=this,t,n,i="",s;if(n=document.location.href.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(n)||(n+="/"),s=window.tinymce||window.tinyMCEPreInit)t=s.base||s.baseURL,i=s.suffix;else for(var o=document.getElementsByTagName("script"),u=0;u<o.length;u++){var f=o[u].src;if(/tinymce(\.jquery|)(\.min|\.dev|)\.js/.test(f)){-1!=f.indexOf(".min")&&(i=".min"),t=f.substring(0,f.lastIndexOf("/"));break}}e.baseURL=(new r(n)).toAbsolute(t),e.documentBaseURL=n,e.baseURI=new r(e.baseURL),e.suffix=i,e.focusManager=new a(e)},init:function(t){function n(e){var t=e.id;return t||(t=e.name,t=t&&!f.get(t)?e.name:f.uniqueId(),e.setAttribute("id",t)),t}function r(e,t,n){var r=e[t];if(r)return r.apply(n||this,Array.prototype.slice.call(arguments,2))}function i(e,t){return t.constructor===RegExp?t.test(e.className):f.hasClass(e,t)}var s=this,o=[],u;s.settings=t,f.bind(window,"ready",function(){var a,d;if(r(t,"onpageload"),t.types)return c(t.types,function(r){c(f.select(r.selector),function(i){var u=new e(n(i),h({},t,r),s);o.push(u),u.render(1)})}),void 0;if(t.selector)return c(f.select(t.selector),function(r){var i=new e(n(r),t,s);o.push(i),i.render(1)}),void 0;switch(t.mode){case"exact":a=t.elements||"",a.length>0&&c(l(a),function(n){f.get(n)?(u=new e(n,t,s),o.push(u),u.render(!0)):c(document.forms,function(r){c(r.elements,function(r){r.name===n&&(n="mce_editor_"+p++,f.setAttrib(r,"id",n),u=new e(n,t,s),o.push(u),u.render(1))})})});break;case"textareas":case"specific_textareas":c(f.select("textarea"),function(r){t.editor_deselector&&i(r,t.editor_deselector)||(!t.editor_selector||i(r,t.editor_selector))&&(u=new e(n(r),t,s),o.push(u),u.render(!0))})}t.oninit&&(a=d=0,c(o,function(e){d++,e.initialized?a++:e.on("init",function(){a++,a==d&&r(t,"oninit")}),a==d&&r(t,"oninit")}))})},get:function(e){return e===t?this.editors:this.editors[e]},add:function(e){var t=this,n=t.editors;return n[e.id]=e,n.push(e),t.activeEditor=e,t.fire("AddEditor",{editor:e}),d||(d=function(){t.fire("BeforeUnload")},f.bind(window,"beforeunload",d)),e},createEditor:function(t,n){return this.add(new e(t,n,this))},remove:function(e){var t=this,n,r=t.editors,i;if(e){if("string"==typeof e)return e=e.selector||e,c(f.select(e),function(e){t.remove(r[e.id])}),void 0;if(i=e,!r[i.id])return null;for(delete r[i.id],n=0;n<r.length;n++)if(r[n]==i){r.splice(n,1);break}if(t.activeEditor==i&&(t.activeEditor=r[0]),i&&!i.removed)return i.remove(),i.destroy(),t.fire("RemoveEditor",{editor:i}),r.length||f.unbind(window,"beforeunload",d),i}else for(n=r.length-1;n>=0;n--)t.remove(r[n])},execCommand:function(t,n,r){var i=this,s=i.get(r);switch(t){case"mceAddEditor":return i.get(r)||(new e(r,i.settings,i)).render(),!0;case"mceRemoveEditor":return s&&s.remove(),!0;case"mceToggleEditor":return s?(s.isHidden()?s.show():s.hide(),!0):(i.execCommand("mceAddEditor",0,r),!0)}return i.activeEditor?i.activeEditor.execCommand(t,n,r):!1},triggerSave:function(){c(this.editors,function(e){e.save()})},addI18n:function(e,t){u.add(e,t)},translate:function(e){return u.translate(e)}};return h(v,o),v.setup(),window.tinymce=window.tinyMCE=v,v}),r(at,[ut,p],function(e,t){var n=t.each,r=t.explode;e.on("AddEditor",function(e){var t=e.editor;t.on("preInit",function(){function e(e,t){n(t,function(t,n){t&&u.setStyle(e,n,t)}),u.rename(e,"span")}function i(e){u=t.dom,a.convert_fonts_to_spans&&n(u.select("font,u,strike",e.node),function(e){s[e.nodeName.toLowerCase()](u,e)})}var s,o,u,a=t.settings;a.inline_styles&&(o=r(a.font_size_legacy_values),s={font:function(t,n){e(n,{backgroundColor:n.style.backgroundColor,color:n.color,fontFamily:n.face,fontSize:o[parseInt(n.size,10)-1]})},u:function(t,n){e(n,{textDecoration:"underline"})},strike:function(t,n){e(n,{textDecoration:"line-through"})}},t.on("PreProcess SetContent",i))})})}),r(ft,[],function(){return{send:function(e){function t(){!e.async||4==n.readyState||r++>1e4?(e.success&&1e4>r&&200==n.status?e.success.call(e.success_scope,""+n.responseText,n,e):e.error&&e.error.call(e.error_scope,r>1e4?"TIMED_OUT":"GENERAL",n,e),n=null):setTimeout(t,10)}var n,r=0;if(e.scope=e.scope||this,e.success_scope=e.success_scope||e.scope,e.error_scope=e.error_scope||e.scope,e.async=e.async===!1?!1:!0,e.data=e.data||"",n=new XMLHttpRequest){if(n.overrideMimeType&&n.overrideMimeType(e.content_type),n.open(e.type||(e.data?"POST":"GET"),e.url,e.async),e.content_type&&n.setRequestHeader("Content-Type",e.content_type),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.send(e.data),!e.async)return t();setTimeout(t,10)}}}}),r(lt,[],function(){function e(t,n){var r,i,s,o;if(n=n||'"',null===t)return"null";if(s=typeof t,"string"==s)return i="\bb	t\nn\ff\rr\"\"''\\\\",n+t.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(e,t){return'"'===n&&"'"===e?e:(r=i.indexOf(t),r+1?"\\"+i.charAt(r+1):(e=t.charCodeAt().toString(16),"\\u"+"0000".substring(e.length)+e))})+n;if("object"==s){if(t.hasOwnProperty&&"[object Array]"===Object.prototype.toString.call(t)){for(r=0,i="[";r<t.length;r++)i+=(r>0?",":"")+e(t[r],n);return i+"]"}i="{";for(o in t)t.hasOwnProperty(o)&&(i+="function"!=typeof t[o]?(i.length>1?","+n:n)+o+n+":"+e(t[o],n):"");return i+"}"}return""+t}return{serialize:e,parse:function(e){try{return window[String.fromCharCode(101)+"val"]("("+e+")")}catch(t){}}}}),r(ct,[lt,ft,p],function(e,t,n){function r(e){this.settings=i({},e),this.count=0}var i=n.extend;return r.sendRPC=function(e){return(new r).send(e)},r.prototype={send:function(n){var r=n.error,s=n.success;n=i(this.settings,n),n.success=function(t,i){t=e.parse(t),"undefined"==typeof t&&(t={error:"JSON Parse error."}),t.error?r.call(n.error_scope||n.scope,t.error,i):s.call(n.success_scope||n.scope,t.result)},n.error=function(e,t){r&&r.call(n.error_scope||n.scope,e,t)},n.data=e.serialize({id:n.id||"c"+this.count++,method:n.method,params:n.params}),n.content_type="application/json",t.send(n)}},r}),r(ht,[g],function(e){return{callbacks:{},count:0,send:function(n){var r=this,i=e.DOM,s=n.count!==t?n.count:r.count,o="tinymce_jsonp_"+s;r.callbacks[s]=function(e){i.remove(o),delete r.callbacks[s],n.callback(e)},i.add(i.doc.body,"script",{id:o,src:n.url,type:"text/javascript"}),r.count++}}}),r(pt,[],function(){function e(){u=[];for(var e in o)u.push(e);i.length=u.length}function n(){function n(e){var n,r;return r=e!==t?f+e:i.indexOf(",",f),-1===r||r>i.length?null:(n=i.substring(f,r),f=r+1,n)}var r,i,u,f=0;o={},s.load(a),i=s.getAttribute(a)||"";do r=n(parseInt(n(),32)||0),null!==r&&(u=n(parseInt(n(),32)||0),o[r]=u);while(null!==r);e()}function r(){var t,n="";for(var r in o)t=o[r],n+=(n?",":"")+r.length.toString(32)+","+r+","+t.length.toString(32)+","+t;s.setAttribute(a,n),s.save(a),e()}var i,s,o,u,a;return window.localStorage?localStorage:(a="tinymce",s=document.documentElement,s.addBehavior("#default#userData"),i={key:function(e){return u[e]},getItem:function(e){return e in o?o[e]:null},setItem:function(e,t){o[e]=""+t,r()},removeItem:function(e){delete o[e],r()},clear:function(){o={},r()}},n(),i)}),r(dt,[g,a,y,b,p,m],function(e,t,n,r,i,s){var o=window.tinymce;return o.DOM=e.DOM,o.ScriptLoader=n.ScriptLoader,o.PluginManager=r.PluginManager,o.ThemeManager=r.ThemeManager,o.dom=o.dom||{},o.dom.Event=t.Event,i.each(i,function(e,t){o[t]=e}),i.each("isOpera isWebKit isIE isGecko isMac".split(" "),function(e){o[e]=s[e.substr(2).toLowerCase()]}),{}}),r(vt,[F,p],function(e,t){return e.extend({Defaults:{firstControlClass:"first",lastControlClass:"last"},init:function(e){this.settings=t.extend({},this.Defaults,e)},preRender:function(e){e.addClass(this.settings.containerClass,"body")},applyClasses:function(e){var t=this,n=t.settings,r,i,s;r=e.items().filter(":visible"),i=n.firstControlClass,s=n.lastControlClass,r.each(function(e){e.removeClass(i).removeClass(s),n.controlClass&&e.addClass(n.controlClass)}),r.eq(0).addClass(i),r.eq(-1).addClass(s)},renderHtml:function(e){var t=this,n=t.settings,r,i="";return r=e.items(),r.eq(0).addClass(n.firstControlClass),r.eq(-1).addClass(n.lastControlClass),r.each(function(e){n.controlClass&&e.addClass(n.controlClass),i+=e.renderHtml()}),i},recalc:function(){},postRender:function(){}})}),r(mt,[vt],function(e){return e.extend({Defaults:{containerClass:"abs-layout",controlClass:"abs-layout-item"},recalc:function(e){e.items().filter(":visible").each(function(e){var t=e.settings;e.layoutRect({x:t.x,y:t.y,w:t.w,h:t.h}),e.recalc&&e.recalc()})},renderHtml:function(e){return'<div id="'+e._id+'-absend" class="'+e.classPrefix+'abs-end"></div>'+this._super(e)}})}),r(gt,[U,J],function(e,t){return e.extend({Mixins:[t],Defaults:{classes:"widget tooltip tooltip-n"},text:function(e){var t=this;return"undefined"!=typeof e?(t._value=e,t._rendered&&(t.getEl().lastChild.innerHTML=t.encode(e)),t):t._value},renderHtml:function(){var e=this,t=e.classPrefix;return'<div id="'+e._id+'" class="'+e.classes()+'" role="presentation">'+'<div class="'+t+'tooltip-arrow"></div>'+'<div class="'+t+'tooltip-inner">'+e.encode(e._text)+"</div>"+"</div>"},repaint:function(){var e=this,t,n;t=e.getEl().style,n=e._layoutRect,t.left=n.x+"px",t.top=n.y+"px",t.zIndex=131070}})}),r(yt,[U,gt],function(e,t){var n,r=e.extend({init:function(e){var t=this;t._super(e),t.canFocus=!0,e.tooltip&&r.tooltips!==!1&&t.on("mouseenter mouseleave",function(n){var r=t.tooltip().moveTo(-65535);if(n.control==t&&"mouseenter"==n.type){var i=r.text(e.tooltip).show().testMoveRel(t.getEl(),["bc-tc","bc-tl","bc-tr"]);r.toggleClass("tooltip-n","bc-tc"==i),r.toggleClass("tooltip-nw","bc-tl"==i),r.toggleClass("tooltip-ne","bc-tr"==i),r.moveRel(t.getEl(),i)}else r.hide()}),t.aria("label",e.tooltip)},tooltip:function(){var e=this;return n||(n=new t({type:"tooltip"}),n.renderTo(e.getContainerElm())),n},active:function(e){var t=this,n;return e!==n&&(t.aria("pressed",e),t.toggleClass("active",e)),t._super(e)},disabled:function(e){var t=this,n;return e!==n&&(t.aria("disabled",e),t.toggleClass("disabled",e)),t._super(e)},postRender:function(){var e=this,t=e.settings;e._rendered=!0,e._super(),e.parent()||!t.width&&!t.height||(e.initLayoutRect(),e.repaint()),t.autofocus&&setTimeout(function(){e.focus()},0)},remove:function(){this._super(),n&&(n.remove(),n=null)}});return r}),r(bt,[yt],function(e){return e.extend({Defaults:{classes:"widget btn",role:"button"},init:function(e){var t=this,n;t.on("click mousedown",function(e){e.preventDefault()}),t._super(e),n=e.size,e.subtype&&t.addClass(e.subtype),n&&t.addClass("btn-"+n)},repaint:function(){var e=this.getEl().firstChild.style;e.width=e.height="100%",this._super()},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix,r=e.settings.icon,i="";return e.settings.image&&(r="none",i=" style=\"background-image: url('"+e.settings.image+"')\""),r=e.settings.icon?n+"ico "+n+"i-"+r:"",'<div id="'+t+'" class="'+e.classes()+'" tabindex="-1">'+'<button role="presentation" type="button" tabindex="-1">'+(r?'<i class="'+r+'"'+i+"></i>":"")+(e._text?(r?" ":"")+e.encode(e._text):"")+"</button>"+"</div>"}})}),r(wt,[W],function(e){return e.extend({Defaults:{defaultType:"button",role:"toolbar"},renderHtml:function(){var e=this,t=e._layout;return e.addClass("btn-group"),e.preRender(),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes()+'">'+'<div id="'+e._id+'-body">'+(e.settings.html||"")+t.renderHtml(e)+"</div>"+"</div>"}})}),r(Et,[yt],function(e){return e.extend({Defaults:{classes:"checkbox",role:"checkbox",checked:!1},init:function(e){var t=this;t._super(e),t.on("click mousedown",function(e){e.preventDefault()}),t.on("click",function(e){e.preventDefault(),t.disabled()||t.checked(!t.checked())}),t.checked(t.settings.checked)},checked:function(e){var t=this;return"undefined"!=typeof e?(e?t.addClass("checked"):t.removeClass("checked"),t._checked=e,t.aria("checked",e),t):t._checked},value:function(e){return this.checked(e)},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix;return'<div id="'+t+'" class="'+e.classes()+'" unselectable="on" aria-labeledby="'+t+'-al" tabindex="-1">'+'<i class="'+n+"ico "+n+'i-checkbox"></i>'+'<span id="'+t+'-al" class="'+n+'label">'+e.encode(e._text)+"</span>"+"</div>"}})}),r(St,[bt,Q],function(e,t){return e.extend({showPanel:function(){var e=this,n=e.settings;n.panel.popover=!0,n.panel.autohide=!0,e.active(!0),e.panel?e.panel.show():(e.panel=(new t(n.panel)).on("hide",function(){e.active(!1)}).parent(e).renderTo(e.getContainerElm()),e.panel.fire("show"),e.panel.reflow()),e.panel.moveRel(e.getEl(),n.popoverAlign||"bc-tc")},hidePanel:function(){var e=this;e.panel&&e.panel.hide()},postRender:function(){var e=this;return e.on("click",function(t){t.control===e&&(e.panel&&e.panel.visible()?e.hidePanel():e.showPanel())}),e._super()}})}),r(xt,[St,g],function(e,t){var n=t.DOM;return e.extend({init:function(e){this._super(e),this.addClass("colorbutton")},color:function(e){return e?(this._color=e,this.getEl("preview").style.backgroundColor=e,this):this._color},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix,r=e.settings.icon?n+"ico "+n+"i-"+e.settings.icon:"",i=e.settings.image?" style=\"background-image: url('"+e.settings.image+"')\"":"";return'<div id="'+t+'" class="'+e.classes()+'">'+'<button role="presentation" hidefocus type="button" tabindex="-1">'+(r?'<i class="'+r+'"'+i+"></i>":"")+'<span id="'+t+'-preview" class="'+n+'preview"></span>'+(e._text?(r?" ":"")+e._text:"")+"</button>"+'<button type="button" class="'+n+'open" hidefocus tabindex="-1">'+' <i class="'+n+'caret"></i>'+"</button>"+"</div>"},postRender:function(){var e=this,t=e.settings.onclick;return e.on("click",function(r){r.control!=e||n.getParent(r.target,"."+e.classPrefix+"open")||(r.stopImmediatePropagation(),t.call(e,r))}),delete e.settings.onclick,e._super()}})}),r(Tt,[yt,R],function(e,t){return e.extend({init:function(e){var n=this;n._super(e),n.addClass("combobox"),n.on("click",function(e){for(var t=e.target;t;)t.id&&-1!=t.id.indexOf("-open")&&n.fire("action"),t=t.parentNode}),n.on("keydown",function(e){"INPUT"==e.target.nodeName&&13==e.keyCode&&n.parents().reverse().each(function(t){return e.preventDefault(),n.fire("change"),t.submit?(t.submit(),!1):void 0})}),e.placeholder&&(n.addClass("placeholder"),n.on("focusin",function(){n._hasOnChange||(t.on(n.getEl("inp"),"change",function(){n.fire("change")}),n._hasOnChange=!0),n.hasClass("placeholder")&&(n.getEl("inp").value="",n.removeClass("placeholder"))}),n.on("focusout",function(){0===n.value().length&&(n.getEl("inp").value=e.placeholder,n.addClass("placeholder"))}))},value:function(e){var t=this;return"undefined"!=typeof e?(t._value=e,t.removeClass("placeholder"),t._rendered&&(t.getEl("inp").value=e),t):t._rendered?(e=t.getEl("inp").value,e!=t.settings.placeholder?e:""):t._value},disabled:function(e){var t=this;t._super(e),t._rendered&&(t.getEl("inp").disabled=e)},focus:function(){this.getEl("inp").focus()},repaint:function(){var e=this,n=e.getEl(),r=e.getEl("open"),i=e.layoutRect(),s,o;s=r?i.w-r.offsetWidth-10:i.w-10;var u=document;return u.all&&(!u.documentMode||u.documentMode<=8)&&(o=e.layoutRect().h-2+"px"),t.css(n.firstChild,{width:s,lineHeight:o}),e._super(),e},postRender:function(){var e=this;return t.on(this.getEl("inp"),"change",function(){e.fire("change")}),e._super()},renderHtml:function(){var e=this,t=e._id,n=e.settings,r=e.classPrefix,i=n.value||n.placeholder||"",s,o,u="";return s=n.icon?r+"ico "+r+"i-"+n.icon:"",o=e._text,(s||o)&&(u='<div id="'+t+'-open" class="'+r+"btn "+r+'open" tabIndex="-1">'+'<button id="'+t+'-action" type="button" hidefocus tabindex="-1">'+(s?'<i class="'+s+'"></i>':'<i class="'+r+'caret"></i>')+(o?(s?" ":"")+o:"")+"</button>"+"</div>",e.addClass("has-open")),'<div id="'+t+'" class="'+e.classes()+'">'+'<input id="'+t+'-inp" class="'+r+"textbox "+r+'placeholder" value="'+i+'" hidefocus="true">'+u+"</div>"}})}),r(Nt,[U,G],function(e,t){return e.extend({Defaults:{delimiter:"»"},init:function(e){var t=this;t._super(e),t.addClass("path"),t.canFocus=!0,t.on("click",function(e){var n,r=e.target;(n=r.getAttribute("data-index"))&&t.fire("select",{value:t.data()[n],index:n})})},focus:function(){var e=this;return e.keyNav=new t({root:e,enableLeftRight:!0}),e.keyNav.focusFirst(),e},data:function(e){var t=this;return"undefined"!=typeof e?(t._data=e,t.update(),t):t._data},update:function(){this.getEl().innerHTML=this._getPathHtml()},postRender:function(){var e=this;e._super(),e.data(e.settings.data)},renderHtml:function(){var e=this;return'<div id="'+e._id+'" class="'+e.classPrefix+'path">'+e._getPathHtml()+"</div>"},_getPathHtml:function(){var e=this,t=e._data||[],n,r,i="",s=e.classPrefix;for(n=0,r=t.length;r>n;n++)i+=(n>0?'<div class="'+s+'divider" aria-hidden="true"> '+e.settings.delimiter+" </div>":"")+'<div role="button" class="'+s+"path-item"+(n==r-1?" "+s+"last":"")+'" data-index="'+n+'" tabindex="-1" id="'+e._id+"-"+n+'">'+t[n].name+"</div>";return i||(i='<div class="'+s+'path-item">&nbsp;</div>'),i}})}),r(Ct,[Nt,ut],function(e,t){return e.extend({postRender:function(){function e(e){return 1===e.nodeType&&("BR"==e.nodeName||!!e.getAttribute("data-mce-bogus"))}var n=this,r=t.activeEditor;return n.on("select",function(t){var n=[],i,s=r.getBody();for(r.focus(),i=r.selection.getStart();i&&i!=s;)e(i)||n.push(i),i=i.parentNode;r.selection.select(n[n.length-1-t.index]),r.nodeChanged()}),r.on("nodeChange",function(t){for(var i=[],s=t.parents,o=s.length;o--;)if(1==s[o].nodeType&&!e(s[o])){var u=r.fire("ResolveName",{name:s[o].nodeName.toLowerCase(),target:s[o]});i.push({name:u.name})}n.data(i)}),n._super()}})}),r(kt,[W],function(e){return e.extend({Defaults:{layout:"flex",align:"center",defaults:{flex:1}},renderHtml:function(){var e=this,t=e._layout,n=e.classPrefix;return e.addClass("formitem"),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes()+'" hideFocus="1" tabIndex="-1">'+(e.settings.title?'<div id="'+e._id+'-title" class="'+n+'title">'+e.settings.title+"</div>":"")+'<div id="'+e._id+'-body" class="'+e.classes("body")+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div>"+"</div>"}})}),r(Lt,[W,kt],function(e,t){return e.extend({Defaults:{containerCls:"form",layout:"flex",direction:"column",align:"stretch",flex:1,padding:20,labelGap:30,spacing:10},preRender:function(){var e=this,n=e.items();n.each(function(n){var r,i=n.settings.label;i&&(r=new t({layout:"flex",autoResize:"overflow",defaults:{flex:1},items:[{type:"label",text:i,flex:0,forId:n._id}]}),r.type="formitem","undefined"==typeof n.settings.flex&&(n.settings.flex=1),e.replace(n,r),r.add(n))})},recalcLabels:function(){var e=this,t=0,n=[],r,i;if(e.settings.labelGapCalc!==!1)for(e.items().filter("formitem").each(function(e){var r=e.items()[0],i=r.getEl().clientWidth;t=i>t?i:t,n.push(r)}),i=e.settings.labelGap||0,r=n.length;r--;)n[r].settings.minWidth=t+i},visible:function(e){var t=this._super(e);return e===!0&&this._rendered&&this.recalcLabels(),t},submit:function(){var e=this.getParentCtrl(document.activeElement);return e&&e.blur(),this.fire("submit",{data:this.toJSON()})},postRender:function(){var e=this;e._super(),e.recalcLabels(),e.fromJSON(e.settings.data)}})}),r(At,[Lt],function(e){return e.extend({Defaults:{containerCls:"fieldset",layout:"flex",direction:"column",align:"stretch",flex:1,padding:"25 15 5 15",labelGap:30,spacing:10,border:1},renderHtml:function(){var e=this,t=e._layout,n=e.classPrefix;return e.preRender(),t.preRender(e),'<fieldset id="'+e._id+'" class="'+e.classes()+'" hideFocus="1" tabIndex="-1">'+(e.settings.title?'<legend id="'+e._id+'-title" class="'+n+'fieldset-title">'+e.settings.title+"</legend>":"")+'<div id="'+e._id+'-body" class="'+e.classes("body")+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div>"+"</fieldset>"}})}),r(Ot,[Tt],function(e){return e.extend({init:function(e){var t=this,n=tinymce.activeEditor,r;e.spellcheck=!1,r=n.settings.file_browser_callback,r&&(e.icon="browse",e.onaction=function(){r(t.getEl("inp").id,t.getEl("inp").value,e.filetype,window)}),t._super(e)}})}),r(Mt,[mt],function(e){return e.extend({recalc:function(e){var t=e.layoutRect(),n=e.paddingBox();e.items().filter(":visible").each(function(e){e.layoutRect({x:n.left,y:n.top,w:t.innerW-n.right-n.left,h:t.innerH-n.top-n.bottom}),e.recalc&&e.recalc()})}})}),r(_t,[mt],function(e){return e.extend({recalc:function(e){var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g=[],y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q,R,U=Math.max,z=Math.min;for(r=e.items().filter(":visible"),i=e.layoutRect(),s=e._paddingBox,o=e.settings,h=o.direction,u=o.align,a=o.pack,f=o.spacing||0,("row-reversed"==h||"column-reverse"==h)&&(r=r.set(r.toArray().reverse()),h=h.split("-")[0]),"column"==h?(C="y",T="h",N="minH",k="maxH",A="innerH",L="top",O="bottom",M="deltaH",_="contentH",F="left",H="w",D="x",P="innerW",B="minW",j="maxW",I="right",q="deltaW",R="contentW"):(C="x",T="w",N="minW",k="maxW",A="innerW",L="left",O="right",M="deltaW",_="contentW",F="top",H="h",D="y",P="innerH",B="minH",j="maxH",I="bottom",q="deltaH",R="contentH"),c=i[A]-s[L]-s[L],x=l=0,t=0,n=r.length;n>t;t++)p=r[t],d=p.layoutRect(),v=p.settings,m=v.flex,c-=n-1>t?f:0,m>0&&(l+=m,d[k]&&g.push(p),d.flex=m),c-=d[N],y=s[F]+d[B]+s[I],y>x&&(x=y);if(E={},E[N]=0>c?i[N]-c+i[M]:i[A]-c+i[M],E[B]=x+i[q],E[_]=i[A]-c,E[R]=x,E.minW=z(E.minW,i.maxW),E.minH=z(E.minH,i.maxH),E.minW=U(E.minW,i.startMinWidth),E.minH=U(E.minH,i.startMinHeight),!i.autoResize||E.minW==i.minW&&E.minH==i.minH){for(w=c/l,t=0,n=g.length;n>t;t++)p=g[t],d=p.layoutRect(),b=d[k],y=d[N]+Math.ceil(d.flex*w),y>
b?(c-=d[k]-d[N],l-=d.flex,d.flex=0,d.maxFlexSize=b):d.maxFlexSize=0;for(w=c/l,S=s[L],E={},0===l&&("end"==a?S=c+s[L]:"center"==a?(S=Math.round(i[A]/2-(i[A]-c)/2)+s[L],0>S&&(S=s[L])):"justify"==a&&(S=s[L],f=Math.floor(c/(r.length-1)))),E[D]=s[F],t=0,n=r.length;n>t;t++)p=r[t],d=p.layoutRect(),y=d.maxFlexSize||d[N],"center"===u?E[D]=Math.round(i[P]/2-d[H]/2):"stretch"===u?(E[H]=U(d[B]||0,i[P]-s[F]-s[I]),E[D]=s[F]):"end"===u&&(E[D]=i[P]-d[H]-s.top),d.flex>0&&(y+=Math.ceil(d.flex*w)),E[T]=y,E[C]=S,p.layoutRect(E),p.recalc&&p.recalc(),S+=y+f}else if(E.w=E.minW,E.h=E.minH,e.layoutRect(E),this.recalc(e),null===e._lastRect){var W=e.parent();W&&(W._lastRect=null,W.recalc())}}})}),r(Dt,[vt],function(e){return e.extend({Defaults:{containerClass:"flow-layout",controlClass:"flow-layout-item",endClass:"break"},recalc:function(e){e.items().filter(":visible").each(function(e){e.recalc&&e.recalc()})}})}),r(Pt,[z,U,yt,Q,p,ut,m],function(e,t,n,r,i,s,o){function u(e){function t(e){return e.replace(/%(\w+)/g,"")}var n=s.activeEditor,r,i,o=n.dom,u="",a,f;return f=n.settings.preview_styles,f===!1?"":(f||(f="font-family font-size font-weight text-decoration text-transform color background-color border border-radius"),(e=n.formatter.get(e))?(e=e[0],r=e.block||e.inline||"span",i=o.create(r),l(e.styles,function(e,n){e=t(e),e&&o.setStyle(i,n,e)}),l(e.attributes,function(e,n){e=t(e),e&&o.setAttrib(i,n,e)}),l(e.classes,function(e){e=t(e),o.hasClass(i,e)||o.addClass(i,e)}),n.fire("PreviewFormats"),o.setStyles(i,{position:"absolute",left:-65535}),n.getBody().appendChild(i),a=o.getStyle(n.getBody(),"fontSize",!0),a=/px$/.test(a)?parseInt(a,10):0,l(f.split(" "),function(e){var t=o.getStyle(i,e,!0);if(!("background-color"==e&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(t)&&(t=o.getStyle(n.getBody(),e,!0),"#ffffff"==o.toHex(t).toLowerCase())||"color"==e&&"#000000"==o.toHex(t).toLowerCase())){if("font-size"==e&&/em|%$/.test(t)){if(0===a)return;t=parseFloat(t,10)/(/%$/.test(t)?100:1),t=t*a+"px"}"border"==e&&t&&(u+="padding:0 2px;"),u+=e+":"+t+";"}}),n.fire("AfterPreviewFormats"),o.remove(i),u):void 0)}function a(e,t){return function(){var n=this;s.activeEditor.on("nodeChange",function(r){var i=s.activeEditor.formatter,o=null;l(r.parents,function(n){return l(e,function(e){return t?i.matchNode(n,t,{value:e.value})&&(o=e.value):i.matchNode(n,e.value)&&(o=e.value),o?!1:void 0}),o?!1:void 0}),n.value(o)})}}function f(e){e=e.split(";");for(var t=e.length;t--;)e[t]=e[t].split("=");return e}var l=i.each;t.translate=function(e){return s.translate(e)},n.tooltips=!o.iOS,s.on("AddEditor",function(t){function n(){function e(r){var i=[];if(r)return l(r,function(r){var s={text:r.title,icon:r.icon,preview:!0};if(r.items)s.menu=e(r.items);else{var o=r.format||"custom"+t++;r.format||(r.name=o,n.push(r)),s.textStyle=function(){return u(o)},s.onclick=function(){v(o)},s.onPostRender=function(){var e=this;e.parent().on("show",function(){e.disabled(!m.formatter.canApply(o)),e.active(m.formatter.match(o))})}}i.push(s)}),i}var t=0,n=[],r=[{title:"Headers",items:[{title:"Header 1",format:"h1"},{title:"Header 2",format:"h2"},{title:"Header 3",format:"h3"},{title:"Header 4",format:"h4"},{title:"Header 5",format:"h5"},{title:"Header 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Alignment",items:[{title:"Left",icon:"alignleft",format:"alignleft"},{title:"Center",icon:"aligncenter",format:"aligncenter"},{title:"Right",icon:"alignright",format:"alignright"},{title:"Justify",icon:"alignjustify",format:"alignjustify"}]}];m.on("init",function(){l(n,function(e){m.formatter.register(e.name,e)})});var i=e(m.settings.style_formats||r);return i}function o(){return m.undoManager?m.undoManager.hasUndo():!1}function c(){return m.undoManager?m.undoManager.hasRedo():!1}function h(){var e=this;e.disabled(!o()),m.on("Undo Redo AddUndo TypingUndo",function(){e.disabled(!o())})}function p(){var e=this;e.disabled(!c()),m.on("Undo Redo AddUndo TypingUndo",function(){e.disabled(!c())})}function d(){var e=this;m.on("VisualAid",function(t){e.active(t.hasVisual)}),e.active(m.hasVisual)}function v(e){e.control&&(e=e.control.value()),e&&s.activeEditor.execCommand("mceToggleFormat",!1,e)}var m=t.editor,g;g=n(),l({bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript"},function(e,t){m.addButton(t,{tooltip:e,onPostRender:function(){var e=this;m.formatter?m.formatter.formatChanged(t,function(t){e.active(t)}):m.on("init",function(){m.formatter.formatChanged(t,function(t){e.active(t)})})},onclick:function(){v(t)}})}),l({outdent:["Decrease indent","Outdent"],indent:["Increase indent","Indent"],cut:["Cut","Cut"],copy:["Copy","Copy"],paste:["Paste","Paste"],help:["Help","mceHelp"],selectall:["Select all","SelectAll"],hr:["Insert horizontal rule","InsertHorizontalRule"],removeformat:["Clear formatting","RemoveFormat"],visualaid:["Visual aids","mceToggleVisualAid"],newdocument:["New document","mceNewDocument"]},function(e,t){m.addButton(t,{tooltip:e[0],cmd:e[1]})}),l({blockquote:["Toggle blockquote","mceBlockQuote"],numlist:["Numbered list","InsertOrderedList"],bullist:["Bulleted list","InsertUnorderedList"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],alignleft:["Align left","JustifyLeft"],aligncenter:["Align center","JustifyCenter"],alignright:["Align right","JustifyRight"],alignjustify:["Justify","JustifyFull"]},function(e,t){m.addButton(t,{tooltip:e[0],cmd:e[1],onPostRender:function(){var e=this;m.formatter?m.formatter.formatChanged(t,function(t){e.active(t)}):m.on("init",function(){m.formatter.formatChanged(t,function(t){e.active(t)})})}})}),m.addButton("undo",{tooltip:"Undo",onPostRender:h,cmd:"undo"}),m.addButton("redo",{tooltip:"Redo",onPostRender:p,cmd:"redo"}),m.addMenuItem("newdocument",{text:"New document",shortcut:"Ctrl+N",icon:"newdocument",cmd:"mceNewDocument"}),m.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Ctrl+Z",onPostRender:h,cmd:"undo"}),m.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Ctrl+Y",onPostRender:p,cmd:"redo"}),m.addMenuItem("visualaid",{text:"Visual aids",selectable:!0,onPostRender:d,cmd:"mceToggleVisualAid"}),l({cut:["Cut","Cut","Ctrl+X"],copy:["Copy","Copy","Ctrl+C"],paste:["Paste","Paste","Ctrl+V"],selectall:["Select all","SelectAll","Ctrl+A"],bold:["Bold","Bold","Ctrl+B"],italic:["Italic","Italic","Ctrl+I"],underline:["Underline","Underline"],strikethrough:["Strikethrough","Strikethrough"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],removeformat:["Clear formatting","RemoveFormat"]},function(e,t){m.addMenuItem(t,{text:e[0],icon:t,shortcut:e[2],cmd:e[1]})}),m.on("mousedown",function(){r.hideAll()}),e.add("styleselect",function(t){var n=[].concat(g);return e.create("menubutton",i.extend({text:"Formats",menu:n},t))}),e.add("formatselect",function(t){var n=[],r=f(m.settings.block_formats||"Paragraph=p;Address=address;Pre=pre;Header 1=h1;Header 2=h2;Header 3=h3;Header 4=h4;Header 5=h5;Header 6=h6");return l(r,function(e){n.push({text:{raw:e[0]},value:e[1],textStyle:function(){return u(e[1])}})}),e.create("listbox",i.extend({text:{raw:r[0][0]},values:n,fixedWidth:!0,onselect:v,onPostRender:a(n)},t))}),e.add("fontselect",function(t){var n="Andale Mono=andale mono,times;Arial=arial,helvetica,sans-serif;Arial Black=arial black,avant garde;Book Antiqua=book antiqua,palatino;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier;Georgia=georgia,palatino;Helvetica=helvetica;Impact=impact,chicago;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco;Times New Roman=times new roman,times;Trebuchet MS=trebuchet ms,geneva;Verdana=verdana,geneva;Webdings=webdings;Wingdings=wingdings,zapf dingbats",r=[],o=f(m.settings.font_formats||n);return l(o,function(e){r.push({text:{raw:e[0]},value:e[1],textStyle:-1==e[1].indexOf("dings")?"font-family:"+e[1]:""})}),e.create("listbox",i.extend({text:"Font Family",tooltip:"Font Family",values:r,fixedWidth:!0,onPostRender:a(r,"fontname"),onselect:function(e){e.control.settings.value&&s.activeEditor.execCommand("FontName",!1,e.control.settings.value)}},t))}),e.add("fontsizeselect",function(t){var n=[],r="8pt 10pt 12pt 14pt 18pt 24pt 36pt",o=m.settings.fontsize_formats||r;return l(o.split(" "),function(e){n.push({text:e,value:e})}),e.create("listbox",i.extend({text:"Font Sizes",tooltip:"Font Sizes",values:n,fixedWidth:!0,onPostRender:a(n,"fontsize"),onclick:function(e){e.control.settings.value&&s.activeEditor.execCommand("FontSize",!1,e.control.settings.value)}},t))}),m.addMenuItem("formats",{text:"Formats",menu:g})})}),r(Ht,[mt],function(e){return e.extend({recalc:function(e){var t=e.settings,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T=[],N=[],C,k,L,A,O,M;for(t=e.settings,i=e.items().filter(":visible"),s=e.layoutRect(),r=t.columns||Math.ceil(Math.sqrt(i.length)),n=Math.ceil(i.length/r),y=t.spacingH||t.spacing||0,b=t.spacingV||t.spacing||0,w=t.alignH||t.align,E=t.alignV||t.align,m=e._paddingBox,w&&"string"==typeof w&&(w=[w]),E&&"string"==typeof E&&(E=[E]),c=0;r>c;c++)T.push(0);for(h=0;n>h;h++)N.push(0);for(h=0;n>h;h++)for(c=0;r>c&&(l=i[h*r+c],l);c++)f=l.layoutRect(),C=f.minW,k=f.minH,T[c]=C>T[c]?C:T[c],N[h]=k>N[h]?k:N[h];for(O=s.innerW-m.left-m.right,S=0,c=0;r>c;c++)S+=T[c]+(c>0?y:0),O-=(c>0?y:0)+T[c];for(M=s.innerH-m.top-m.bottom,x=0,h=0;n>h;h++)x+=N[h]+(h>0?b:0),M-=(h>0?b:0)+N[h];if(S+=m.left+m.right,x+=m.top+m.bottom,a={},a.minW=S+(s.w-s.innerW),a.minH=x+(s.h-s.innerH),a.contentW=a.minW-s.deltaW,a.contentH=a.minH-s.deltaH,a.minW=Math.min(a.minW,s.maxW),a.minH=Math.min(a.minH,s.maxH),a.minW=Math.max(a.minW,s.startMinWidth),a.minH=Math.max(a.minH,s.startMinHeight),!s.autoResize||a.minW==s.minW&&a.minH==s.minH){s.autoResize&&(a=e.layoutRect(a),a.contentW=a.minW-s.deltaW,a.contentH=a.minH-s.deltaH);var _;_="start"==t.packV?0:M>0?Math.floor(M/n):0;var D=0,P=t.flexWidths;if(P)for(c=0;c<P.length;c++)D+=P[c];else D=r;var H=O/D;for(c=0;r>c;c++)T[c]+=P?Math.ceil(P[c]*H):H;for(d=m.top,h=0;n>h;h++){for(p=m.left,u=N[h]+_,c=0;r>c&&(l=i[h*r+c],l);c++)v=l.settings,f=l.layoutRect(),o=T[c],L=A=0,f.x=p,f.y=d,g=v.alignH||(w?w[c]||w[0]:null),"center"==g?f.x=p+o/2-f.w/2:"right"==g?f.x=p+o-f.w:"stretch"==g&&(f.w=o),g=v.alignV||(E?E[c]||E[0]:null),"center"==g?f.y=d+u/2-f.h/2:"bottom"==g?f.y=d+u-f.h:"stretch"==g&&(f.h=u),l.layoutRect(f),p+=o+y,l.recalc&&l.recalc();d+=u+b}}else if(a.w=a.minW,a.h=a.minH,e.layoutRect(a),this.recalc(e),null===e._lastRect){var B=e.parent();B&&(B._lastRect=null,B.recalc())}}})}),r(Bt,[yt],function(e){return e.extend({renderHtml:function(){var e=this;return e.addClass("iframe"),e.canFocus=!1,'<iframe id="'+e._id+'" class="'+e.classes()+'" tabindex="-1" src="'+(e.settings.url||"javascript:''")+'" frameborder="0"></iframe>'},src:function(e){this.getEl().src=e},html:function(e){return this.getEl().contentWindow.document.body.innerHTML=e,this}})}),r(jt,[yt],function(e){return e.extend({init:function(e){var t=this;t._super(e),t.addClass("widget"),t.addClass("label"),t.canFocus=!1,e.multiline&&t.addClass("autoscroll"),e.strong&&t.addClass("strong")},initLayoutRect:function(){var e=this,t=e._super();return e.settings.multiline&&(e.getEl().offsetWidth>t.maxW&&(t.minW=t.maxW,e.addClass("multiline")),e.getEl().style.width=t.minW+"px",t.startMinH=t.h=t.minH=Math.min(t.maxH,e.getEl().offsetHeight)),t},disabled:function(e){var t=this,n;return e!==n&&(t.toggleClass("label-disabled",e),t._rendered&&(t.getEl()[0].className=t.classes())),t._super(e)},repaint:function(){var e=this;return e.settings.multiline||(e.getEl().style.lineHeight=e.layoutRect().h+"px"),e._super()},text:function(e){var t=this;return t._rendered&&e&&(t.getEl().innerHTML=t.encode(e)),t._super(e)},renderHtml:function(){var e=this,t=e.settings.forId;return'<label id="'+e._id+'" class="'+e.classes()+'"'+(t?' for="'+t:"")+'">'+e.encode(e._text)+"</label>"}})}),r(Ft,[W,G],function(e,t){return e.extend({Defaults:{role:"toolbar",layout:"flow"},init:function(e){var t=this;t._super(e),t.addClass("toolbar")},postRender:function(){var e=this;return e.items().addClass("toolbar-item"),e.keyNav=new t({root:e,enableLeftRight:!0}),e._super()}})}),r(It,[Ft],function(e){return e.extend({Defaults:{role:"menubar",containerCls:"menubar",defaults:{type:"menubutton"}}})}),r(qt,[bt,z,It],function(e,t,n){function r(e,t){for(;e;){if(t===e)return!0;e=e.parentNode}return!1}var i=e.extend({init:function(e){var t=this;t._renderOpen=!0,t._super(e),t.addClass("menubtn"),e.fixedWidth&&t.addClass("fixed-width"),t.aria("haspopup",!0),t.hasPopup=!0},showMenu:function(){var e=this,n=e.settings,r;return e.menu&&e.menu.visible()?e.hideMenu():(e.menu||(r=n.menu||[],r.length?r={type:"menu",items:r}:r.type=r.type||"menu",e.menu=t.create(r).parent(e).renderTo(e.getContainerElm()),e.fire("createmenu"),e.menu.reflow(),e.menu.on("cancel",function(t){t.control===e.menu&&e.focus()}),e.menu.on("show hide",function(t){t.control==e.menu&&e.activeMenu("show"==t.type)}).fire("show"),e.aria("expanded",!0)),e.menu.show(),e.menu.layoutRect({w:e.layoutRect().w}),e.menu.moveRel(e.getEl(),["bl-tl","tl-bl"]),void 0)},hideMenu:function(){var e=this;e.menu&&(e.menu.items().each(function(e){e.hideMenu&&e.hideMenu()}),e.menu.hide(),e.aria("expanded",!1))},activeMenu:function(e){this.toggleClass("active",e)},renderHtml:function(){var e=this,t=e._id,r=e.classPrefix,i=e.settings.icon?r+"ico "+r+"i-"+e.settings.icon:"";return e.aria("role",e.parent()instanceof n?"menuitem":"button"),'<div id="'+t+'" class="'+e.classes()+'" tabindex="-1">'+'<button id="'+t+'-open" role="presentation" type="button" tabindex="-1">'+(i?'<i class="'+i+'"></i>':"")+"<span>"+(e._text?(i?" ":"")+e.encode(e._text):"")+"</span>"+' <i class="'+r+'caret"></i>'+"</button>"+"</div>"},postRender:function(){var e=this;return e.on("click",function(t){t.control===e&&r(t.target,e.getEl())&&(e.showMenu(),t.keyboard&&e.menu.items()[0].focus())}),e.on("mouseenter",function(t){var n=t.control,r=e.parent(),s;n&&r&&n instanceof i&&n.parent()==r&&(r.items().filter("MenuButton").each(function(e){e.hideMenu&&e!=n&&(e.menu&&e.menu.visible()&&(s=!0),e.hideMenu())}),s&&n.showMenu())}),e._super()},text:function(e){var t=this,n,r;if(t._rendered)for(r=t.getEl("open").getElementsByTagName("span"),n=0;n<r.length;n++)r[n].innerHTML=t.encode(e);return this._super(e)},remove:function(){this._super(),this.menu&&this.menu.remove()}});return i}),r(Rt,[qt],function(e){return e.extend({init:function(e){var t=this,n,r,i,s,o;if(t._values=n=e.values,n){for(r=0;r<n.length;r++)i=n[r].selected||e.value===n[r].value,i&&(s=s||n[r].text,t._value=n[r].value);e.menu=n}e.text=e.text||s||n[0].text,t._super(e),t.addClass("listbox"),t.on("select",function(n){var r=n.control;o&&(n.lastControl=o),e.multiple?r.active(!r.active()):t.value(n.control.settings.value),o=r})},value:function(e){function t(e,n){e.items().each(function(e){r=e.value()===n,r&&(i=i||e.text()),e.active(r),e.menu&&t(e.menu,n)})}var n=this,r,i,s,o;if("undefined"!=typeof e){if(n.menu)t(n.menu,e);else for(s=n.settings.menu,o=0;o<s.length;o++)r=s[o].value==e,r&&(i=i||s[o].text),s[o].active=r;n.text(i||this.settings.text)}return n._super(e)}})}),r(Ut,[yt,z],function(e,t){return e.extend({Defaults:{border:0,role:"menuitem"},init:function(e){var t=this;t.hasPopup=!0,t._super(e),e=t.settings,t.addClass("menu-item"),e.menu&&t.addClass("menu-item-expand"),e.preview&&t.addClass("menu-item-preview"),("-"===t._text||"|"===t._text)&&(t.addClass("menu-item-sep"),t.aria("role","separator"),t.canFocus=!1,t._text="-"),e.selectable&&(t.aria("role","menuitemcheckbox"),t.aria("checked",!0),t.addClass("menu-item-checkbox"),e.icon="selected"),t.on("mousedown",function(e){e.preventDefault()}),t.on("mouseenter click",function(n){n.control===t&&(e.menu||"click"!==n.type?(t.showMenu(),n.keyboard&&setTimeout(function(){t.menu.items()[0].focus()},0)):(t.parent().hideAll(),t.fire("cancel"),t.fire("select")))}),e.menu&&t.aria("haspopup",!0)},hasMenus:function(){return!!this.settings.menu},showMenu:function(){var e=this,n=e.settings,r;if(e.parent().items().each(function(t){t!==e&&t.hideMenu()}),n.menu){r=e.menu,r?r.show():(r=n.menu,r.length?r={type:"menu",items:r}:r.type=r.type||"menu",r=e.menu=t.create(r).parent(e).renderTo(e.getContainerElm()),r.reflow(),r.fire("show"),r.on("cancel",function(){e.focus()}),r.on("hide",function(t){t.control===r&&e.removeClass("selected")})),r._parentMenu=e.parent(),r.addClass("menu-sub");var i=r.testMoveRel(e.getEl(),["tr-tl","br-bl","tl-tr","bl-br"]);r.moveRel(e.getEl(),i),i="menu-sub-"+i,r.removeClass(r._lastRel),r.addClass(i),r._lastRel=i,e.addClass("selected"),e.aria("expanded",!0)}},hideMenu:function(){var e=this;return e.menu&&(e.menu.items().each(function(e){e.hideMenu&&e.hideMenu()}),e.menu.hide(),e.aria("expanded",!1)),e},renderHtml:function(){var e=this,t=e._id,n=e.settings,r=e.classPrefix,i=e.encode(e._text),s=e.settings.icon;return s&&e.parent().addClass("menu-has-icons"),s=r+"ico "+r+"i-"+(e.settings.icon||"none"),'<div id="'+t+'" class="'+e.classes()+'" tabindex="-1">'+("-"!==i?'<i class="'+s+'"></i>&nbsp;':"")+("-"!==i?'<span id="'+t+'-text" class="'+r+'text">'+i+"</span>":"")+(n.shortcut?'<div id="'+t+'-shortcut" class="'+r+'menu-shortcut">'+n.shortcut+"</div>":"")+(n.menu?'<div class="'+r+'caret"></div>':"")+"</div>"},postRender:function(){var e=this,t=e.settings,n=t.textStyle;if("function"==typeof n&&(n=n()),n){var r=e.getEl("text");r&&r.setAttribute("style",n)}return e._super()},remove:function(){this._super(),this.menu&&this.menu.remove()}})}),r(zt,[Q,G,Ut],function(e,t,n){var r=e.extend({Defaults:{defaultType:"menuitem",border:1,layout:"stack",role:"menu"},init:function(e){var r=this;e.autohide=!0,e.constrainToViewport=!0,r._super(e),r.addClass("menu"),r.keyNav=new t({root:r,enableUpDown:!0,enableLeftRight:!0,leftAction:function(){r.parent()instanceof n&&r.keyNav.cancel()},onCancel:function(){r.fire("cancel",{},!1),r.hide()}})},repaint:function(){return this.toggleClass("menu-align",!0),this._super(),this.getEl().style.height="",this.getEl("body").style.height="",this},cancel:function(){var e=this;e.hideAll(),e.fire("cancel"),e.fire("select")},hideAll:function(){var e=this;return this.find("menuitem").exec("hideMenu"),e._super()},preRender:function(){var e=this;return e.items().each(function(t){var n=t.settings;return n.icon||n.selectable?(e._hasIcons=!0,!1):void 0}),e._super()}});return r}),r(Wt,[Et],function(e){return e.extend({Defaults:{classes:"radio",role:"radio"}})}),r(Xt,[yt,X],function(e,t){return e.extend({renderHtml:function(){var e=this,t=e.classPrefix;return e.addClass("resizehandle"),"both"==e.settings.direction&&e.addClass("resizehandle-both"),e.canFocus=!1,'<div id="'+e._id+'" class="'+e.classes()+'">'+'<i class="'+t+"ico "+t+'i-resize"></i>'+"</div>"},postRender:function(){var e=this;e._super(),e.resizeDragHelper=new t(this._id,{start:function(){e.fire("ResizeStart")},drag:function(t){"both"!=e.settings.direction&&(t.deltaX=0),e.fire("Resize",t)},end:function(){e.fire("ResizeEnd")}})}})}),r(Vt,[yt],function(e){return e.extend({renderHtml:function(){var e=this;return e.addClass("spacer"),e.canFocus=!1,'<div id="'+e._id+'" class="'+e.classes()+'"></div>'}})}),r($t,[qt,g],function(e,t){var n=t.DOM;return e.extend({Defaults:{classes:"widget btn splitbtn",role:"splitbutton"},repaint:function(){var e=this,t=e.getEl(),r=e.layoutRect(),i,s,o;return e._super(),i=t.firstChild,s=t.lastChild,n.css(i,{width:r.w-s.offsetWidth,height:r.h-2}),n.css(s,{height:r.h-2}),o=i.firstChild.style,o.width=o.height="100%",o=s.firstChild.style,o.width=o.height="100%",e},activeMenu:function(e){var t=this;n.toggleClass(t.getEl().lastChild,t.classPrefix+"active",e)},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix,r=e.settings.icon?n+"ico "+n+"i-"+e.settings.icon:"";return'<div id="'+t+'" class="'+e.classes()+'">'+'<button type="button" hidefocus tabindex="-1">'+(r?'<i class="'+r+'"></i>':"")+(e._text?(r?" ":"")+e._text:"")+"</button>"+'<button type="button" class="'+n+'open" hidefocus tabindex="-1">'+(e._menuBtnText?(r?" ":"")+e._menuBtnText:"")+' <i class="'+n+'caret"></i>'+"</button>"+"</div>"},postRender:function(){var e=this,t=e.settings.onclick;return e.on("click",function(e){e.control!=this||n.getParent(e.target,"."+this.classPrefix+"open")||(e.stopImmediatePropagation(),t.call(this,e))}),delete e.settings.onclick,e._super()}})}),r(Jt,[Dt],function(e){return e.extend({Defaults:{containerClass:"stack-layout",controlClass:"stack-layout-item",endClass:"break"}})}),r(Kt,[$,R],function(e,t){"use stict";return e.extend({lastIdx:0,Defaults:{layout:"absolute",defaults:{type:"panel"}},activateTab:function(e){this.activeTabId&&t.removeClass(this.getEl(this.activeTabId),this.classPrefix+"active"),this.activeTabId="t"+e,t.addClass(this.getEl("t"+e),this.classPrefix+"active"),e!=this.lastIdx&&(this.items()[this.lastIdx].hide(),this.lastIdx=e),this.items()[e].show().fire("showtab"),this.reflow()},renderHtml:function(){var e=this,t=e._layout,n="",r=e.classPrefix;return e.preRender(),t.preRender(e),e.items().each(function(t,i){n+='<div id="'+e._id+"-t"+i+'" class="'+r+'tab" unselectable="on">'+e.encode(t.settings.title)+"</div>"}),'<div id="'+e._id+'" class="'+e.classes()+'" hideFocus="1" tabIndex="-1">'+'<div id="'+e._id+'-head" class="'+r+'tabs">'+n+"</div>"+'<div id="'+e._id+'-body" class="'+e.classes("body")+'">'+t.renderHtml(e)+"</div>"+"</div>"},postRender:function(){var e=this;e._super(),e.settings.activeTab=e.settings.activeTab||0,e.activateTab(e.settings.activeTab),this.on("click",function(t){var n=t.target.parentNode;if(t.target.parentNode.id==e._id+"-head")for(var r=n.childNodes.length;r--;)n.childNodes[r]==t.target&&e.activateTab(r)})},initLayoutRect:function(){var e=this,t,n,r;n=r=0,e.items().each(function(t,i){n=Math.max(n,t.layoutRect().minW),r=Math.max(r,t.layoutRect().minH),e.settings.activeTab!=i&&t.hide()}),e.items().each(function(e){e.settings.x=0,e.settings.y=0,e.settings.w=n,e.settings.h=r,e.layoutRect({x:0,y:0,w:n,h:r})});var i=e.getEl("head").offsetHeight;return e.settings.minWidth=n,e.settings.minHeight=r+i,t=e._super(),t.deltaH+=e.getEl("head").offsetHeight,t.innerH=t.h-t.deltaH,t}})}),r(Qt,[yt,R],function(e,t){return e.extend({init:function(e){var t=this;t._super(e),t._value=e.value||"",t.addClass("textbox"),e.multiline?t.addClass("multiline"):t.on("keydown",function(e){13==e.keyCode&&t.parents().reverse().each(function(t){return e.preventDefault(),t.submit?(t.submit(),!1):void 0})})},value:function(e){var t=this;return"undefined"!=typeof e?(t._value=e,t._rendered&&(t.getEl().value=e),t):t._rendered?t.getEl().value:t._value},repaint:function(){var e=this,t,n,r,i=0,s=0,o;t=e.getEl().style,n=e._layoutRect,o=e._lastRepaintRect||{};var u=document;return!e.settings.multiline&&u.all&&(!u.documentMode||u.documentMode<=8)&&(t.lineHeight=n.h-s+"px"),r=e._borderBox,i=r.left+r.right+8,s=r.top+r.bottom+(e.settings.multiline?8:0),n.x!==o.x&&(t.left=n.x+"px",o.x=n.x),n.y!==o.y&&(t.top=n.y+"px",o.y=n.y),n.w!==o.w&&(t.width=n.w-i+"px",o.w=n.w),n.h!==o.h&&(t.height=n.h-s+"px",o.h=n.h),e._lastRepaintRect=o,e.fire("repaint",{},!1),e},renderHtml:function(){var e=this,t=e._id,n=e.settings,r=e.encode(e._value,!1),i="";return"spellcheck"in n&&(i+=' spellcheck="'+n.spellcheck+'"'),n.maxLength&&(i+=' maxlength="'+n.maxLength+'"'),n.size&&(i+=' size="'+n.size+'"'),n.subtype&&(i+=' type="'+n.subtype+'"'),n.multiline?'<textarea id="'+t+'" class="'+e.classes()+'" '+(n.rows?' rows="'+n.rows+'"':"")+' hidefocus="true"'+i+">"+r+"</textarea>":'<input id="'+t+'" class="'+e.classes()+'" value="'+r+'" hidefocus="true"'+i+">"},postRender:function(){var e=this;return t.on(e.getEl(),"change",function(t){e.fire("change",t)}),e._super()}})}),r(Gt,[R],function(e){return function(t){var n=this,r;n.show=function(i){return n.hide(),r=!0,window.setTimeout(function(){r&&t.appendChild(e.createFragment('<div class="mce-throbber"></div>'))},i||0),n},n.hide=function(){var e=t.lastChild;return e&&-1!=e.className.indexOf("throbber")&&e.parentNode.removeChild(e),r=!1,n}}}),o([a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q,R,U,z,W,X,V,$,J,K,Q,G,Y,Z,et,tt,nt,rt,it,st,ot,ut,at,ft,lt,ct,ht,pt,dt,vt,mt,gt,yt,bt,wt,Et,St,xt,Tt,Nt,Ct,kt,Lt,At,Ot,Mt,_t,Dt,Pt,Ht,Bt,jt,Ft,It,qt,Rt,Ut,zt,Wt,Xt,Vt,$t,Jt,Kt,Qt,Gt])}(this),function(){$(function(){return _.templateSettings={interpolate:/\{\{(.+?)\}\}/g}}),$(".with_tooltip").livequery(function(){return $(".with_tooltip").tooltip({animation:!1})}),$(document).on("page:load ready",function(){return $(".top-settings").clickover({animation:!1,tip_id:function(){return"settings_content"},content:function(){return $(".top-settings-popup").html()}}),$(".notification_center").clickover({animation:!1,tip_id:function(){return"notifications_content"},content:function(){return $(".notifications-popup").html()},onShown:function(){return $.get("/notifications/summary",function(e){var t;return t=$(".notifications-content"),t.html(e),GoldenData.checkDisplayNotification(),$("#unread_count").remove()})}})}),$(document).on("page:load",function(){if(document.cookie.indexOf("auth_token")===-1)return window.location.reload()}),window.GoldenData||(window.GoldenData={}),GoldenData.hideTooltip=function(){return $(".with_tooltip").tooltip("hide")},GoldenData.initializeZoom=function(e,t){var n,r,i;return n={onZoomIn:$.noop,onZoomOut:$.noop},i=$.extend(n,t),r=function(){var e,t;return e=$(document).height(),t=$(window).height(),Math.max(t,e)},$(document).off("click.zoom",""+e+" .zoom a").on("click.zoom",""+e+" .zoom a",function(){var t,n;return t=$(e),t.find(".with_tooltip").tooltip("hide"),t.hasClass("fullscreen")?(i.onZoomOut(),$(window).off("resize.zoom"),$(document).off("keyup.zoom")):(n=r(),i.onZoomIn(n),$(window).on("resize.zoom",function(){return i.onZoomIn(Math.max(n,$(window).height()))}),$(document).on("keyup.zoom",function(e){if(e.which===27)return t.find(".zoom .zoom-out").click()})),$(document).scrollTop(0),t.toggleClass("fullscreen"),t.find(".zoom > a").toggleClass("hide")})},$(document).on("click","a[data-disabled-with]",function(){return $(this).data("enabled-with",$(this).html()),$(this).html($(this).data("disabled-with")),$(this).addClass("disabled")}),$(document).on("click","a.disabled, a.prevent-default",function(e){return e.preventDefault()}),GoldenData.checkDisplayNotification=function(){var e;e=$(".notifications-content ul");if(e.find("li").length===0)return e.append("<li class='no-notification'>暂无消息</li>")},GoldenData.accordionOpen=function(e){var t,n;return t=$(e).parents(".accordion"),t.find(".accordion-heading").removeClass("active"),t.find(".accordion-body").removeClass("in"),n=$(e).parents(".accordion-group"),n.find(".accordion-heading").addClass("active"),n.find(".accordion-body").addClass("in").trigger("show")},GoldenData.validateFile=function(e,t,n){var r;return r=[],n.test(e.name)||r.push("文件格式有误"),e.size>t&&r.push("文件大小超过了"+t/1e6+"MB"),r},GoldenData.validateURL=function(e){var t;return $.trim(e)?(t=/^(https:\/\/|http:\/\/)?(((([a-zA-Z]|\d|-|\.|_|~)|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-zA-Z]|\d)|(([a-zA-Z]|\d)([a-zA-Z]|\d|-|\.|_|~)*([a-zA-Z]|\d)))\.)+(([a-zA-Z])|(([a-zA-Z])([a-zA-Z]|\d|-|\.|_|~)*([a-zA-Z])))\.?)(:\d*)?)(\/((([a-zA-Z]|\d|-|\.|_|~)|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-zA-Z]|\d|-|\.|_|~)|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-zA-Z]|\d|-|\.|_|~)|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?(\#((([a-zA-Z]|\d|-|\.|_|~)|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/,t.test($.trim(e))):!0},GoldenData.focusToEnd=function(e){var t;return t=e.val(),t!==""&&!/\n$/.test(t)&&(t=""+t+"\n"),e.focus().val("").val(t)},GoldenData.formatDate=function(e){var t,n,r,i,s;return _.isDate(e)?(s=e.getFullYear(),r=e.getMonth()+1,i=e.getDate(),n=r<10?"0"+r:r.toString(),t=i<10?"0"+i:i.toString(),""+s+"-"+n+"-"+t):e},GoldenData.parseDate=function(e){var t,n;t=new Date;switch(e){case"":return null;case"today":return t;case"yesterday":return t.setDate(t.getDate()-1),t;case"tomorrow":return t.setDate(t.getDate()+1),t;default:return n=e.split("-"),new Date(n[0],n[1]-1,n[2])}},GoldenData.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},GoldenData.extractExistedQueryParams=function(){var e;return e={},!url("?order")||(e.order=url("?order")),!$(".more-functions").data("allown-multi")&&!0?e:(!url("?query")||(e.query=decodeURIComponent(url("?query"))),!url("?start")||(e.start=url("?start")),!url("?end")||(e.end=url("?start")),$.isEmptyObject(GoldenData.filterParams.data)||(e=$.extend(e,GoldenData.filterParams.data)),e)},GoldenData.formatNumberWithTwoDigits=function(e){return""+(e<10?"0":"")+e},GoldenData.adjustViewPosition=function(e,t){var n,r,i,s,o,u;u=$(""+t+" .editing:visible");if(u.length>0)return s=$(e).parents(".accordion"),o=$(t).offset().top+s.find(".accordion-heading").outerHeight()*2,n=u.offset().top-o-3,n<0&&(n=0),s.animate({marginTop:n},300),i=u.offset().top-$(t).offset().top+u.outerHeight()/2,r=$(".sidebar").find(".arrow-left-inner, .arrow-left-outer"),r.animate({marginTop:i},300,function(){return r.show()})},GoldenData.initTinyMCE=function(e){if(typeof tinymce!="undefined"&&tinymce!==null)return tinymce.init({selector:e,menubar:!1,statusbar:!1,language:"zh_CN",toolbar:"bold italic underline | bullist numlist | forecolor backcolor | link unlink | removeformat",plugins:"textcolor link autoresize paste",invalid_elements:"script",autoresize_min_height:100,force_p_newlines:!1,relative_urls:!1,remove_script_host:!1,content_css:"css/content.css",setup:function(t){return t.on("change",function(){return $(e).val(this.getContent()).change()})}})},$(document).on("page:load ready",function(){return $("input, textarea").placeholder()}),GoldenData.resetButtonPosition=function(e){var t,n,r,i;t=$(e);if(t.length===0)return;return $(document).height()<=$(window).height()?t.removeClass("fixed"):(n=$(window).height()-t.outerHeight(),r=t.prev(":visible"),i=(r.offset()?r.offset().top:0)+r.outerHeight()+parseFloat(r.css("marginBottom")),i>n+$(window).scrollTop()?t.addClass("fixed"):t.removeClass("fixed"))},GoldenData.bindKeyNav=function(e){return e==null&&(e=null),$(document).one("page:fetch",function(){return $(document).off("keydown.nav")}),$(document).on("keydown.nav",function(t){var n,r;r=e?$(e).find(".nav-arrows a"):$(".nav-arrows a");if(r.length===2){n=function(){switch(t.keyCode){case 37:return r.first();case 39:return r.last();default:return null}}();if(n&&n.is(":not(.disabled)"))return Turbolinks.visit(n.attr("href"))}})},$(document).on("click",".pro1-feature, .vip-feature",function(){return _gaq.push(["_trackEvent","User","ClickVIP"])}),$(document).on("click",".ent1-feature",function(){return _gaq.push(["_trackEvent","User","ClickEnt1"])}),$(document).on("mouseover",".tooltip-help",function(){return $(this).tooltip({animation:!1}).tooltip("show")}),$(document).on("mouseleaave",".tooltip-help",function(){return $(this).tooltip("hide")}),$(document).on("click","[data-upgrade-modal]",function(e){if($(this).data("upgrade-modal"))return $("#"+$(this).data("upgrade-modal")).modal("show"),!1})}.call(this),function(){window.GoldenData||(window.GoldenData={}),$(function(){var e;return GoldenData.showInlineErrorIfHave=function(e,t){if(t)return e.addClass("error"),e.parent().append(" <span class='error-message'>"+t+"</span>")},GoldenData.generateFormString=function(e){return JSON.stringify(e.fieldList.toJSON())+e.get("name")+e.get("description")},GoldenData.updateChoice=function(e,t){var n,r,i,s;return i=$(e.target),i.find("+ .error-message").remove(),r={},n=i.data("field-key"),s=!0,i.attr("type")==="checkbox"||i.attr("type")==="radio"?(r[n]=i.is(":checked"),s=!1):r[n]=i.val(),t.set(r,{validate:s}),GoldenData.showInlineErrorIfHave(i,t.validationError)},e=Backbone.View.extend({el:"#form_header .legend",events:{click:"edit","change [data-field-key]":"update"},render:function(){var e;if(this.currentStatus==="show")return;return e=_.template($("#form_show_template").html()),this.$el.html(e(this.model.toJSON())),this.currentStatus="show"},renderEdit:function(){var e,t;if(this.currentStatus==="edit"
)return;return t=_.template($("#form_edit_template").html()),e=$.trim(t(this.model.toJSON(!1))),this.$el.html(e),this.$("input").placeholder(),this.currentStatus="edit",delay(1,function(){return GoldenData.initTinyMCE("#form_description")})},edit:function(){if(this.$el.hasClass("editing"))return;return $("#form_preview .editing").removeClass("editing"),this.$el.addClass("editing"),this.renderEdit(),GoldenData.fieldEditView.adjustPosition(),$(".sidebar").hide()},update:function(e){var t,n,r;return r=$(e.target),r.removeClass("error"),r.next(".error-message").remove(),t={},t[r.data("field-key")]=r.val(),this.model.set(t,{validate:!0}),n=$(r.closest(".legend").find("#form_name")),GoldenData.showInlineErrorIfHave(n,this.model.validationError)}}),GoldenData.Form=Backbone.Model.extend({defaults:{name:"",description:""},_initSortableFields:function(){return this.sortableFields=$("#form_preview .fields").sortable({items:"> .field",handle:".sort",forcePlaceholderSize:!0,scroll:!0,placeholder:"sortable-placeholder",axis:"y",update:function(e,t){var n,r,i,s,o;r=$.map($(this).find(".field"),function(e){return $(e).data("cid")});for(i=s=0,o=r.length;s<o;i=++s)n=r[i],GoldenData.fieldList.get(n).set({position:i+1},{silent:!0});return GoldenData.fieldList.sort(),GoldenData.fieldEditView.adjustPosition()}})},_doSomethingWhenNoField:function(){if(this.fieldList.length===0)return $("#form_preview .no-field-alert").show(),$("#field_settings").parents(".accordion-group").css("visibility","hidden")},initialize:function(t,n){var r=this;return this.urlRoot=n.urlRoot,this.groupId=n.groupId,this.headerView=new e({model:this}),this.headerView.render(),GoldenData.fieldList=new GoldenData.FieldList,GoldenData.fieldEditView=new GoldenData.FieldEditView,$("#form_preview .fields .field").remove(),GoldenData.fieldList.on("add",function(e,t){var n,r;n=t.indexOf(e),$("#form_preview .no-field-alert").hide(),$("#field_settings").parents(".accordion-group").css("visibility","visible"),r=new GoldenData.FieldShowView({model:e}),$("#form_preview .fields .field").length===0?$("#form_preview .fields").append(r.render().el):$("#form_preview .fields .field:nth-child("+n+")").after(r.render().el);if(!e.get("_id"))return r.$("label.control-label").trigger("click")}),GoldenData.fieldList.on("remove",function(e){return e.trigger("remove"),GoldenData.fieldEditView.model===e&&($(".sidebar").hide(),GoldenData.fieldEditView.$el.empty()),r._doSomethingWhenNoField()}),_(this.get("ordered_fields")).each(function(e){return GoldenData.fieldList.add(e)}),this.unset("ordered_fields",{silent:!0}),this.fieldList=GoldenData.fieldList,GoldenData.formStringOrigin=GoldenData.generateFormString(this),this._initSortableFields(),this._doSomethingWhenNoField()},validate:function(e){if($.trim(e.name)==="")return"表单名称不能为空"},toJSON:function(e){var t;return e==null&&(e=!0),t=_.clone(this.attributes),e&&$.trim(t.name)===""&&(t.name="未命名表单"),t},add:function(e){return this.fieldList.add(e)},remove:function(e){return this.fieldList.remove(e)},duplicate:function(e){var t,n;return t=_.omit(e.attributes,["_id","api_code","has_data"]),n=this.fieldList.indexOf(e)+1,this.fieldList.add(t,{at:n})},_enable_save_button:function(e){return $(e).html($(e).data("enabled-with")),$(e).removeClass("disabled")},saveAll:function(e){var t,n,r=this;return e==null&&(e=!0),$(".fields .error-message").empty(),n=this.isNew(),_.each(this.fieldList.models,function(e,t,n){if(e.has("errorMessage"))return e.unset("errorMessage",{silent:!0})}),t={fields:this.fieldList.toJSON()},GoldenData.formSymbol&&GoldenData.formSymbol.isNew()&&(GoldenData.formSymbol.unset("shouldSave"),t.symbol=GoldenData.formSymbol.toJSON()),$.trim(this.get("name"))===""&&(t.name="未命名表单"),this.save(t,{success:function(t,i){return r.fieldList.set(i.ordered_fields),_.each($("#form_preview .fields .field"),function(e,t,n){return $(e).data("cid",r.fieldList.at(t).cid)}),n&&!_.isEmpty(r.groupId)&&$.post("/move_form",{form_id:r.get("id"),group_id:r.groupId,without_response:!0}),r._enable_save_button("#save_form"),GoldenData.formStringOrigin=GoldenData.generateFormString(GoldenData.form),n&&e?Turbolinks.visit("diaocha_addok.php?token="+t.get("token")+""):showFlashNotification("表单保存成功！")},error:function(e,t,n){var i;return r._enable_save_button("#save_form"),i=$.parseJSON(t.responseText),t.status===401&&i.redirect_url?Turbolinks.visit(i.redirect_url):(_.each(i.fields,function(t,n,r){var i;return i=_.find(e.fieldList.models,function(e){return e.get("api_code")===t.api_code}),i.set("errorMessage","此字段已有数据，不能再修改类型，请重置为"+t.origin_type_name),i.error=t}),showFlashNotification(i.message,"error"))}})},template_design_save_and_next:function(){var e,t=this;return $(".fields .error-message").empty(),_.each(this.fieldList.models,function(e,t,n){if(e.has("errorMessage"))return e.unset("errorMessage",{silent:!0})}),e={fields:this.fieldList.toJSON()},$.trim(this.get("name"))===""&&(e.name="未命名表单"),this.save(e,{success:function(e,n){return t._enable_save_button("#template_design_next_step"),Turbolinks.visit("/templates/"+e.get("token")+"/edit_info")},error:function(e,n,r){var i;return t._enable_save_button("#template_design_next_step"),i=$.parseJSON(n.responseText),n.status===401&&i.redirect_url?(Turbolinks.visit(i.redirect_url),showFlashNotification("无权创建或更新模板！","error")):showFlashNotification("模板保存失败，请按提醒修复错误！","error")}})}})})}.call(this),function(){"use strict";var e="undefined",t="string",n=self.navigator,r=String,i=Object.prototype.hasOwnProperty,s={},o={},u=!1,a=!0,f=/^\s*application\/(?:vnd\.oftn\.|x-)?l10n\+json\s*(?:$|;)/i,l,c="locale",h="defaultLocale",p="toLocaleString",d="toLowerCase",v=Array.prototype.indexOf||function(e){var t=this.length,n=0;for(;n<t;n++)if(n in this&&this[n]===e)return n;return-1},m=function(e){var t=new l;return t.open("GET",e,u),t.send(null),t.status!==200?(setTimeout(function(){var t=new Error("Unable to load localization data: "+e);throw t.name="Localization Error",t},0),{}):JSON.parse(t.responseText)},g=r[p]=function(e){if(arguments.length>0&&typeof e!="number")if(typeof e===t)g(m(e));else if(e===u)o={};else{var n,a,f;for(n in e)if(i.call(e,n)){a=e[n],n=n[d]();if(!(n in o)||a===u)o[n]={};if(a===u)continue;if(typeof a===t){if(r[c][d]().indexOf(n)!==0){n in s||(s[n]=[]),s[n].push(a);continue}a=m(a)}for(f in a)i.call(a,f)&&(o[n][f]=a[f])}}return Function.prototype[p].apply(r,arguments)},y=function(e){var t=s[e],n=0,r=t.length,i;for(;n<r;n++)i={},i[e]=m(t[n]),g(i);delete s[e]},b,w=r.prototype[p]=function(){var e=b,t=r[e?h:c],n=t[d]().split("-"),i=n.length,f=this.valueOf(),l;b=u;do{l=n.slice(0,i).join("-"),l in s&&y(l);if(l in o&&f in o[l])return o[l][f]}while(i-->1);return!e&&r[h]?(b=a,w.call(f)):f};if(typeof XMLHttpRequest===e&&typeof ActiveXObject!==e){var E=ActiveXObject;l=function(){try{return new E("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new E("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new E("Msxml2.XMLHTTP")}catch(n){}throw new Error("XMLHttpRequest not supported by this browser.")}}else l=XMLHttpRequest;r[h]=r[h]||"",r[c]=n&&(n.language||n.userLanguage)||"";if(typeof document!==e){var S=document.getElementsByTagName("link"),x=S.length,T;while(x--){var N=S[x],C=(N.getAttribute("rel")||"")[d]().split(/\s+/);f.test(N.type)&&(v.call(C,"localizations")!==-1?g(N.getAttribute("href")):v.call(C,"localization")!==-1&&(T={},T[(N.getAttribute("hreflang")||"")[d]()]=N.getAttribute("href"),g(T)))}}}(),function(){$(function(){return GoldenData.Address=Backbone.Model.extend({defaults:{province:"",city:"",street:""}}),GoldenData.AddressEditView=Backbone.View.extend({events:{"change [data-field-key=province]":"renderCityOptions",change:"update"},render:function(){var e;return e=_.template($("#address_template").html()),$(this.el).html(e(this.model.toJSON())),GoldenData.addressSelector.render(this.$("[data-field-key=province]"),this.$("[data-field-key=city]"),this.model.get("province"),this.model.get("city")),this},update:function(e){var t,n,r;return r=$(e.target),t=r.data("field-key"),n={},n[t]=r.val(),this.model.set(n)},renderCityOptions:function(){return GoldenData.addressSelector.renderCityOptions(this.$("[data-field-key=province]").val(),this.$("[data-field-key=city]"))}}),GoldenData.AddressShowView=Backbone.View.extend({initialize:function(){return this.model.on("change",this.render,this)},render:function(){var e;return e=_.template($("#address_template").html()),$(this.el).html(e(this.model.toJSON())),GoldenData.addressSelector.render(this.$("[data-field-key=province]"),this.$("[data-field-key=city]"),this.model.get("province"),this.model.get("city")),this.$("input, select").attr("disabled",!0),this}})})}.call(this),function(){window.GoldenData||(window.GoldenData={}),$(function(){return GoldenData.AddressSelector=function(){function e(e){var t;this.data=e,this.provinces=function(){var e;e=[];for(t in this.data)e.push(t);return e}.call(this)}return e.prototype.render=function(e,t,n,r){var i,s,o,u;n==null&&(n=""),r==null&&(r=""),e.html("<option value=''>- 省/自治区/直辖市 -</option>"),u=this.provinces;for(s=0,o=u.length;s<o;s++)i=u[s],e.append("<option value='"+i+"'>"+i+"</option>");return e.val(n),$.mobile&&e.selectmenu("refresh",!0),this.renderCityOptions(n,t,r)},e.prototype.renderCityOptions=function(e,t,n){var r,i,s,o;n==null&&(n=""),t.html("<option value=''>- 市 -</option>");if(this.data.hasOwnProperty(e)){o=this.data[e];for(i=0,s=o.length;i<s;i++)r=o[i],t.append("<option value='"+r+"'>"+r+"</option>")}t.val(n);if($.mobile)return t.selectmenu("refresh",!0)},e}(),GoldenData.initAddressSelector=function(e){var t,n,r,i,s,o,u;o=$(e).find("[data-role=address]"),u=[];for(i=0,s=o.length;i<s;i++)t=o[i],r=$(t).find("[data-role=province]"),n=$(t).find("[data-role=city]"),GoldenData.addressSelector.render(r,n,r.data("value"),n.data("value")),u.push(r.on("change",function(){return n=$(this).parents("[data-role=address]").find("[data-role=city]"),GoldenData.addressSelector.renderCityOptions($(this).val(),n)}));return u},$(document).on("ready page:load pagechange ajax:complete",function(){return GoldenData.initAddressSelector(document)})})}.call(this),function(){window.GoldenData||(window.GoldenData={}),$(function(){return GoldenData.validateAttachment=function(e,t){if(e.name.substr(0,1)===".")return l("%warn_system_file");if(/.*\.(exe|bat)$/gi.test(e.name))return l("%warn_exec_file");if(e.size&&e.size>t)return l("%warn_oversize")},$(".image-attachment-preview").livequery(function(){return $(this).load(function(){return $(this).prev(".preview-loading").hide(),$(this).css("visibility","visible"),$(this).next("a").show()})})})}.call(this),function(){$(function(){var e,t,n;return t=function(e,t,n){var r;return n==null&&(n=null),r=$("#form_id").val(),$.ajax({url:"/forms/"+r+"/share",type:e,data:t,complete:function(e,t){(e.status===200||e.status===400)&&$(".roles").html(e.responseText),e.status===302&&Turbolinks.visit(e.responseText),e.status===12150&&Turbolinks.visit("/");if(n)return n(e,t)}})},n=function(e,t){var n,r;return n=$(e).attr("confirm"),!n||confirm(n)?t():(r=$(e).attr("name"),$("[name='"+r+"'][original_checked=true]").attr("checked",!0),!1)},$(document).on("click",".roles tr input[type=radio].role",function(){var e=this;return n(this,function(){var n,r;return r=$(e).parents("tr"),n={id:r.find("input[name='cooperator_id']").val(),role:r.find("input.role:checked").val()},t("put",r.hasClass("inviter")?{inviter:n}:{authority:n})})}),$(document).on("click",".roles tr .delete",function(){var e,n;if($(this).attr("data-disable-delete")==="true")return alert("由于该表单中含有高级账户的专享功能（例如样式、上传文件或图片页眉）,表单创建者将无法离开！");if($(this).attr("data-delete-self")==="false"||confirm("您确定要解除对该表单的所有权限吗？"))return n=$(this).parents("tr"),e={id:n.find("input[name='cooperator_id']").val()},t("delete",n.hasClass("inviter")?{inviter:e}:{authority:e})}),$("#add_role_modal").livequery(function(){return $(this).on("hide",function(){return $(this).find(".message").empty(),$(this).find("[name='authority[emails]']").val(""),$(this).find("input[name='authority[role]']:first").click(),e(this)})}),e=function(e){var t;return t=$(e).find(".modal-footer .btn.disabled"),t.html(t.data("enabled-with")),t.removeClass("disabled")},$(document).on("click","#add_role_modal .modal-footer .btn",function(){var n,r,i;return i=$("#add_role_modal"),r=i.find("[name='authority[emails]']"),n={emails:$.trim(r.val()),role:i.find("input[name='authority[role]']:checked").val()},n.emails===""?i.modal("hide"):t("post",{authority:n},function(t,n){var s;e("#add_role_modal"),s=$("#message").data("message"),$("#message").removeData("message"),t.status===200&&(i.modal("hide"),showFlashNotification(s.notice));if(t.status===400)return r.val($(".roles #invalid_emails").text()),showStaticNotification("#add_role_modal .message",s.notice,"warning"),showStaticNotification("#add_role_modal .message",s.alert,"error")})})})}.call(this),function(){window.auto_complete=function(){return $("input[data-autocomplete]").each(function(e,t){var n,r,i,s;return n=$(t),s=n.data("autocomplete"),i=null,r=null,n.typeahead({minLength:2,source:function(e,t){return i=[],r={},$.get(s,{query:e},function(e){var n,s;for(n in e)s=e[n],r[s.name]=s.id,i.push(s.name);return t($.unique(i))})},matcher:function(e){return!0},highlighter:function(e){return htmlSafe(e)},updater:function(e){var t,i;return i=n.attr("for")?"#"+n.attr("for"):"#"+n.attr("id").replace("_name","_id"),$(i).val(r[e]),t=n.parents("form"),t.hasClass("quick-submit")&&t.submit(),e}})})},$(function(){return auto_complete(),$(document).on("ajax:complete page:load",function(){return auto_complete()})})}.call(this),function(){var e,t,n=function(e,t){return function(){return e.apply(t,arguments)}};t=function(){return $(".jcrop-holder").css("left","50%"),$(".jcrop-holder").css("margin-left",""- +$("#avatar_img").width()/2+"px"),$(".jcrop-holder").css("top","50%"),$(".jcrop-holder").css("margin-top",""- +$("#avatar_img").height()/2+"px")},e=function(){function e(){this.updatePreview=n(this.updatePreview,this),this.update=n(this.update,this),$("#avatar_img").Jcrop({aspectRatio:1,setSelect:[0,0,100,100],onSelect:this.update,onChange:this.update})}return e.prototype.update=function(e){return t(),$("#crop_x").val(e.x),$("#crop_y").val(e.y),$("#crop_w").val(e.w),$("#crop_h").val(e.h),this.updatePreview(e)},e.prototype.updatePreview=function(e){return $("#large_avatar_preview").css(this.adjustAvatarPreview(100,e)),$("#normal_avatar_preview").css(this.adjustAvatarPreview(50,e)),$("#small_avatar_preview").css(this.adjustAvatarPreview(20,e))},e.prototype.adjustAvatarPreview=function(e,t){return{width:Math.round(e/t.w*$("#avatar_img").width())+"px",height:Math.round(e/t.h*$("#avatar_img").height())+"px",marginLeft:"-"+Math.round(e/t.w*t.x)+"px",marginTop:"-"+Math.round(e/t.h*t.y)+"px"}},e}(),$(function(){return $("#avatar_form").livequery(function(){return $(this).fileupload({dataType:"json",dropZone:null,add:function(e,t){return $.each(t.files,function(e,n){var r,i;return i=GoldenData.validateFile(n,5e6,/.*\.(jpg|jpeg|png|gif)$/gi),i.length===0?t.submit():(r=$("#avatar_form").prev(".alert"),r.show(),r.children("span").text(i))})},start:function(){return $("#avatar_form .btn").attr("disabled",!0),$("#avatar_form .btn span").text("正在上传..."),$("#avatar_form .btn").on("click",function(){return!1})},always:function(t,n){return n.result.error?$.ajax({url:n.result.redirect_url,type:"get",complete:function(e,t){var r;return $("#change_avatar_modal .modal-body").html(e.responseText),r=$("#avatar_form").prev(".alert"),r.show(),r.children("span").text(n.result.messages)}}):$.ajax({url:n.result.redirect_url,type:"get",data:{avatar_path:n.result.avatar_path},complete:function(t,n){return $("#change_avatar_modal .modal-body").html(t.responseText),new e,$("#change_avatar").attr("disabled",!1)}})}}),$("#avatar_form a.change-photo").on("click",function(){return $.ajax({url:"/avatar/upload",complete:function(e,t){return $("#change_avatar_modal .modal-body").html(e.responseText)}})})}),$(document).on("click","#change_avatar",function(){return $("#change_avatar").text("正在保存..."),$("#change_avatar").attr("disabled",!0),$(this).parents(".modal").find("form").submit()})})}.call(this),function(){$(function(){return GoldenData.Choice=Backbone.Model.extend({defaults:{_type:"Choice",selected:!1,value:""},validate:function(e){if($.trim(e.value)==="")return"不能为空"},toJSON:function(e){var t;return e==null&&(e=!0),t=_.clone(this.attributes),e&&$.trim(t.value)===""&&(t.value="选项"),t}}),GoldenData.ImageChoice=Backbone.Model.extend({defaults:{_type:"ImageChoice",selected:!1,name:"图片",position:0,value:""},validate:function(e){if($.trim(e.name)==="")return"图片名称选项不能为空"}}),GoldenData.OtherChoice=GoldenData.Choice.extend({defaults:{_type:"OtherChoice",selected:!1,value:"其它"}}),GoldenData.TextChoiceList=Backbone.Collection.extend({model:GoldenData.Choice}),GoldenData.ImageChoiceList=Backbone.Collection.extend({model:GoldenData.ImageChoice}),GoldenData.ChoiceContainerEditView=Backbone.View.extend({tagName:"li",className:"choice",events:{"change input":"update","mousedown input[type='radio']:checked":"uncheckChoice","keydown input[type='radio']:checked":"uncheckChoice","click .del_choice":"deleteChoice","click .add_choice":"addChoice"},_resetPlaceHolder:function(){return $("input.placeholder, textarea.placeholder").focus(),$("input.placeholder, textarea.placeholder").trigger("phinit.placeholder")},render:function(){var e,t,n;return t=GoldenData.fieldEditView.model.type.replace("Image",""),e="single",t==="CheckBox"&&(e="multiple"),n=_.template($("#"+e+"_text_choice_edit_template").html()),this.model.set("type",t),this.model.set("choiceType",e),$(this.el).html(n(this.model.toJSON(!1))),GoldenData.fieldEditView.$(".choices .del_choice").show(),this.$("input, textarea").placeholder(),this},update:function(e){var t;return GoldenData.updateChoice(e,this.model),this.model.get("type")!=="CheckBox"&&(t=this.model,_.each(GoldenData.fieldEditView.model.textChoiceList.models,function(e){if(e.cid!==t.cid)return e.set("selected",!1)})),e.stopPropagation()},uncheckChoice:function(e){var t,n=this;return t=$(e.target),setTimeout(function(){return t.removeAttr("checked"),n.update(e)},150)},deleteChoice:function(e){e.preventDefault(),$(e.target).hasClass("other-choice-remove")&&$(".add-other-choice").show(),GoldenData.fieldEditView.model.textChoiceList.remove(this.model),this._resetPlaceHolder(),this.remove();if(GoldenData.fieldEditView.model.textChoiceList.length<=1)return GoldenData.fieldEditView.$(".choices .del_choice").hide()},addChoice:function(){var e,t,n;return n=GoldenData.fieldEditView.model.textChoiceList,t=_.indexOf(n.models,this.model)+1,e=new GoldenData.Choice,n.add(e,{at:t}),this.$el.after((new GoldenData.ChoiceContainerEditView({model:e})).render().el),this._resetPlaceHolder()}}),GoldenData.ChoiceContainerShowView=Backbone.View.extend({initialize:function(){return this.model.on("change",this.render,this)},render:function(){var e,t,n,r;return t=this.model.get("type"),e=t.indexOf("Image")>-1&&this.model.get("layout")==="column"?"_column":"",r=_.template($("#"+t+e+"_choice_show_template").html()),$(this.el).html(r(this.model.toJSON())),e&&$(this.el).addClass("column"),t==="DropDown"&&this.model.get("selected")&&($(this.el).attr("selected",!0),n=$(this.el).parents(".controls").find("input.other-choice"),this.model.get("_type")==="OtherChoice"?n.show():n.hide()),this.$("input").attr("disabled",!0),this}})})}.call(this),function(){var e,t;e=function(e){var t,n,r;return t=$($("#new_form_group_modal_template").html()).attr("id","new_form_group_modal"),n=t.find(".remain-number"),r=n.data("max-num")-e,n.text(r),t},t=function(){return $("#forms_section .manage-groups").clickover({animation:!1,html:!0,placement:"bottom",tip_id:"manage_groups_clickover",content:function(){return"<ul>\n<li><a href='#new_form_group_modal' data-toggle='modal'><i class='icon-plus'></i> 新建分组</a></li>\n<li><a href='#manage_groups_modal' data-toggle='modal'><i class=\"icon-cog\"></i> 管理分组</a></li>\n</ul>"},onShown:function(){var t,n,r;$("#forms_section > #new_form_group_modal").remove(),t=$("#forms_section .owned-forms").data("groups").length,t>0||this.$tip.find("a[href='#manage_groups_modal']").parent().hide(),n=e(t),$("#forms_section").append(n),r=n.find(".remain-number").data("max-num")-t;if(!(r>0))return this.$tip.find("a[href='#new_form_group_modal']").parent().hide()}})},$(document).on("page:load ready ajax:complete",function(){var e;$("#system_warning .alert").on("close",function(){return $.ajax({url:"/system_notification_dismiss",data:{type:$(this).find(".close").data("type"),media:"system"},type:"put"})}),t(),e=$("#forms_section .form-group-notification").data("message");if(e)return showFlashNotification(e.notice),$("#forms_section .form-group-notification").remove()}),$(function(){var t,n;return $(document).on("show",".dashboard a[data-toggle='tab']",function(){var e,t,n=this;t=$($(this).attr("href")).find(".forms-blocks");if($.trim(t.html())==="")return e={group_id:$(this).data("group-id")},$.get("/form_blocks",e,function(e){return t.html(e),GoldenData.initFormSettingClickover()})}),n=function(e,t){e.removeClass("error"),e.find(".field_with_errors + .help-block").remove(),e.find(".field_with_errors > input:text").unwrap();if(t!=null)return e.addClass("error"),e.find("input:text").wrap("<div class='field_with_errors' />"),e.find(".field_with_errors").after("<span class='help-block'>"+t+"</span>")},$(document).on("ajax:complete","#new_form_group_modal",function(e,t,r){var i;return t.status===400?(i=JSON.parse(t.responseText),i.base!=null?($(this).modal("hide"),showFlashNotification(""+i.base+"，请刷新","error")):n($(this).find(".control-group"),i.name)):($(this).modal("hide"),$(this).parents("popover").clickover("destroy"),$("#forms_section").html(t.responseText))}),$.browser.msie&&$(document).on("click",'#manage_groups_modal input:checkbox[name="delete_groups[]"] + .delete',function(){return $(this).prev().attr("checked",!0).change()}),$(document).on("change",'#manage_groups_modal input:checkbox[name="delete_groups[]"]',function(){return $(this).is(":checked")?$(this).closest("li").hide():$(this).closest("li").show()}),$(document).on("ajax:complete","#manage_groups_modal",function(e,t,n){return t.status===400?$(this).find(".modal-body").html(t.responseText):($(this).removeData("changed"),$(this).modal("hide"),$("#forms_section").html(t.responseText))}),$(document).on("change","#manage_groups_modal",function(){return $(this).data("changed",!0)}),$(document).on("hide","#manage_groups_modal",function(){var e=this;if($(this).data("changed"))return $.get("/user_form_groups/edit_all",function(t){return $(e).find(".modal-body").html(t),$(e).removeData("changed")})}),$(document).on("click","#new_form_group_modal .btn-primary, #manage_groups_modal .btn-primary",function(){return $(this).parents(".modal").find(".modal-body form").submit()}),$(document).on("click",'#form_group_setting a:not([href="#new_form_group_modal"])',function(){var e,t,n;return t=$(this).closest(".form").data("symbol").form_id,n=$(this).data("group-id"),e={form_id:t,group_id:n},$.post("/move_form",e,function(e){return $("#forms_section").html(e),$("#forms_section").trigger("ajax:complete")})}),t=function(e,t,n){var r,i,s,o,u,a;i=$("<ul></ul>"),r=_.reject(e,function(e){return e.id===t});for(u=0,a=r.length;u<a;u++)s=r[u],o=$("<li><a href='javascript:void(0)'>"+s.name+"</a></li>"),s.id!=null&&o.find("a").attr("data-group-id",s.id),i.append(o);return n&&i.append("<li><a href='#new_form_group_modal' data-toggle='modal'><i class='icon-plus'></i> 移动到新的分组</a></li>"),i},GoldenData.initFormGroupList=function(n,r,i){var s,o,u,a,f,l;return i==null&&(i=!1),u=$("#form_group_setting"),u.length>0?u.hide():(s=$("#forms_section .owned-forms").data("groups"),f=e(s.length),l=f.find(".remain-number").data("max-num")-s.length,u=$("<div id='form_group_setting' class='hide'></div>"),o=n.closest(".tab-pane").data("group-id"),u.html(t(s,o,l>0)),n.append(u),n.append(f)),a=n.find(".group-action"),a.addClass(i?"arrow-left":"arrow-right"),a.hover(function(){return u.css({top:$(this).position().top-4}),i?u.css({left:-(u.outerWidth()+2)}):u.css({left:n.outerWidth()}),u.show(),a.addClass("active"),$("#new_form_group_modal").find('input[name="form_id"]').val(r)},function(){return delay(300,function(){if(!u.data("hover"))return u.hide(),a.removeClass("active")})}),u.hover(function(){return $(this).data("hover",!0)},function(){return $(this).removeData("hover"),$(this).hide(),a.removeClass("active")})},$(document).on("click",".forms-blocks .form-data-count",function(e){return Turbolinks.visit(""+$(this).parent().attr("href")+"/entries"),!1})})}.call(this),function(){$(function(){return GoldenData.DatePicker=function(){function e(e){$(e).find(".day_of_week").click(function(){return $(this).prev(".input_date").focus().select()}),$(e).find(".input_date").datepicker({language:String.locale||"zh-CN",format:"yyyy-mm-dd",autoclose:!0})}return e}(),GoldenData.initDatePicker=function(e){var t,n,r,i,s;i=$(e).find("[data-role=date]"),s=[];for(n=0,r=i.length;n<r;n++)t=i[n],$(t).attr("type")==="text"||!Modernizr.inputtypes.date?s.push(new GoldenData.DatePicker($(t).parents(".controls"))):s.push($(t).next(".day_of_week").remove());return s},$(document).on("ready page:load pagechange ajax:complete",function(){return GoldenData.initDatePicker(document)})})}.call(this),function(){var e;$(function(){return $(document).on("click","#submit_and_new_entry",function(){var e;return e=$(this).parents("form"),e.append("<input type='hidden' name='submit_and_new' value='true'>"),e.submit()}),$(document).on("ajax:complete",".entry form",function(e,t,n){var r;return n==="success"?(r=$.parseJSON(t.responseText),Turbolinks.visit(r.redirect_url)):($(".entry-show.entry").html(t.responseText),GoldenData.initializeAttachments())}),$(document).on("click","#entries_table tbody tr[data-url]",function(e){if(!$(e.target).is("a"))return Turbolinks.visit($(this).data("url"))}),$(document).on("click",".more-functions .icon-search",function(e){var t,n,r,i;if($(this).hasClass("disabled"))return;return n=GoldenData.extractExistedQueryParams(),r=$.trim($("input.search-content").val()),r?n.query=r:delete n.query,t=$(e.target).data("url"),i=$.isEmptyObject(n)?t:""+t+"?"+$.param(n),Turbolinks.visit(i)}),$(document).on("keydown","input.search-content",function(e){if(e.keyCode===13)return $(".more-functions .icon-search").click()}),$(document).on("click","#entries_table thead th",function(){var e;e=$(this).find("> div").data("url");if(e)return Turbolinks.visit(e)}),GoldenData.EntriesColumnsFilter=Backbone.View.extend({el:"#filter_column .filter-column .dropdown-menu",events:{"click a[data-field], a[data-field] i":"toggleColumn"},_toggleStyle:function(e){var t;return e.toggleClass("selected"),t=$("#entries_table").find("th[data-field="+e.data("field")+"], td[data-field="+e.data("field")+"]"),e.hasClass("selected")?(e.find("i").addClass("icon tick"),$("#entries .column-filter a[data-field="+e.data("field")+"] i").addClass("icon tick"),t.removeClass("hide")):(e.find("i").removeClass("icon tick"),$("#entries .column-filter a[data-field="+e.data("field")+"] i").removeClass("icon tick"),t.addClass("hide")),e.blur()},_saveFormSetting:function(){var e,t;return t=function(){var t,n,r,i;r=this.$("a.selected"),i=[];for(t=0,n=r.length;t<n;t++)e=r[t],i.push($(e).data("field"));return i}.call(this),$.ajax({url:"/preferred_columns",type:"post",data:{form_id:this.$el.data("form-id"),columns:t}})},_isLastShownField:function(e){return this.$("a.selected[data-field!="+e.data("field")+"]").length===0},toggleColumn:function(e){var t;return e.stopPropagation(),t=$(e.target),t.is("i")&&(t=t.parents("a[data-field]")),this._isLastShownField(t)?!1:(this._toggleStyle(t),this._saveFormSetting(),!1)}}),$(document).on("ready page:load",function(){return GoldenData.initializeZoom("#entries")}),$(document).on("click",".export-to-excel",function(){var e,t=this;return e=function(e){return $(e).removeClass("disabled"),$(e).html($(e).data("enabled-with"))},$.fileDownload($(this).attr("href"),{successCallback:function(n){return e(t)},failCallback:function(n,r){return e(t),alert("导出失败，请重试或提交意见反馈通知我们")}}),!1}),$("#per_page_choices_container").livequery(function(){return $("#per_page_choices_container a:not(.selected)").on("click",function(e){return e.preventDefault(),$.cookie("per_page",$(this).data("per-page")),Turbolinks.visit($(this).attr("href"))})})}),$(document).on("click","td.delete-select",function(e){return e.stopPropagation()}),e=function(){var e;e=$("#entries_table .entry-select:checked").length,$(".selected-count").text(e),e>0&&$(".delete-actions .delete.disabled").removeClass("disabled");if(e===0)return $(".delete-actions .delete").addClass("disabled")},$(document).on("change","#entries_table .entry-select",function(){e();if(!$(this).is(":checked"))return $("#entries_table .bulk-select").attr("checked",!1)}),$(document).on("click","#entries_table .bulk-select",function(){return $("#entries input.entry-select").attr({checked:$(this).is(":checked")}),e()}),$(document).on("click",".bulk-delete",function(){return $(".normal-actions").hide(),$(".delete-select").show(),$(".delete-actions").show()}),$(document).on("click",".delete-actions .delete:not(.disabled)",function(){var e,t,n;if(confirm("删除后无法恢复，您确定要删除么?"))return $(this).text("正在删除..."),$(this).addClass("disabled"),t=$(this).data("form-token"),e=new Array,$("#entries input.entry-select:checked").each(function(){return e.push($(this).data("entry-token"))}),n=$(this).data("path"),$.post("/forms/"+t+"/"+n+"/bulk_delete",{entry_ids:e},function(e){return Turbolinks.visit("/forms/"+t+"/"+n)})}),$(document).on("click",".delete-actions .cancel",function(){return $(".delete-select").hide(),$(".delete-actions").hide(),$(".normal-actions").show()})}.call(this),function(){$(function(){var e;return e=Backbone.Model.extend({idAttribute:"_id",defaults:{label:"",predefined_value:"",notes:"",validations:[],position:1e4,"private":!1,has_data:!1},hasChoices:function(){return this.type==="CheckBox"||this.type==="RadioButton"||this.type==="DropDown"},hasImageChoices:function(){return this.type==="ImageCheckBox"||this.type==="ImageRadioButton"},isAddress:function(){return this.type==="AddressField"},isRating:function(){return this.type==="RatingField"},isAttachment:function(){return this.type==="AttachmentField"},isDateField:function(){return this.type==="DateField"},isGoodsField:function(){return this.type==="GoodsField"},isBasicGoodsField:function(){return this.type==="BasicGoodsField"},isTimeField:function(){return this.type==="TimeField"},_unselectChoicesExceptLast:function(e){var t;return t=e.where({selected:!0}),$.each(t,function(e,n){if(e<t.length-1)return n.set("selected",!1)})},_resetAdditionalAttriubtes:function(e){var t;e==null&&(e={}),this.set("errorMessage","",{silent:!0}),this.hasChoices()?(this.textChoiceList.length===0&&this.textChoiceList.add([{},{},{}],e),((t=this.type)==="RadioButton"||t==="DropDown")&&this._unselectChoicesExceptLast(this.textChoiceList),this.get("choices_layout")||this.set({choices_layout:"column"},{silent:!0})):this.hasImageChoices()?(this.type==="ImageRadioButton"&&this._unselectChoicesExceptLast(this.imageChoiceList),this.get("choices_layout")||this.set({choices_layout:"side_by_side"},{silent:!0})):this.isRating()?(this.textChoiceList.length===0&&this.textChoiceList.add([{value:1},{value:2},{value:3}],e),this.set("rating_type",this.get("rating_type")||"star")):this.isAttachment()?this.set("max_size",this.get("max_size")||5):this.isTimeField()?(this.get("include_second")==null&&this.set("include_second",!1),this.get("predefined_value")===""&&this.set("predefined_value",{})):this.isAddress()?this.predefinedValue=new GoldenData.Address(this.get("predefined_value")):this.isBasicGoodsField()?this.goodsItemList.length===0&&this.goodsItemList.add([{name:"商品一"},{name:"商品二"},{name:"商品三"}],e):(this.textChoiceList.reset(),this.imageChoiceList.reset()),this.type==="TelephoneField"&&this.isNew()&&!this.get("notes")&&this.set("notes",'分隔请用"-"或空格，国际电话请加"+"');if(this.isNew()&&(this.isGoodsField()||this.isBasicGoodsField()))return this.set("collapse_on_mobile",!0)},_resetType:function(e){return this.type=/\w+$/.exec(e)[0]},initialize:function(){var e;this._resetType(this.get("_type")),this.textChoiceList=new GoldenData.TextChoiceList,this.imageChoiceList=new GoldenData.ImageChoiceList,this.goodsItemList=new GoldenData.GoodsItemList;if(this.hasChoices()||this.isRating())this.textChoiceList=new GoldenData.TextChoiceList(this.get("choices"));this.hasImageChoices()&&(this.imageChoiceList=new GoldenData.ImageChoiceList(this.get("choices")));if(this.isGoodsField()||this.isBasicGoodsField())this.goodsItemList=new GoldenData.GoodsItemList
(this.get("goods_items"));this._resetAdditionalAttriubtes();if(this.isNew()){this.get("label")===""&&(e=function(){switch(this.type){case"TelephoneField":return"电话";case"EmailField":return"邮箱";case"AddressField":return"地址";case"DateField":return"日期";case"TimeField":return"时间";case"RatingField":return"评分";case"AttachmentField":return"附件"}}.call(this));if(e)return this.set({label:e})}},_invalidOnNumberField:function(e,t,n){return n.on===e&&t[e]&&!GoldenData.isNumber(t[e])},validate:function(e,t){t||(t={});if(t.on==="label"&&e._type!=="Fields::SectionBreak"&&$.trim(e.label)==="")return"标签不能为空";if(this._invalidOnNumberField("range_min",e,t))return"最小值必须为数字";if(this._invalidOnNumberField("range_max",e,t))return"最大值必须为数字";if(this._invalidOnNumberField("minimum_length",e,t))return"最少选几项必须为数字";if(this._invalidOnNumberField("maximum_length",e,t))return"最多选几项必须为数字"},toJSON:function(e){var t,n,r,i;return e==null&&(e=!0),t={},this.hasImageChoices()?(this.set("_type","Fields::"+this.type),t.choices=this.imageChoiceList.toJSON()):this.hasChoices()?(this.set("_type","Fields::"+this.type),t.choices=this.textChoiceList.toJSON(),i=$.grep(t.choices,function(e,t){return e.selected}),n=i.length>0?i[0]:t.choices[0],t.selectedChoice=n.value):this.isGoodsField()||this.isBasicGoodsField()?t.goods_items=this.goodsItemList.toJSON():this.isRating()&&(t.choices=this.textChoiceList.toJSON()),this.isAddress()&&(t.predefined_value=this.predefinedValue.toJSON()),this.set(t,{silent:!0}),r=_.clone(this.attributes),e&&r._type!=="Fields::SectionBreak"&&$.trim(r.label)===""&&(r.label="未命名"),r},resetErrorMessage:function(e){var t;if(this.error)return t="",e!==this.error.origin_type&&"Fields::"+e!==this.error.origin_type&&(t="此字段已有数据，不能再修改类型，请重置为"+this.error.origin_type_name),this.set("errorMessage",t)},updateType:function(e){var t,n,r,i=this;return n=this.isAddress()||this.hasChoices()||this.isTimeField()||e==="Fields::EmailField",r=this.type,this._resetType(e),_.each(this.imageChoiceList.models,function(e,t,n){return e.set("type","Image"+i.type,{silent:!0})}),this._resetAdditionalAttriubtes({silent:!0}),r==="BasicGoodsField"&&this.isGoodsField()&&this.goodsItemList.reset(),t={_type:e},n&&(t.predefined_value=""),t.validations=[],this.set(t),GoldenData.fieldEditView.render(this),this.resetErrorMessage(e)}}),$(document).on("click",".modal .add-choices",function(){if(GoldenData.fieldEditView)return GoldenData.fieldEditView.addChoices(this)}),$(document).on("click","#predefined_choices_modal li[data-choices]",function(){var e;return e=$(this).data("choices"),$("#predefined_choices_modal ul li").removeClass("selected"),$(this).addClass("selected"),$("#predefined_choices_modal textarea").val(e.join("\n")),GoldenData.focusToEnd($("#predefined_choices_modal textarea"))}),$("#predefined_choices_modal").on("shown",function(){return GoldenData.focusToEnd($(this).find("textarea"))}),GoldenData.FieldEditView=Backbone.View.extend({events:{"change [data-field-key]":"update","click [data-field-key='choices_layout']":"updateChoiceLayout","click .add_multiple_choices":"addExistingChoices","click .add-other-choice":"addOtherChoice","click [data-field-key='validations'][value='presence']":"togglePrivateField","click [data-field-key='private']":"togglePresenceValidation","change select#predefined_value_type":"updatePredefinedValueType","change [data-field-key='include_second']":"toggleSecond"},render:function(e){var t,n,r,i,s,o,u,a=this;$(".datepicker:gt(1), .autosizejs:gt(0)").remove(),$(".accordion-toggle[href=#field_settings]").parent(".accordion-heading").removeClass("no-field"),$("#field_settings .accordion-inner .no-field-alert").hide(),this.model=e,r=_.template($("#"+e.type+"_edit_template").html()),$(this.el).html(r(this.model.toJSON(!1))),$("#_field_type").text(this.$('input[name="field[type]"]').val()),$("#field_settings .accordion-inner").append(this.$el),e.hasChoices()&&(_.each(e.textChoiceList.toArray(),function(e){a.$(".choices").append((new GoldenData.ChoiceContainerEditView({model:e})).render().el);if(e.get("_type")==="OtherChoice")return a.$(".add-other-choice").hide()}),e.textChoiceList.length===1&&this.$(".choices .choice .del_choice").hide()),e.hasImageChoices()&&this.$(".image-choice-area").html((new GoldenData.ImageSelectionContainerEditView({model:e})).render().el),e.isGoodsField()&&this.$(".goods-items-area").html((new GoldenData.GoodsImageSelectionEditView({model:e})).render().el),e.isBasicGoodsField()&&this.$(".goods-items-area").html((new GoldenData.GoodsContainerEditView({model:e})).render().el),e.isAddress()&&this.$(".address").html((new GoldenData.AddressEditView({model:e.predefinedValue})).render().el),e.isRating()&&this.$(".rating").html((new GoldenData.RatingEditView({model:e})).render().el),e.isDateField()&&(new GoldenData.DatePicker(this.el),this.$("#predefined_value_type").val(e.get("predefined_value")),((o=e.get("predefined_value"))==="today"||o==="yesterday"||o==="tomorrow")&&this.$('[data-field-key="predefined_value"]').val(""));if(e.isTimeField()){e.get("include_second")&&this.$("[data-field-key='predefined_value'][data-sub-key='second']").prev().andSelf().show(),n=e.get("predefined_value"),u=["hour","minute","second"];for(i=0,s=u.length;i<s;i++)t=u[i],this.$("[data-field-key='predefined_value'][data-sub-key='"+t+"']").val(GoldenData.formatNumberWithTwoDigits(n[t]))}return this.$("input").placeholder(),delay(1,function(){return GoldenData.initTinyMCE("#"+this.$("[data-field-key=notes]").attr("id"))})},_attributeValue:function(e){var t,n,r,i,s;if(e.data("sub-key")){n={},s=this.$("[data-field-key="+e.data("field-key")+"]:visible");for(r=0,i=s.length;r<i;r++)t=s[r],n[$(t).data("sub-key")]=$(t).val();return n}return e.attr("type")==="checkbox"?e.attr("multiple")?$.map($(this.el).find("[name='"+e.attr("name")+"']:checked"),function(e){return $(e).val()}):e.is(":checked"):e.val()},update:function(e){var t,n,r;return r=$(e.target),t=r.data("field-key"),n={},n[t]=this._attributeValue(r),r.removeClass("error"),r.find("+ .error-message").remove(),this.model.set(n,{validate:!0,on:t}),GoldenData.showInlineErrorIfHave(r,this.model.validationError)},updateChoiceLayout:function(e){return this.model.set({choices_layout:$(e.target).data("value")})},adjustPosition:function(){return GoldenData.adjustViewPosition("#field_settings","#form_preview")},addChoices:function(e){var t,n,r,i,s=this;n=$(e).parents(".modal"),i=n.find("textarea").val(),t=_.compact($.map(i.split("\n"),function(e){return $.trim(e)})),r=this.model.textChoiceList.where({_type:"OtherChoice"}),this.model.textChoiceList.reset(),this.$(".choices").empty(),t.length>0?_.each(t,function(e,t){var n;return n=new GoldenData.Choice({value:e}),s.model.textChoiceList.add(n)}):this.model.textChoiceList.add({}),n.modal("hide"),n.find("textarea").val(""),n.find(".selected").removeClass("selected");if(r)return this.model.textChoiceList.add(r),this.render(this.model)},addExistingChoices:function(){var e,t;return e=this.model.textChoiceList.where({_type:"OtherChoice"}),t=this.model.textChoiceList.clone().remove(e).pluck("value"),$("#multiple_choices_modal textarea").val(_.compact(t).join("\n"))},addOtherChoice:function(e){return this.model.textChoiceList.add(new GoldenData.OtherChoice),this.render(this.model),$(".add-other-choice").hide(),e.preventDefault()},togglePrivateField:function(e){if($(e.target).is(":checked"))return $("[data-field-key=private]").removeAttr("checked").change()},togglePresenceValidation:function(e){if($(e.target).is(":checked"))return $("[data-field-key='validations'][value='presence']").removeAttr("checked").change()},updatePredefinedValueType:function(){var e,t;return t=this.$("#predefined_value_type").val(),e=this.$('[data-field-key="predefined_value"]'),t===""?(t=e.val(),e.parent(".date-field-container").show()):e.parent(".date-field-container").hide(),this.model.set({predefined_value:t})},toggleSecond:function(e){var t;return t=this.$("[data-field-key='predefined_value'][data-sub-key='second']").prev().andSelf(),$(e.target).is(":checked")?t.show():(t.hide(),this.$("[data-field-key='predefined_value'][data-sub-key='second']").val("").change())}}),GoldenData.FieldShowView=Backbone.View.extend({tagName:"div",className:"field",events:{"click .control-group":"edit","click .delete":"delete","click .duplicate":"duplicate"},initialize:function(){return this.model.on("change",this.render,this),this.model.on("remove",this.remove,this),this.model.textChoiceList.on("add",this.render,this),this.model.textChoiceList.on("remove",this.render,this),this.model.imageChoiceList.on("add",this.render,this),this.model.imageChoiceList.on("remove",this.render,this),this.model.goodsItemList.on("add",this.render,this)},_labelHint:function(){var e;return e=[],this.model.get("minimum_length")>0&&e.push("最少选"+Math.floor(this.model.get("minimum_length"))+"项"),this.model.get("maximum_length")>0&&e.push("最多选"+Math.floor(this.model.get("maximum_length"))+"项"),e.length>0?"（"+e.join("，")+"）":""},_renderTextChoices:function(e){var t=this;return _.each(e,function(e){var n,r;r={model:e.set({type:t.model.type,group:t.model.cid})},r.tagName=t.model.type==="DropDown"?"option":"label",r.className=t.model.type.indexOf("CheckBox")>-1?"checkbox":"radio",n=(new GoldenData.ChoiceContainerShowView(r)).render().el;if(e.get("_type")!=="OtherChoice")return t.$(".choices").append(n);if(t.model.type!=="DropDown")return t.$(".choices").append("<div class='other-choice-area'></div>"),t.$(".choices .other-choice-area").append(n),t.$(".choices .other-choice-area").append("<input type='text' name='field[choices]_other' class='input-medium'>");t.$(".choices").append(n),t.$(".controls").append("<input type='text' name='field[choices]_other' class='input-medium other-choice hide'>");if(e.get("selected"))return t.$(".controls .other-choice").show()})},_renderImageChoices:function(e,t){var n=this;return e.length===0&&this.$(".choices").html("<div class='image-choice-placeholder'>请在右侧面板添加图片</div>"),_.each(e,function(e){var r,i;return i={model:e.set({type:n.model.type,group:n.model.cid,layout:t})},i.tagName="label",e.get("selected")&&(i.className="active"),r=(new GoldenData.ChoiceContainerShowView(i)).render().el,n.$(".choices").append(r)})},_renderGoodsItems:function(e,t){var n=this;return t==null&&(t=!1),e.length===0&&this.$(".goods-items").html("<div class='goods-item-placeholder'>请在右侧面板添加商品</div>"),_.each(e,function(e){var r,i,s;return s=t?GoldenData.BasicGoodsItemShowView:GoldenData.GoodsItemShowView,i=new s({model:e}),r=i.render().el,n.$(".goods-items").append(r)})},render:function(){var e,t,n,r,i;this.model.has("errorMessage")||this.model.set("errorMessage",""),i=_.template($("#"+this.model.type+"_show_template").html()),e=this.model.toJSON(),this.model.isDateField()&&(e.predefined_value=GoldenData.formatDate(GoldenData.parseDate(this.model.get("predefined_value")))),e.labelHint=this._labelHint(),$(this.el).html(i(e)).data("cid",this.model.cid),this.model.type==="SectionBreak"&&this.$el.addClass("section-break"),this.model.get("private")&&this.$("label.control-label").prepend('<i class="icon-lock"></i>'),this.model.hasChoices()&&(this._renderTextChoices(this.model.textChoiceList.toArray()),this.model.get("choices_layout")==="side_by_side"&&this.$(".choices > label, .other-choice-area, .other-choice-area .checkbox").addClass("inline")),this.model.hasImageChoices()&&($("#image_choices").data("choice-type",this.model.type),r=_.sortBy(this.model.imageChoiceList.toArray(),function(e){return e.get("position")}),this._renderImageChoices(r,this.model.get("choices_layout")),this.$(".choices").addClass("image-choices"));if(this.model.isGoodsField()||this.model.isBasicGoodsField())r=_.sortBy(this.model.goodsItemList.toArray(),function(e){return e.get("position")}),this._renderGoodsItems(r,this.model.isBasicGoodsField());return this.model.isAddress()&&this.$(".address").html((new GoldenData.AddressShowView({model:this.model.predefinedValue})).render().el),this.model.isRating()&&this.$(".rating").html((new GoldenData.RatingShowView({model:this.model})).render().el),this.model.isTimeField()&&(n=this.$("[name='date[second]']").prev().andSelf(),this.model.get("include_second")?n.show():n.hide(),t=this.model.get("predefined_value"),this.$("[name='date[hour]']").val(t.hour),this.$("[name='date[minute]']").val(t.minute),this.$("[name='date[second]']").val(t.second)),this.$("input, select, textarea").attr("disabled",!0),GoldenData.fieldEditView.adjustPosition(),this},edit:function(e){return $(".sidebar").show(),$("#form_preview .editing").removeClass("editing"),GoldenData.form&&GoldenData.form.headerView.render(),$(this.el).addClass("editing"),GoldenData.fieldEditView.$("input, textarea").blur(),GoldenData.fieldEditView.render(this.model),GoldenData.accordionOpen("#field_settings"),GoldenData.fieldEditView.adjustPosition()},"delete":function(){GoldenData.hideTooltip();if(!this.model.get("has_data")||confirm("若删除该字段并保存表单，其对应的数据也会被清除。确定要删除吗？"))return GoldenData.form.remove(this.model)},duplicate:function(e){var t;return GoldenData.hideTooltip(),t=$(e.target).data("upgrade-modal"),t?$("#"+t).modal("show"):GoldenData.form.duplicate(this.model)}}),GoldenData.FieldList=Backbone.Collection.extend({model:e,comparator:function(e){return e.get("position")}})})}.call(this),function(){$(function(){var e,t,n,r,i,s,o,u,a;return $(document).on("page:load ready",function(){return $('a[data-toggle="tab"]').on("shown",function(e){var t;return t=$(this).attr("href"),$(""+t+" .field.editing dl").click(),$(e.target).attr("href")==="#field_rule"?$(".sidebar.redirect-rule-setting").addClass("hide"):$(".sidebar.field-rule-setting").addClass("hide"),GoldenData.resetButtonPosition("#rules_preview .buttons")})}),$(document).on("click","#add_redirect_rule_toggle",function(){return GoldenData.formRedirectRules.newRule({_type:"redirect_rule"})}),$(document).on("click","#save_redirect_rules",function(){return GoldenData.formRedirectRules.save()}),$(document).on("click","#add_field_rule_toggle",function(){return GoldenData.formFieldRules.newRule({_type:"field_rule"})}),$(document).on("click","#save_field_rules",function(){return GoldenData.formFieldRules.save()}),u=Backbone.Model.extend({defaults:{trigger:"",condition:""},validateBase:function(e){if(e.target==="")return"请选择触发字段";if(e.condition==="")return"请选择触发条件"}}),e=u.extend({defaults:{targets:[]},constructor:function(e){return this.defaults=_.extend(this.defaults,u.prototype.defaults),u.prototype.constructor.apply(this,[e])},validate:function(e){var t;t=u.prototype.validateBase.apply(this,[e]);if(t)return t;if(e.targets.length<1)return"请选择被触发的字段"}}),i=u.extend({defaults:{redirect_url:""},constructor:function(e){return this.defaults=_.extend(this.defaults,u.prototype.defaults),u.prototype.constructor.apply(this,[e])},validate:function(e){var t;t=u.prototype.validateBase.apply(this,[e]);if(t)return t;if(e.redirect_url==="")return"请设置跳转的网址"}}),n=Backbone.Collection.extend({model:e}),o=Backbone.Collection.extend({model:i}),a=Backbone.View.extend({events:{"click .trigger li":"selectTrigger","click .condition li":"selectCondtion"},_initTriggerViewBase:function(e,t){var n;return e==null&&(e=null),t==null&&(t=null),n=this.$(".trigger li[data-api-code='"+e+"']"),this.$(".trigger .selected").removeClass("selected"),n.addClass("selected"),this.$(".condition ul").empty(),_.each(n.data("choices"),function(e){return this.$(".condition ul").append("<li data-value='"+e+"'>"+e+"</li>")}),this.$(".condition li[data-value='"+t+"']").addClass("selected")},selectCondtion:function(e){var t;this.$(".condition .selected").removeClass("selected"),t=$(e.target),t.addClass("selected");if(this.model)return this.model.set({condition:t.data("value")})},renderBase:function(e){return this.$el.closest(".sidebar").removeClass("hide"),this.model=e}}),t=a.extend({el:"#field_rule_setting",events:{"change .targets input:checkbox":"updateTargets"},constructor:function(e){return this.events=_.extend(this.events,a.prototype.events),a.prototype.constructor.apply(this,[e])},_hideTriggerFromTargets:function(e){var t;this.$(".targets li.no-targets-available").remove(),this.$(".targets li:hidden").show(),this.$(".targets input:disabled").removeAttr("disabled"),t=this.$(".targets input[value='"+e+"']").parents("li").prevAll().andSelf(),t.hide(),t.find("input").attr("disabled",!0).attr("checked",!1);if(this.$(".targets li:visible").length===0)return this.$(".targets").append("<li class='no-targets-available'>没有可供控制的字段，因为“"+GoldenData.formFieldRules.fields[e]+"”是该表单最后一个字段</li>")},_initTriggerView:function(e,t){return e==null&&(e=null),t==null&&(t=null),a.prototype._initTriggerViewBase.apply(this,[e,t]),this._hideTriggerFromTargets(e)},selectTrigger:function(e){var t,n;n=$(e.target).data("api-code"),this.model.set({trigger:n});if(this.model.hasChanged("trigger"))return this._initTriggerView(n),t=_.without(this.model.get("targets"),n),this.model.set({condition:"",targets:t})},updateTargets:function(){var e;return e=_.map(this.$(".targets input:checked"),function(e){return $(e).val()}),this.model.set({targets:e})},render:function(e){return a.prototype.renderBase.apply(this,[e]),this._initTriggerView(e.get("trigger"),e.get("condition")),this.$(".targets input:checked").attr("checked",!1),_.each(e.get("targets"),function(e){return this.$(".targets input[value='"+e+"']").attr("checked",!0)})}}),s=a.extend({el:"#redirect_rule_setting",events:{"change input[name=redirect_url]":"updateRedirectUrl"},constructor:function(e){return this.events=_.extend(this.events,a.prototype.events),a.prototype.constructor.apply(this,[e])},_initTriggerView:function(e,t){return e==null&&(e=null),t==null&&(t=null),a.prototype._initTriggerViewBase.apply(this,[e,t]),this.$("input[name=redirect_url]").val(this.model.get("redirect_url"))},selectTrigger:function(e){var t;t=$(e.target).data("api-code"),this.model.set({trigger:t});if(this.model.hasChanged("trigger"))return a.prototype._initTriggerViewBase.apply(this,[t])},updateRedirectUrl:function(e){return this.model.set({redirect_url:$(e.target).val()})},render:function(e){return a.prototype.renderBase.apply(this,[e]),this._initTriggerView(e.get("trigger"),e.get("condition"))}}),r=Backbone.View.extend({tagName:"div",className:"field",events:{"click dl":"edit","click .delete":"delete","click .duplicate":"duplicate"},_resetType:function(e){if(e==="field_rule"||e==="FieldRule")this.type="field_rule";if(e==="redirect_rule"||e==="RedirectRule")return this.type="redirect_rule"},initialize:function(e){return this.model.on("change",this.render,this),this.model.on("remove",this.remove,this),this.ruleList=e.ruleList,this._resetType(this.model.get("_type"))},render:function(){var e,t,n=this;return t=_.template($("#"+this.type+"_show_template").html()),e=this.model.toJSON(),e.triggerLabel=this.ruleList.fields[e.trigger],e.targetsLabels=_.map(e.targets,function(e){return n.ruleList.fields[e]}).join("<br/>"),$(this.el).html(t(e)),this.model.isValid()?this.$el.removeClass("error"):this.$el.addClass("error"),this},edit:function(){return $("#"+this.type+" .editing").removeClass("editing"),this.$el.addClass("editing"),this.ruleList.ruleEditView.render(this.model),GoldenData.adjustViewPosition("#"+this.type+"_setting","#rules_preview")},"delete":function(){return this.ruleList.remove(this.model)},duplicate:function(){return this.ruleList.duplicate(this.model)}}),GoldenData.FormFieldRules=function(){function e(e,i,u){var a=this;this.formToken=e,this.fields=i,this.type=u,this.type==="field_rule"?(this.ruleList=new n,this.ruleEditView=new t):this.type==="redirect_rule"&&(this.ruleList=new o,this.ruleEditView=new s),this.ruleList.on("add",function(e,t){var n,i;if(e.get("_type")==="field_rule"||e.get("_type")==="FieldRule")a.type="field_rule";if(e.get("_type")==="redirect_rule"||e.get("_type")==="RedirectRule")a.type="redirect_rule";$("#rules_preview ."+a.type+".no-field-alert:visible").hide(),a.type==="field_rule"?i=new r({model:e,ruleList:GoldenData.formFieldRules}):a.type==="redirect_rule"&&(i=new r({model:e,ruleList:GoldenData.formRedirectRules})),$("#"+a.type+" .rules .field").length===0?$("#"+a.type+" .rules").append(i.render().el):(n=t.indexOf(e),$("#"+a.type+" .rules .field:nth-child("+n+")").after(i.render().el));if(!e.get("_id"))return i.$("dl").trigger("click")}),this.ruleList.on("remove",function(e,t){return t.length===0&&$("#rules_preview .no-field-alert:hidden").show(),$(".sidebar").addClass("hide")})}return e.prototype.newRule=function(e){return e==null&&(e={}),this.ruleList.push(e)},e.prototype.save=function(){var e,t=this;return e="/forms/"+this.formToken+"/rules/save_"+this.type+"s",$.ajax(e,{type:"PUT",data:{rules:this.ruleList.toJSON()},success:function(){return showFlashNotification("规则保存成功！"),$("#save_"+t.type+"s").html($("#save_"+t.type+"s").data("enabled-with")),$("#save_"+t.type+"s").removeClass("disabled")}})},e.prototype.remove=function(e){return GoldenData.hideTooltip(),this.ruleList.remove(e)},e.prototype.duplicate=function(e){var t,n;return GoldenData.hideTooltip(),t=_.omit(e.attributes,["_id"]),n=this.ruleList.indexOf(e)+1,this.ruleList.add(t,{at:n})},e}()})}.call(this),function(){$(function(){var e;return $(document).on("change",".attachment input:file",function(){var e,t,n,r;return n=this.files?this.files[0]:{name:$(this).val().replace(/^.*\\/,"")},e=$(this).parents(".attachment"),r=e.find(".summary"),n?(t=GoldenData.validateAttachment(n,$(this).data("max-size")),t?r.html(t+"，"):r.html(""+n.name+" <a href='javascript:void(0)' class='cancel'>"+l("%delete")+"</a>"),e.find(".file-input-link > span").text(l("%rechoose")),e.find("[name='delete_attachments[]']").val("")):(r.empty(),e.find(".file-input-link > span").text(l("%rechoose")))}),e=function(e){var t;return t=e.find("input:file"),t.replaceWith(t.val("").clone(!0)),e.find(".summary").empty(),e.find(".file-input-link > span").text(l("%choose_file"))},$(document).on("click",".attachment .cancel",function(){var t,n;return t=$(this).parents(".attachment"),e(t),n=t.find("[name='delete_attachments[]']"),n.val(n.data("code"))}),GoldenData.initializeAttachments=function(){return $.each($(".entry .attachment"),function(e,t){var n,r;r=$(t),n=r.data("attachment");if(n&&n.file_filename)return r.find(".summary").html(""+n.file_filename+" <a href='javascript:void(0)' class='cancel'>"+l("%delete")+"</a>"),r.find(".file-input-link > span").text(l("%rechoose"))})},$(document).on("ready page:load",GoldenData.initializeAttachments)})}.call(this),function(){var e=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};$(document).on("page:load ready",function(){var e;$(".icon-filter-data").clickover({animation:!1,html:!0,container:"body",tip_id:"filter_data",content:function(){return $(".filter-data").html()},onShown:function(){return $("#filter_data .choices li.selected").length>0?$("#filter_data .choices li.selected:first").click():$("#filter_data .choices li:first").click()}}),new GoldenData.EntriesColumnsFilter,$("#entries .icon-filter-column").clickover({animation:!1,container:"body",html:!0,tip_id:"filter_column",content:function(){return $("#entries .column-filter").html()},onShown:function(){return new GoldenData.EntriesColumnsFilter}}),e=function(){var e,t;return $(".select-date-failed").hide(),t=$("#date_range_picker .start-date").data("date"),e=$("#date_range_picker .end-date").data("date"),new Date(t)>new Date(e)?($(".select-date-failed").show(),$("#date_range_picker #submit_date_range").addClass("disabled")):($(".date-range-display").val(""+t+" 至 "+e+" 提交"),$("#date_range_picker #submit_date_range").removeClass("disabled"))},$(".date-range-display").clickover({trigger:"click",animation:!1,html:!0,placement:"bottom",container:"body",tip_id:"date_range_picker",content:$(".date-range").html(),onShown:function(){return e(),$("#date_range_picker [data-role='date-picker']").datepicker({language:"zh-CN"}).on("changeDate",function(t){return e()})}});if(url("?query"))return $("input.search-content").focus().val("")}),$(function(){return GoldenData.FilterParams=function(){function t(e,t){this.allowMulti=e,this.data=t!=null?t:{},this.data||(this.data={})}return t.prototype.add=function(t,n){if(!this.allowMulti)return this.data={},this.data[t]=n;if(!this.data[t])return this.data[t]=n;if($.isArray(this.data[t])){if(e.call(this.data[t],n)<0)return this.data[t].push(n)}else if(n!==this.data[t])return this.data[t]=[this.data[t]],this.data[t].push(n)},t.prototype.remove=function(e,t){var n;n=this.data[e];if(!this.allowMulti||!$.isArray(n))return delete this.data[e];this.data[e]=_.without(n,t);if(this.data[e].length===1)return this.data[e]=this.data[e][0]},t.prototype.contains=function(t,n){var r;return this.allowMulti&&$.isArray(this.data[t])?e.call(this.data[t],n)>=0:((r=this.data[t])!=null?r.toString():void 0)===n},t}(),$(document).on("click","#filter_data .items li",function(){return GoldenData.filterParams.allowMulti||$("#filter_data .items li.selected").removeClass("selected"),$(this).addClass("selected"),GoldenData.filterParams.allowMulti||$("#filter_data .choices li.selected").removeClass("selected"),$("#filter_data .choices li.current").addClass("selected"),GoldenData.filterParams.add($(this).data("api-code"),$(this).data("choice"))}),$(document).on("click","#filter_data .choices li",function(){var e;return $("#filter_data .choices li.current").removeClass("current"),$(this).addClass("current"),e=$(this).data("api-code"),$("#filter_data .items ul").empty(),$.each($(this).data("choices"),function(t,n){var r;return r=GoldenData.filterParams.contains(e,n)?"selected":"",$("#filter_data .items ul").append("<li data-api-code='"+e+"' class='"+r+"' data-choice='"+n+"'><span class='choice'>"+n+"</span><span class='clear-filter-item'>X</span></li>")})}),$(document).on("click","#filter_data .items span.clear-filter-item",function(){var e;return e=$(this).parent("li"),GoldenData.filterParams.remove(e.data("api-code"),e.data("choice").toString()),e.removeClass("selected"),GoldenData.filterParams.data[e.data("api-code")]||$("#filter_data .choices li.current").removeClass("selected"),!1}),$(document).on("click","#submit_filter",function(){var e;return e=GoldenData.extractExistedQueryParams(),e=$.extend(e,GoldenData.filterParams.data),Turbolinks.visit(""+$(".filter-data").data("base-url")+"?"+$.param(e))}),$(document).on("click","#submit_date_range",function(){var e;return $(this).hasClass("disabled")?!1:(e=GoldenData.extractExistedQueryParams(),e.start=$("#date_range_picker .start-date").data("date"),e.end=$("#date_range_picker .end-date").data("date"),Turbolinks.visit(""+$(".filter-data").data("base-url")+"?"+$.param(e)))})})}.call(this),function(){var e;e=function(e){switch(e){case"warning":return"icon-exclamation-sign";case"error":return"icon-remove-sign";default:return"icon-ok-sign"}},window.showFlashNotification=function(t,n){n==null&&(n="success");if($.trim(t)==="")return;return $(".notifications").empty().notify({message:{html:"<i class='"+e(n)+"'></i> "+t},type:n,closable:!1,fadeOut:{enabled:!0,delay:2e3}}).show()},window.showStaticNotification=function(t,n,r){if($.trim(n)==="")return;return $(t).empty().notify({message:{html:"<i class='"+e(r)+"'></i> "+n},type:r,closable:!1,fadeOut:{enabled:!1}}).show()},$(document).on("page:load ready",function(){var e;e=$(".notifications").data("message");if(e)return showFlashNotification(e.notice),showFlashNotification(e.alert,"error")})}.call(this),function(){var e=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};window.GoldenData||(window.GoldenData={}),$(function(){var t,n,r;return r=function(e){var t,n;return t=$("[name='entry["+e+"]']:visible").filter(":radio:checked, :not(:radio)"),((n=t.data("value"))!=null?n.toString():void 0)||t.val()},n=function(){function e(e){this.apiCode=e,this.targets=[],this.element=$("[name='entry["+this.apiCode+"]']"),this.elementContainer=$(".field[data-api-code='"+this.apiCode+"']")}return e.prototype._informTargets=function(e){var t,n,r,i,s;i=this.targets,s=[];for(n=0,r=i.length;n<r;n++)t=i[n],s.push(t.set(this.apiCode,e));return s},e.prototype.run=function(){var e=this;return e=this,this.element.on("change",function(){return e._informTargets($(this).data("value")||$(this).val())}),this.elementContainer.on("change.formLogic",function(){return e._informTargets(r(e.apiCode))})},e}(),t=function(){function t(e,t){var n;this.apiCode=e,this.triggerConditions=t,this.element=$("[name^='entry["+this.apiCode+"]']"),this.elementContainer=$(".field[data-api-code='"+this.apiCode+"']"),this.triggersStatus={};for(n in this.triggerConditions)this.set(n,r(n))}return t.prototype.set=function(t,n){var r,i;this.triggersStatus[t]=e.call(this.triggerConditions[t],n)>=0,r=function(){var e,n;e=this.triggersStatus,n=[];for(t in e)i=e[t],i&&n.push(t);return n}.call(this).length>0,r?(this.elementContainer.show(),this.elementContainer.trigger("shown"),this.element.attr("disabled",!1)):(this.elementContainer.hide(),this.elementContainer.trigger("hidden"),this.element.attr("disabled",!0)),this.elementContainer.trigger("change.formLogic");if(!($.browser.msie&&$.browser.version<7))return $(window).trigger("customLoad")},t}(),GoldenData.FormLogic=function(){function e(e){var r,i,s,o,u;this.triggers={},this.targets={};for(r in e){s=e[r],(o=this.targets)[r]||(o[r]=new t(r,s));for(i in s)(u=this.triggers)[i]||(u[i]=new n(i)),this.triggers[i].targets.push(this.targets[r])}}return e.prototype.run=function(){var e,t,n,r;n=this.triggers,r=[];for(e in n)t=n[e],r.push(t.run());return r},e}()})}.call(this),function(){$(function(){var e;return GoldenData.FormSymbol=Backbone.Model.extend({initialize:function(t,n){var r;this.url=n.url,this.set("shouldSave",n.shouldSave),r=new e({model:this});if(this.get("form_id"))return r.render()}}),e=Backbone.View.extend({initialize:function(){return this.form_id=this.model.get("form_id"),this.shouldSave=this.model.get("shouldSave")},el:"#config_panel",events:{"click .icons":"updateIcon","click .colors":"updateColor"},updateIcon:function(e){return this._updateModel(e,"icon")},updateColor:function(e){return this._updateModel(e,"background_color")},_updateModel:function(e,t){var n,r;return r=$(e.target),r.parents(".icons, .colors").find(".active").removeClass("active"),r.parent().addClass("active"),n={},n[t]=r.data("value"),this.model.set(n),this._updateUI(r.data("index"),t==="icon"),this.shouldSave?this.save():($(".template-info #template_symbol_icon").val(this.model.get("icon")),$(".template-info #template_symbol_background_color").val(this.model.get("background_color")))},_updateUI:function(e,t){var n;return n=this.model.get("icon"),n&&t&&$("#"+this.form_id).find(".symbol i").attr("class",""+n),e&&$("#"+this.form_id).find(".cover").attr("class","cover color-"+e),$("#"+this.form_id+"[data-symbol-type='templates']").css("background-color",""+this.model.get("background_color")),$("#"+this.form_id).data("symbol",this.model.toJSON())},save:function(){if(this.form_id)return this.model.unset("shouldSave"),this.model.save({symbol:this.model.toJSON()})},render:function(){var e,t,n,r;return t=(n=$("#"+this.form_id))!=null?n.data("symbol").icon:void 0,e=(r=$("#"+this.form_id))!=null?r.data("color-index"):void 0,this.$(".icons, .colors").find(".active").removeClass("active"),this.$(".icons i[data-value='"+t+"']").parent().addClass("active"),this.$(".colors .color[data-index='"+e+"']").parent().addClass("active")}})})}.call(this),function(){$(function(){return GoldenData.initFormSettingClickover=function(){return $(".form .setting").clickover({animation:!1,content:function(){return $("#config_panel_template").html()},onShown:function(){var e,t;return e=this.$element.parent(),e.data("symbol-setting")?this.$tip.find(".form-symbol-container").removeClass("hide"):this.$tip.find(".form-symbol-container").addClass("hide"),this.$element.hasClass("cover-setting")&&(t=$(".popover"),e.hasClass("right-column")?t.addClass("right-column-popover"):t.addClass("normal-popover")),$(".popover .config-panel").attr("id","config_panel"),$(".popover a.archive-action").attr("href",""+e.data("archive-url")),GoldenData.formSymbol=new GoldenData.FormSymbol(e.data("symbol"),{url:"/"+e.data("symbol-type")+"/"+e.data("symbol").form_id+"/symbol",shouldSave:e.data("should-save")}),this.$element.data("disable-grouping")?this.$tip.find(".group-action").remove():GoldenData.initFormGroupList(this.$tip,e.data("symbol").form_id,e.hasClass("right-column")||e.hasClass("second-right-column"))}})},$(document).on("click",".popover a.archive-action, #forms_section .group-tab",function(){var e;return e=$(".tab-content .tab-pane.active").data("group-id"),$.ajax({url:"/user_setting/update_active_group",type:"PUT",data:"group_id="+e})})
,$(document).on("page:load ready ajax:complete",GoldenData.initFormSettingClickover)})}.call(this),function(){$(function(){var e,t,n;return n=function(e,t){var n;return n=this.$(e),t?(n.slideDown(),n.find("input").attr("disabled",!1)):(n.slideUp(),n.find("input").attr("disabled",!0))},t=function(){function e(e){this.attrs=e}return e.prototype.validate=function(){var e,t;t=GoldenData.parseDate(this.attrs.start_date),t&&(t.setHours(this.attrs.start_hour),t.setMinutes(this.attrs.start_minute)),e=GoldenData.parseDate(this.attrs.end_date),e&&(e.setHours(this.attrs.end_hour),e.setMinutes(this.attrs.end_minute));if(t&&e&&t>e)return this.errorMessage="结束时间不能早于开始时间"},e.prototype.isValid=function(){return this.validate(),!this.errorMessage},e}(),e=Backbone.View.extend({el:"#form_setting form",events:{"change input:checkbox[data-role=close_rule]":"toggleCloseRuleConfig","change .close-rules input:not(:checkbox), input:text, select":"validateCloseRule","change input:radio[name='form_setting[entry_submit]']":"toggleSuccessConfig","change input:checkbox[name='form_setting[hide_login_and_signup]']":"onChangeLoginSignupConfig","click input:radio[name='form_setting[result_authority]']":"toggleResultAuthorityConfig","click .share-fields input:checkbox[value=entries]":"toggleFieldList","change input:checkbox[name='form_setting[send_entry_data]']":"toggleEntryPostConfig","change #form_setting_entry_post_url":"validateEntryPostUrl","click .add-time-period":"addTimePeriod","click .del-time-period":"deleteTimePeriod"},initialize:function(){return this.errors={},this.$('[name="form_setting[success_message]"]').charLimiter(),this._toggleHint(this.$('[name="form_setting[hide_login_and_signup]"]')),this.timePeriodsCount=this.$(".time-periods").data("initial-count")},_toggleConfig:function(e,t,n){var r;r=e.parents("label").next(".config");if(e.is(":checked")){r.slideDown();if(t)return t(r)}else{r.slideUp();if(n)return n(r)}},_updateSubmitBtn:function(e){return $.isEmptyObject(this.errors)?e.find("input:submit").attr("disabled",!1):e.find("input:submit").attr("disabled",!0)},_closeRuleValidate:function(e,t,n){n==null&&(n=!0);switch(e){case"ByTimeRangeCloseRule":return this._validateByTimeRangeCloseRule(t,n);case"ByEntriesCloseRule":return this._validateByEntriesCloseRule(t,n);case"DailyRepeatCloseRule":return this._validateDailyRepeatCloseRule(t,n)}},_validateByTimeRangeCloseRule:function(e,t){var n,r,i,s,o;n={},o=["start_date","start_hour","start_minute","end_date","end_hour","end_minute"];for(i=0,s=o.length;i<s;i++)r=o[i],n[r]=this.$("[name='form_setting[close_rules][ByTimeRangeCloseRule]["+r+"]']").val();return this._validateOnTimePeriod(n,"ByTimeRangeCloseRule",e,t)},_validateDailyRepeatCloseRule:function(e,t){var n,r,i,s,o,u;r=e.closest("li"),n={start_date:"today",end_date:"today"},u=["start_hour","start_minute","end_hour","end_minute"];for(s=0,o=u.length;s<o;s++)i=u[s],n[i]=r.find("[data-role="+i+"]").val();return this._validateOnTimePeriod(n,"DailyRepeatCloseRule",e,t)},_validateOnTimePeriod:function(e,n,r,i){var s;return s=new t(e),s.isValid()?delete this.errors[n]:(i&&GoldenData.showInlineErrorIfHave(r,s.errorMessage),this.errors[n]=s.errorMessage)},_validateByEntriesCloseRule:function(e,t){var n,r;return r=this.$("[name='form_setting[close_rules][ByEntriesCloseRule][limit]']").val(),r===""||GoldenData.isNumber(r)?delete this.errors.ByEntriesCloseRule:(n="数据量必须为数字",t&&GoldenData.showInlineErrorIfHave(e,n),this.errors.ByEntriesCloseRule=n)},_resetNumberFieldWhenInvalidOnHtml5:function(e){if(e.val()==="")return e.val("")},_clearErrorMessage:function(e){var t;return t=e.parents(".config"),t.find(".error").removeClass("error"),t.find(".error-message").remove()},_validateByEntryPostUrl:function(e){var t;return this._clearErrorMessage(e),GoldenData.validateURL(e.val())?delete this.errors.EntryPostUrl:(t="请输入合法的URL地址，例如：http://jinshuju.net/callback",GoldenData.showInlineErrorIfHave(e,t,!0),this.errors.EntryPostUrl=t)},toggleCloseRuleConfig:function(e){var t,n,r=this;return t=$(e.target),n=t.val(),this._toggleConfig(t,function(){return r._closeRuleValidate(n,t,!1)},function(){delete r.errors[n];if(n==="ByEntriesCloseRule")return r._resetNumberFieldWhenInvalidOnHtml5(r.$("[name='form_setting[close_rules][ByEntriesCloseRule][limit]']"))}),this._updateSubmitBtn(t.closest(".tab-pane"))},validateEntryPostUrl:function(e){var t;return t=$(e.target),this._validateByEntryPostUrl(t),this._updateSubmitBtn(t.closest(".tab-pane"))},validateCloseRule:function(e){var t,n,r;return n=$(e.target),this._clearErrorMessage(n),t=n.parents(".config"),r=t.prev().find("input:checkbox").val(),this._closeRuleValidate(r,n),this._updateSubmitBtn(n.closest(".tab-pane"))},toggleSuccessConfig:function(){var e;return e=this.$("input[name='form_setting[entry_submit]']:checked").val(),this.$(".config[data-value]").hide(),this.$(".config[data-value='"+e+"']").show()},_toggleHint:function(e){return e.is(":checked")?e.siblings(".hint").show():e.siblings(".hint").hide()},onChangeLoginSignupConfig:function(e){if(!$(e.target).parent().data("upgrade-modal"))return this._toggleHint($(e.target))},_updateDefaultShareScope:function(){if(this.$("input[name='form_setting[share_scope][]']:checked").length===0)return this.$("input[name='form_setting[share_scope][]']").attr("checked",!0),this.$("input[name='form_setting[share_fields][]']:checked").length===0&&this.$("#field_list .checkbox input[value^='field_']").attr("checked",!0),this.$("#field_list").slideDown()},toggleResultAuthorityConfig:function(e){var t;t=$(e.target);switch(t.val()){case"public":return n("#result_view_password",!1),this.$(".share-fields").next("hr").andSelf().slideDown(),this._updateDefaultShareScope();case"protected":return n("#result_view_password",!0),this.$(".share-fields").next("hr").andSelf().slideDown(),this._updateDefaultShareScope();default:return n("#result_view_password",!1),this.$(".share-fields").next("hr").andSelf().slideUp()}},toggleFieldList:function(e){var t;return t=$(e.target),this._toggleConfig(t,null,null)},toggleEntryPostConfig:function(e){var t,n=this;return t=$(e.target),t.parent().data("upgrade-modal")||this._toggleConfig(t,function(){return n._validateByEntryPostUrl($("#form_setting_entry_post_url"))},function(){return delete n.errors.EntryPostUrl}),this._updateSubmitBtn(t.closest(".tab-pane"))},addTimePeriod:function(e){var t;return t=_.template($("#time_period_edit_template").html()),$(e.target).closest("li").after(t({index:this.timePeriodsCount})),this.timePeriodsCount+=1,this.$(".time-periods li .del-time-period.hide").removeClass("hide")},deleteTimePeriod:function(e){e.stopPropagation(),$(e.target).closest("li").remove();if(this.$(".time-periods li").length===1)return this.$(".time-periods li .del-time-period").addClass("hide")}}),$(document).on("ajax:complete","#form_setting form",function(e,t,n){var r;if(n==="success")return r=$(this).find("[name='form_setting[target]']").val(),$("#"+r).html(t.responseText),showFlashNotification("设置保存成功")}),$(document).on("ajax:complete","#form_setting .form-status",function(e,t){var n;e.stopPropagation(),$(this).html(t.responseText),$("#form_setting .close-rules input:checked[data-role=close_rule]").attr("checked",!1).change(),n=$(this).find(".form-status-notification").data("message");if(n)return showFlashNotification(n.notice)}),$(document).on("ready page:load ajax:complete",function(){if($("#form_setting").length>0)return GoldenData.formSetting=new e,$("#tab_wording").find("textarea, input").charLimiter()}),$(document).on("click",".copy-target:enabled",function(){return $(this).select()}),GoldenData.initializeZclip=function(e){var t;if(!$(e).data("initializedZclip")&&$(e).not(".disabled").is(":visible"))return t=$($(e).data("href")),$(e).zclip({path:"/assets/ZeroClipboard.swf",copy:t.val(),afterCopy:function(){return showFlashNotification($(this).data("message"))}}),$(e).data("initializedZclip",!0)},$(document).on("ready page:load ajax:complete",function(){var e,t,n,r,i;r=$("a[data-role=copy]:visible:not(.disabled)"),i=[];for(t=0,n=r.length;t<n;t++)e=r[t],i.push(GoldenData.initializeZclip(e));return i}),$(document).on("shown","#form_publish a[href='#tab_embedded'], #form_setting a[href='#tab_results']",function(){var e,t,n,r,i;r=$("a[data-role=copy]:visible:not(.disabled)"),i=[];for(t=0,n=r.length;t<n;t++)e=r[t],i.push(GoldenData.initializeZclip(e));return i}),$(document).on("click","a[data-role=copy], .zclip",function(){if(!ZeroClipboard.clients[1].movie)return showFlashNotification("您的浏览器不支持直接复制，请手动复制！","error")}),$(document).on("click","#tab_success_submit",function(){if(!$("label[for=form_email_notification]").data("upgrade-modal"))return $.ajax({url:""+url("path")+"email_notification",type:"put",data:{email_notification:$("#form_email_notification").is(":checked")}})}),$(document).on("change","input[name='form_setting[submission_authority]']",function(){var e;e=$("input[name='form_setting[submission_authority]']:checked").val();switch(e){case"public":n("#submission_password",!1),n("#sub_authority_of_public",!0),$(".form-submission .enabled-on-public").show();if($("input[name='form_setting[sub_submission_authority]']:checked").length===0)return $("#form_setting_sub_submission_authority_public").attr("checked",!0);break;case"protected":return n("#submission_password",!0),n("#sub_authority_of_public",!1),$(".form-submission .enabled-on-public").show();default:n("#submission_password",!1),n("#sub_authority_of_public",!1),$(".form-submission .enabled-on-public").hide();if($(".form-submission .nav-tabs li.active").is(":hidden"))return $(".form-submission .nav-tabs a:visible:first").tab("show")}})})}.call(this),function(){$(function(){var e,t,n;return t=function(e){return $(".form-preview-with-theme .entry-container").height(e),$(".form-preview-with-theme .bg-image").height(e)},n=function(){return $("#theme_preview .entry-container, #theme_preview .bg-image").height("auto")},$(document).on("ready page:load pagechange",function(){return GoldenData.resetButtonPosition("#form_preview .buttons, #theme_preview .buttons, #rules_preview .buttons")}),$(window).on("scroll resize",function(){return GoldenData.resetButtonPosition("#form_preview .buttons, #theme_preview .buttons, #rules_preview .buttons")}),window.renderForm=function(e,n,r){var i;return r==null&&(r=null),GoldenData.form=new GoldenData.Form(e,{urlRoot:n,groupId:r}),$("#form_header .legend").click(),$(document).on("click",function(){return $(".add-field .available-fields").hide(),$(".add-field .toggle").show()}),$(document).on("click",".add-field .toggle",function(e){return $(".add-field .toggle").hide(),$(".add-field .available-fields").show(),e.stopPropagation()}),i=function(e){return!!$(e.target).not(".popover.gdguide")&&!$(e.target).parents().hasClass("gdguide-tooltip")},$("#form_design .new-field").click(function(e){var t;if(i(e))return t=$(this).data("upgrade-modal"),t?$("#"+t).modal("show"):GoldenData.form.add({_type:$(this).data("field-type")})}),$("#save_form").click(function(){return GoldenData.form.saveAll()}),$(document).on("click","#fields_editing .accordion-group .accordion-toggle",function(e){e.preventDefault();if(!$(this).parents(".accordion-heading").is(".active"))return GoldenData.accordionOpen($(this).attr("href"))}),$(document).on("click",".dropdown-menu [data-field-type]",function(){return GoldenData.fieldEditView.model.updateType($(this).data("field-type"))}),$("#preview_form:not(.disabled)").click(function(){var e;return e=GoldenData.form.toJSON(),e.fields=GoldenData.form.fieldList.toJSON(),$.ajax({url:"/forms/preview",type:"post",contentType:"application/json",data:JSON.stringify({form:e}),processData:!1,success:function(e,t,n){return $("#form_preview_container .bg-image").html(n.responseText),$("#form_preview_container .entry-container .zoom a:first").trigger("click"),GoldenData.initAddressSelector("#form_preview_container .entry-container"),GoldenData.initDatePicker("#form_preview_container .entry-container"),GoldenData.initialDropdownOtherChoice("form .field .controls select.with-other-choice",!1)}})}),GoldenData.initializeZoom("#form_preview_container .entry-container",{onZoomIn:function(e){return t(e),$("#form_preview_container").removeClass("hide")},onZoomOut:function(){return $("#form_preview_container").addClass("hide")}})},GoldenData.initializeZoom("#theme_preview .entry-container",{onZoomIn:function(e){return t(e),$("#theme_preview > .buttons").hide()},onZoomOut:function(){return n(),$("#theme_preview > .buttons").show()}}),$(document).on("ajax:complete","#add_form_manager_form",function(e,t,n){if(n==="success")return $("#form_managers").html(t.responseText)}),$(document).on("click",".archived_content  tbody  tr",function(e){if(!$(e.target).is("a"))return Turbolinks.visit($(this).data("url"))}),$(document).on("click",".reports_page .expand-filter",function(){var e;return e=$(".reports_page .filter-content .expandable"),$(this).find("i").toggle(),e.hasClass("hide")?e.slideDown().removeClass("hide"):e.slideUp().addClass("hide")}),$(document).on("click",".reports_page .filter-content .field-choices a",function(){return $(".reports_page .loading").removeClass("hide"),$(".reports_page .main_content").append('<div class="cover"></div>')}),e=function(e){var t;return t="<div class=\"each-choice selected-choice\">\n  <span class='choice-label'>"+e.parents("li").find(".field-label span:first").text()+"</span>\n  <span>:&nbsp;</span>\n  <span class='choice-value'>"+e.find(".choice-value").text()+"</span>\n  <a class='clear-filter' href='"+e.data("clear-url")+"'>X</a>\n</div>",$(".selected-filter .field-choices").html(t)},$(document).on("ajax:send",".reports_page .filter-content .expandable",function(t){var n;return n=$(t.target).parents(".each-choice"),$(".field-choices .selected").removeClass("selected"),n.find("a").addClass("selected"),e(n),$(".selected-filter .field-label").removeClass("hide"),$(".selected-filter .no-criteria-hint").addClass("hide")}),$(document).on("ajax:complete",".reports_page .filter-content",function(e,t,n){return $(".reports_page .main_content").html(t.responseText),$(".reports_page .loading").addClass("hide")}),$(document).on("click","#form_design #go_to_upgrade",function(e){return e.preventDefault(),GoldenData.form.saveAll(!1),Turbolinks.visit($(this).attr("href"))}),$(document).on("click","#clone_form[data-show-loading=true]",function(e){return $(".form-overview").append('<div class="cover"></div>'),$(".loading").show()}),$(document).on("click","#image_upload_label",function(e){if($.browser.mozilla)return $("#image_upload:not(:disabled)").click()}),$(document).on("ajax:complete",".form-info .form-status",function(e,t){var n;$(this).html(t.responseText),$(".form-info .close-rule").remove(),n=$(this).find(".form-status-notification").data("message");if(n)return showFlashNotification(n.notice)}),$(document).on("click",".validations label.checkbox input[type!=checkbox]",function(e){return e.preventDefault(),$(this).parent().find(":checkbox").attr("checked",!0).change()}),$(document).on("click",".archived_content .unarchive-action",function(){return $.cookie("active_archived_tab_id",$(".tab-content .tab-pane.active").attr("id"))}),$(document).on("click",".today-number a",function(){return $.cookie("entries_of_today",!0,{path:$(this).attr("href")})})})}.call(this),function(){$(function(){var e;return $(document).on("click",".guide-form a.gdguide-btn",function(){return GoldenData.gdguideWrapper.resetCookie()}),$(document).on("click",".gdoverlay, #entries_nav.gdguide, .gdguide-tooltip",function(){return!1}),e=function(){function e(e,t,n,r){var i,s=this;this.currentElement=e,this.nextElement=t,this.targetClickElememt=n,this.options=r,this.options=$.extend({delayTime:0,highlightElement:this.currentElement},this.options),this.targetClickElememt&&(i=this.targetClickElememt.match(/guide_done$/)?this.targetClickElememt:""+this.targetClickElememt+".guide-ready",$(document).on("click",i,function(){s.options.resetCookie&&GoldenData.gdguideWrapper.resetCookie(),$(e).popover("destroy");if(s.nextElement)return GoldenData.gdguideWrapper.findGuideByCurrentElment(s.nextElement).show(),delay(s.options.delayTime,function(){return $("html, body").animate({scrollTop:$(s.nextElement).offset().top-100},500),$(s.targetClickElememt).removeClass("guide-ready")})}))}return e.prototype.show=function(){var e;$(".gdoverlay").remove(),$("body").find(".gdoverlay").length===0&&$(this.currentElement).after("<div class='gdoverlay'>"),$(".gdguide").removeClass("gdguide"),$(this.options.highlightElement).addClass("gdguide"),this.options.beforeCallback&&this.options.beforeCallback(),e=$(this.currentElement).data("placement")!=null?$(this.currentElement).data("placement"):"top",$(this.currentElement).popover({trigger:"manual",animation:!1,html:!0,placement:e,container:this.currentElement,content:$(""+this.currentElement+"_gdguide").html()}),$(this.currentElement).popover("show"),$(this.targetClickElememt).focus(),$(""+this.currentElement+" .popover").addClass("gdguide-tooltip");if(this.options.afterCallback)return this.options.afterCallback()},e}(),GoldenData.GdguideWrapper=function(){function e(e){this.guides=e}return e.prototype.init=function(){return $.removeCookie("gdguide",{path:"/"}),this},e.prototype.resetCookie=function(){return $.cookie("gdguide",!0,{path:"/"})},e.prototype.start=function(){return this.guides[0].show(),_.each(this.guides,function(e){return $(e.targetClickElememt).addClass("guide-ready")})},e.prototype.findGuideByCurrentElment=function(e){return _.find(this.guides,function(t){return t.currentElement===e})},e}(),GoldenData.gdguideWrapper=new GoldenData.GdguideWrapper([new e("#form_header","#add_field_toggle","#form_header_gdguide_done"),new e("#add_field_toggle","#add_text_field","#add_field_toggle"),new e("#add_text_field","#edit_text_title","#add_text_field",{delayTime:500}),new e("#edit_text_title","#form_edit_button_container","#edit_text_title_gdguide_done"),new e("#form_edit_button_container","#publish_nav","#save_form",{resetCookie:!0,beforeCallback:function(){return $("#form_edit_button_container.gdguide #preview_form").addClass("disabled"),$("#form_edit_button_container.gdguide #preview_form").unbind("click")}}),new e("#publish_nav",null,"#publish_nav"),new e("#entries_nav","#template_center","#entries_nav_gdguide_done",{highlightElement:"#form_publish,.subnav a",afterCallback:function(){return $(".subnav a.gdguide").addClass("disabled")}}),new e("#template_center",null,"#template_center")])})}.call(this),!function(e){var t,n;GoldenData.LightboxOptions=function(){this.fileLoadingImage="/assets/images/loading.gif",this.fileCloseImage="/assets/images/close.png",this.resizeDuration=0,this.fadeDuration=0,this.labelImage="图片",this.labelOf="/"},GoldenData.Lightbox=function(t){this.options=t,this.album=[],this.currentImageIndex=void 0},GoldenData.Lightbox.prototype.enable=function(){var t=this;return e("body").on("click","a[rel^=lightbox], area[rel^=lightbox]",function(n){return t.start(e(n.currentTarget)),!1})},GoldenData.Lightbox.prototype.build=function(){var t,n=this;e("<div>",{id:"lightboxOverlay"}).after(e("<div/>",{id:"lightbox"}).append(e("<div/>",{"class":"lb-outerContainer"}).append(e("<div/>",{"class":"lb-container"}).append(e("<img/>",{"class":"lb-image"}),e("<div/>",{"class":"lb-nav"}).append(e("<a/>",{"class":"lb-prev"}),e("<a/>",{"class":"lb-next"})),e("<div/>",{"class":"lb-loader"}).append(e("<a/>",{"class":"lb-cancel"}).append(e("<img/>",{src:this.options.fileLoadingImage}))))),e("<div/>",{"class":"lb-dataContainer"}).append(e("<div/>",{"class":"lb-data"}).append(e("<div/>",{"class":"lb-details"}).append(e("<span/>",{"class":"lb-caption"}),e("<span/>",{"class":"lb-number"})),e("<div/>",{"class":"lb-closeContainer"}).append(e("<a/>",{"class":"lb-close"}).append(e("<img/>",{src:this.options.fileCloseImage}))))))).appendTo(e("body")),e("#lightboxOverlay").hide().on("click",function(e){return n.end(),!1}),t=e("#lightbox"),t.hide().on("click",function(t){return e(t.target).attr("id")==="lightbox"&&n.end(),!1}),t.find(".lb-outerContainer").on("click",function(t){return e(t.target).attr("id")==="lightbox"&&n.end(),!1}),t.find(".lb-prev").on("click",function(e){return n.changeImage(n.currentImageIndex-1),!1}),t.find(".lb-next").on("click",function(e){return n.changeImage(n.currentImageIndex+1),!1}),t.find(".lb-loader, .lb-close").on("click",function(e){return n.end(),!1})},GoldenData.Lightbox.prototype.start=function(t){var n,r,i,s,o,u,a,f,l;e(window).on("resize",this.sizeOverlay),e("select, object, embed").css({visibility:"hidden"}),e("#lightboxOverlay").width(e(document).width()).height(e(document).height()).fadeIn(this.options.fadeDuration),this.album=[],o=0;if(t.attr("rel")==="lightbox")this.album.push({link:t.attr("href"),title:t.attr("title")});else{l=e(t.prop("tagName")+'[rel="'+t.attr("rel")+'"]');for(s=0,f=l.length;s<f;s++)i=l[s],this.album.push({link:e(i).attr("href"),title:e(i).attr("title")}),e(i).attr("href")===t.attr("href")&&(o=s)}r=e(window),a=r.scrollTop()+r.height()/10,u=r.scrollLeft(),n=e("#lightbox"),n.css({top:a+"px",left:u+"px"}).fadeIn(this.options.fadeDuration),this.changeImage(o)},GoldenData.Lightbox.prototype.changeImage=function(t){var n,r,i,s=this;this.disableKeyboardNav(),r=e("#lightbox"),n=r.find(".lb-image"),this.sizeOverlay(),e("#lightboxOverlay").fadeIn(this.options.fadeDuration),e(".loader").fadeIn("slow"),r.find(".lb-image, .lb-nav, .lb-prev, .lb-next, .lb-dataContainer, .lb-numbers, .lb-caption").hide(),r.find(".lb-outerContainer").addClass("animating"),i=new Image,i.onload=function(){return n.attr("src",s.album[t].link),n.width=i.width,n.height=i.height,s.sizeContainer(i.width,i.height)},i.src=this.album[t].link,this.currentImageIndex=t},GoldenData.Lightbox.prototype.sizeOverlay=function(){return e("#lightboxOverlay").width(e(document).width()).height(e(document).height())},GoldenData.Lightbox.prototype.sizeContainer=function(t,n){var r,i,s,o,u,a,f,l,c,h,p,d=this;i=e("#lightbox"),s=i.find(".lb-outerContainer"),p=s.outerWidth(),h=s.outerHeight(),r=i.find(".lb-container"),f=parseInt(r.css("padding-top"),10),a=parseInt(r.css("padding-right"),10),o=parseInt(r.css("padding-bottom"),10),u=parseInt(r.css("padding-left"),10),c=t+u+a,l=n+f+o,c!==p&&l!==h?s.animate({width:c,height:l},this.options.resizeDuration,"swing"):c!==p?s.animate({width:c},this.options.resizeDuration,"swing"):l!==h&&s.animate({height:l},this.options.resizeDuration,"swing"),setTimeout(function(){i.find(".lb-dataContainer").width(c),i.find(".lb-prevLink").height(l),i.find(".lb-nextLink").height(l),d.showImage()},this.options.resizeDuration)},GoldenData.Lightbox.prototype.showImage=function(){var t;t=e("#lightbox"),t.find(".lb-loader").hide(),t.find(".lb-image").fadeIn("slow"),this.updateNav(),this.updateDetails(),this.preloadNeighboringImages(),this.enableKeyboardNav()},GoldenData.Lightbox.prototype.updateNav=function(){var t;t=e("#lightbox"),t.find(".lb-nav").show(),this.currentImageIndex>0&&t.find(".lb-prev").show(),this.currentImageIndex<this.album.length-1&&t.find(".lb-next").show()},GoldenData.Lightbox.prototype.updateDetails=function(){var t,n=this;t=e("#lightbox"),typeof this.album[this.currentImageIndex].title!="undefined"&&this.album[this.currentImageIndex].title!==""&&t.find(".lb-caption").html(this.album[this.currentImageIndex].title).fadeIn("fast"),t.find(".lb-outerContainer").removeClass("animating"),t.find(".lb-dataContainer").fadeIn(this.resizeDuration,function(){return n.sizeOverlay()})},GoldenData.Lightbox.prototype.preloadNeighboringImages=function(){var e,t;this.album.length>this.currentImageIndex+1&&(e=new Image,e.src=this.album[this.currentImageIndex+1].link),this.currentImageIndex>0&&(t=new Image,t.src=this.album[this.currentImageIndex-1].link)},GoldenData.Lightbox.prototype.enableKeyboardNav=function(){e(document).on("keyup.keyboard",e.proxy(this.keyboardAction,this))},GoldenData.Lightbox.prototype.disableKeyboardNav=function(){e(document).off(".keyboard")},GoldenData.Lightbox.prototype.keyboardAction=function(e){var t,n,r,i,s;t=27,n=37,r=39,s=e.keyCode,i=String.fromCharCode(s).toLowerCase(),s===t||i.match(/x|o|c/)?this.end():i==="p"||s===n?this.currentImageIndex!==0&&this.changeImage(this.currentImageIndex-1):(i==="n"||s===r)&&this.currentImageIndex!==this.album.length-1&&this.changeImage(this.currentImageIndex+1)},GoldenData.Lightbox.prototype.end=function(){return this.disableKeyboardNav(),e(window).off("resize",this.sizeOverlay),e("#lightbox").fadeOut(this.options.fadeDuration),e("#lightboxOverlay").fadeOut(this.options.fadeDuration),e("select, object, embed").css({visibility:"visible"})}}(window.jQuery),function(){$(document).on("page:load ready",function(){var e;return e=new GoldenData.LightboxOptions,GoldenData.lightbox=new GoldenData.Lightbox(e),GoldenData.lightbox.enable(),GoldenData.lightbox.build(),$(document).on("change",".choices.image-choices input",function(){return $(this).closest(".image-choices").children(".radio.active").removeClass("active"),$(this).closest("label").toggleClass("active")})})}.call(this),function(){$(function(){var e,t,n;return e=function(){function e(e){var t,n,r,i,s;n=e.sku,this.fieldApiCode=e.fieldApiCode,this.goodsValue=e.goodsValue,n==null&&(n={}),this.specification=(r=n.specification)!=null?r:{},this.price=parseFloat((i=n.price)!=null?i:e.price),t=(s=n.inventory)!=null?s:e.inventory,this.inventory=t!=null?parseInt(t):null}return e.prototype.priceDisplay=function(){return"&yen;"+this.price.toFixed(2)},e.prototype.inventoryDisplay=function(){return this.inventory==null?"":this.inventory>0?l("%inventory",{inventory:this.inventory}):l("%sold_out")},e}(),t=function(){function t(e,t){this.$el=e,this.shoppingCart=t,this.initialPriceDisplay=this.$el.find(".price").html(),this.initialInventoryDisplay=this.$el.find(".inventory").html(),this._initializeCurrentSpecification(),this._initializeGoodsSKUs(),this._bindOnDimensionChangeEvent(),this._bindOnIncreaseDecreaseClickEvent(),this._bindOnNumberChangeEvent(),this._bindShowHideEvent(),this.$el.is(":visible")&&this._updateCurrentGoodsSKU()}return t.prototype._addGoodsSKU=function(t,n,r,i,s){var o;return r==null&&(r=null),i==null&&(i=null),s==null&&(s=null),o=new e({fieldApiCode:t,goodsValue:n,sku:r,price:i,inventory:s}),this.goodsSKUs.push(o)},t.prototype._initializeGoodsSKUs=function(){var e,t,n,r,i,s,o,u,a;this.goodsSKUs=[],r=this.$el.find("input.number"),e=r.data("field-api-code"),t=r.data("goods-value"),o=this.$el.find(".dimensions").data("skus");if(!_.isEmpty(o))for(u=0,a=o.length;u<a;u++)s=o[u],this._addGoodsSKU(e,t,s);if(this.goodsSKUs.length===0)return i=r.data("goods-price"),n=r.data("inventory"),this._addGoodsSKU(e,t,null,i,n)},t.prototype._matchedGoodsSKU=function(){var e=this;return _.find(this.goodsSKUs,function(t){return _.isEqual(t.specification,e.currentSpecification)})},t.prototype._updateDecreaseIncreaseBtn=function(e){var t,n,r;return r=this._matchedGoodsSKU(),n=this.$el.find(".increase"),t=this.$el.find(".decrease"),r==null||r.inventory!=null&&r.inventory<=e?n.addClass("disabled"):n.removeClass("disabled"),e>0?t.removeClass("disabled"):t.addClass("disabled")},t.prototype._updatePriceAndInventoryDisplay=function(){var e;return e=this._matchedGoodsSKU(),e!=null?(this.$el.find(".price").html(e.priceDisplay()),this.$el.find(".inventory").html(e.inventoryDisplay())):(this.$el.find(".price").html(this.initialPriceDisplay),this.$el.find(".inventory").html(this.initialInventoryDisplay))},t.prototype._bindOnDimensionChangeEvent=function(){var e;return e=this,this.$el.find(".dimension-options input:radio").change(function(){var t;return e.$el.find("input.number").val(0).change(),$(this).closest(".dimension-options").find("label.selected").removeClass("selected"),t=$(this).closest(".dimension-options").find("input:radio:checked"),t.next("label").addClass("selected"),e.currentSpecification[t.data("dimension")]=t.val(),e._updatePriceAndInventoryDisplay(),e._updateDecreaseIncreaseBtn(0)}),this.$el.find(".dimension-options label").click(function(){return $("#"+$(this).attr("for")).attr("checked",!0).change()})},t.prototype._bindOnIncreaseDecreaseClickEvent=function(){var e;return e=this,this.$el.find(".number-container a").click(function(t){var n,r,i;if($(this).hasClass("disabled"))return!1;t.preventDefault(),r=e._matchedGoodsSKU();if(r!=null){i=e._currentNumber(),n=$(this).is(".increase")?i+1:i-1;if(n>=0)return r.inventory!=null&&n>r.inventory||e.$el.find("input.number").val(n).trigger("change"),e._updateDecreaseIncreaseBtn(n)}})},t.prototype._bindOnNumberChangeEvent=function(){var e=this;return this.$el.find("input.number").change(function(){return e._addCurrentGoodsSKUsToShoppingCart()})},t.prototype._bindShowHideEvent=function(){var e=this;return this.$el.on("shown",function(){return e._addCurrentGoodsSKUsToShoppingCart()}),this.$el.on("hidden",function(){return e._updateShoppingCart(0)})},t.prototype._addCurrentGoodsSKUsToShoppingCart=function(e){return e==null&&(e=!1),this._updateShoppingCart(this._currentNumber(),e)},t.prototype._updateShoppingCart=function(e,t){var n;n=this._matchedGoodsSKU();if(n!=null)return this.shoppingCart.updateGoodsSKUNumber(n,e,t),e>0?this.$el.addClass("active"):this.$el.removeClass("active")},t.prototype._updateCurrentGoodsSKU=function(){return this._addCurrentGoodsSKUsToShoppingCart(!0),this._updatePriceAndInventoryDisplay(),this._updateDecreaseIncreaseBtn(this._currentNumber())},t.prototype._initializeCurrentSpecification=function(){var e,t,n,r,i;this.currentSpecification={},r=this.$el.find(".dimensions input:radio:checked"),i=[];for(t=0,n=r.length;t<n;t++)e=r[t],i.push(this.currentSpecification[$(e).data("dimension")]=$(e).val());return i},t.prototype._currentNumber=function(){return parseInt(this.$el.find("input.number").val())},t}(),n=function(){function e(){this.goodsList=[],this.eventHandlers={}}return e.prototype.on=function(e,t){return this.eventHandlers[e]=t},e.prototype.trigger=function(e){var t;t=this.eventHandlers[e];if(t!=null&&typeof t=="function")return t(this)},e.prototype.updateGoodsSKUNumber=function(e,t,n){var r;n==null&&(n=!1),r=_.find(this.goodsList,function(t){return _.isEqual(t.goodsSKU,e)}),r!=null&&this.goodsList.splice(_.indexOf(this.goodsList,r),1),t>0&&this.goodsList.push({goodsSKU:e,number:t});if(!n)return this.trigger("change")},e.prototype.totalPrice=function(){var e,t,n,r,i;t=0,i=this.goodsList;for(n=0,r=i.length;n<r;n++)e=i[n],t+=e.goodsSKU.price*e.number;return t},e.prototype._findGoodsByFieldApiCode=function(e){return _.filter(this.goodsList,function(t){return t.goodsSKU.fieldApiCode===e})},e.prototype.clearOnField=function(e){var t,n,r,i;i=this._findGoodsByFieldApiCode(e);for(n=0,r=i.length;n<r;n++)t=i[n],this.goodsList.splice(this.goodsList.indexOf(t),1);return this.trigger("change")},e}(),GoldenData.initGoods=function(e){var r,i,s,o,u,a,f,c;o=new n,r=function(e){var t;return t=$(".field[data-api-code='"+e+"'] .control-label"),$.trim(t.clone().children().remove().end().text())},i=function(e){var t,n,r;return t=$(".field[data-api-code='"+e.fieldApiCode+"'] [data-goods-value='"+e.goodsValue+"']").parents("[data-role=goods]"),n=$.trim(t.find(".name").text()),r=t.find(".dimensions input:radio:checked").map(function(e,t){return $.trim($(t).next("label").text())}).get().join(l("%common_separator")),r===""?""+n+"：":""+n+"（"+r+"）："},u=function(e,t){var n,s,o,u,a,f,c,h,p,d,v;t==null&&(t="update");if(_.isEmpty(e.goodsList))$("#shopping_cart").empty();else{h=$("<div class='content'></div>"),v=e.goodsList;for(p=0,d=v.length;p<d;p++)u=v[p],f=u.goodsSKU,o=f.fieldApiCode,n=h.find(".field[data-api-code='"+o+"']"),n.length>0?(s=n,a=s.find("ul")):(s=$("<div class='field' data-api-code='"+o+"'></div>"),s.append("<div class='field-label'>"+r(o)+"：</div> "),a=$("<ul></ul>"),s.append(a),h.append(s)),c=$("<li></li>"),c.append("<span class='goods-name'>"+i(f)+"</span>"),c.append("<span class='price-number'>&yen;"+f.price.toFixed(2)+" &times; "+u.number+"</span>"),a.append(c);h.append("<div class='summary'>"+l("%total")+"&yen; <span class='total-price'>"+e.totalPrice().toFixed(2)+"</span></div>"),$("#shopping_cart").html(h)}if(!($.browser.msie&&$.browser.version<7))return $(window).trigger("customLoad")};if($(e).find("[data-role=goods]").length>0){o.on("change",u),c=$(e).find("[data-role=goods]");for(a=0,f=c.length;a<f;a++)s=c[a],new t($(s),o);return u(o,"init"),$(e).on("hidden",".field[data-api-code]",function(){return o.clearOnField($(this).data("api-code"))}),$(e).on("shown",".field[data-api-code]",function(){return $(this).find("[data-role=goods] input.number").trigger("change")})}},$(document).on("ready page:load pagechange",function(){return GoldenData.initGoods(document)}),$(document).on("ajax:complete","form:not(#submission_password_form)"
,function(){return GoldenData.initGoods(document)})})}.call(this),function(){$(function(){var e,t,n,r,i,s,o,u,a,f;return f=function(e){return $.trim(e.get("label"))===""},n=Backbone.Model.extend({defaults:{label:""},key:function(){var e;return(e=this.get("value"))!=null?e:this.get("label")},matchedByKey:function(e){return this.key()===e}}),r=Backbone.Collection.extend({model:n,valid:function(){return this.reject(f)}}),i=Backbone.View.extend({tagName:"li",events:{change:"update","click .del-option":"removeOption","click .add-option":"addOption"},render:function(){var e;return e=_.template($("#goods_dimension_option_template").html()),this.$el.html(e(this.model.toJSON())),this},update:function(e){return this.model.set({label:$(e.target).val()})},removeOption:function(e){return this.model.list.remove(this.model),this.model.list.length===1&&this.$el.siblings().find(".del-option").hide(),this.remove(),e.preventDefault()},addOption:function(){var e,t;return this.$(".del-option:hidden").show(),e=this.model.list.indexOf(this.model),t=new n,this.model.list.add(t,{at:e+1}),this.$el.after((new i({model:t})).render().$el)}}),e=Backbone.Model.extend({defaults:{label:""},initialize:function(){var e,t=this;this.dimensionOptions=new r,this.dimensionOptions.on("add",function(e,n){return e.list=n,e.on("change",function(){return t.trigger("change")})}),this.dimensionOptions.on("remove",function(){return t.trigger("change")}),_.each(this.get("options"),function(e){return t.dimensionOptions.add(e)}),e=[];while(this.dimensionOptions.length<3)e.push(this.dimensionOptions.add({}));return e},isEmpty:function(){return f(this)||this.dimensionOptions.all(f)},key:function(){var e;return(e=this.get("api_code"))!=null?e:this.get("label")},matchedByKey:function(e){return this.key()===e},toJSON:function(){var e;return e=_.clone(this.attributes),e.options=_.map(this.dimensionOptions.valid(),function(e){return e.toJSON()}),e}}),t=Backbone.Collection.extend({model:e,valid:function(){return this.reject(function(e){return e.isEmpty()})}}),s=Backbone.View.extend({events:{"change .dimension-label":"update"},render:function(e){var t;return this.setElement($("#goods_dimensions_modal .goods-dimensions .goods-dimension:nth-child("+(e+1)+")")),this.$(".dimension-label").val(this.model.get("label")),t=this.$("ul"),this.model.dimensionOptions.each(function(e){return t.append((new i({model:e})).render().$el)}),this},update:function(e){return this.model.set({label:$(e.target).val()})}}),o=Backbone.Model.extend({defaults:{price:0,inventory:null,specification:{}},validate:function(e,t){if(t.on==="price"&&!GoldenData.isNumber(e.price))return"价格必须为非空数字";if(t.on==="inventory"&&$.trim(e.inventory)!=="")if(!GoldenData.isNumber(e.inventory)||parseInt(e.inventory)<0)return"库存必须为非负数字或为空"},isMatched:function(e){var t,n;return _.isEmpty(e)?!0:(n=_.keys(this.get("specification")),t=_.keys(e),t.length>n.length?_.isEqual(this.get("specification"),_.pick(e,n)):t.length===n.length?e[n[0]]===this.get("specification")[n[0]]:_.isEqual(e,_.pick(this.get("specification"),t)))}}),u=Backbone.Collection.extend({model:o,initialize:function(){var e=this;return GoldenData.dimensions.each(function(t){return e.listenTo(t,"change",e._updateModels)})},_matchedSKU:function(e){var t;return t=this.find(function(t){return t.isMatched(e)}),t!=null?t:this.first()},_buildSKUsWithoutDimension:function(){return this._newSKUattrs({})},_buildSKUsWith1Dimension:function(e){var t,n,r,i,s,o,u;t=e.key(),r=[],u=e.dimensionOptions.valid();for(s=0,o=u.length;s<o;s++)n=u[s],i={},i[t]=n.key(),r.push(this._newSKUattrs(i));return r},_buildSKUsWith2Dimensions:function(e,t){var n,r,i,s,o,u,a,f,l,c,h,p;n=e.key(),i=t.key(),o=[],h=e.dimensionOptions.valid();for(a=0,l=h.length;a<l;a++){r=h[a],p=t.dimensionOptions.valid();for(f=0,c=p.length;f<c;f++)s=p[f],u={},u[n]=r.key(),u[i]=s.key(),o.push(this._newSKUattrs(u))}return o},_newSKUattrs:function(e){var t,n;return n=this._matchedSKU(e),t=n.pick("price","inventory"),t.specification=e,t},_updateModels:function(){var e,t;return e=GoldenData.dimensions.valid(),t=function(){switch(e.length){case 0:return this._buildSKUsWithoutDimension();case 1:return this._buildSKUsWith1Dimension(e[0]);case 2:return this._buildSKUsWith2Dimensions(e[0],e[1]);default:return this.models.map(function(e){return e.clone()})}}.call(this),this.reset(t)}}),a=Backbone.View.extend({tagName:"tr",events:{change:"update"},initialize:function(){return this.model.view=this},render:function(){var e,t,n,r,i,s;this.$el.empty(),i=this.model.get("specification");for(e in i)r=i[e],t=GoldenData.dimensions.find(function(t){return t.matchedByKey(e)}),n=t.dimensionOptions.find(function(e){return e.matchedByKey(r)}),this.$el.append("<td data-dim-key='"+e+"' data-option-key='"+r+"'>"+n.get("label")+"</td>");return this.$el.append("<td><input type='text' class='input-medium' name='price' value='"+this.model.get("price")+"'></td>"),this.$el.append("<td><input type='text' class='input-medium' name='inventory' value='"+((s=this.model.get("inventory"))!=null?s:"")+"'></td>"),this},update:function(e){var t,n;n=$(e.target),n.removeClass("error"),n.nextAll(".error-message").remove(),t={},t[n.attr("name")]=n.val(),this.model.set(t,{validate:!0,on:n.attr("name")});if(this.model.validationError)return GoldenData.showInlineErrorIfHave(n,this.model.validationError),$("#goods_dimensions_modal .btn-primary").addClass("disabled");if($("#goods_dimensions_modal .skus input.error").length===0)return $("#goods_dimensions_modal .btn-primary").removeClass("disabled")}}),GoldenData.GoodsDimensionsContainerView=Backbone.View.extend({el:"#goods_dimensions_modal .goods-dimensions",initialize:function(){return this.dimensions=new t(this.model.get("dimensions")),GoldenData.dimensions=this.dimensions},validDimensionArray:function(){return this.dimensions.valid()},validDimensions:function(){return new t(this.validDimensionArray())},render:function(){this.$("ul").empty(),this.$(".dimension-label").val("");while(this.dimensions.length<2)this.dimensions.add(new e);return this.dimensions.each(function(e,t){return(new s({model:e})).render(t)}),this}}),GoldenData.SKUsContainerView=Backbone.View.extend({el:"#goods_dimensions_modal .skus table",initialize:function(){return this.skus=new u(this.model.get("skus")),this.skus.isEmpty()&&this.skus.add(this.model.pick("price","inventory")),this.listenTo(this.skus,"reset",this.render)},_mergeCells:function(){var e,t,n,r,i,s;t=_.groupBy(this.$("tr td:first-child"),function(e){return $(e).data("option-key")}),n=1,s=[];for(r in t)i=t[r],n%2===0&&$(i).parent("tr").addClass("even"),e=$(i[0]),e.attr("rowspan",i.length),$(_.rest(i)).remove(),s.push(n+=1);return s},render:function(){var e,t,n,r,i,s,o=this;n=_.template($("#skus_table_template").html()),this.$el.html(n),t=this.$("thead th:first"),s=GoldenData.dimensions.valid();for(r=0,i=s.length;r<i;r++)e=s[r],t.before("<th>"+e.get("label")+"</th>");return this.skus.each(function(e){return o.$("tbody").append((new a({model:e})).render().$el)}),this._mergeCells(),this}})})}.call(this),function(){$(function(){var e,t,n;return t=Backbone.Model.extend({defaults:{name:"",price:0,position:1e4,value:"",description:"",inventory:null},updateInventory:function(){var e,t;return t=this.get("skus"),e=_.every(t,function(e){return GoldenData.isNumber(e.inventory)}),e?this.set({inventory:_.reduce(t,function(e,t){var n;return e+parseInt((n=t.inventory)!=null?n:0)},0)}):this.set({inventory:null})},priceRange:function(){var e,t,n,r;r=this.get("skus");if(r!=null)return n=_.map(r,function(e){return parseFloat(e.price)}),t=_.min(n),e=_.max(n),e>t?""+t.toFixed(2)+"起":t.toFixed(2)},validate:function(e,t){t||(t={});if(t.on==="name"&&$.trim(e.name)==="")return"商品名不能为空";if(t.on==="price"&&!GoldenData.isNumber(e.price))return"价格必须为非空数字";if(t.on==="inventory"&&$.trim(e.inventory)!=="")if(!GoldenData.isNumber(e.inventory)||parseInt(e.inventory)<0)return"库存必须为非负数字或为空"},toJSON:function(e){var t;return e==null&&(e=!0),t=_.clone(this.attributes),e&&$.trim(t.name)===""&&(t.name="商品名"),t}}),GoldenData.GoodsItemList=Backbone.Collection.extend({model:t}),n=Backbone.View.extend({className:"goods-item",events:{"change input,textarea":"update","click .del_item":"deleteItem","click .add_item":"addItem",click:"expand","click .update-goods-dimensions":"renderDimensionsView","click .clear-goods-dimensions":"clearGoodsDimensions"},templateId:"goods_item_edit_template",initialize:function(){var e=this;return this.listenTo(this.model,"change:skus",function(){return e.model.updateInventory(),e.render()})},_updateWhenSKUExists:function(){if(!_.isEmpty(this.model.get("skus"))){this.$("[data-field-key=price]").replaceWith("<span class='price'>"+this.model.priceRange()+"</span>");if(this.model.get("inventory")!=null)return this.$("[data-field-key=inventory]").replaceWith("<span class='inventory'>"+this.model.get("inventory")+"</span>")}},_updateWhenDimensionExists:function(){var e;if(!_.isEmpty(this.model.get("dimensions")))return e=this.$(".update-goods-dimensions").text("修改详细规格"),e.after(" | <a href='javascript:void(0)' class='clear-goods-dimensions'>清除规格</a>")},render:function(){var e;return e=_.template($("#"+this.templateId).html()),this.$el.html(e(this.model.toJSON(!1))).data("cid",this.model.cid),this._updateWhenSKUExists(),this._updateWhenDimensionExists(),this.$("input, textarea").placeholder(),this},expand:function(e){$(".goods-item.expand").removeClass("expand"),$(this.el).addClass("expand");if($(e.target).hasClass("goods-item"))return $(this.el).find("input.goods-name").focus()},deleteItem:function(e){return GoldenData.fieldEditView.model.goodsItemList.remove(this.model),this.remove(),e.preventDefault()},addItem:function(e){return e.preventDefault()},update:function(e){var t,n;return n=$(e.target),n.removeClass("error"),n.nextAll(".error-message").remove(),t={},t[n.data("field-key")]=n.val(),this.model.set(t,{validate:!0,on:n.data("field-key")}),n.hasClass("goods-name")&&this.$("span.goods-name").text(n.val()),GoldenData.showInlineErrorIfHave(n,this.model.validationError),e.stopPropagation()},renderDimensionsView:function(){var e,t,n=this;return $("#goods_dimensions_modal").find("#apply_to_all").attr("checked",!1),e=(new GoldenData.GoodsDimensionsContainerView({model:this.model})).render(),t=(new GoldenData.SKUsContainerView({model:this.model})).render(),$("#goods_dimensions_modal .btn-primary").removeClass("disabled").off("click").on("click",function(){var r,i,s;if(!$("#goods_dimensions_modal .btn-primary").hasClass("disabled"))return $("#goods_dimensions_modal").modal("hide"),r=e.validDimensions().toJSON(),s=_.isEmpty(r)?[]:t.skus.toJSON(),i=$("#goods_dimensions_modal").find("#apply_to_all").is(":checked"),i?GoldenData.fieldEditView.model.goodsItemList.each(function(e){return e.set({dimensions:r,skus:s})}):n.model.set({dimensions:r,skus:s})})},clearGoodsDimensions:function(){return this.model.set({dimensions:[],skus:[]})}}),GoldenData.GoodsImageSelectionEditView=Backbone.View.extend({initialize:function(){return this.listenTo(this.model.goodsItemList,"add",function(e){return this.render(e)})},events:{"add .goods-items":"updateGoodsItemList"},_initSortableItems:function(){var e=this;return this.sortableItems=this.$(".goods-items").sortable({items:"> .goods-item",handle:".sort",forcePlaceholderSize:!0,scroll:!0,placeholder:"sortable-placeholder",axis:"y",update:function(t,n){var r,i,s,o,u,a;i=$.map(e.$(".goods-item"),function(e){return $(e).data("cid")}),a=[];for(s=o=0,u=i.length;o<u;s=++o)r=i[s],e.model.goodsItemList.get(r).set({position:s+1},{silent:!0}),a.push(e.model.trigger("change"));return a}})},render:function(e){var t,r,i=this;return e==null&&(e=null),this.$el.html("<div class='goods-items clearfix'></div>"),t=_.sortBy(this.model.goodsItemList.toArray(),function(e){return e.get("position")}),_.each(t,function(e){return i.$(".goods-items").append((new n({model:e})).render().el)}),r=_.template($("#upload_goods_items_form_template").html()),this.$el.append(r(this.model.toJSON())),Modernizr.draganddrop||delay(1,function(){return $("#image_upload_label span").text("点此添加商品图片")}),this._initSortableItems(),this},updateGoodsItemList:function(e,t){if(!t.errors)return this.model.goodsItemList.add({name:removeFileSuffix(t.file_name),large_path:t.image_large_path,value:t.attachment_id},{silent:t.leftCount>0});if(t.leftCount===0)return this.model.trigger("change")}}),GoldenData.GoodsItemShowView=Backbone.View.extend({initialize:function(){return this.model.on("change",this.render,this),this.model.on("remove",this.remove,this)},templateId:"goods_item_show_template",_updateViewBySKUs:function(){var e,t,n,r,i,s,o,u,a,f;if(!_.isEmpty(this.model.get("skus"))){this.$(".price-inventory .price").html("&yen;"+this.model.priceRange()),t=$("<div class='dimensions'></div>"),a=this.model.get("dimensions");for(i=0,o=a.length;i<o;i++){e=a[i],t.append("<div class='dimension-label'>"+e.label+"：</div>"),r=$("<div class='dimension-options'></div>"),t.append(r),f=e.options;for(s=0,u=f.length;s<u;s++)n=f[s],r.append("<label>"+n.label+"</label>")}return this.$(".description").after(t)}},render:function(){var e,t,n;return e=this.model.toJSON(),t=this.model.get("price"),e.price=(GoldenData.isNumber(t)?parseFloat(t):0).toFixed(2),e.inventory===""&&(e.inventory=null),n=_.template($("#"+this.templateId).html()),$(this.el).html(n(e)),this.$el.addClass("goods-item"),this._updateViewBySKUs(),this}}),e=n.extend({className:"goods-item basic-goods-item",templateId:"basic_goods_item_edit_template",addItem:function(e){var n,r,i,s;return i=GoldenData.fieldEditView.model.goodsItemList,n=this.model.get("position"),i.each(function(e){var t;t=e.get("position");if(t>n)return e.set("position",t+1)}),s=this.model.get("position")+1,r=new t({position:s}),i.add(r),e.preventDefault()}}),GoldenData.BasicGoodsItemShowView=GoldenData.GoodsItemShowView.extend({templateId:"basic_goods_item_show_template"}),GoldenData.GoodsContainerEditView=GoldenData.GoodsImageSelectionEditView.extend({render:function(t){var n,r=this;return this.$el.html("<div class='goods-items clearfix'></div>"),n=_.sortBy(this.model.goodsItemList.toArray(),function(e){return e.get("position")}),_.each(n,function(n){var i;return i=new e({model:n}),r.$(".goods-items").append(i.render().el),delay(1,function(){if(n===t)return i.$el.click()})}),this._initSortableItems(),this}})})}.call(this),function(){$(function(){return GoldenData.ImageChoiceContainerEditView=Backbone.View.extend({className:"image-choice",events:{"change input,textarea":"update","mousedown input[type='radio']:checked":"uncheckChoice","keydown input[type='radio']:checked":"uncheckChoice","click .del_choice":"deleteChoice"},render:function(){var e,t,n;return t=GoldenData.fieldEditView.model.type.replace("Image",""),e="single",t==="CheckBox"&&(e="multiple"),n=_.template($("#"+e+"_image_choice_edit_template").html()),this.model.set("choiceType",e),$(this.el).html(n(this.model.toJSON())).data("cid",this.model.cid),this},deleteChoice:function(e){return GoldenData.fieldEditView.model.imageChoiceList.remove(this.model),e.preventDefault(),this.remove()},update:function(e){var t;return GoldenData.updateChoice(e,this.model),this.model.get("type")!=="ImageCheckBox"&&(t=this.model,_.each(GoldenData.fieldEditView.model.imageChoiceList.models,function(e){if(e.cid!==t.cid)return e.set("selected",!1)})),this.model.trigger("image.changed")},uncheckChoice:function(e){var t,n=this;return t=$(e.target),setTimeout(function(){return t.removeAttr("checked"),n.update(e)},150)}}),GoldenData.ImageSelectionContainerEditView=Backbone.View.extend({initialize:function(){return this.model.imageChoiceList.on("add",this.render,this),this.model.imageChoiceList.on("image.changed",this.update,this)},events:{"add .image-choices":"update_choice_list"},_initSortableFields:function(){var e=this;return this.sortableFields=this.$(".image-choices").sortable({items:"> .image-choice",handle:".sort",forcePlaceholderSize:!0,scroll:!0,placeholder:"sortable-placeholder",axis:"y",update:function(t,n){var r,i,s,o,u,a;i=$.map(e.$(".image-choice"),function(e){return $(e).data("cid")}),a=[];for(s=o=0,u=i.length;o<u;s=++o)r=i[s],e.model.imageChoiceList.get(r).set({position:s+1},{silent:!0}),a.push(e.model.trigger("change"));return a}})},render:function(){var e,t,n=this;return this.$el.html("<div class='image-choices clearfix' data-field-type='Image"+this.model.type+"'></div>"),e=_.sortBy(this.model.imageChoiceList.toArray(),function(e){return e.get("position")}),_.each(e,function(e){return n.$(".image-choices").append((new GoldenData.ImageChoiceContainerEditView({model:e})).render().el)}),t=_.template($("#upload_image_choices_form_template").html()),this.$el.append(t(this.model.toJSON())),Modernizr.draganddrop||delay(1,function(){return $("#image_upload_label span").text("点此添加图片选项")}),this._initSortableFields(),this},update:function(){return this.model.trigger("change")},update_choice_list:function(e,t){if(!t.errors)return this.model.imageChoiceList.add({name:removeFileSuffix(t.file_name),large_path:t.image_large_path,value:t.attachment_id,type:"Image"+this.model.type},{silent:t.leftCount>0});if(t.leftCount===0)return this.model.trigger("change")}})}),$("#image_upload").livequery(function(){var e,t,n,r;return r=function(){return $("#image_upload").attr("disabled",!0),$("#image_upload_label span.normal").hide(),$("#image_upload_label span.replace").show()},n=function(){return $("#image_upload").attr("disabled",!1),$("#image_upload_label span.normal").show(),$("#image_upload_label span.replace").hide()},t=$(this).parents("#image_choices, #goods_items").find(".message"),e=$(this).parents("form").prev(".image-choices, .goods-items"),$(this).fileupload({dataType:"json",dropZone:$(".image-upload-area"),dragover:function(e){return $(".image-upload-area").addClass("drag-over"),$(".drop-zone .drop-here").show(),$(".drop-zone .drag-here").hide()},add:function(i,s){var o;return r(),t.empty(),o=$("#"+$(this).data("progress-bar")),e.data("outstanding-image-count",s.originalFiles.length),s.originalFiles.length>5?(showStaticNotification(t,"每次请不要选择超过5张图片，可传多次。","warning"),n(),!1):$.each(s.files,function(r,i){var u,a,f,l;u=GoldenData.validateFile(i,5e6,/.*\.(jpg|jpeg|png|gif)$/gi);if(u.length!==0)return n(),$(".image-upload-area").removeClass("drag-over"),showStaticNotification(t,""+i.name+": "+u+"，请重选","error");f=(l=e.data("field-type"))!=null?l.replace("Image",""):void 0,a=_.template(o.html()),s.context=a({name:i.name,type:f}),s.filename=i.name,e.append(s.context),s.submit();if($.browser.msie)return $(".progress-bar[data-filename='"+s.filename+"'] .bar").progressbar()})},start:function(e){return $(".image-upload-area").removeClass("drag-over")},progress:function(e,t){var n;if(t.context)return n=parseInt(t.loaded/t.total*95,10),$(".progress-bar[data-filename='"+t.filename+"'] .bar").css("width",n+"%")},always:function(r,i){var s;return i.result.errors?(n(),i.result.errors.file?$.each(i.result.errors.file,function(e,n){var r;return r=n.indexOf("已超")<0?""+i.filename+"："+n+"，请重选":n,showStaticNotification(t,r,"error"),$(".progress-bar[data-filename='"+i.filename+"']").closest(".image-choice, .goods-item").remove()}):(showStaticNotification(t,i.result.errors,"error"),$(".progress-bar[data-filename='"+i.filename+"']").closest(".image-choice, .goods-item").remove())):($(".progress-bar[data-filename='"+i.filename+"'] .bar").css("width","100%"),$(".progress-bar[data-filename='"+i.filename+"']").parent(".progress-container").replaceWith("<img src='"+i.result.image_large_path+"'>")),s=e.data("outstanding-image-count"),e.data("outstanding-image-count",s-1),i.result.leftCount=s-1,e.trigger("add",i.result)}})})}.call(this),function(){$(function(){return $(document).on("click","#specify_header_row:not(.disabled)",function(){var e;return e=$("#form_header_row_number").val(),$(this).attr("href",""+$(this).attr("href")+"?header_row="+e)}),GoldenData.FieldsExample=function(){function e(e,t,n){var r;this.data=e,this.fieldSelector=t,this.exampleSelector=n,this.render(this.fieldSelector,this.exampleSelector,this.data),r=this,$(this.fieldSelector).find("select").on("change",function(){return r.render($(this).parent(),r.exampleSelector,r.data)})}return e.prototype.render=function(e,t,n){return $(e).each(function(){var e,r;return e=$(this).parent(),r=$(this).find("select").val(),e.find(t).html(n[r])})},e}(),$(document).on("drop dragover",function(e){return e.preventDefault()}),$(document).on("ready page:load",function(){var e,t;return $(".import-excel .progress .bar").progressbar({done:function(){return $(".import-excel .progress-bar").remove(),$(".import-excel .import-summary").show()}}),e=function(){return $(".drop-zone").removeClass("drag-over"),$(".drop-zone .drop-here").hide(),$(".drop-zone .drag-here").show()},$(".drop-zone").on("dragleave",e),t=function(e){return $(".introduction").hide(),$(".upload-failed .messages").empty(),$.each(e,function(e,t){return $(".upload-failed .messages").append("<li>"+t+"</li>")}),$(".upload-failed").show()},$("#form_import_from").fileupload({dataType:"json",dropZone:$(".drop-zone"),add:function(n,r){return $.each(r.files,function(n,i){var s;return s=GoldenData.validateFile(i,1e6,/.*\.(xls|xlsx)$/),s.length===0?r.submit():(e(),t(s))})},start:function(t){return e(),$("#uploaded_file_status").modal("show")},progress:function(e,t){var n;return n=parseInt(t.loaded/t.total*100,10),$("#uploaded_file_status .progress .bar").css("width",""+n+"%")},always:function(e,n){return n.result.error?setTimeout(function(){return $("#uploaded_file_status").modal("hide"),t(n.result.messages),$("#uploaded_file_status .progress .bar").css("width","0%")},1e3):setTimeout(function(){return Turbolinks.visit(n.result.redirect_url)},1e3)},dragover:function(e){return $(".drop-zone").addClass("drag-over"),$(".drop-zone .drop-here").show(),$(".drop-zone .drag-here").hide()}})}),$(document).on("change",".import-summary .error input",function(){return $(this).parents(".error").find(".icon-info-sign").hide(),$(this).parents(".error").removeClass("error")}),$(document).on("change keyup","#form_header_row_number",function(){var e;return e=parseInt($(this).val()),isNaN(e)||e>$(this).attr("max")||e<$(this).attr("min")?($("#specify_header_row").addClass("disabled"),$(this).addClass("error")):($("#specify_header_row").removeClass("disabled"),$(this).removeClass("error"))})})}.call(this),_.templateSettings={interpolate:/\{\{(.+?)\}\}/g},String.toLocaleString({en:{"%rechoose":"choose again","%delete":"delete","%warn_system_file":"not allowed to upload system files","%warn_exec_file":"not allowed to upload EXE/BAT format files","%warn_oversize":"file oversize","%choose_file":"choose file","%total":"total","%download":"download","%inventory":"INV. {{ inventory }}","%sold_out":"sold out","%common_separator":", "},"zh-CN":{"%rechoose":"重新选择","%delete":"刪除","%warn_system_file":"禁止上传系统文件","%warn_exec_file":"禁止上传EXE、BAT格式的文件","%warn_oversize":"文件过大","%choose_file":"选择文件","%total":"合计","%download":"下载","%inventory":"库存{{ inventory }}件","%sold_out":"已售空","%common_separator":"、"}});var l=function(e,t){return t==null&&(t={}),_.template(e.toLocaleString(),t)};String.locale="zh-CN",function(){window.GoldenData||(window.GoldenData={}),$(function(){var e;return e=function(e,t){var n;return n=$(e).parents(".controls").find("input.other-choice"),$(e).find(".other-choice-item").is(":selected")?(n.show(),t&&n.focus(),n.parents(".ui-input-text").show()):(n.hide(),n.parents(".ui-input-text").hide())},GoldenData.initialDropdownOtherChoice=function(t,n){return $(t).each(function(){return e(this,n)})},$(document).on("ready page:load pagechange",function(){var t,n=this;return t=function(e,t){return $(t).parents(".other-choice-area").find("input."+e)},$(document).on("click",".other-choice-input",function(){var e;e=t("other_choice",this);if(!e.is(":checked")){e.click();if(e.checkboxradio!=null)return $("input[type=radio], input[type=checkbox]").checkboxradio("refresh")}}),$(document).on("click","input.other_choice",function(){$(this).checkboxradio!=null&&$(this).checkboxradio("refresh");if($(this).is(":checked"))return t("other-choice-input",this).focus()}),GoldenData.initialDropdownOtherChoice(".controls select.with-other-choice",!1),$(document).on("change","form .field .controls select.with-other-choice",function(){return e($(this),!0)}),$(".entry form, #new_entry").on("submit",function(){return $(this).find("input.other_choice").each(function(){if(!$(this).is(":checked"))return t("other-choice-input",this).val("")}),$(this).find("option.other-choice-item").each(function(){if(!$(this).is(":selected"))return $(this).parents(".controls").find("input.other-choice").val("")})})})})}.call(this),function(){$(document).on("page:load ready",function(){return $("#change_per_page").clickover({animation:!1,container:"body",tip_id:"per_page_choices_container",content:function(){return $("#available_per_pages").html()},onShown:function(){return $("#per_page_choices_container a").click(function(){return $("#available_per_pages").click()})}})})}.call(this),function(){$(function(){return $(document).on("page:change ready",function(){var e,t,n,r;return e=((n=$(".text.email").position())!=null?n.left:void 0)+$(".text.email").width()+8,t=((r=$(".text.email").position())!=null?r.top:void 0)+2,$(".controls .warning").css("left",e),$(".controls .warning").css("top",t)}),$(document).on("click","#save_password, #change_email",function(){return $("#change_avatar").text("正在保存..."),$("#change_avatar").attr("disabled",!0),$(this).parents(".modal").find("form").submit()}),$(document).on("ajax:complete","#change_password_modal, #change_email_modal",function(e,t,n){return t.status===200?($(this).modal("hide"),Turbolinks.visit(t.responseText)):$(this).children(".modal-body").html(t.responseText)}),$(document).on("keydown","#change_password_modal",function(e){if(e.keyCode===13)return $(e.target).parents(".modal").find("form").submit()}),$(document).on("change",".complete-form #user_nick_name, .complete-form #email",function(){var e;return e=$(this).parents(".controls"),e.find(".error").remove(),e.find(".field_with_errors").removeClass("field_with_errors")}),$(document).on("click","#weibo, #qq_connect, #renren",function(){return $(".loading").show()})})}.call(this),function(){$(function(){return GoldenData.RatingShowView=Backbone.View.extend({render:function(){var e,t,n;n=this.model.get("rating_type"),e="",t=this.model.get("choices").length;while(t--)e+="<i class='icon-"+n+"-empty'></i>";return $(this.el).html(e),this}}),GoldenData.RatingEditView=Backbone.View.extend({events:{"change select":"update_max_ratings","click .rating-type":"update_rating_type","click .rating-type i":"trigger_parent"},render:function(){var e;return e=_.template($("#rating_template").html()),$(this.el).html(e(this.model.toJSON())),this},update_max_ratings:function(e){var t,n,r,i;t=parseInt($(e.target).val()),this.model.textChoiceList.reset(),i=[];for(n=r=1;1<=t?r<=t:r>=t;n=1<=t?++r:--r)i.push(this.model.textChoiceList.add({value:n}));return i},update_rating_type:function(e){var t,n,r;return r=$(e.target),n={},t=r.data("field-key"),n[t]=r.data("value"),this.model.set(n)},trigger_parent:function(e){return e.stopPropagation(),$(e.target).parent().click()}})})}.call(this),function(){var e,t;t=!0,e=function(e,t,n){return $(".rating-group i").removeClass("icon-heart-light icon-star-light"),$(".rating-group[data-field-id="+e+"] i").removeClass("icon-"+t+" icon-"+t+"-empty"),n===""?$(".rating-group[data-field-id="+e+"] i").addClass("icon-"+t+"-empty"):($(".rating-group[data-field-id="+e+"] i:lt("+n+")").addClass("icon-"+t),$(".rating-group[data-field-id="+e+"] i:gt("+(n-1)+")").addClass("icon-"+t+"-empty"))},$(document).on("click",".rating-group i",function(){var n,r,i;return t=!1,n=$(this).parents(".rating-group").data("field-id"),r=$(this).parents(".rating-group").data("rating-type"),i=$(this).data("value"),$("#entry_"+n).val($(this).data("value")),e(n,r,i)}),$(document).on("hover",".rating-group i",function(){var e,n,r;if(t&&!$.browser.msie)return e=$(this).parents(".rating-group").data("field-id"),n=$(this).parents(".rating-group").data("rating-type"),r=$(this).data("value"),$(".rating-group[data-field-id="+e+"] i:lt("+r+")").removeClass("icon-"+n+"-empty"),$(".rating-group[data-field-id="+e+"] i:lt("+r+")").addClass("icon-"+n+" icon-"+n+"-light"),$(".rating-group[data-field-id="+e+"] i:gt("+(r-1)+")").addClass("icon-"+n+"-empty"),$(".rating-group[data-field-id="+e+"] i:gt("+(r-1)+")").removeClass("icon-"+n+"-light")}),$(document).on("mouseleave",".rating-group",function(){var n;return n=$("#entry_"+$(this).data("field-id")).val(),e($(this).data("field-id"),$(this).data("rating-type"),n),t=!0})}.call(this),function(){$(function(){var e,t,n,r;return GoldenData.charts={},$(document).on("click",".btn.download",function(){var e;e=GoldenData.charts[$(this).data("field-key")];if(e)return e.exportChart()}),e=function(){function e(e,t,n){var r,i,s,o,u;n==null&&(n=null),this.options=this.defaultOptions(),this.options.chart.renderTo=e.field_id,this.options.chart.type=t,i=$("#"+e.field_id).width(),s=$("#"+e.field_id).next().height(),this.options.chart.height=Math.min(i,s),o={showInLegend:!1,name:"数量",data:[]},u=0,r=[],$.each(e.choices,function(e,t){return o.data.push({name:e,y:t}),r.push(e),u+=t}),this.options.series.push(o),this.options.plotOptions.series.dataLabels.formatter=function(){var e;return e=Highcharts.numberFormat(this.y*100/u,1),""+e+" %"},this.options.xAxis.categories=r,n&&n(this.options)}return e.prototype.defaultOptions=function(){return{chart:{marginTop:36,backgroundColor:GoldenData.isMobile?"transparent":"#FFFFFF"},colors:["#73a8c7","#da6d4e","#edb055","#b1c95b","#c3aad0"],credits:{enabled:!1},title:{text:null},xAxis:{labels:{style:{fontFamily:"verdana"},useHTML:!0,formatter:function(){return"<span>"+this.value+"</span>"}}},yAxis:{min:0,labels:{enabled:!1,style:{fontFamily:"verdana"}},title:{text:null},gridLineWidth:0},exporting:{enabled:!1},tooltip:{borderRadius:0,borderColor:"#333",shadow:!1,useHTML:!0},plotOptions:{bar:{shadow:!1},pie:{dataLabels:{distance:15,style:{fontFamily:"verdana"}}},series:{pointWidth:12,pointPadding:0,groupPadding:0,borderWidth:0,colorByPoint:!0,dataLabels:{enabled:!0}}},series:[]}},e.prototype.render=function(){return GoldenData.charts[this.options.chart.renderTo]=new Highcharts.Chart(this.options)},e}(),t=function(){function t(t){this.chart=(new e(t,"bar",function(e){return e.chart.height=$("#"+t.field_id).next().height()})).render()}return t}(),n=function(){function t(t){this.chart=(new e(t,"column",function(e){return e.xAxis.labels={align:"right",rotation:-45,useHTML:!1,style:{fontFamily:"verdana"}},{formatter:function(){return this.value.length>5?""+this.value.slice(0,5)+"...":this.value}}})).render()}return t}(),r=function(){function t(t){this.chart=(new e(t,"pie",function(e){return e.plotOptions.series.dataLabels.formatter=function(){var e;return e=this.point.name.length>15?""+this.point.name.slice(0,15)+"...":this.point.name,""+e+" "+Highcharts.numberFormat(this.percentage,1)+" %"}})).render()}return t}(),GoldenData.ReportChart=function(){function e(e,i){i==null&&(i="bar");switch(i){case"column":new n(e);break;case"pie":new r(e);break;default:new t(e)}}return e}(),GoldenData.ReportLineChart=function(){function e(e){this.options={chart:{renderTo:e.div_id,type:"line"},colors:["#73a8c7","#da6d4e","#edb055","#b1c95b","#c3aad0"],credits:{enabled:!1},title:{text:e.title},legend:{borderRadius:0},xAxis:{type:"datetime",dateTimeLabelFormats:{day:"%m-%d"}},yAxis:{title:{text:e.y_label},min:0,allowDecimals:!1},tooltip:{xDateFormat:"%Y-%m-%d",borderRadius:0,borderColor:"#333",shadow:!1,style:{lineHeight:"150%",padding:"8px"}},series:[{name:e.y_label,data:e.data,pointStart:e.start_date,pointInterval:864e5}]}}return e.prototype.render=function(){return Highcharts.setOptions({global:{useUTC:!1}}),new Highcharts.Chart(this.options)},e}(),GoldenData.AdminReportLineChart=function(){function e(e){this.options={chart:{renderTo:e.div_id},colors:["#73a8c7","#da6d4e","#edb055","#b1c95b","#c3aad0"],credits:{enabled:!1},title:{text:e.title},legend:{borderRadius:0},xAxis:{type:"datetime",dateTimeLabelFormats:{day:"%m-%d"}},yAxis:[{title:{text:e.y_label},min:0,allowDecimals:!1},{title:{text:e.daily_y_label},min:0,allowDecimals:!1,opposite:!0}],tooltip:{xDateFormat:"%Y-%m-%d",borderRadius:0,borderColor:"#333",shadow:!1,style:{padding:"8px"}},series:[{type:"line",name:e.y_label,data:e.increment_data,pointStart:e.start_date,pointInterval:864e5},{type:"column",name:e.daily_y_label,data:e.daily_data,pointStart:e.start_date,pointInterval:864e5,yAxis:1}],plotOptions:{series:{shadow:!1}}}}return e.prototype.render=function(){return Highcharts
.setOptions({global:{useUTC:!1}}),new Highcharts.Chart(this.options)},e}()})}.call(this),function(){$(function(){return $(document).on("click",".chart-type-toggle .btn",function(){var e;return e=$(this).parents(".field_content").find(".field_chart"),new GoldenData.ReportChart(e.data("report"),$(this).data("chart-type"))}),GoldenData.showReport=function(){if($("#reports_container:visible").length>0&&!$("#reports_container").data("charts-shown"))return $.each($(".field_chart[data-report]"),function(e,t){return new GoldenData.ReportChart($(t).data("report"))}),$("#reports_container").data("charts-shown",!0)},$(document).on("page:load ready",function(){return setTimeout(GoldenData.showReport,10)}),$(document).on("ajax:complete",".reports_page .filter-content",function(){return setTimeout(GoldenData.showReport,10)}),$(document).on("shown click",".results_nav, [data-role=navbar] a",function(){return setTimeout(GoldenData.showReport,10)})})}.call(this),function(){$(function(){var e;return $(document).on("click","#term",function(){return $("#registration_form input:submit").attr("disabled",$(this).attr("checked")!=="checked")}),e=function(){if($("#registration_form").length>0)return validateForm("#registration_form",{rules:{email:{required:!0,email:!0,remote:"/identities/check_email"},password:"required",password_confirmation:{equalTo:"#registration_form input[name='password']"}},messages:{email:{required:"不能为空",email:"格式不对",remote:"已被占用"},password:{required:"不能为空"},password_confirmation:"与密码不符"}})},e(),$(window).bind("page:change",e),$(document).on("click",".register .bottom a",function(){return $(".login").toggle(),$(".register.form").toggle(),$(this).toggleClass("arrow-right").toggleClass("arrow-left")}),$(document).on("click",".login .submit",function(){return $(".login form").submit()}),$(document).on("keydown",function(e){if(e.keyCode===13&&!!$("#login").val())return $(".login-panel form").submit()})})}.call(this),function(){$(document).on("page:load ready",function(){return $("#login_modal .invitation").on("click",function(){return $("#login_modal .alert").hide(),$(this).parents("section").addClass("hide"),$("."+$(this).data("for")).removeClass("hide")})})}.call(this),function(){var e;e=function(){function e(){}return e.prototype.setEntry=function(e){return this.title=encodeURIComponent(e.title||document.title),this.url=encodeURIComponent((e.url||document.location).replace("https://","http://")),this.pic=encodeURIComponent(e.pic||""),this.description=encodeURIComponent(e.description||"")},e.prototype.weibo=function(){var e,t,n;return e=1843447738,t="http://v.t.sina.com.cn/share/share.php?appkey="+e+"&title="+this.title+"&url="+this.url+"&pic="+this.pic,n="width=700,height=480, top="+(screen.height-430)/2+", left="+(screen.width-440)/2+", toolbar=no, menubar=no, scrollbars=no, location=yes, resizable=1, status=no",window.open(t,"分享到微博",n)},e.prototype.qqmb=function(){var e,t;return e="http://v.t.qq.com/share/share.php?title="+this.title+"&url="+this.url+"&pic="+this.pic,t="width=600, height=480, top="+(screen.height-700)/2+", left="+(screen.width-580)/2+", toolbar=no, menubar=no, scrollbars=no, location=yes, resizable=no, status=no",window.open(e,"转播到腾讯微博",t)},e.prototype.qzone=function(){var e,t,n;return e=""+this.title+" - "+this.description,t="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?title="+e+"&url="+this.url,n="width=700, height=600, top="+(screen.height-700)/2+", left="+(screen.width-600)/2+", toolbar=no, menubar=no, scrollbars=no, location=yes, resizable=no, status=no",window.open(t,"分享到QZONE",n)},e.prototype.renren=function(){var e,t;return e="http://widget.renren.com/dialog/share?title="+this.title+"&resourceUrl="+this.url+"&images="+this.pic+"&description="+this.description,t="width=700, height=600, top="+(screen.height-700)/2+", left="+(screen.width-600)/2+", toolbar=no, menubar=no, scrollbars=no, location=yes, resizable=no, status=no",window.open(e,"分享到人人",t)},e}(),window.shareIt=new e}.call(this),function(){$(function(){return $(document).on("click",".template .tab-pane li, #template_table tbody tr[data-url]",function(){return Turbolinks.visit($(this).data("url"))}),$(document).on("click","#template_design_next_step",function(){return GoldenData.form.template_design_save_and_next()}),$(window).on("scroll resize",function(){return GoldenData.resetButtonPosition(".template-action")}),$(document).on("click",".template .actions .title",function(){return $(this).parent().find("ul").toggleClass("hide")}),$(document).on("click","#select_form_modal .disabled a",function(e){return e.preventDefault()}),$(document).on("click","#select_form_modal .form:not(.disabled) a[data-show-loading=true]",function(e){return $("#select_form_modal").hide(),$(".template").append('<div class="cover"></div>'),$(".loading").show()})})}.call(this),function(){$(function(){var e,t,n,r,i,s,o;return $(document).on("click","#save_theme",function(){if($(this).data("need-upgrade"))return Turbolinks.visit("/upgrade");if(GoldenData.theme)return GoldenData.theme.saveAll()}),GoldenData.Theme=Backbone.Model.extend({idAttribute:"_id",initialize:function(){var t;return this.url="/forms/"+this.get("form_id")+"/theme",this.wallpaper=new s(this.get("wallpaper")),this.typography=new r(this.get("typography")),this.header=new e(this.get("header")),this.header.has_image=this.get("has_header_image?"),this.header.choose_image=this.header.has_image,this.canSave=!0,t=new n({model:this}),t.render()},_updateHeader:function(){return this.header.choose_image?this.header.set({text:""},{silent:!0}):this.set("attachment_id","")},saveAll:function(){return this.canSave?(this._updateHeader(),this.save({wallpaper:this.wallpaper.toJSON(),header:this.header.toJSON(),typography:this.typography.toJSON()},{success:function(e,t){return e.unset("attachment_id"),$("#save_theme").html($("#save_theme").data("enabled-with")),$("#save_theme").removeClass("disabled"),showFlashNotification("样式保存成功！")}})):showFlashNotification("很抱歉，您不能使用该样式","error")}}),s=Backbone.Model.extend({defaults:{image_file_name:"",color:"#FFF",texture_file_name:"",alignment:"",repeated:!1},backgroundImage:function(){return"/assets/wallpaper/images/"+this.get("image_file_name")},textureImage:function(){return"/assets/wallpaper/textures/"+this.get("texture_file_name")}}),o=Backbone.View.extend({el:"#wallpaper",events:{change:"updateModel","click [data-style-key='alignment']":"updateModel"},initialize:function(){return this.model.on("change",this.updatePreview,this)},render:function(){var e,t,n;return n=_.template($("#wallpaper_edit_template").html()),$(this.el).html(n(this.model.toJSON())),this.model.get("image_file_name")&&this.$(".front-layer .background-preview").html("<img src='"+this.model.backgroundImage()+"'>"),t=this.$(".back-layer .background-preview"),this.model.get("texture_file_name")?t.html("<img src='"+this.model.textureImage()+"'>"):t.css({backgroundColor:this.model.get("color")}),e=this.$(".back-layer .background-edit"),e.find(".change-color").colorPicker({colors:colors,onColorChange:function(e,n){return t.css({background:n})}})},updateModel:function(e){var t,n,r,i;r=$(e.target),n=r.data("style-key"),i=function(){switch(n){case"repeated":return r.is(":checked");case"alignment":return r.data("value");default:return r.val()}}(),t={},t[n]=i;if(n="color")t.texture_file_name=null;return this.model.set(t)},updatePreview:function(){var e;return $(".entry-container").css("background",this.model.get("color")),this.model.get("texture_file_name")&&this.model.hasChanged("texture_file_name")&&$(".entry-container").css("background","url("+this.model.textureImage()+") repeat"),this.model.get("image_file_name")?(e={},this.model.hasChanged("image_file_name")&&(e.backgroundImage="url("+this.model.backgroundImage()+")"),e.backgroundRepeat=this.model.get("repeated")?"repeat":"no-repeat",this.model.hasChanged("alignment")&&(e.backgroundPosition="top "+this.model.get("alignment")),$(".bg-image").css(e)):$(".bg-image").css({background:"none"})}}),e=Backbone.Model.extend({defaults:{text:"",color:"#000",background_color:"#FFF",show_image_on_mobile:!1},initialize:function(){return this.has_image=!1,this.choose_image=!1}}),t=Backbone.View.extend({el:"#header",events:{"change input:text, input:checkbox":"updateModel","change input:radio[name='header-type']":"updateHeaderSettings"},initialize:function(){return this.model.on("change",this.updatePreview,this)},render:function(){var e,t,n;return n=_.template($("#header_edit_template").html()),e=$.extend(this.model.toJSON(),{choose_image:this.model.choose_image,has_image:this.model.has_image}),$(this.el).html(n(e)),t=this.$(".background-preview"),t.css({backgroundColor:this.model.get("background_color")}),this.$(".header-img").data("need-upgrade")&&this.model.has_image&&showStaticNotification(".header-img-need-upgrade","使用个性图片请先<a href='/upgrade'>升级账户</a>","error"),this.$(".header-text .color-inline").css({backgroundColor:this.model.get("color")}),this.$(".change-color").colorPicker({colors:colors,onColorChange:function(e,n){return t.css({background:n})}})},updatePreview:function(){this.model.hasChanged("text")&&this.model.get("text")!==null&&$(".entry-container .banner .banner-text").html(""+this.model.get("text")),this.model.hasChanged("background_color")&&$(".entry-container .banner").css({backgroundColor:this.model.get("background_color")});if(this.model.hasChanged("color"))return $(".entry-container .banner").css({color:this.model.get("color")})},updateModel:function(e){var t,n,r,i;return r=$(e.target),n=r.data("style-key"),i=r.is(":checkbox")?r.is(":checked"):r.val(),t={},t[n]=i,this.model.set(t)},_appendSelectors:function(e){$(e).find(".banner-text").length===0&&$(e).append("<span class='banner-text banner-content hide'></span>");if($(e).find(".banner-img").length===0)return $(e).append("<div class='banner-img banner-content hide'></div>")},updateHeaderSettings:function(e){var t;return t=this.$("input:radio[name='header-type']:checked").val(),$(".header-settings").hide(),$(".header-"+t+"-settings").show(),this._appendSelectors(".banner"),$(".banner-content").hide(),$(".banner .banner-"+t).show(),this.model.choose_image=t==="img",$(e.target).attr("checked",!0)}}),r=Backbone.Model.extend({defaults:{form_header:{"font-size":"18px",color:"#333"},form_description:{"font-size":"14px",color:"#999"},section_label:{},section_notes:{},field_label:{"font-size":"12px",color:"#333"},field_notes:{"font-size":"12px",color:"#555"}}}),i=Backbone.View.extend({el:"#typography",events:{change:"updateModel","click button[data-style-key='font-weight']":"updateModel"},initialize:function(){return this.model.on("change",this.updatePreview,this)},render:function(){var e,t,n,r,i,s;n=_.template($("#typography_edit_template").html()),$(this.el).html(n(this.model.toJSON())),s=["form_header","form_description","field_label","field_notes","section_label","section_notes"];for(r=0,i=s.length;r<i;r++)e=s[r],t=this.model.get(e),this.$("."+e+" .font-size").val(t["font-size"]),this.$("."+e+" .change-color").css({backgroundColor:t.color});return this.$(".change-color").colorPicker({colors:colors})},updateModel:function(e){var t,n,r,i,s,o;return s=$(e.target),s.data("style-key")||(s=s.parents("[data-style-key]").first()),n=s.data("section"),r=_.clone(this.model.get(n)),i=s.data("style-key"),o=function(){switch(i){case"font-weight":return s.is(".active")?"normal":"bold";default:return s.val()}}(),r[i]=o,t={},t[n]=r,this.model.set(t)},updatePreview:function(){var e,t,n;t=$(".entry-container form legend"),this.model.hasChanged("form_header")&&t.css(this.model.get("form_header")),this.model.hasChanged("form_description")&&t.find("small").css(this.model.get("form_description")),e=$(".entry-container form .field:not(.section-break)"),this.model.hasChanged("field_label")&&e.find("label.control-label").css(this.model.get("field_label")),this.model.hasChanged("field_notes")&&e.find(".help-block").css(this.model.get("field_notes")),n=$(".entry-container form .section-break"),this.model.hasChanged("section_label")&&n.find("label").css(this.model.get("section_label"));if(this.model.hasChanged("section_notes"))return n.find(".help-block").css(this.model.get("section_notes"))}}),n=Backbone.View.extend({el:"#theme_editing",events:{"click .theme-templates .template":"selectTemplate","click #header #header_image_form .delete":"deleteHeaderImage"},initialize:function(){return this.wallpaperEditView=new o({model:this.model.wallpaper}),this.headerEditView=new t({model:this.model.header}),this.typographyEditView=new i({model:this.model.typography}),this.model.on("change",this.updatePreview,this)},updatePreview:function(){var e,t;if(this.model.hasChanged("temp_header_image"))return e=this.model.get("temp_header_image"),t=$(".header-img").data("need-upgrade"),e===""?(t=!1,$(".entry-container .banner .banner-img").empty(),$("#header_image_form .delete").hide(),$("#header_image_form .btn span").text("选择图片"),this.model.header.has_image=!1):($(".entry-container .banner .banner-img").html("<img src="+e+">"),$("#header_image_form .delete").show(),this.model.header.has_image=!0),this._toggleUpgrade("header-image",t,".header-img-need-upgrade","使用个性图片请先<a href='/upgrade'>升级账户</a>")},render:function(){return $(".colorPicker-palette").remove(),this.wallpaperEditView.render(),this.headerEditView.render(),this.typographyEditView.render()},_toggleUpgrade:function(e,t,n,r){var i;i=$("#save_theme"),i.data("need-upgrade",t);if(t)return showStaticNotification(n,r,"error"),i.data("original-disabled-with",i.data("disabled-with")),i.removeAttr("data-disabled-with").text("升级账户"),i.data(e,!0),this.model.canSave=!1;$(n).empty(),i.data(e,!1);if(!i.data("header-image")&&!i.data("template"))return i.attr("data-disabled-with",i.data("original-disabled-with")).text("保存样式"),this.model.canSave=!0},selectTemplate:function(e){var t,n,r;return t=$(e.target),t.data("template-id")||(t=t.parents("[data-template-id]")),this._toggleUpgrade("template",t.data("need-upgrade"),".theme-need-upgrade","使用付费用户专享模板请先<a href='/upgrade'>升级账户</a>"),n=t.data("template-id"),$(".theme-templates .template").removeClass("active"),t.addClass("active"),r=GoldenData.themeTemplates[n],this.model.wallpaper.set(r.wallpaper),this.model.header.set({color:r.header.color,background_color:r.header.background_color}),this.model.typography.set(r.typography),this.render()},deleteHeaderImage:function(){return this.model.set("temp_header_image",""),this.model.set("attachment_id","")}})})}.call(this),function(){$(function(){var e;return e=function(){var e,t;e=$("#theme_design .banner-img img");if(e.length!==0)return t=$("#theme_design .banner-img").width()/700,$(e).css("height",""+$(e).attr("height")*t+"px"),$(e).css("width",""+$(e).attr("width")*t+"px")},$(document).on("click","#theme_design .zoom",function(){return e()}),$(document).on("page:load ready",function(){return e()}),$("#header_image_form").livequery(function(){return $(this).fileupload({dataType:"json",dropZone:null,add:function(e,t){return $.each(t.files,function(e,n){var r;return r=GoldenData.validateFile(n,5e6,/.*\.(jpg|jpeg|png|gif)$/gi),r.length===0?t.submit():showStaticNotification(".header-img-notice",r.join("<br>"),"error")})},start:function(){return $("#header_image_form .btn").addClass("disabled"),$("#header_image_form .btn span").text("正在上传..."),$("#save_theme").addClass("disabled")},always:function(e,t){return t.result.errors?(showStaticNotification(".header-img-notice",t.result.errors.join("<br>"),"error"),$("#header_image_form .btn").removeClass("disabled"),$("#header_image_form .btn span").text("选择图片")):(GoldenData.theme.set({temp_header_image:t.result.image_url,attachment_id:t.result.attachment_id}),$("#header_image_form .btn").removeClass("disabled"),$("#header_image_form .btn span").text("更换图片"),$(".header-img-notice").empty()),$("#save_theme").removeClass("disabled")}})})})}.call(this),function(){$(function(){var e,t,n,r,i,s;return e=function(){return $(".pay-area form ").find("input.voucher_code").val("")},n=function(){return $(".pay-area form .month-choice label.selected input[name=calculated_price]").val()},r=function(){return"<input type='text' name='voucher' class='input-mini'>\n<a href='javascript:void(0)' id='use_voucher'>使用</a>"},t=function(e){return"<p class='message'>"+e.message+"\n  <a href='javascript:void(0)' class='change-cancel-voucher'>"+(e.status?"取消":" 换一个")+"</a>\n</p>"},i=function(e){return Math.round(e*10)/10},s=function(e){return $(".pay-area form .voucher input.voucher_code").val(e)},$(document).on("click",".pay-area form .month-choice label",function(){var e,s=this;return $(".pay-area form .month-choice label").removeClass("selected"),$(this).addClass("selected"),e=$(this).closest("form").find("input.voucher_code").val(),$(".voucher .voucher-container").html(r()),$.get($(this).data("voucher-url"),{voucher_code:e},function(e){var r;return $(".voucher .message-container").html(t(e)),r=parseFloat(n())-parseFloat(e.discount_money),$(s).closest("form").find("input[type=submit].pay").val("立即支付 "+i(r).toString()+" 元"),$(s).closest("form").find("input.voucher_code").val(e.voucher_code)})}),$(document).on("click",".pay-area .change-cancel-voucher",function(){return e(),$(".voucher .voucher-container").html(r()),$(this).closest("form").find("input[type=submit].pay").val("立即支付 "+n().toString()+" 元"),$(this).closest("form").find("input.voucher_code").val(""),$(".voucher .voucher-container").show(),$(".voucher .message-container").hide()}),$(document).on("click","#use_voucher",function(){var e,r,o=this;return e=$(".pay-area form .month-choice label.selected").data("voucher-url"),r=$(this).closest(".voucher").find("input[name=voucher]").val(),s(r),$.get(e,{voucher_code:r},function(e){var r;return $(".voucher .voucher-container").hide(),$(".voucher .message-container").show(),$(".voucher .message-container").html(t(e)),r=parseFloat(n())-parseFloat(e.discount_money),$(o).closest("form").find("input[type=submit].pay").val("立即支付 "+i(r).toString()+" 元")})}),$(document).on("click",".plan.plan-summary .selectable",function(e){var t;return $.cookie("active_plan")==="ent1"&&$(e.target).closest(".version.selectable").data("plan")==="pro1"?($("#degrade_to_pro1").modal("show"),!1):($(".plan.plan-summary .version").removeClass("selected"),$(this).addClass("selected"),t=$(this).data("plan"),$(".pay-area form").hide(),$(".pay-area form[data-plan="+t+"]").show(),$(".pay-area form .month-choice label").removeClass("selected"),$(".pay-area form[data-plan="+t+"] label:first-child").click(),$(".pay-area form[data-plan="+t+"] label:first-child input").attr("checked",!0))}),$(document).on("click",".pay-area form .submit .convert-plan",function(){return confirm("转为企业版后将无法降回当前版本，您确定要转换么?")})})}.call(this),function(){$(function(){return $(document).on("click","#notification_setting .pro1-feature",function(e){if($(this).data("need-upgrade"))return e.preventDefault(),$("#email_feature_warning_modal").modal("show")}),$(document).on("page:load ready",function(){var e;e=$("#notification_setting .entry.pro1-feature");if(e.data("need-upgrade"))return e.children("input[type=checkbox]").attr("checked",!1)})})}.call(this);var colors=["330000","331900","333300","193300","003300","003319","003333","001933","000033","190033","330033","330019","000000","660000","663300","666600","336600","006600","006633","006666","003366","000066","330066","660066","660033","202020","990000","994C00","999900","4C9900","009900","00994C","009999","004C99","000099","4C0099","990099","99004C","404040","CC0000","CC6600","CCCC00","66CC00","00CC00","00CC66","00CCCC","0066CC","0000CC","6600CC","CC00CC","CC0066","606060","FF0000","FF8000","FFFF00","80FF00","00FF00","00FF80","00FFFF","0080FF","0000FF","7F00FF","FF00FF","FF007F","808080","FF3333","FF9933","FFFF33","99FF33","33FF33","33FF99","33FFFF","3399FF","3333FF","9933FF","FF33FF","FF3399","A0A0A0","FF6666","FFB266","FFFF66","B2FF66","66FF66","66FFB2","66FFFF","66B2FF","6666FF","B266FF","FF66FF","FF66B2","C0C0C0","FF9999","FFCC99","FFFF99","CCFF99","99FF99","99FFCC","99FFFF","99CCFF","9999FF","CC99FF","FF99FF","FF99CC","E0E0E0","FFCCCC","FFE5CC","FFFFCC","E5FFCC","CCFFCC","CCFFE5","CCFFFF","CCE5FF","CCCCFF","E5CCFF","FFCCFF","FFCCE5","FFFFFF"];